import{o as t,a as e,d as s,c as i,U as n,b as a,e as o,f as h}from"./otp-input-Mahud_PJ.js";class l{constructor(t,e={}){if(this.el="string"==typeof t?document.querySelector(t):t,this.el){if(this.options={inputSelector:".ux-autocomplete__input, input",listSelector:".ux-autocomplete__list",itemSelector:".ux-autocomplete__item",items:[],minChars:1,debounce:300,fetchUrl:null,valueKey:"value",labelKey:"label",...e},this.el.dataset.items)try{this.options.items=JSON.parse(this.el.dataset.items)}catch(s){}this.input=this.el.querySelector(this.options.inputSelector),this.list=this.el.querySelector(this.options.listSelector),this._isOpen=!1,this._selectedIndex=-1,this._filteredItems=[],this._debounceTimeout=null,this._cleanupEscape=null,this._cleanupClickOutside=null,this._init()}}_init(){this.input&&(this.list||(this.list=document.createElement("ul"),this.list.className="ux-autocomplete__list",this.el.appendChild(this.list)),this.input.addEventListener("input",t=>this._handleInput(t)),this.input.addEventListener("keydown",t=>this._handleKeyDown(t)),this.input.addEventListener("focus",()=>this._handleFocus()),this._cleanupEscape=t(()=>{this._isOpen&&this.close()}),this._cleanupClickOutside=e(this.el,()=>{this._isOpen&&this.close()}))}_handleInput(t){const e=t.target.value;clearTimeout(this._debounceTimeout),this._debounceTimeout=setTimeout(()=>{this._search(e)},this.options.debounce)}async _search(t){if(t.length<this.options.minChars)return void this.close();let e=this.options.items;if(this.options.fetchUrl)try{const s=this.options.fetchUrl.replace("{query}",encodeURIComponent(t)),i=await fetch(s);e=await i.json()}catch(i){e=[]}this._filteredItems=e.filter(e=>this._getLabel(e).toLowerCase().includes(t.toLowerCase())),this._selectedIndex=-1,this._renderList(),this._filteredItems.length>0?this.open():this.close(),s(this.el,"ux:autocomplete:search",{query:t,results:this._filteredItems})}_renderList(){this.list.innerHTML=this._filteredItems.map((t,e)=>{const s=this._getLabel(t);return`<li class="ux-autocomplete__item${e===this._selectedIndex?" is-selected":""}" data-index="${e}">${s}</li>`}).join(""),this.list.querySelectorAll(".ux-autocomplete__item").forEach(t=>{t.addEventListener("click",()=>{const e=parseInt(t.dataset.index,10);this.select(this._filteredItems[e])})})}_handleKeyDown(t){if(this._isOpen)switch(t.key){case"ArrowDown":t.preventDefault(),this._selectedIndex=Math.min(this._selectedIndex+1,this._filteredItems.length-1),this._updateSelection();break;case"ArrowUp":t.preventDefault(),this._selectedIndex=Math.max(this._selectedIndex-1,0),this._updateSelection();break;case"Enter":t.preventDefault(),this._selectedIndex>=0&&this.select(this._filteredItems[this._selectedIndex]);break;case"Escape":this.close()}else"ArrowDown"===t.key&&this._filteredItems.length>0&&this.open()}_handleFocus(){this.input.value.length>=this.options.minChars&&this._filteredItems.length>0&&this.open()}_updateSelection(){const t=this.list.querySelectorAll(".ux-autocomplete__item");t.forEach((t,e)=>{t.classList.toggle("is-selected",e===this._selectedIndex)}),this._selectedIndex>=0&&t[this._selectedIndex]&&t[this._selectedIndex].scrollIntoView({block:"nearest"})}_getLabel(t){return"string"==typeof t?t:t[this.options.labelKey]||t.label||t.name||String(t)}_getValue(t){return"string"==typeof t?t:t[this.options.valueKey]||t.value||t.id||this._getLabel(t)}get isOpen(){return this._isOpen}get value(){return this.input?.value||""}set value(t){this.input&&(this.input.value=t)}open(){this._isOpen=!0,this.list.style.display="block",this.el.classList.add("is-open"),s(this.el,"ux:autocomplete:open")}close(){this._isOpen=!1,this.list.style.display="none",this.el.classList.remove("is-open"),this._selectedIndex=-1,s(this.el,"ux:autocomplete:close")}select(t){const e=this._getLabel(t),i=this._getValue(t);this.input.value=e,this.close(),s(this.el,"ux:autocomplete:select",{item:t,label:e,value:i})}setItems(t){this.options.items=t}clear(){this.input.value="",this._filteredItems=[],this.close(),s(this.el,"ux:autocomplete:clear")}destroy(){this._cleanupEscape&&this._cleanupEscape(),this._cleanupClickOutside&&this._cleanupClickOutside(),clearTimeout(this._debounceTimeout),delete this.el._uxComponent}}class r{constructor(t,e={}){if(this.el="string"==typeof t?document.querySelector(t):t,this.el){if(this.options={inputSelector:".ux-tag-input__input, .ux-tag-input__field, input",tagsContainerSelector:".ux-tag-input__tags",tagSelector:".ux-tag",removeSelector:".ux-tag__remove, [data-remove]",tagClass:"ux-tag--primary",tags:[],maxTags:1/0,allowDuplicates:!1,delimiter:",",placeholder:"Add tag...",...e},this.el.dataset.tags)try{this.options.tags=JSON.parse(this.el.dataset.tags)}catch(s){this.options.tags=this.el.dataset.tags.split(",").map(t=>t.trim()).filter(Boolean)}this.input=this.el.querySelector(this.options.inputSelector),this.tagsContainer=this.el.querySelector(this.options.tagsContainerSelector),this._tags=[...this.options.tags],this._init()}}_init(){this.input&&(this.tagsContainer||(this.tagsContainer=document.createElement("div"),this.tagsContainer.className="ux-tag-input__tags",this.input.parentNode.insertBefore(this.tagsContainer,this.input)),this.input.addEventListener("keydown",t=>this._handleKeyDown(t)),this.input.addEventListener("paste",t=>this._handlePaste(t)),this.el.addEventListener("click",t=>{t.target!==this.el&&t.target!==this.tagsContainer||this.input.focus()}),this._renderTags())}_handleKeyDown(t){const e=this.input.value.trim();"Enter"!==t.key&&","!==t.key||!e||(t.preventDefault(),this.addTag(e),this.input.value=""),"Backspace"===t.key&&!this.input.value&&this._tags.length>0&&this.removeTag(this._tags.length-1)}_handlePaste(t){t.preventDefault();(t.clipboardData||window.clipboardData).getData("text").split(this.options.delimiter).map(t=>t.trim()).filter(Boolean).forEach(t=>this.addTag(t))}_renderTags(){const t=this.options.tagClass||"ux-tag--primary";this.tagsContainer.innerHTML=this._tags.map((e,s)=>`\n      <span class="ux-tag ${t}" data-index="${s}">\n        <span class="ux-tag__text">${this._escapeHtml(e)}</span>\n        <button type="button" class="ux-tag__remove" data-index="${s}" aria-label="Remove ${this._escapeHtml(e)}">\n          <svg class="ux-tag__remove-icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <line x1="18" y1="6" x2="6" y2="18"></line>\n            <line x1="6" y1="6" x2="18" y2="18"></line>\n          </svg>\n        </button>\n      </span>\n    `).join(""),this.tagsContainer.querySelectorAll(".ux-tag__remove").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();const s=parseInt(t.dataset.index,10);this.removeTag(s)})})}_escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}get tags(){return[...this._tags]}get value(){return this._tags.join(this.options.delimiter)}addTag(t){return!!(t=String(t).trim())&&(this._tags.length>=this.options.maxTags?(s(this.el,"ux:tag-input:error",{error:"max",tag:t}),!1):!this.options.allowDuplicates&&this._tags.includes(t)?(s(this.el,"ux:tag-input:error",{error:"duplicate",tag:t}),!1):(this._tags.push(t),this._renderTags(),s(this.el,"ux:tag-input:add",{tag:t,tags:this.tags}),s(this.el,"ux:tag-input:change",{tags:this.tags}),!0))}removeTag(t){if(t<0||t>=this._tags.length)return!1;const e=this._tags[t];return this._tags.splice(t,1),this._renderTags(),s(this.el,"ux:tag-input:remove",{tag:e,index:t,tags:this.tags}),s(this.el,"ux:tag-input:change",{tags:this.tags}),!0}removeTagByValue(t){const e=this._tags.indexOf(t);return e>=0&&this.removeTag(e)}setTags(t){this._tags=t.map(t=>String(t).trim()).filter(Boolean),this._renderTags(),s(this.el,"ux:tag-input:change",{tags:this.tags})}clear(){this._tags=[],this.input.value="",this._renderTags(),s(this.el,"ux:tag-input:clear"),s(this.el,"ux:tag-input:change",{tags:[]})}focus(){this.input?.focus()}destroy(){delete this.el._uxComponent}}class u{constructor(t,e={}){this.el="string"==typeof t?document.querySelector(t):t,this.el&&(this.options={inputSelector:'input[type="file"]',dropzoneSelector:".ux-upload__dropzone",previewSelector:".ux-upload__preview",fileListSelector:".ux-upload__files",multiple:!1,accept:"*",maxSize:10485760,maxFiles:10,...e},void 0!==this.el.dataset.multiple&&(this.options.multiple="false"!==this.el.dataset.multiple),this.el.dataset.accept&&(this.options.accept=this.el.dataset.accept),this.el.dataset.maxSize&&(this.options.maxSize=parseInt(this.el.dataset.maxSize,10)),this.input=this.el.querySelector(this.options.inputSelector),this.dropzone=this.el.querySelector(this.options.dropzoneSelector)||this.el,this.preview=this.el.querySelector(this.options.previewSelector),this.fileList=this.el.querySelector(this.options.fileListSelector),this._files=[],this._isDragging=!1,this._init())}_init(){this.input||(this.input=document.createElement("input"),this.input.type="file",this.input.className="ux-upload__input",this.input.style.display="none",this.el.appendChild(this.input)),this.options.multiple&&(this.input.multiple=!0),"*"!==this.options.accept&&(this.input.accept=this.options.accept),this.input.addEventListener("change",t=>this._handleFileSelect(t)),this.dropzone.addEventListener("dragover",t=>this._handleDragOver(t)),this.dropzone.addEventListener("dragleave",t=>this._handleDragLeave(t)),this.dropzone.addEventListener("drop",t=>this._handleDrop(t)),this.dropzone.addEventListener("click",t=>{t.target.closest("button[data-remove]")||this.input.click()})}_handleFileSelect(t){const e=Array.from(t.target.files);this._addFiles(e),this.input.value=""}_handleDragOver(t){t.preventDefault(),t.stopPropagation(),this._isDragging||(this._isDragging=!0,this.dropzone.classList.add("is-dragging"),s(this.el,"ux:upload:dragenter"))}_handleDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dropzone.contains(t.relatedTarget)||(this._isDragging=!1,this.dropzone.classList.remove("is-dragging"),s(this.el,"ux:upload:dragleave"))}_handleDrop(t){t.preventDefault(),t.stopPropagation(),this._isDragging=!1,this.dropzone.classList.remove("is-dragging");const e=Array.from(t.dataTransfer.files);this._addFiles(e),s(this.el,"ux:upload:drop",{files:e})}_addFiles(t){const e=[],i=[];for(const s of t)this._files.length+e.length>=this.options.maxFiles?i.push({file:s,error:"maxFiles"}):s.size>this.options.maxSize?i.push({file:s,error:"maxSize"}):"*"===this.options.accept||this._matchesAccept(s)?e.push(s):i.push({file:s,error:"type"});i.length>0&&s(this.el,"ux:upload:error",{errors:i}),e.length>0&&(this.options.multiple?this._files=[...this._files,...e]:this._files=e.slice(0,1),this._renderFileList(),s(this.el,"ux:upload:change",{files:this.files}),s(this.el,"ux:upload:add",{files:e}))}_matchesAccept(t){return this.options.accept.split(",").map(t=>t.trim()).some(e=>e.startsWith(".")?t.name.toLowerCase().endsWith(e.toLowerCase()):e.endsWith("/*")?t.type.startsWith(e.replace("/*","/")):t.type===e)}_renderFileList(){this.fileList&&(this.fileList.innerHTML=this._files.map((t,e)=>`\n      <div class="ux-upload__file" data-index="${e}">\n        <span class="ux-upload__file-icon">${this._getFileIcon(t)}</span>\n        <span class="ux-upload__file-name">${this._escapeHtml(t.name)}</span>\n        <span class="ux-upload__file-size">${this._formatSize(t.size)}</span>\n        <button type="button" class="ux-upload__file-remove" data-remove data-index="${e}" aria-label="Remove file">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <line x1="18" y1="6" x2="6" y2="18"></line>\n            <line x1="6" y1="6" x2="18" y2="18"></line>\n          </svg>\n        </button>\n      </div>\n    `).join(""),this.fileList.querySelectorAll("[data-remove]").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();const s=parseInt(t.dataset.index,10);this.removeFile(s)})}))}_getFileIcon(t){return{image:"üñºÔ∏è",video:"üé¨",audio:"üéµ",application:"üìÑ",text:"üìù"}[t.type.split("/")[0]]||"üìé"}_formatSize(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB"}_escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}get files(){return[...this._files]}get hasFiles(){return this._files.length>0}removeFile(t){if(t<0||t>=this._files.length)return!1;const e=this._files[t];return this._files.splice(t,1),this._renderFileList(),s(this.el,"ux:upload:remove",{file:e,index:t}),s(this.el,"ux:upload:change",{files:this.files}),!0}clear(){this._files=[],this._renderFileList(),s(this.el,"ux:upload:clear"),s(this.el,"ux:upload:change",{files:[]})}open(){this.input.click()}destroy(){delete this.el._uxComponent}}class p{constructor(t,e={}){this.el="string"==typeof t?document.querySelector(t):t,this.el&&(this.options={min:0,max:999,step:1,value:1,...e},void 0!==this.el.dataset.min&&(this.options.min=parseInt(this.el.dataset.min,10)),void 0!==this.el.dataset.max&&(this.options.max=parseInt(this.el.dataset.max,10)),void 0!==this.el.dataset.step&&(this.options.step=parseInt(this.el.dataset.step,10)),void 0!==this.el.dataset.value&&(this.options.value=parseInt(this.el.dataset.value,10)),this._value=this.options.value,this._pressTimer=null,this._pressInterval=null,this._minusIcon='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>',this._plusIcon='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',this._init())}_init(){this.input=this.el.querySelector(".ux-quantity-stepper__input, input"),this.minusBtn=this.el.querySelector('.ux-quantity-stepper__btn--minus, [data-action="decrement"]'),this.plusBtn=this.el.querySelector('.ux-quantity-stepper__btn--plus, [data-action="increment"]'),this.minusBtn&&this.plusBtn&&this.input?(this.minusBtn.innerHTML.trim()||(this.minusBtn.innerHTML=this._minusIcon),this.plusBtn.innerHTML.trim()||(this.plusBtn.innerHTML=this._plusIcon),this.minusBtn.getAttribute("aria-label")||this.minusBtn.setAttribute("aria-label","Decrease quantity"),this.plusBtn.getAttribute("aria-label")||this.plusBtn.setAttribute("aria-label","Increase quantity")):this._createStructure(),this._updateDisplay(),this._bindEvents()}_createStructure(){const t=this.el.querySelector("input"),e=t?.value||this._value;this.el.innerHTML="",this.minusBtn=document.createElement("button"),this.minusBtn.type="button",this.minusBtn.className="ux-quantity-stepper__btn ux-quantity-stepper__btn--minus",this.minusBtn.innerHTML=this._minusIcon,this.minusBtn.setAttribute("aria-label","Decrease quantity"),this.input=document.createElement("input"),this.input.type="text",this.input.className="ux-quantity-stepper__input",this.input.inputMode="numeric",this.input.pattern="[0-9]*",this.input.value=e,this.plusBtn=document.createElement("button"),this.plusBtn.type="button",this.plusBtn.className="ux-quantity-stepper__btn ux-quantity-stepper__btn--plus",this.plusBtn.innerHTML=this._plusIcon,this.plusBtn.setAttribute("aria-label","Increase quantity"),this.el.appendChild(this.minusBtn),this.el.appendChild(this.input),this.el.appendChild(this.plusBtn)}_bindEvents(){this.minusBtn.addEventListener("click",()=>this.decrement()),this.plusBtn.addEventListener("click",()=>this.increment()),this.minusBtn.addEventListener("mousedown",t=>this._startLongPress(t,"decrement")),this.plusBtn.addEventListener("mousedown",t=>this._startLongPress(t,"increment")),this.minusBtn.addEventListener("touchstart",t=>this._startLongPress(t,"decrement"),{passive:!0}),this.plusBtn.addEventListener("touchstart",t=>this._startLongPress(t,"increment"),{passive:!0}),["mouseup","mouseleave","touchend","touchcancel"].forEach(t=>{this.minusBtn.addEventListener(t,()=>this._stopLongPress()),this.plusBtn.addEventListener(t,()=>this._stopLongPress())}),this.input.addEventListener("input",t=>this._onInput(t)),this.input.addEventListener("blur",t=>this._onBlur(t)),this.input.addEventListener("keydown",t=>this._onKeydown(t))}_startLongPress(t,e){t.preventDefault(),"increment"===e?this.increment():this.decrement(),this._pressTimer=setTimeout(()=>{this._pressInterval=setInterval(()=>{"increment"===e?this.increment():this.decrement()},100)},400)}_stopLongPress(){this._pressTimer&&(clearTimeout(this._pressTimer),this._pressTimer=null),this._pressInterval&&(clearInterval(this._pressInterval),this._pressInterval=null)}_onInput(t){}_onBlur(t){const e=parseInt(t.target.value,10);isNaN(e)?t.target.value=this._value:this.setValue(e)}_onKeydown(t){switch(t.key){case"ArrowUp":t.preventDefault(),this.increment();break;case"ArrowDown":t.preventDefault(),this.decrement();break;case"PageUp":t.preventDefault(),this.setValue(this._value+10*this.options.step);break;case"PageDown":t.preventDefault(),this.setValue(this._value-10*this.options.step);break;case"Home":t.preventDefault(),this.setValue(this.options.min);break;case"End":t.preventDefault(),this.setValue(this.options.max)}}_updateDisplay(){this.input.value=this._value;const t=this._value<=this.options.min,e=this._value>=this.options.max;this.minusBtn.disabled=t,this.plusBtn.disabled=e,this.minusBtn.classList.toggle("ux-quantity-stepper__btn--disabled",t),this.plusBtn.classList.toggle("ux-quantity-stepper__btn--disabled",e)}_emitChange(){s(this.el,"ux:quantity-stepper:change",{value:this._value,min:this.options.min,max:this.options.max}),s(this.el,"quantity-change",{value:this._value})}get value(){return this._value}set value(t){this.setValue(t)}get isAtMin(){return this._value<=this.options.min}get isAtMax(){return this._value>=this.options.max}increment(){this._value<this.options.max&&(this._value=Math.min(this._value+this.options.step,this.options.max),this._updateDisplay(),this._emitChange())}decrement(){this._value>this.options.min&&(this._value=Math.max(this._value-this.options.step,this.options.min),this._updateDisplay(),this._emitChange())}setValue(t){const e=parseInt(t,10);if(!isNaN(e)){const t=Math.max(this.options.min,Math.min(this.options.max,e));t!==this._value?(this._value=t,this._updateDisplay(),this._emitChange()):this._updateDisplay()}}setMin(t){this.options.min=t,this._value<t&&(this._value=t),this._updateDisplay()}setMax(t){this.options.max=t,this._value>t&&(this._value=t),this._updateDisplay()}destroy(){this._stopLongPress(),delete this.el._uxComponent}}class d{constructor(t,e={}){this.el="string"==typeof t?document.querySelector(t):t,this.el&&(this.options={width:null,height:200,lineWidth:2,lineColor:"#000000",backgroundColor:"transparent",showGuide:!0,showPlaceholder:!0,placeholderText:"Firme aqu√≠",exportFormat:"png",exportQuality:.92,disabled:!1,readonly:!1,maxHistory:20,...e},this.el.dataset.lineWidth&&(this.options.lineWidth=parseFloat(this.el.dataset.lineWidth)),this.el.dataset.lineColor&&(this.options.lineColor=this.el.dataset.lineColor),this.el.dataset.height&&(this.options.height=parseInt(this.el.dataset.height,10)),void 0!==this.el.dataset.showGuide&&(this.options.showGuide="false"!==this.el.dataset.showGuide),void 0!==this.el.dataset.disabled&&(this.options.disabled="true"===this.el.dataset.disabled),this._isDrawing=!1,this._hasSignature=!1,this._history=[],this._lastPoint=null,this._icons={pen:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>',undo:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg>',clear:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg>',download:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'},this._init())}_init(){this.canvas=this.el.querySelector("canvas, .ux-signature-pad__canvas"),this.container=this.el.querySelector(".ux-signature-pad__container"),this.canvas&&this.container||this._createStructure(),this.ctx=this.canvas.getContext("2d"),this._setupCanvas(),this._injectIcons(),this.options.disabled||this.options.readonly||this._bindEvents(),this._saveHistory(),this._updatePlaceholder()}_createStructure(){if(this.el.innerHTML="",this.el.classList.add("ux-signature-pad"),this.container=document.createElement("div"),this.container.className="ux-signature-pad__container",this.canvas=document.createElement("canvas"),this.canvas.className="ux-signature-pad__canvas",this.container.appendChild(this.canvas),this.options.showGuide){const t=document.createElement("div");t.className="ux-signature-pad__guide",this.container.appendChild(t)}if(this.options.showPlaceholder){const t=document.createElement("div");t.className="ux-signature-pad__placeholder",t.innerHTML=`<span>${this._icons.pen}</span><span>${this.options.placeholderText}</span>`,this.container.appendChild(t),this.placeholder=t}this.el.appendChild(this.container);const t=document.createElement("div");t.className="ux-signature-pad__actions",t.innerHTML=`\n      <button type="button" class="ux-signature-pad__btn" data-action="undo" disabled>\n        <span>${this._icons.undo}</span>\n        Deshacer\n      </button>\n      <button type="button" class="ux-signature-pad__btn" data-action="clear" disabled>\n        <span>${this._icons.clear}</span>\n        Limpiar\n      </button>\n    `,this.el.appendChild(t)}_injectIcons(){this.el.querySelector('[data-action="undo"], .ux-signature-pad__btn:first-child'),this.el.querySelector('[data-action="clear"]'),this.el.querySelector('[data-action="download"]'),this.el.querySelectorAll(".ux-signature-pad__btn").forEach(t=>{const e=t.dataset.action||t.textContent.toLowerCase().trim();e.includes("deshacer")||e.includes("undo")||"undo"===t.dataset.action?(t.addEventListener("click",()=>this.undo()),this.undoBtn=t):e.includes("limpiar")||e.includes("clear")||"clear"===t.dataset.action?(t.addEventListener("click",()=>this.clear()),this.clearBtn=t):(e.includes("descargar")||e.includes("download")||"download"===t.dataset.action)&&(t.addEventListener("click",()=>this.download()),this.downloadBtn=t)})}_setupCanvas(){const t=this.container.getBoundingClientRect(),e=window.devicePixelRatio||1,s=this.options.width||t.width||400,i=this.options.height||200;this.canvas.width=s*e,this.canvas.height=i*e,this.canvas.style.width=s+"px",this.canvas.style.height=i+"px",this.ctx.scale(e,e),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.strokeStyle=this.options.lineColor,this.ctx.lineWidth=this.options.lineWidth,"transparent"!==this.options.backgroundColor&&(this.ctx.fillStyle=this.options.backgroundColor,this.ctx.fillRect(0,0,s,i))}_bindEvents(){this.canvas.addEventListener("mousedown",t=>this._startDrawing(t)),this.canvas.addEventListener("mousemove",t=>this._draw(t)),this.canvas.addEventListener("mouseup",()=>this._stopDrawing()),this.canvas.addEventListener("mouseleave",()=>this._stopDrawing()),this.canvas.addEventListener("touchstart",t=>this._startDrawing(t),{passive:!1}),this.canvas.addEventListener("touchmove",t=>this._draw(t),{passive:!1}),this.canvas.addEventListener("touchend",()=>this._stopDrawing()),this.canvas.addEventListener("touchcancel",()=>this._stopDrawing()),window.addEventListener("resize",()=>this._handleResize())}_getPoint(t){const e=this.canvas.getBoundingClientRect();let s,i;return t.touches&&t.touches.length>0?(s=t.touches[0].clientX,i=t.touches[0].clientY):(s=t.clientX,i=t.clientY),{x:s-e.left,y:i-e.top}}_startDrawing(t){this.options.disabled||this.options.readonly||(t.preventDefault(),this._isDrawing=!0,this._lastPoint=this._getPoint(t),this.ctx.beginPath(),this.ctx.moveTo(this._lastPoint.x,this._lastPoint.y))}_draw(t){if(!this._isDrawing)return;t.preventDefault();const e=this._getPoint(t);this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this._lastPoint=e,this._hasSignature=!0}_stopDrawing(){this._isDrawing&&(this._isDrawing=!1,this.ctx.closePath(),this._saveHistory(),this._updateState())}_saveHistory(){this._history.length>=this.options.maxHistory&&this._history.shift(),this._history.push(this.canvas.toDataURL())}_handleResize(){const t=this.canvas.toDataURL();this._setupCanvas(),this._hasSignature&&this.loadSignature(t)}_updateState(){this._updatePlaceholder(),this._updateButtons(),this.el.classList.toggle("ux-signature-pad--has-signature",this._hasSignature),s(this.el,"ux:signature-pad:change",{hasSignature:this._hasSignature}),s(this.el,"signature:change",{hasSignature:this._hasSignature})}_updatePlaceholder(){const t=this.el.querySelector(".ux-signature-pad__placeholder");t&&(t.style.display=this._hasSignature?"none":"")}_updateButtons(){this.undoBtn&&(this.undoBtn.disabled=this._history.length<=1),this.clearBtn&&(this.clearBtn.disabled=!this._hasSignature),this.downloadBtn&&(this.downloadBtn.disabled=!this._hasSignature)}get hasSignature(){return this._hasSignature}get isDrawing(){return this._isDrawing}clear(){const t=window.devicePixelRatio||1,e=this.canvas.width/t,i=this.canvas.height/t;this.ctx.clearRect(0,0,e,i),"transparent"!==this.options.backgroundColor&&(this.ctx.fillStyle=this.options.backgroundColor,this.ctx.fillRect(0,0,e,i)),this._hasSignature=!1,this._history=[],this._saveHistory(),this._updateState(),s(this.el,"ux:signature-pad:clear"),s(this.el,"signature:clear")}undo(){if(this._history.length<=1)return;this._history.pop();const t=this._history[this._history.length-1],e=new Image;e.onload=()=>{const t=window.devicePixelRatio||1,s=this.canvas.width/t,i=this.canvas.height/t;this.ctx.clearRect(0,0,s,i),this.ctx.drawImage(e,0,0,s,i),this._checkEmpty(),this._updateState()},e.src=t}_checkEmpty(){const t=window.devicePixelRatio||1,e=this.canvas.width/t,s=this.canvas.height/t,i=this.ctx.getImageData(0,0,e*t,s*t).data;let n=!0;for(let a=0;a<i.length;a+=4)if(i[a+3]>0){n=!1;break}this._hasSignature=!n}getSignature(t){const e="jpeg"===(t=t||this.options.exportFormat)?"image/jpeg":"image/png";return this.canvas.toDataURL(e,this.options.exportQuality)}getSignatureBlob(t){return new Promise(e=>{const s="jpeg"===(t=t||this.options.exportFormat)?"image/jpeg":"image/png";this.canvas.toBlob(t=>e(t),s,this.options.exportQuality)})}download(t){t=t||`signature.${this.options.exportFormat}`;const e=this.getSignature(),i=document.createElement("a");i.download=t,i.href=e,i.click(),s(this.el,"ux:signature-pad:download",{filename:t}),s(this.el,"signature:download",{filename:t})}loadSignature(t){const e=new Image;e.onload=()=>{const t=window.devicePixelRatio||1,s=this.canvas.width/t,i=this.canvas.height/t;this.ctx.clearRect(0,0,s,i),this.ctx.drawImage(e,0,0,s,i),this._hasSignature=!0,this._saveHistory(),this._updateState()},e.src=t}isEmpty(){return!this._hasSignature}setLineColor(t){this.options.lineColor=t,this.ctx.strokeStyle=t}setLineWidth(t){this.options.lineWidth=t,this.ctx.lineWidth=t}setDisabled(t){this.options.disabled=t,this.el.classList.toggle("ux-signature-pad--disabled",t)}destroy(){window.removeEventListener("resize",this._handleResize),delete this.el._uxComponent}}const c=i({version:"2.0.0",classMap:{"ux-modal-backdrop":h,"ux-input-password":o,"ux-range":a,"ux-otp":n,"ux-autocomplete":l,"ux-tag-input":r,"ux-upload":u,"ux-quantity-stepper":p,"ux-signature-pad":d},attributeMap:{"data-ux-password":o,"data-ux-range":a,"data-ux-otp":n,"data-ux-autocomplete":l,"data-ux-tag-input":r,"data-ux-upload":u,"data-ux-quantity-stepper":p,"data-ux-signature-pad":d},manualMap:{modal:h,password:o,range:a,otp:n,otpinput:n,autocomplete:l,taginput:r,"tag-input":r,upload:u,quantitystepper:p,"quantity-stepper":p,signaturepad:d,"signature-pad":d},exportedComponents:{Modal:h,Password:o,Range:a,OtpInput:n,Autocomplete:l,TagInput:r,Upload:u,QuantityStepper:p,SignaturePad:d}});"undefined"!=typeof window&&(window.UX=c);export{c as UX,l as UXAutocomplete,h as UXModal,n as UXOtpInput,o as UXPassword,p as UXQuantityStepper,a as UXRange,d as UXSignaturePad,r as UXTagInput,u as UXUpload,c as default};
