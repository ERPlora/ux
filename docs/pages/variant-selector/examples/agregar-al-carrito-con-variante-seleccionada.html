<pre class="ux-code-block" data-lang="html" style="margin: 0;"><!-- Formulario completo de producto -->
<form hx-post="{% url 'cart_add' %}"
      hx-target="#cart-count"
      hx-swap="innerHTML"
      hx-indicator="#add-spinner">
  {% csrf_token %}
  <input type="hidden" name="product_id" value="{{ product.id }}">

  <!-- Selector de variante -->
  <div x-data="uxVariantSelector({
         label: 'Talla',
         options: {{ product.variants_json|safe }},
         selected: '{{ product.default_variant.sku }}'
       })">
    <input type="hidden" name="variant_sku" :value="selected">

    <div class="ux-variant-selector">
      <!-- ... opciones ... -->
    </div>
  </div>

  <!-- Cantidad -->
  <div class="ux-quantity-stepper" x-data="{ qty: 1 }">
    <button type="button" @click="qty = Math.max(1, qty - 1)">-</button>
    <input type="number" name="quantity" x-model="qty" min="1">
    <button type="button" @click="qty++">+</button>
  </div>

  <!-- Boton agregar -->
  <button type="submit" class="ux-button ux-color-primary" style="width: 100%;">
    <span class="ux-spinner ux-spinner--sm" id="add-spinner" style="display: none;"></span>
    Agregar al carrito
  </button>
</form></pre>
