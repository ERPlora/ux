<!-- Basic Employee Card -->
<section class="component-section">
  <h3>Tarjeta de Empleado Basica</h3>
  <p>Tarjeta vertical con avatar, nombre, cargo y departamento. Ideal para directorios de personal.</p>

  <ux-playground src="examples/employee-card/basica.html"></ux-playground>
</section>

<!-- With Contact Info -->
<section class="component-section">
  <h3>Con Informacion de Contacto</h3>
  <p>Tarjeta completa con email y telefono.</p>

  <ux-playground src="examples/employee-card/con-contacto.html"></ux-playground>
</section>

<!-- With Action Buttons -->
<section class="component-section">
  <h3>Con Botones de Accion</h3>
  <p>Tarjetas con acciones rapidas: llamar, enviar email, chat.</p>

  <ux-playground src="examples/employee-card/con-acciones.html"></ux-playground>
</section>

<!-- Compact Variant -->
<section class="component-section">
  <h3>Variante Compacta</h3>
  <p>Layout horizontal reducido, ideal para listas y menus.</p>

  <ux-playground src="examples/employee-card/compacta.html"></ux-playground>
</section>

<!-- Horizontal Layout -->
<section class="component-section">
  <h3>Layout Horizontal</h3>
  <p>Tarjeta horizontal con informacion completa y acciones al lado.</p>

  <ux-playground src="examples/employee-card/horizontal.html"></ux-playground>
</section>

<!-- Glass Variant -->
<section class="component-section">
  <h3>Variante Glass</h3>
  <p>Tarjetas con efecto glass morphism.</p>

  <ux-playground src="examples/employee-card/glass.html"></ux-playground>
</section>

<!-- Status Indicators -->
<section class="component-section">
  <h3>Indicadores de Estado</h3>
  <p>Estados disponibles para el indicador de presencia.</p>

  <ux-playground src="examples/employee-card/estados.html"></ux-playground>
</section>

<!-- Department Colors -->
<section class="component-section">
  <h3>Colores de Departamento</h3>
  <p>Clases predefinidas para los departamentos mas comunes.</p>

  <ux-playground src="examples/employee-card/departamentos.html"></ux-playground>
</section>

<!-- HTMX Integration -->
<section class="component-section">
  <h3>Integracion con HTMX</h3>
  <p>Employee cards funcionan con HTMX para cargar empleados del servidor y actualizar estados en tiempo real.</p>

  <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Directorio de Empleados con HTMX</h4>

  <pre class="ux-code-block" data-lang="html"><!-- Grid que carga empleados del servidor -->
<div id="employee-directory"
     class="ux-employee-grid ux-employee-grid--4"
     hx-get="/api/employees"
     hx-trigger="load"
     hx-swap="innerHTML"
     hx-indicator="#loading">
  <div class="ux-spinner htmx-indicator" id="loading"></div>
</div>

<!-- Busqueda en tiempo real -->
<input type="search"
       name="q"
       placeholder="Buscar empleados..."
       hx-get="/api/employees/search"
       hx-trigger="input changed delay:300ms"
       hx-target="#employee-directory">

<!-- Filtro por departamento -->
<div class="ux-segment">
  <button hx-get="/api/employees?dept=all" hx-target="#employee-directory">Todos</button>
  <button hx-get="/api/employees?dept=engineering" hx-target="#employee-directory">Engineering</button>
  <button hx-get="/api/employees?dept=design" hx-target="#employee-directory">Design</button>
</div></pre>

  <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Tarjeta Clickable con HTMX</h4>

  <pre class="ux-code-block" data-lang="html"><!-- Click para ver perfil completo -->
<div class="ux-employee-card ux-employee-card--clickable"
     hx-get="/api/employees/123/profile"
     hx-target="#employee-modal"
     hx-trigger="click">
  <div class="ux-employee-card__avatar">
    <img src="avatar.jpg" alt="...">
  </div>
  <div class="ux-employee-card__info">
    <h4 class="ux-employee-card__name">Maria Garcia</h4>
    <span class="ux-employee-card__title">Developer</span>
  </div>
</div>

<div id="employee-modal"></div></pre>

  <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Actualizar Estado en Tiempo Real</h4>

  <pre class="ux-code-block" data-lang="html"><!-- Polling para actualizar estado cada 30s -->
<div class="ux-employee-card"
     hx-get="/api/employees/123/status"
     hx-trigger="every 30s"
     hx-swap="outerHTML">
  <div class="ux-employee-card__avatar">
    <img src="avatar.jpg" alt="">
    <span class="ux-employee-card__status ux-employee-card__status--available"></span>
  </div>
  ...
</div>

<!-- O actualizar solo el indicador de estado -->
<span id="status-123"
      class="ux-employee-card__status ux-employee-card__status--available"
      hx-get="/api/employees/123/status-indicator"
      hx-trigger="every 30s"
      hx-swap="outerHTML"></span></pre>
</section>

<!-- Django Integration -->
<section class="component-section">
  <h3>HTMX + Django</h3>
  <p>Ejemplos de integracion con Django.</p>

  <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Template Django - Employee Card</h4>

  <pre class="ux-code-block" data-lang="html"><!-- templates/partials/employee_card.html -->
<div class="ux-employee-card {% if clickable %}ux-employee-card--clickable{% endif %}"
     {% if clickable %}
     hx-get="{% url 'employees:detail' employee.id %}"
     hx-target="#employee-modal"
     {% endif %}>

  <div class="ux-employee-card__avatar {% if not employee.avatar %}ux-employee-card__avatar--{{ employee.avatar_color }}{% endif %}">
    {% if employee.avatar %}
      <img src="{{ employee.avatar.url }}" alt="{{ employee.full_name }}">
    {% else %}
      {{ employee.initials }}
    {% endif %}
    <span class="ux-employee-card__status ux-employee-card__status--{{ employee.status }}"
          {% if employee.status == 'available' %}ux-employee-card__status--pulse{% endif %}></span>
  </div>

  <div class="ux-employee-card__info">
    <h4 class="ux-employee-card__name">{{ employee.full_name }}</h4>
    <span class="ux-employee-card__title">{{ employee.job_title }}</span>
    <span class="ux-employee-card__department ux-employee-card__department--{{ employee.department.slug }}">
      {{ employee.department.name }}
    </span>
  </div>

  {% if show_contact %}
  <div class="ux-employee-card__contact">
    <a href="mailto:{{ employee.email }}" class="ux-employee-card__contact-item">
      <svg>...</svg>
      <span class="ux-employee-card__contact-text">{{ employee.email }}</span>
    </a>
    {% if employee.phone %}
    <a href="tel:{{ employee.phone }}" class="ux-employee-card__contact-item">
      <svg>...</svg>
      <span class="ux-employee-card__contact-text">{{ employee.phone }}</span>
    </a>
    {% endif %}
  </div>
  {% endif %}

  {% if show_actions %}
  <div class="ux-employee-card__actions">
    <button class="ux-employee-card__action ux-employee-card__action--call"
            onclick="window.location.href='tel:{{ employee.phone }}'">
      <svg>...</svg>
    </button>
    <button class="ux-employee-card__action ux-employee-card__action--email"
            onclick="window.location.href='mailto:{{ employee.email }}'">
      <svg>...</svg>
    </button>
    <button class="ux-employee-card__action ux-employee-card__action--chat"
            hx-get="{% url 'chat:start' employee.id %}"
            hx-target="#chat-modal">
      <svg>...</svg>
    </button>
  </div>
  {% endif %}
</div></pre>

  <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Vista Django</h4>

  <pre class="ux-code-block" data-lang="python"># views.py
from django.shortcuts import render
from django.http import HttpResponse
from .models import Employee, Department

def employee_directory(request):
    department = request.GET.get('dept', 'all')
    search = request.GET.get('q', '')

    employees = Employee.objects.filter(is_active=True)

    if department and department != 'all':
        employees = employees.filter(department__slug=department)

    if search:
        employees = employees.filter(
            models.Q(first_name__icontains=search) |
            models.Q(last_name__icontains=search) |
            models.Q(job_title__icontains=search)
        )

    departments = Department.objects.all()

    # Si es peticion HTMX, devolver solo el grid
    if request.headers.get('HX-Request'):
        return render(request, 'partials/employee_grid.html', {
            'employees': employees
        })

    return render(request, 'employees/directory.html', {
        'employees': employees,
        'departments': departments
    })

def employee_status(request, employee_id):
    """Devuelve el indicador de estado actualizado"""
    employee = Employee.objects.get(id=employee_id)
    status_class = f"ux-employee-card__status--{employee.status}"
    pulse = " ux-employee-card__status--pulse" if employee.status == 'available' else ""

    return HttpResponse(
        f'<span id="status-{employee_id}" '
        f'class="ux-employee-card__status {status_class}{pulse}" '
        f'hx-get="/api/employees/{employee_id}/status-indicator" '
        f'hx-trigger="every 30s" hx-swap="outerHTML"></span>'
    )</pre>

  <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Modelo Django</h4>

  <pre class="ux-code-block" data-lang="python"># models.py
from django.db import models

class Department(models.Model):
    name = models.CharField(max_length=100)
    slug = models.SlugField(unique=True)

class Employee(models.Model):
    STATUS_CHOICES = [
        ('available', 'Available'),
        ('busy', 'Busy'),
        ('away', 'Away'),
        ('offline', 'Offline'),
        ('dnd', 'Do Not Disturb'),
    ]

    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    email = models.EmailField(unique=True)
    phone = models.CharField(max_length=20, blank=True)
    job_title = models.CharField(max_length=100)
    department = models.ForeignKey(Department, on_delete=models.CASCADE)
    avatar = models.ImageField(upload_to='avatars/', null=True, blank=True)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='offline')
    is_active = models.BooleanField(default=True)

    @property
    def full_name(self):
        return f"{self.first_name} {self.last_name}"

    @property
    def initials(self):
        return f"{self.first_name[0]}{self.last_name[0]}".upper()

    @property
    def avatar_color(self):
        colors = ['primary', 'secondary', 'tertiary', 'success', 'warning', 'danger']
        return colors[self.id % len(colors)]</pre>
</section>

<!-- CSS Classes Reference -->
<section class="component-section">
  <h3>Clases CSS</h3>
  <div style="background: var(--ux-surface); padding: var(--ux-space-lg); border-radius: var(--ux-border-radius-lg);">
    <pre class="ux-code-block" data-lang="css">/* Grid */
.ux-employee-grid              // Grid base
.ux-employee-grid--2/3/4/5     // Numero de columnas
.ux-employee-grid--compact     // Gap reducido

/* Lista (para compact cards) */
.ux-employee-list              // Lista vertical

/* Tarjeta */
.ux-employee-card              // Tarjeta base (vertical)
.ux-employee-card--compact     // Variante compacta horizontal
.ux-employee-card--horizontal  // Layout horizontal completo
.ux-employee-card--glass       // Variante glass
.ux-employee-card--clickable   // Con hover/cursor pointer
.ux-employee-card--selected    // Estado seleccionado

/* Avatar */
.ux-employee-card__avatar                    // Avatar base
.ux-employee-card__avatar--primary/secondary/tertiary/success/warning/danger  // Colores

/* Estado */
.ux-employee-card__status                    // Indicador base
.ux-employee-card__status--available/online  // Verde
.ux-employee-card__status--busy/dnd          // Rojo
.ux-employee-card__status--away/idle         // Amarillo
.ux-employee-card__status--offline           // Gris
.ux-employee-card__status--pulse             // Animacion

/* Info */
.ux-employee-card__info        // Contenedor
.ux-employee-card__name        // Nombre
.ux-employee-card__title       // Cargo

/* Departamento */
.ux-employee-card__department                // Badge base
.ux-employee-card__department--engineering   // Azul
.ux-employee-card__department--design        // Morado
.ux-employee-card__department--marketing     // Rosa
.ux-employee-card__department--sales         // Verde
.ux-employee-card__department--hr            // Ambar
.ux-employee-card__department--finance       // Cyan
.ux-employee-card__department--operations    // Gris
.ux-employee-card__department--support       // Teal

/* Contacto */
.ux-employee-card__contact      // Contenedor
.ux-employee-card__contact-item // Email/telefono link
.ux-employee-card__contact-text // Texto del contacto

/* Acciones */
.ux-employee-card__actions      // Contenedor
.ux-employee-card__action       // Boton circular
.ux-employee-card__action--call // Hover verde
.ux-employee-card__action--email // Hover azul
.ux-employee-card__action--chat // Hover gris</pre>
  </div>
</section>
