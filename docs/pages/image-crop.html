<style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); color: var(--ux-text); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { padding: var(--ux-space-xl); background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); border: 1px solid var(--ux-border-color); margin-bottom: var(--ux-space-md); }
    .ux-table { width: 100%; border-collapse: collapse; margin-bottom: var(--ux-space-lg); }
    .ux-table th, .ux-table td { padding: var(--ux-space-sm) var(--ux-space-md); text-align: left; border-bottom: 1px solid var(--ux-border-color); }
    .ux-table th { font-weight: 600; color: var(--ux-text); background: var(--ux-surface-secondary); }
    .ux-table td { color: var(--ux-text-secondary); }
    .ux-table code { background: var(--ux-surface-secondary); padding: 2px 6px; border-radius: 4px; font-size: var(--ux-font-size-sm); }
    .preview-row { display: flex; gap: var(--ux-space-lg); align-items: flex-start; flex-wrap: wrap; margin-top: var(--ux-space-md); }
  </style>

<nav class="ux-navbar">
    <div class="ux-navbar__content">
      <div class="ux-navbar__start">
        <a href="index.html" class="ux-button ux-button--clear ux-button--sm">Back</a>
      </div>
      <div class="ux-navbar__center">
        <h1 class="ux-navbar__title">Image Crop</h1>
      </div>
      <div class="ux-navbar__end"></div>
    </div>
  </nav>

  <main class="ux-padding">
    <!-- Introduction -->
    <div class="demo-section">
      <h3>Image Crop</h3>
      <p>A touch-friendly image cropping component with drag handles, aspect ratio constraints, zoom, and rotation controls. Export cropped images as blob or data URL.</p>
    </div>

    <!-- Basic Usage -->
    <div class="demo-section">
      <h3>Basic Usage</h3>
      <p>Click to select an image or drag and drop. Use the handles to adjust the crop area.</p>

      <ux-playground src="examples/image-crop/basic-usage.html"></ux-playground>
      <div class="demo-box" x-data="uxImageCrop()">
        <div class="ux-image-crop" :class="{ 'ux-image-crop--loading': isLoading, 'ux-image-crop--aspect-locked': isAspectLocked }">
          <!-- Canvas -->
          <div class="ux-image-crop__canvas"
               :class="{ 'ux-image-crop__canvas--empty': !imageLoaded }"
               x-ref="canvas"
               @click="!imageLoaded && $refs.fileInput.click()">

            <!-- Empty state -->
            <template x-if="!imageLoaded && !isLoading">
              <div class="ux-image-crop__placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <path d="m21 15-5-5L5 21"/>
                </svg>
                <p class="ux-image-crop__placeholder-text">Click to select an image</p>
                <p class="ux-image-crop__placeholder-hint">or drag and drop</p>
              </div>
            </template>

            <!-- Image -->
            <template x-if="imageLoaded">
              <div class="ux-image-crop__image-container">
                <img :src="imageSrc"
                     class="ux-image-crop__image"
                     :style="{ transform: imageTransform }"
                     alt="Image to crop">

                <!-- Crop Area -->
                <div class="ux-image-crop__crop-area"
                     x-ref="cropArea"
                     :style="cropAreaStyle"
                     @mousedown="onCropMouseDown($event)"
                     @touchstart.prevent="onCropTouchStart($event)">

                  <!-- Grid -->
                  <div class="ux-image-crop__grid ux-image-crop__grid--thirds" x-show="showGrid"></div>

                  <!-- Handles -->
                  <div class="ux-image-crop__handles">
                    <div class="ux-image-crop__handle ux-image-crop__handle--nw"
                         @mousedown.stop="onHandleMouseDown($event, 'nw')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'nw')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--ne"
                         @mousedown.stop="onHandleMouseDown($event, 'ne')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'ne')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--sw"
                         @mousedown.stop="onHandleMouseDown($event, 'sw')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'sw')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--se"
                         @mousedown.stop="onHandleMouseDown($event, 'se')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'se')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--n"
                         @mousedown.stop="onHandleMouseDown($event, 'n')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'n')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--s"
                         @mousedown.stop="onHandleMouseDown($event, 's')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 's')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--e"
                         @mousedown.stop="onHandleMouseDown($event, 'e')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'e')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--w"
                         @mousedown.stop="onHandleMouseDown($event, 'w')"
                         @touchstart.stop.prevent="onHandleTouchStart($event, 'w')"></div>
                  </div>
                </div>
              </div>
            </template>
          </div>

          <!-- Controls -->
          <div class="ux-image-crop__controls" x-show="imageLoaded">
            <!-- Aspect Ratio -->
            <div class="ux-image-crop__control-row">
              <span class="ux-image-crop__control-label">Ratio</span>
              <div class="ux-image-crop__aspect-buttons">
                <button class="ux-image-crop__aspect-btn"
                        :class="{ 'ux-image-crop__aspect-btn--active': !aspectRatio }"
                        @click="setAspectRatio(null, 'Free')">Free</button>
                <button class="ux-image-crop__aspect-btn"
                        :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 1 }"
                        @click="setAspectRatio(1, '1:1')">1:1</button>
                <button class="ux-image-crop__aspect-btn"
                        :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 4/3 }"
                        @click="setAspectRatio(4/3, '4:3')">4:3</button>
                <button class="ux-image-crop__aspect-btn"
                        :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 16/9 }"
                        @click="setAspectRatio(16/9, '16:9')">16:9</button>
              </div>
            </div>

            <!-- Zoom -->
            <div class="ux-image-crop__control-row">
              <span class="ux-image-crop__control-label">Zoom</span>
              <div class="ux-image-crop__control-group">
                <input type="range"
                       class="ux-image-crop__slider"
                       min="0.5" max="3" step="0.1"
                       x-model="zoom"
                       @input="setZoom(parseFloat($event.target.value))">
                <span class="ux-image-crop__control-value" x-text="zoomPercent + '%'"></span>
              </div>
            </div>

            <!-- Rotate -->
            <div class="ux-image-crop__control-row">
              <span class="ux-image-crop__control-label">Rotate</span>
              <div class="ux-image-crop__rotate-buttons">
                <button class="ux-image-crop__rotate-btn" @click="rotateLeft()" title="Rotate left">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2.5 2v6h6M2.66 15.57a10 10 0 1 0 .57-8.38"/>
                  </svg>
                </button>
                <button class="ux-image-crop__rotate-btn" @click="rotateRight()" title="Rotate right">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21.5 2v6h-6M21.34 15.57a10 10 0 1 1-.57-8.38"/>
                  </svg>
                </button>
              </div>
              <span class="ux-image-crop__control-value" x-text="rotation + 'deg'" style="margin-left: auto;"></span>
            </div>

            <!-- Actions -->
            <div class="ux-image-crop__actions">
              <button class="ux-button ux-button--outline ux-button--sm" @click="reset()">Reset</button>
              <button class="ux-button ux-button--outline ux-button--sm" @click="$refs.fileInput.click()">Change Image</button>
              <button class="ux-button ux-color-primary ux-button--sm"
                      @click="getCroppedImageDataURL().then(url => { window.open(url, '_blank') })">
                Export
              </button>
            </div>
          </div>

          <!-- Hidden file input -->
          <input type="file"
                 x-ref="fileInput"
                 accept="image/*"
                 style="display: none;"
                 @change="onFileSelect($event)">
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxImageCrop()"&gt;
  &lt;div class="ux-image-crop"&gt;
    &lt;div class="ux-image-crop__canvas" x-ref="canvas"&gt;
      &lt;!-- Image and crop area rendered here --&gt;
    &lt;/div&gt;

    &lt;div class="ux-image-crop__controls"&gt;
      &lt;!-- Aspect ratio, zoom, rotate controls --&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- With Preview -->
    <div class="demo-section">
      <h3>With Preview</h3>
      <p>Real-time preview of the cropped result.</p>

      <ux-playground src="examples/image-crop/with-preview.html"></ux-playground>
      <div class="demo-box" x-data="uxImageCrop({ showPreview: true })">
        <div style="display: grid; grid-template-columns: 1fr auto; gap: var(--ux-space-lg); align-items: start;">
          <!-- Cropper -->
          <div class="ux-image-crop" :class="{ 'ux-image-crop--loading': isLoading, 'ux-image-crop--aspect-locked': isAspectLocked }">
            <div class="ux-image-crop__canvas"
                 :class="{ 'ux-image-crop__canvas--empty': !imageLoaded }"
                 x-ref="canvas"
                 @click="!imageLoaded && $refs.fileInput.click()">

              <template x-if="!imageLoaded && !isLoading">
                <div class="ux-image-crop__placeholder">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <path d="m21 15-5-5L5 21"/>
                  </svg>
                  <p class="ux-image-crop__placeholder-text">Select an image</p>
                </div>
              </template>

              <template x-if="imageLoaded">
                <div class="ux-image-crop__image-container">
                  <img :src="imageSrc"
                       class="ux-image-crop__image"
                       :style="{ transform: imageTransform }"
                       alt="Image to crop">

                  <div class="ux-image-crop__crop-area"
                       x-ref="cropArea"
                       :style="cropAreaStyle"
                       @mousedown="onCropMouseDown($event)"
                       @touchstart.prevent="onCropTouchStart($event)">
                    <div class="ux-image-crop__grid ux-image-crop__grid--thirds"></div>
                    <div class="ux-image-crop__handles">
                      <div class="ux-image-crop__handle ux-image-crop__handle--nw" @mousedown.stop="onHandleMouseDown($event, 'nw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'nw')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--ne" @mousedown.stop="onHandleMouseDown($event, 'ne')" @touchstart.stop.prevent="onHandleTouchStart($event, 'ne')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--sw" @mousedown.stop="onHandleMouseDown($event, 'sw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'sw')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--se" @mousedown.stop="onHandleMouseDown($event, 'se')" @touchstart.stop.prevent="onHandleTouchStart($event, 'se')"></div>
                    </div>
                  </div>
                </div>
              </template>
            </div>

            <div class="ux-image-crop__controls" x-show="imageLoaded">
              <div class="ux-image-crop__control-row">
                <span class="ux-image-crop__control-label">Ratio</span>
                <div class="ux-image-crop__aspect-buttons">
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 1 }" @click="setAspectRatio(1, '1:1')">1:1</button>
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 4/3 }" @click="setAspectRatio(4/3, '4:3')">4:3</button>
                </div>
              </div>
              <div class="ux-image-crop__control-row">
                <span class="ux-image-crop__control-label">Zoom</span>
                <div class="ux-image-crop__control-group">
                  <input type="range" class="ux-image-crop__slider" min="0.5" max="3" step="0.1" x-model="zoom">
                  <span class="ux-image-crop__control-value" x-text="zoomPercent + '%'"></span>
                </div>
              </div>
            </div>

            <input type="file" x-ref="fileInput" accept="image/*" style="display: none;" @change="onFileSelect($event)">
          </div>

          <!-- Preview -->
          <div x-show="imageLoaded" style="display: flex; flex-direction: column; gap: var(--ux-space-md);">
            <div class="ux-image-crop__preview ux-image-crop__preview--md" x-data="{ previewUrl: '' }" x-effect="if(imageLoaded) getCroppedImageDataURL().then(url => previewUrl = url)">
              <span class="ux-image-crop__preview-label">Preview</span>
              <img :src="previewUrl" class="ux-image-crop__preview-image" alt="Preview">
            </div>
            <div class="ux-image-crop__preview ux-image-crop__preview--sm ux-image-crop__preview--circle" x-data="{ previewUrl: '' }" x-effect="if(imageLoaded) getCroppedImageDataURL().then(url => previewUrl = url)">
              <img :src="previewUrl" class="ux-image-crop__preview-image" alt="Circle preview">
            </div>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Preview component --&gt;
&lt;div class="ux-image-crop__preview ux-image-crop__preview--md"&gt;
  &lt;span class="ux-image-crop__preview-label"&gt;Preview&lt;/span&gt;
  &lt;img :src="previewUrl" class="ux-image-crop__preview-image"&gt;
&lt;/div&gt;

&lt;!-- Circle preview --&gt;
&lt;div class="ux-image-crop__preview ux-image-crop__preview--sm ux-image-crop__preview--circle"&gt;
  &lt;img :src="previewUrl" class="ux-image-crop__preview-image"&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- Avatar Crop -->
    <div class="demo-section">
      <h3>Avatar Crop (1:1 Locked)</h3>
      <p>Pre-configured for avatar cropping with 1:1 aspect ratio locked.</p>

      <ux-playground src="examples/image-crop/avatar-crop-11-locked.html"></ux-playground>
      <div class="demo-box" x-data="uxImageCrop({ aspectRatio: 1, aspectRatioLabel: '1:1' })">
        <div class="ux-image-crop ux-image-crop--compact ux-image-crop--aspect-locked" :class="{ 'ux-image-crop--loading': isLoading }">
          <div class="ux-image-crop__canvas"
               :class="{ 'ux-image-crop__canvas--empty': !imageLoaded }"
               x-ref="canvas"
               @click="!imageLoaded && $refs.fileInput.click()">

            <template x-if="!imageLoaded && !isLoading">
              <div class="ux-image-crop__placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
                <p class="ux-image-crop__placeholder-text">Upload avatar</p>
              </div>
            </template>

            <template x-if="imageLoaded">
              <div class="ux-image-crop__image-container">
                <img :src="imageSrc" class="ux-image-crop__image" :style="{ transform: imageTransform }" alt="Avatar">

                <div class="ux-image-crop__crop-area"
                     x-ref="cropArea"
                     :style="cropAreaStyle"
                     @mousedown="onCropMouseDown($event)"
                     @touchstart.prevent="onCropTouchStart($event)">
                  <div class="ux-image-crop__grid ux-image-crop__grid--thirds"></div>
                  <div class="ux-image-crop__handles">
                    <div class="ux-image-crop__handle ux-image-crop__handle--nw" @mousedown.stop="onHandleMouseDown($event, 'nw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'nw')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--ne" @mousedown.stop="onHandleMouseDown($event, 'ne')" @touchstart.stop.prevent="onHandleTouchStart($event, 'ne')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--sw" @mousedown.stop="onHandleMouseDown($event, 'sw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'sw')"></div>
                    <div class="ux-image-crop__handle ux-image-crop__handle--se" @mousedown.stop="onHandleMouseDown($event, 'se')" @touchstart.stop.prevent="onHandleTouchStart($event, 'se')"></div>
                  </div>
                </div>
              </div>
            </template>
          </div>

          <div class="ux-image-crop__controls" x-show="imageLoaded">
            <div class="ux-image-crop__control-row">
              <span class="ux-image-crop__control-label">Zoom</span>
              <div class="ux-image-crop__control-group">
                <input type="range" class="ux-image-crop__slider" min="0.5" max="3" step="0.1" x-model="zoom">
                <span class="ux-image-crop__control-value" x-text="zoomPercent + '%'"></span>
              </div>
            </div>
            <div class="ux-image-crop__actions">
              <button class="ux-button ux-button--outline ux-button--sm" @click="$refs.fileInput.click()">Change</button>
              <button class="ux-button ux-color-primary ux-button--sm">Save Avatar</button>
            </div>
          </div>

          <input type="file" x-ref="fileInput" accept="image/*" style="display: none;" @change="onFileSelect($event)">
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Avatar crop with 1:1 locked --&gt;
&lt;div x-data="uxImageCrop({ aspectRatio: 1, aspectRatioLabel: '1:1' })"&gt;
  &lt;div class="ux-image-crop ux-image-crop--compact ux-image-crop--aspect-locked"&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- Export Example -->
    <div class="demo-section">
      <h3>Export Cropped Image</h3>
      <p>Get the cropped image as a blob or data URL for upload or display.</p>

      <ux-playground src="examples/image-crop/export-cropped-image.html"></ux-playground>
      <div class="demo-box" x-data="{
        cropper: null,
        croppedUrl: null,
        cropData: null,
        async exportImage() {
          if (this.cropper && this.cropper.imageLoaded) {
            this.croppedUrl = await this.cropper.getCroppedImageDataURL();
            this.cropData = this.cropper.getCropData();
          }
        }
      }">
        <div x-data="uxImageCrop()" x-init="$nextTick(() => cropper = $data)" style="margin-bottom: var(--ux-space-lg);">
          <div class="ux-image-crop" :class="{ 'ux-image-crop--loading': isLoading, 'ux-image-crop--aspect-locked': isAspectLocked }">
            <div class="ux-image-crop__canvas"
                 :class="{ 'ux-image-crop__canvas--empty': !imageLoaded }"
                 x-ref="canvas"
                 @click="!imageLoaded && $refs.fileInput.click()">

              <template x-if="!imageLoaded && !isLoading">
                <div class="ux-image-crop__placeholder">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <path d="m21 15-5-5L5 21"/>
                  </svg>
                  <p class="ux-image-crop__placeholder-text">Select image to crop</p>
                </div>
              </template>

              <template x-if="imageLoaded">
                <div class="ux-image-crop__image-container">
                  <img :src="imageSrc" class="ux-image-crop__image" :style="{ transform: imageTransform }" alt="Image">

                  <div class="ux-image-crop__crop-area" x-ref="cropArea" :style="cropAreaStyle"
                       @mousedown="onCropMouseDown($event)" @touchstart.prevent="onCropTouchStart($event)">
                    <div class="ux-image-crop__grid ux-image-crop__grid--thirds"></div>
                    <div class="ux-image-crop__handles">
                      <div class="ux-image-crop__handle ux-image-crop__handle--nw" @mousedown.stop="onHandleMouseDown($event, 'nw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'nw')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--ne" @mousedown.stop="onHandleMouseDown($event, 'ne')" @touchstart.stop.prevent="onHandleTouchStart($event, 'ne')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--sw" @mousedown.stop="onHandleMouseDown($event, 'sw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'sw')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--se" @mousedown.stop="onHandleMouseDown($event, 'se')" @touchstart.stop.prevent="onHandleTouchStart($event, 'se')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--n" @mousedown.stop="onHandleMouseDown($event, 'n')" @touchstart.stop.prevent="onHandleTouchStart($event, 'n')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--s" @mousedown.stop="onHandleMouseDown($event, 's')" @touchstart.stop.prevent="onHandleTouchStart($event, 's')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--e" @mousedown.stop="onHandleMouseDown($event, 'e')" @touchstart.stop.prevent="onHandleTouchStart($event, 'e')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--w" @mousedown.stop="onHandleMouseDown($event, 'w')" @touchstart.stop.prevent="onHandleTouchStart($event, 'w')"></div>
                    </div>
                  </div>
                </div>
              </template>
            </div>

            <div class="ux-image-crop__controls" x-show="imageLoaded">
              <div class="ux-image-crop__control-row">
                <div class="ux-image-crop__aspect-buttons">
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': !aspectRatio }" @click="setAspectRatio(null, 'Free')">Free</button>
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 1 }" @click="setAspectRatio(1, '1:1')">1:1</button>
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 16/9 }" @click="setAspectRatio(16/9, '16:9')">16:9</button>
                </div>
              </div>
            </div>

            <input type="file" x-ref="fileInput" accept="image/*" style="display: none;" @change="onFileSelect($event)">
          </div>
        </div>

        <button class="ux-button ux-color-primary" @click="exportImage()" :disabled="!cropper?.imageLoaded">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Export Cropped Image
        </button>

        <!-- Export Results -->
        <div x-show="croppedUrl" style="margin-top: var(--ux-space-lg);">
          <h4 style="margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Cropped Result</h4>
          <div style="display: flex; gap: var(--ux-space-lg); flex-wrap: wrap;">
            <div>
              <img :src="croppedUrl" style="max-width: 200px; max-height: 200px; border-radius: var(--ux-border-radius-md); border: 1px solid var(--ux-border-color);">
            </div>
            <div x-show="cropData" style="flex: 1; min-width: 200px;">
              <p style="font-weight: 500; margin-bottom: var(--ux-space-xs); color: var(--ux-text);">Crop Data (for server-side processing):</p>
              <pre style="background: var(--ux-surface-secondary); padding: var(--ux-space-sm); border-radius: var(--ux-border-radius-sm); font-size: var(--ux-font-size-sm); overflow-x: auto;" x-text="JSON.stringify(cropData, null, 2)"></pre>
            </div>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="javascript">// Get cropped image as blob (for upload)
const blob = await cropper.getCroppedImage();
const formData = new FormData();
formData.append('image', blob, 'cropped.jpg');

// Get as data URL (for display)
const dataUrl = await cropper.getCroppedImageDataURL();
img.src = dataUrl;

// Get crop coordinates (for server-side cropping)
const cropData = cropper.getCropData();
// Returns: { x, y, width, height, rotation, zoom, aspectRatio, imageWidth, imageHeight }</pre>
    </div>

    <!-- API Reference -->
    <div class="demo-section">
      <h3>API Alpine.js</h3>
      <ux-playground src="examples/image-crop/api-alpinejs.html"></ux-playground>
      <div class="demo-box">
        <pre class="ux-code-block" data-lang="javascript" style="margin-top: 0;">// Configuration
uxImageCrop({
  imageSrc: null,           // Initial image source
  aspectRatio: null,        // Aspect ratio (null=free, 1=1:1, 4/3, 16/9)
  zoom: 1,                  // Initial zoom level
  rotation: 0,              // Initial rotation (degrees)
  minZoom: 0.5,             // Minimum zoom
  maxZoom: 3,               // Maximum zoom
  showGrid: true,           // Show rule of thirds grid
  showPreview: true,        // Show preview
  previewSize: 'md',        // Preview size: 'sm', 'md', 'lg'
  circlePreview: false,     // Circle preview mode
  outputFormat: 'image/jpeg', // Output format
  outputQuality: 0.92       // Output quality (0-1)
})

// Methods
setImage(src)               // Load image from URL or data URL
setAspectRatio(ratio, label) // Set aspect ratio (null, 1, 4/3, 16/9)
setZoom(level)              // Set zoom level
zoomIn(step)                // Zoom in by step (default 0.1)
zoomOut(step)               // Zoom out by step
rotate(degrees)             // Rotate by degrees
rotateLeft()                // Rotate 90deg left
rotateRight()               // Rotate 90deg right
reset()                     // Reset all transformations
getCroppedImage()           // Returns Promise<Blob>
getCroppedImageDataURL()    // Returns Promise<string> (data URL)
getCropData()               // Returns crop coordinates object

// Properties
imageSrc                    // Current image source
imageLoaded                 // Is image loaded?
isLoading                   // Is loading?
zoom                        // Current zoom level
rotation                    // Current rotation
aspectRatio                 // Current aspect ratio
cropX, cropY                // Crop position (%)
cropWidth, cropHeight       // Crop size (%)
zoomPercent                 // Zoom as percentage
isAspectLocked              // Is aspect ratio locked?

// Events
@image-crop:load            // Image loaded { width, height }
@image-crop:error           // Load error { src }
@image-crop:aspect-change   // Aspect changed { ratio, label }
@image-crop:zoom            // Zoom changed { zoom }
@image-crop:rotate          // Rotation changed { rotation }
@image-crop:reset           // Reset triggered</pre>
      </div>
    </div>

    <!-- Class Reference -->
    <div class="demo-section">
      <h3>Class Reference</h3>
      <table class="ux-table">
        <thead>
          <tr>
            <th>Class</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>.ux-image-crop</code></td><td>Main container</td></tr>
          <tr><td><code>.ux-image-crop--compact</code></td><td>Compact variant (smaller height)</td></tr>
          <tr><td><code>.ux-image-crop--lg</code></td><td>Large variant</td></tr>
          <tr><td><code>.ux-image-crop--fullscreen</code></td><td>Fullscreen mode</td></tr>
          <tr><td><code>.ux-image-crop--circle</code></td><td>Circle crop indicator</td></tr>
          <tr><td><code>.ux-image-crop--aspect-locked</code></td><td>Hide edge handles when aspect locked</td></tr>
          <tr><td><code>.ux-image-crop--loading</code></td><td>Loading state</td></tr>
          <tr><td><code>.ux-image-crop--glass</code></td><td>Glass morphism variant</td></tr>
          <tr><td><code>.ux-image-crop__canvas</code></td><td>Image workspace area</td></tr>
          <tr><td><code>.ux-image-crop__canvas--empty</code></td><td>Empty state (no image)</td></tr>
          <tr><td><code>.ux-image-crop__crop-area</code></td><td>Draggable crop selection</td></tr>
          <tr><td><code>.ux-image-crop__grid</code></td><td>Grid overlay</td></tr>
          <tr><td><code>.ux-image-crop__grid--thirds</code></td><td>Rule of thirds grid</td></tr>
          <tr><td><code>.ux-image-crop__handles</code></td><td>Container for resize handles</td></tr>
          <tr><td><code>.ux-image-crop__handle</code></td><td>Individual resize handle</td></tr>
          <tr><td><code>.ux-image-crop__handle--nw/ne/sw/se</code></td><td>Corner handles</td></tr>
          <tr><td><code>.ux-image-crop__handle--n/s/e/w</code></td><td>Edge handles</td></tr>
          <tr><td><code>.ux-image-crop__controls</code></td><td>Controls container</td></tr>
          <tr><td><code>.ux-image-crop__slider</code></td><td>Zoom slider input</td></tr>
          <tr><td><code>.ux-image-crop__aspect-btn</code></td><td>Aspect ratio button</td></tr>
          <tr><td><code>.ux-image-crop__aspect-btn--active</code></td><td>Active aspect button</td></tr>
          <tr><td><code>.ux-image-crop__rotate-btn</code></td><td>Rotate button</td></tr>
          <tr><td><code>.ux-image-crop__preview</code></td><td>Preview container</td></tr>
          <tr><td><code>.ux-image-crop__preview--sm/md/lg</code></td><td>Preview sizes</td></tr>
          <tr><td><code>.ux-image-crop__preview--circle</code></td><td>Circle preview</td></tr>
        </tbody>
      </table>
    </div>

    <!-- HTMX Integration -->
    <div class="demo-section">
      <h3>HTMX Integration</h3>
      <p>Upload cropped image to server using HTMX.</p>

      <pre class="ux-code-block" data-lang="html">&lt;div x-data="{
  cropper: null,
  async uploadCrop() {
    const blob = await this.cropper.getCroppedImage();
    const formData = new FormData();
    formData.append('image', blob, 'cropped.jpg');

    // Trigger HTMX request with the blob
    htmx.ajax('POST', '/api/upload', {
      source: this.$el,
      target: '#result',
      swap: 'innerHTML',
      values: { image: blob }
    });
  }
}"&gt;
  &lt;div x-data="uxImageCrop()" x-init="$nextTick(() =&gt; cropper = $data)"&gt;
    &lt;!-- Cropper component --&gt;
  &lt;/div&gt;

  &lt;button @click="uploadCrop()"&gt;Upload Cropped Image&lt;/button&gt;
  &lt;div id="result"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>

      <pre class="ux-code-block" data-lang="python"># Django view
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from PIL import Image
import io

@require_POST
def upload_cropped(request):
    image_file = request.FILES.get('image')
    if not image_file:
        return HttpResponse('No image', status=400)

    # Process with Pillow
    img = Image.open(image_file)

    # Save or process further
    img.save(f'uploads/{image_file.name}')

    return HttpResponse('&lt;div class="ux-alert ux-color-success"&gt;Image uploaded!&lt;/div&gt;')</pre>
    </div>

  </main>