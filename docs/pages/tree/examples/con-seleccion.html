<div x-data="uxTree({
  selectable: true,
  data: [
    { id: 'item1', label: 'Opción 1' },
    { id: 'item2', label: 'Opción 2' },
    {
      id: 'group1',
      label: 'Grupo A',
      children: [
        { id: 'item3', label: 'Opción 3' },
        { id: 'item4', label: 'Opción 4' }
      ]
    },
    {
      id: 'group2',
      label: 'Grupo B',
      children: [
        { id: 'item5', label: 'Opción 5' },
        { id: 'item6', label: 'Opción 6' }
      ]
    }
  ]
})" @tree:select.window="console.log('Selected:', $event.detail)">
  <div class="ux-tree">
    <template x-for="node in data" :key="node.id">
      <div class="ux-tree__node">
        <div class="ux-tree__item"
             :class="{ 'ux-tree__item--selected': selectedNodes.has(node.id) }"
             @click="handleClick(node.id, node, $event)">
          <span class="ux-tree__toggle"
                :class="{
                  'ux-tree__toggle--expanded': expandedNodes.has(node.id),
                  'ux-tree__toggle--empty': !node.children
                }"
                @click.stop="toggle(node.id)"
                x-html="icons.chevron"></span>
          <span class="ux-tree__label" x-text="node.label"></span>
        </div>
        <template x-if="node.children && expandedNodes.has(node.id)">
          <ul class="ux-tree__list ux-tree__list--nested">
            <template x-for="child in node.children" :key="child.id">
              <li class="ux-tree__node">
                <div class="ux-tree__item"
                     :class="{ 'ux-tree__item--selected': selectedNodes.has(child.id) }"
                     @click="handleClick(child.id, child, $event)">
                  <span class="ux-tree__toggle ux-tree__toggle--empty" x-html="icons.chevron"></span>
                  <span class="ux-tree__label" x-text="child.label"></span>
                </div>
              </li>
            </template>
          </ul>
        </template>
      </div>
    </template>
  </div>
  <div class="demo-output" style="margin-top: var(--ux-space-md);">
    <strong>Seleccionado:</strong> <span x-text="[...selectedNodes].join(', ') || 'Ninguno'"></span>
  </div>
</div>
