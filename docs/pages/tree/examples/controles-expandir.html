<div x-data="uxTree({
  data: [
    { id: 'n1', label: 'Nivel 1 - A', children: [
      { id: 'n1a', label: 'Nivel 2 - A.1', children: [
        { id: 'n1a1', label: 'Nivel 3 - A.1.1' },
        { id: 'n1a2', label: 'Nivel 3 - A.1.2' }
      ]},
      { id: 'n1b', label: 'Nivel 2 - A.2' }
    ]},
    { id: 'n2', label: 'Nivel 1 - B', children: [
      { id: 'n2a', label: 'Nivel 2 - B.1' },
      { id: 'n2b', label: 'Nivel 2 - B.2', children: [
        { id: 'n2b1', label: 'Nivel 3 - B.2.1' }
      ]}
    ]},
    { id: 'n3', label: 'Nivel 1 - C' }
  ]
})">
  <div class="demo-controls">
    <button class="ux-button ux-button--outline ux-button--sm" @click="expandAll()">Expandir Todo</button>
    <button class="ux-button ux-button--outline ux-button--sm" @click="collapseAll()">Colapsar Todo</button>
  </div>
  <div class="ux-tree ux-tree--bordered">
    <template x-for="node in data" :key="node.id">
      <div class="ux-tree__node">
        <div class="ux-tree__item" @click="toggle(node.id)">
          <span class="ux-tree__toggle"
                :class="{ 'ux-tree__toggle--expanded': expandedNodes.has(node.id), 'ux-tree__toggle--empty': !node.children }"
                x-html="icons.chevron"></span>
          <span class="ux-tree__label" x-text="node.label"></span>
        </div>
        <template x-if="node.children && expandedNodes.has(node.id)">
          <ul class="ux-tree__list ux-tree__list--nested">
            <template x-for="child in node.children" :key="child.id">
              <li class="ux-tree__node">
                <div class="ux-tree__item" @click="toggle(child.id)">
                  <span class="ux-tree__toggle"
                        :class="{ 'ux-tree__toggle--expanded': expandedNodes.has(child.id), 'ux-tree__toggle--empty': !child.children }"
                        x-html="icons.chevron"></span>
                  <span class="ux-tree__label" x-text="child.label"></span>
                </div>
                <template x-if="child.children && expandedNodes.has(child.id)">
                  <ul class="ux-tree__list ux-tree__list--nested">
                    <template x-for="gc in child.children" :key="gc.id">
                      <li class="ux-tree__node">
                        <div class="ux-tree__item">
                          <span class="ux-tree__toggle ux-tree__toggle--empty" x-html="icons.chevron"></span>
                          <span class="ux-tree__label" x-text="gc.label"></span>
                        </div>
                      </li>
                    </template>
                  </ul>
                </template>
              </li>
            </template>
          </ul>
        </template>
      </div>
    </template>
  </div>
</div>
