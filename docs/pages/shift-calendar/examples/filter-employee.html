<div x-data="{
  ...uxShiftCalendar({
    shifts: [
      { id: 's1', date: new Date().toISOString().split('T')[0], employeeId: 'e1', employeeName: 'Ana Garcia', startTime: '08:00', endTime: '14:00', type: 'morning', department: 'Ventas' },
      { id: 's2', date: new Date().toISOString().split('T')[0], employeeId: 'e2', employeeName: 'Carlos Lopez', startTime: '10:00', endTime: '18:00', type: 'afternoon', department: 'Soporte' },
      { id: 's3', date: new Date().toISOString().split('T')[0], employeeId: 'e3', employeeName: 'Maria Torres', startTime: '14:00', endTime: '22:00', type: 'night', department: 'Seguridad' },
      { id: 's4', date: new Date(Date.now() + 86400000).toISOString().split('T')[0], employeeId: 'e1', employeeName: 'Ana Garcia', startTime: '08:00', endTime: '16:00', type: 'full-day', department: 'Ventas' },
      { id: 's5', date: new Date(Date.now() + 86400000).toISOString().split('T')[0], employeeId: 'e2', employeeName: 'Carlos Lopez', startTime: '08:00', endTime: '14:00', type: 'morning', department: 'Soporte' }
    ],
    employees: [
      { id: 'e1', name: 'Ana Garcia', color: 'amber' },
      { id: 'e2', name: 'Carlos Lopez', color: 'blue' },
      { id: 'e3', name: 'Maria Torres', color: 'indigo' }
    ],
    showLegend: false
  }),
  showFilterPanel: false
}">
  <!-- Filter buttons -->
  <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
    <template x-for="emp in employees" :key="emp.id">
      <button class="ux-button ux-button--sm"
              :class="isEmployeeFiltered(emp.id) ? 'ux-color-primary' : 'ux-button--outline'"
              @click="filterByEmployee(emp.id)"
              x-text="emp.name">
      </button>
    </template>
    <button class="ux-button ux-button--sm ux-button--clear"
            @click="clearFilters()"
            x-show="filteredEmployeeIds.length > 0">
      Limpiar filtros
    </button>
  </div>

  <div class="demo-calendar">
    <div class="ux-shift-calendar">
      <div class="ux-shift-calendar__header">
        <div class="ux-shift-calendar__header-start">
          <div class="ux-shift-calendar__nav">
            <button class="ux-shift-calendar__nav-btn" @click="navigateWeek(-1)" x-html="icons.prev"></button>
            <button class="ux-shift-calendar__nav-btn" @click="navigateWeek(1)" x-html="icons.next"></button>
          </div>
        </div>
        <div class="ux-shift-calendar__header-center">
          <span class="ux-shift-calendar__title" x-text="weekRangeTitle"></span>
        </div>
        <div class="ux-shift-calendar__header-end">
          <span class="ux-shift-calendar__subtitle" x-show="filteredEmployeeIds.length > 0">
            Mostrando <span x-text="filteredEmployeeIds.length"></span> empleado(s)
          </span>
        </div>
      </div>

      <div class="ux-shift-calendar__grid-wrapper">
        <div class="ux-shift-calendar__grid">
          <div class="ux-shift-calendar__corner"></div>
          <template x-for="(date, dayIndex) in weekDates" :key="dayIndex">
            <div class="ux-shift-calendar__day-header"
                 :class="{ 'ux-shift-calendar__day-header--today': isToday(date) }">
              <span class="ux-shift-calendar__day-name" x-text="dayNames[date.getDay()]"></span>
              <span class="ux-shift-calendar__day-number" x-text="date.getDate()"></span>
            </div>
          </template>

          <template x-for="slot in timeSlots" :key="slot.hour">
            <template x-for="(colIndex) in [0,1,2,3,4,5,6,7]" :key="colIndex">
              <template x-if="colIndex === 0">
                <div class="ux-shift-calendar__time-slot">
                  <span x-text="slot.label"></span>
                </div>
              </template>
              <template x-if="colIndex > 0">
                <div class="ux-shift-calendar__cell">
                  <template x-if="slot.hour === startHour">
                    <template x-for="shift in getShiftsForDay(weekDates[colIndex - 1])" :key="shift.id">
                      <div class="ux-shift-calendar__shift"
                           :class="'ux-shift-calendar__shift--' + getShiftType(shift)"
                           :style="getShiftStyle(shift)"
                           @click="onShiftClick(shift, $event)">
                        <div class="ux-shift-calendar__shift-name" x-text="shift.employeeName"></div>
                        <div class="ux-shift-calendar__shift-time" x-text="shift.startTime + ' - ' + shift.endTime"></div>
                      </div>
                    </template>
                  </template>
                </div>
              </template>
            </template>
          </template>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.demo-calendar { height: 600px; }
</style>
