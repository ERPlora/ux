# models.py
from django.db import models
from decimal import Decimal

class Product(models.Model):
    name = models.CharField(max_length=200)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    currency = models.CharField(max_length=3, default='USD')

    def get_price_in(self, target_currency):
        """Convierte el precio a otra moneda."""
        if self.currency == target_currency:
            return self.price
        rate = get_exchange_rate(self.currency, target_currency)
        return self.price * rate

# forms.py
from django import forms

class PriceForm(forms.Form):
    amount = forms.DecimalField(
        max_digits=12,
        decimal_places=2,
        min_value=Decimal('0.01'),
        widget=forms.NumberInput(attrs={
            'class': 'ux-input',
            'inputmode': 'decimal',
            'step': '0.01'
        })
    )
    currency = forms.ChoiceField(choices=[
        ('USD', 'USD'), ('EUR', 'EUR'),
        ('GBP', 'GBP'), ('MXN', 'MXN')
    ])
