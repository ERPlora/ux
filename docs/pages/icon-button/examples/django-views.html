<pre class="ux-code-block" data-lang="python"># views.py
from django.views.decorators.http import require_POST
from django.template.loader import render_to_string

@require_POST
def toggle_favorite(request, item_id):
    item = get_object_or_404(Item, id=item_id)
    item.is_favorite = not item.is_favorite
    item.save()

    # Retorna el boton actualizado
    html = render_to_string('partials/favorite_button.html', {
        'item': item
    })
    return HttpResponse(html)</pre>
