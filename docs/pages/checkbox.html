<style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); }
  </style>

<div class="demo-section">
    <h3>Uso Basico</h3>
    <p>Checkbox estilo iOS/Ionic con animacion de check.</p>
    <ux-playground src="examples/checkbox/basico.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Colores</h3>
    <ux-playground src="examples/checkbox/colores.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Tamanos</h3>
    <ux-playground src="examples/checkbox/tamanos.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Variante Redonda</h3>
    <ux-playground src="examples/checkbox/round.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Con Descripcion</h3>
    <ux-playground src="examples/checkbox/con-descripcion.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Estados</h3>
    <ux-playground src="examples/checkbox/estados.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Grupo de Checkboxes</h3>
    <ux-playground src="examples/checkbox/grupo.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Grupo Horizontal</h3>
    <ux-playground src="examples/checkbox/grupo-horizontal.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Checkbox en Lista (estilo Ionic)</h3>
    <ux-playground src="examples/checkbox/en-lista.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Con Alpine.js</h3>
    <ux-playground src="examples/checkbox/alpine.html"></ux-playground>
  </div>

  <!-- HTMX Integration -->
  <div class="demo-section">
    <h3>Integracion con HTMX</h3>
    <p>Checkboxes que sincronizan con el servidor en tiempo real.</p>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html"><!-- Guardar preferencia al cambiar -->
<label class="ux-checkbox">
  <input type="checkbox" class="ux-checkbox__input"
         name="notifications"
         hx-post="/api/preferences/notifications"
         hx-trigger="change"
         hx-swap="none">
  <span class="ux-checkbox__box">...</span>
  <span class="ux-checkbox__label">Recibir notificaciones</span>
</label></pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html"><!-- Formulario con validacion del servidor -->
<form hx-post="/api/signup"
      hx-target="#form-result">
  <label class="ux-checkbox ux-checkbox--success">
    <input type="checkbox" class="ux-checkbox__input"
           name="terms" required
           hx-post="/api/validate/terms"
           hx-trigger="change"
           hx-target="next .validation-msg">
    <span class="ux-checkbox__box">...</span>
    <span class="ux-checkbox__label">Acepto los terminos</span>
  </label>
  <span class="validation-msg"></span>

  <button type="submit" class="ux-button ux-button ux-color-primary">
    Registrarse
  </button>
</form>
<div id="form-result"></div></pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html"><!-- Lista de tareas con checkboxes -->
<div id="todo-list"
     hx-get="/api/todos"
     hx-trigger="load">
  <!-- Loading... -->
</div>

<!-- Respuesta del servidor -->
<label class="ux-checkbox-item">
  <input type="checkbox" class="ux-checkbox__input"
         hx-patch="/api/todos/1"
         hx-trigger="change"
         hx-vals='{"completed": true}'>
  <span class="ux-checkbox__box">...</span>
  <div class="ux-checkbox-item__content">
    <span class="ux-checkbox-item__title">Completar informe</span>
  </div>
</label></pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html"><!-- Seleccionar multiples items para accion masiva -->
<form hx-delete="/api/items/bulk"
      hx-confirm="Eliminar items seleccionados?">
  <div class="ux-checkbox-group">
    <label class="ux-checkbox">
      <input type="checkbox" name="items[]" value="1">
      <span class="ux-checkbox__box">...</span>
      <span class="ux-checkbox__label">Item 1</span>
    </label>
    <label class="ux-checkbox">
      <input type="checkbox" name="items[]" value="2">
      <span class="ux-checkbox__box">...</span>
      <span class="ux-checkbox__label">Item 2</span>
    </label>
  </div>
  <button type="submit" class="ux-button ux-button ux-color-danger">
    Eliminar seleccionados
  </button>
</form></pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html"><!-- Checkbox que actualiza contenido relacionado -->
<label class="ux-checkbox">
  <input type="checkbox" class="ux-checkbox__input"
         name="show_advanced"
         hx-get="/api/settings/advanced"
         hx-trigger="change[this.checked]"
         hx-target="#advanced-options"
         hx-swap="innerHTML">
  <span class="ux-checkbox__box">...</span>
  <span class="ux-checkbox__label">Mostrar opciones avanzadas</span>
</label>
<div id="advanced-options"></div></pre>
    </div>
  </div>

  <!-- HTMX + Django Section -->
  <div class="demo-section">
    <h3>HTMX + Django</h3>
    <p>Ejemplos practicos de integracion con Django para guardar preferencias y seleccion multiple.</p>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Checkbox que guarda preferencias via HTMX</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Template: settings.html -->
<div class="ux-checkbox-group">
  <span class="ux-checkbox-group__label">Preferencias de notificaciones</span>

  <label class="ux-checkbox ux-checkbox--success">
    <input type="checkbox" class="ux-checkbox__input"
           name="email_notifications"
           {% if user.preferences.email_notifications %}checked{% endif %}
           hx-post="{% url 'save_preference' %}"
           hx-trigger="change"
           hx-vals='{"key": "email_notifications"}'
           hx-swap="none"
           hx-indicator="#pref-indicator">
    <span class="ux-checkbox__box">
      <span class="ux-checkbox__checkmark">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
        </svg>
      </span>
    </span>
    <div>
      <span class="ux-checkbox__label">Notificaciones por email</span>
      <p class="ux-checkbox__description">Recibe actualizaciones en tu correo</p>
    </div>
  </label>

  <label class="ux-checkbox ux-checkbox--success">
    <input type="checkbox" class="ux-checkbox__input"
           name="push_notifications"
           {% if user.preferences.push_notifications %}checked{% endif %}
           hx-post="{% url 'save_preference' %}"
           hx-trigger="change"
           hx-vals='{"key": "push_notifications"}'
           hx-swap="none">
    <span class="ux-checkbox__box">
      <span class="ux-checkbox__checkmark">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
        </svg>
      </span>
    </span>
    <span class="ux-checkbox__label">Notificaciones push</span>
  </label>

  <span id="pref-indicator" class="htmx-indicator ux-spinner ux-spinner--sm"></span>
</div></pre>
    </div>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Lista de checkboxes para seleccion multiple</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Template: product_list.html -->
<form hx-post="{% url 'bulk_action' %}"
      hx-target="#action-result"
      hx-indicator="#bulk-spinner">

  {% csrf_token %}

  <!-- Seleccionar todos -->
  <label class="ux-checkbox ux-checkbox--primary" style="margin-bottom: var(--ux-space-md);">
    <input type="checkbox" class="ux-checkbox__input"
           x-data
           @change="
             document.querySelectorAll('input[name=product_ids]')
               .forEach(cb => cb.checked = $el.checked)
           ">
    <span class="ux-checkbox__box">
      <span class="ux-checkbox__checkmark">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
        </svg>
      </span>
    </span>
    <span class="ux-checkbox__label"><strong>Seleccionar todos</strong></span>
  </label>

  <!-- Lista de productos -->
  {% for product in products %}
  <label class="ux-checkbox-item">
    <input type="checkbox" class="ux-checkbox__input"
           name="product_ids"
           value="{{ product.id }}">
    <span class="ux-checkbox__box">
      <span class="ux-checkbox__checkmark">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
        </svg>
      </span>
    </span>
    <div class="ux-checkbox-item__content">
      <span class="ux-checkbox-item__title">{{ product.name }}</span>
      <span class="ux-checkbox-item__subtitle">SKU: {{ product.sku }} - ${{ product.price }}</span>
    </div>
  </label>
  {% endfor %}

  <!-- Acciones masivas -->
  <div style="margin-top: var(--ux-space-lg); display: flex; gap: var(--ux-space-sm);">
    <button type="submit" name="action" value="activate"
            class="ux-button ux-color-success">
      Activar seleccionados
    </button>
    <button type="submit" name="action" value="deactivate"
            class="ux-button ux-color-warning">
      Desactivar
    </button>
    <button type="submit" name="action" value="delete"
            class="ux-button ux-color-danger"
            hx-confirm="Estas seguro de eliminar los productos seleccionados?">
      Eliminar
    </button>
    <span id="bulk-spinner" class="htmx-indicator ux-spinner"></span>
  </div>
</form>

<div id="action-result"></div></pre>
    </div>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Vista Django que procesa los checkboxes</h4>
      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from django.contrib.auth.decorators import login_required
from .models import UserPreferences, Product

@login_required
@require_POST
def save_preference(request):
    """Guarda una preferencia individual via HTMX"""
    key = request.POST.get('key')
    # El checkbox envia su name si esta marcado, sino no envia nada
    value = key in request.POST

    # Obtener o crear preferencias del usuario
    prefs, created = UserPreferences.objects.get_or_create(user=request.user)

    # Actualizar la preferencia
    if hasattr(prefs, key):
        setattr(prefs, key, value)
        prefs.save(update_fields=[key])

    # Respuesta vacia (hx-swap="none")
    response = HttpResponse(status=204)
    response['HX-Trigger'] = 'preferencesSaved'
    return response


@login_required
@require_POST
def bulk_action(request):
    """Procesa acciones masivas sobre productos seleccionados"""
    product_ids = request.POST.getlist('product_ids')
    action = request.POST.get('action')

    if not product_ids:
        return HttpResponse(
            '<div class="ux-alert ux-alert--warning">'
            'No seleccionaste ningun producto'
            '</div>'
        )

    products = Product.objects.filter(
        id__in=product_ids,
        user=request.user  # Solo productos del usuario
    )
    count = products.count()

    if action == 'activate':
        products.update(is_active=True)
        message = f'{count} productos activados'
        alert_type = 'success'

    elif action == 'deactivate':
        products.update(is_active=False)
        message = f'{count} productos desactivados'
        alert_type = 'warning'

    elif action == 'delete':
        products.delete()
        message = f'{count} productos eliminados'
        alert_type = 'danger'

    else:
        return HttpResponse(status=400)

    return HttpResponse(
        f'<div class="ux-alert ux-alert--{alert_type}">'
        f'{message}'
        '</div>'
    )


# urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('preferences/save/', views.save_preference, name='save_preference'),
    path('products/bulk/', views.bulk_action, name='bulk_action'),
]</pre>
    </div>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Modelo de preferencias de usuario</h4>
      <pre class="ux-code-block" data-lang="python"># models.py
from django.db import models
from django.contrib.auth import get_user_model

User = get_user_model()

class UserPreferences(models.Model):
    user = models.OneToOneField(
        User,
        on_delete=models.CASCADE,
        related_name='preferences'
    )
    email_notifications = models.BooleanField(default=True)
    push_notifications = models.BooleanField(default=False)
    dark_mode = models.BooleanField(default=False)
    newsletter = models.BooleanField(default=True)

    class Meta:
        verbose_name = 'User Preferences'
        verbose_name_plural = 'User Preferences'

    def __str__(self):
        return f'Preferences for {self.user.username}'


class Product(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    sku = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    is_active = models.BooleanField(default=True)

    def __str__(self):
        return self.name</pre>
    </div>
  </div>
