<div x-data="uxDatatable({
  columns: [
    { key: 'name', label: 'Producto', sortable: true },
    { key: 'category', label: 'Categoria', sortable: true },
    { key: 'price', label: 'Precio', sortable: true, type: 'number', format: (v) => '$' + v.toFixed(2) },
    { key: 'stock', label: 'Stock', sortable: true, type: 'number' }
  ],
  rows: [
    { id: 1, name: 'Laptop Pro 15', category: 'Electronica', price: 1299.99, stock: 45 },
    { id: 2, name: 'Mouse Wireless', category: 'Accesorios', price: 29.99, stock: 120 },
    { id: 3, name: 'Teclado Mecanico', category: 'Accesorios', price: 89.99, stock: 78 },
    { id: 4, name: 'Monitor 27 pulgadas', category: 'Electronica', price: 399.99, stock: 22 },
    { id: 5, name: 'Webcam HD', category: 'Accesorios', price: 59.99, stock: 95 }
  ],
  selectable: true,
  perPage: 10,
  paginated: false
})" class="ux-datatable ux-datatable--bordered ux-datatable--responsive" @row-action.window="alert($event.detail.action + ': ' + $event.detail.row.name)">

  <!-- Header -->
  <div class="ux-datatable__header">
    <div>
      <h3 class="ux-datatable__title">Inventario</h3>
      <p class="ux-datatable__subtitle" x-text="selectedRows.length + ' seleccionados'"></p>
    </div>
    <div class="ux-datatable__actions">
      <button class="ux-button ux-button--outline ux-button--sm" :disabled="selectedRows.length === 0">
        Exportar
      </button>
      <button class="ux-button ux-button ux-color-primary ux-button--sm">
        Nuevo Producto
      </button>
    </div>
  </div>

  <!-- Table Body -->
  <div class="ux-datatable__body">
    <table class="ux-datatable__table">
      <thead class="ux-datatable__thead">
        <tr>
          <th class="ux-datatable__th ux-datatable__th--checkbox">
            <input type="checkbox" class="ux-checkbox" x-model="selectAll" @change="toggleSelectAll()">
          </th>
          <template x-for="col in columns" :key="col.key">
            <th class="ux-datatable__th"
                :class="{
                  'ux-datatable__th--sortable': col.sortable,
                  'ux-datatable__th--sorted': isSorted(col),
                  'ux-datatable__th--sorted-desc': isSorted(col) && sortDirection === 'desc'
                }"
                @click="sortBy(col)">
              <span x-text="col.label"></span>
              <span x-show="col.sortable" class="ux-datatable__sort-icon">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 5v14M5 12l7-7 7 7"/>
                </svg>
              </span>
            </th>
          </template>
          <th class="ux-datatable__th ux-datatable__th--actions">Acciones</th>
        </tr>
      </thead>
      <tbody class="ux-datatable__tbody">
        <template x-for="row in paginatedRows" :key="getRowId(row)">
          <tr class="ux-datatable__tr" :class="{ 'ux-datatable__tr--selected': isRowSelected(row) }">
            <td class="ux-datatable__td ux-datatable__td--checkbox" data-label="">
              <input type="checkbox" class="ux-checkbox" :checked="isRowSelected(row)" @change="toggleRowSelection(row)">
            </td>
            <template x-for="col in columns" :key="col.key">
              <td class="ux-datatable__td" :data-label="col.label">
                <span x-text="formatCellValue(row, col)"></span>
              </td>
            </template>
            <td class="ux-datatable__td ux-datatable__td--actions" data-label="">
              <div class="ux-datatable__row-actions">
                <button class="ux-datatable__row-action" @click="onAction('edit', row, $event)" title="Editar">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
                <button class="ux-datatable__row-action ux-datatable__row-action--danger" @click="onAction('delete', row, $event)" title="Eliminar">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
</div>
