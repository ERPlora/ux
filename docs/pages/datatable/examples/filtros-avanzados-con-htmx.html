<pre class="ux-code-block" data-lang="html"><!-- templates/users/partials/filters.html -->
<div class="ux-datatable__toolbar">
  <div class="ux-datatable__toolbar-start">
    <span class="ux-text-sm ux-text-secondary">{{ page_obj.paginator.count }} resultados</span>

    <!-- Filtro por estado -->
    <select name="status"
            class="ux-select ux-select--sm"
            hx-get="{% url 'users:list' %}"
            hx-trigger="change"
            hx-target="#user-table-container"
            hx-include="[name='q'], [name='department']"
            hx-push-url="true">
      <option value="">Todos los estados</option>
      <option value="active" {% if current_filters.status == 'active' %}selected{% endif %}>Activos</option>
      <option value="inactive" {% if current_filters.status == 'inactive' %}selected{% endif %}>Inactivos</option>
    </select>

    <!-- Filtro por departamento -->
    <select name="department"
            class="ux-select ux-select--sm"
            hx-get="{% url 'users:list' %}"
            hx-trigger="change"
            hx-target="#user-table-container"
            hx-include="[name='q'], [name='status']"
            hx-push-url="true">
      <option value="">Todos los departamentos</option>
      {% for dept in departments %}
      <option value="{{ dept.pk }}" {% if current_filters.department == dept.pk|stringformat:"s" %}selected{% endif %}>
        {{ dept.name }}
      </option>
      {% endfor %}
    </select>

    <!-- Boton limpiar filtros -->
    {% if current_filters.q or current_filters.status or current_filters.department %}
    <button type="button"
            class="ux-button ux-button--outline ux-button--sm"
            hx-get="{% url 'users:list' %}"
            hx-target="#user-table-container"
            hx-push-url="true">
      Limpiar filtros
    </button>
    {% endif %}
  </div>

  <div class="ux-datatable__toolbar-end">
    <input type="search"
           name="q"
           class="ux-input ux-datatable__search"
           placeholder="Buscar..."
           value="{{ current_filters.q }}"
           hx-get="{% url 'users:list' %}"
           hx-trigger="input changed delay:300ms, search"
           hx-target="#user-table-container"
           hx-include="[name='status'], [name='department']"
           hx-push-url="true">
  </div>
</div>

<!-- Tags de filtros activos -->
{% if current_filters.q or current_filters.status or current_filters.department %}
<div class="ux-datatable__active-filters">
  {% if current_filters.q %}
  <span class="ux-datatable__filter-tag">
    <span class="ux-datatable__filter-tag-label">Busqueda:</span>
    {{ current_filters.q }}
    <button type="button"
            class="ux-datatable__filter-tag-remove"
            hx-get="{% url 'users:list' %}?status={{ current_filters.status }}&department={{ current_filters.department }}"
            hx-target="#user-table-container"
            hx-push-url="true">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
  </span>
  {% endif %}

  {% if current_filters.status %}
  <span class="ux-datatable__filter-tag">
    <span class="ux-datatable__filter-tag-label">Estado:</span>
    {% if current_filters.status == 'active' %}Activo{% else %}Inactivo{% endif %}
    <button type="button"
            class="ux-datatable__filter-tag-remove"
            hx-get="{% url 'users:list' %}?q={{ current_filters.q }}&department={{ current_filters.department }}"
            hx-target="#user-table-container"
            hx-push-url="true">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
  </span>
  {% endif %}
</div>
{% endif %}</pre>
