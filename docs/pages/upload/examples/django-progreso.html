<!-- Upload con barra de progreso -->
<form hx-post="/upload/"
      hx-encoding="multipart/form-data"
      hx-target="#response"
      x-data="{ progress: 0, uploading: false }"
      @htmx:xhr:progress="progress = Math.round($event.detail.loaded / $event.detail.total * 100)"
      @htmx:before-request="uploading = true; progress = 0"
      @htmx:after-request="uploading = false">

  <label class="ux-upload-area">
    <svg class="ux-upload-area__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
      <path d="M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8-69 0-113.44 45.79-128 91.2-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
      <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 255.79l-64-64-64 64M256 448.21V207.79"></path>
    </svg>
    <p class="ux-upload-area__text">Arrastra archivos aqui o <span class="ux-upload-area__link">selecciona</span></p>
    <p class="ux-upload-area__hint">PNG, JPG, PDF hasta 10MB</p>
    <input type="file" name="file" accept="image/*,.pdf" required>
  </label>

  <!-- Barra de progreso -->
  <div class="ux-progress" x-show="uploading" style="margin-top: var(--ux-space-md); height: 8px;">
    <div class="ux-progress__bar ux-color-primary" :style="{ width: progress + '%' }"></div>
  </div>
  <p x-show="uploading" style="text-align: center; margin-top: var(--ux-space-xs); font-size: var(--ux-font-size-sm); color: var(--ux-text-secondary);">
    <span x-text="progress"></span>%
  </p>

  <button type="submit" class="ux-button ux-color-primary" style="margin-top: var(--ux-space-md);" :disabled="uploading">
    <span x-show="!uploading">Subir Archivo</span>
    <span x-show="uploading">Subiendo...</span>
  </button>
</form>
<div id="response"></div>
