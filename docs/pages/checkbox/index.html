<style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); }
  </style>

<div class="demo-section">
    <h3>Uso Básico</h3>
    <p>Checkbox estilo iOS/Ionic con animación de check.</p>
    <ux-playground src="pages/checkbox/examples/basico.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Colores</h3>
    <ux-playground src="pages/checkbox/examples/colores.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Tamaños</h3>
    <ux-playground src="pages/checkbox/examples/tamanos.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Variante Redonda</h3>
    <ux-playground src="pages/checkbox/examples/round.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Con Descripción</h3>
    <ux-playground src="pages/checkbox/examples/con-descripcion.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Estados</h3>
    <ux-playground src="pages/checkbox/examples/estados.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Grupo de Checkboxes</h3>
    <ux-playground src="pages/checkbox/examples/grupo.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Grupo Horizontal</h3>
    <ux-playground src="pages/checkbox/examples/grupo-horizontal.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Checkbox en Lista (estilo Ionic)</h3>
    <ux-playground src="pages/checkbox/examples/en-lista.html"></ux-playground>
  </div>

  <div class="demo-section">
    <h3>Con Alpine.js</h3>
    <ux-playground src="pages/checkbox/examples/alpine.html"></ux-playground>
  </div>

  <!-- HTMX Integration -->
  <div class="demo-section">
    <h3>Integración con HTMX</h3>
    <p>Checkboxes que sincronizan con el servidor en tiempo real.</p>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">&lt;!-- Guardar preferencia al cambiar --&gt;
&lt;label class="ux-checkbox"&gt;
  &lt;input type="checkbox" class="ux-checkbox__input"
         name="notifications"
         hx-post="/api/preferences/notifications"
         hx-trigger="change"
         hx-swap="none"&gt;
  &lt;span class="ux-checkbox__box"&gt;...&lt;/span&gt;
  &lt;span class="ux-checkbox__label"&gt;Recibir notificaciones&lt;/span&gt;
&lt;/label&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">&lt;!-- Formulario con validacion del servidor --&gt;
&lt;form hx-post="/api/signup"
      hx-target="#form-result"&gt;
  &lt;label class="ux-checkbox ux-checkbox--success"&gt;
    &lt;input type="checkbox" class="ux-checkbox__input"
           name="terms" required
           hx-post="/api/validate/terms"
           hx-trigger="change"
           hx-target="next .validation-msg"&gt;
    &lt;span class="ux-checkbox__box"&gt;...&lt;/span&gt;
    &lt;span class="ux-checkbox__label"&gt;Acepto los términos&lt;/span&gt;
  &lt;/label&gt;
  &lt;span class="validation-msg"&gt;&lt;/span&gt;

  &lt;button type="submit" class="ux-button ux-button ux-color-primary"&gt;
    Registrarse
  &lt;/button&gt;
&lt;/form&gt;
&lt;div id="form-result"&gt;&lt;/div&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">&lt;!-- Lista de tareas con checkboxes --&gt;
&lt;div id="todo-list"
     hx-get="/api/todos"
     hx-trigger="load"&gt;
  &lt;!-- Loading... --&gt;
&lt;/div&gt;

&lt;!-- Respuesta del servidor --&gt;
&lt;label class="ux-checkbox-item"&gt;
  &lt;input type="checkbox" class="ux-checkbox__input"
         hx-patch="/api/todos/1"
         hx-trigger="change"
         hx-vals='{"completed": true}'&gt;
  &lt;span class="ux-checkbox__box"&gt;...&lt;/span&gt;
  &lt;div class="ux-checkbox-item__content"&gt;
    &lt;span class="ux-checkbox-item__title"&gt;Completar informe&lt;/span&gt;
  &lt;/div&gt;
&lt;/label&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">&lt;!-- Seleccionar multiples items para accion masiva --&gt;
&lt;form hx-delete="/api/items/bulk"
      hx-confirm="Eliminar items seleccionados?"&gt;
  &lt;div class="ux-checkbox-group"&gt;
    &lt;label class="ux-checkbox"&gt;
      &lt;input type="checkbox" name="items[]" value="1"&gt;
      &lt;span class="ux-checkbox__box"&gt;...&lt;/span&gt;
      &lt;span class="ux-checkbox__label"&gt;Item 1&lt;/span&gt;
    &lt;/label&gt;
    &lt;label class="ux-checkbox"&gt;
      &lt;input type="checkbox" name="items[]" value="2"&gt;
      &lt;span class="ux-checkbox__box"&gt;...&lt;/span&gt;
      &lt;span class="ux-checkbox__label"&gt;Item 2&lt;/span&gt;
    &lt;/label&gt;
  &lt;/div&gt;
  &lt;button type="submit" class="ux-button ux-button ux-color-danger"&gt;
    Eliminar seleccionados
  &lt;/button&gt;
&lt;/form&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">&lt;!-- Checkbox que actualiza contenido relacionado --&gt;
&lt;label class="ux-checkbox"&gt;
  &lt;input type="checkbox" class="ux-checkbox__input"
         name="show_advanced"
         hx-get="/api/settings/advanced"
         hx-trigger="change[this.checked]"
         hx-target="#advanced-options"
         hx-swap="innerHTML"&gt;
  &lt;span class="ux-checkbox__box"&gt;...&lt;/span&gt;
  &lt;span class="ux-checkbox__label"&gt;Mostrar opciones avanzadas&lt;/span&gt;
&lt;/label&gt;
&lt;div id="advanced-options"&gt;&lt;/div&gt;</pre>
    </div>
  </div>

  <!-- HTMX + Django Section -->
  <div class="demo-section">
    <h3>HTMX + Django</h3>
    <p>Ejemplos prácticos de integración con Django para guardar preferencias y seleccion multiple.</p>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Checkbox que guarda preferencias via HTMX</h4>
      <pre class="ux-code-block" data-lang="html">&lt;!-- Template: settings.html --&gt;
&lt;div class="ux-checkbox-group"&gt;
  &lt;span class="ux-checkbox-group__label"&gt;Preferencias de notificaciones&lt;/span&gt;

  &lt;label class="ux-checkbox ux-checkbox--success"&gt;
    &lt;input type="checkbox" class="ux-checkbox__input"
           name="email_notifications"
           {% if user.preferences.email_notifications %}checked{% endif %}
           hx-post="{% url 'save_preference' %}"
           hx-trigger="change"
           hx-vals='{"key": "email_notifications"}'
           hx-swap="none"
           hx-indicator="#pref-indicator"&gt;
    &lt;span class="ux-checkbox__box"&gt;
      &lt;span class="ux-checkbox__checkmark"&gt;
        &lt;svg fill="none" stroke="currentColor" viewBox="0 0 24 24"&gt;
          &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/&gt;
        &lt;/svg&gt;
      &lt;/span&gt;
    &lt;/span&gt;
    &lt;div&gt;
      &lt;span class="ux-checkbox__label"&gt;Notificaciones por email&lt;/span&gt;
      &lt;p class="ux-checkbox__description"&gt;Recibe actualizaciones en tu correo&lt;/p&gt;
    &lt;/div&gt;
  &lt;/label&gt;

  &lt;label class="ux-checkbox ux-checkbox--success"&gt;
    &lt;input type="checkbox" class="ux-checkbox__input"
           name="push_notifications"
           {% if user.preferences.push_notifications %}checked{% endif %}
           hx-post="{% url 'save_preference' %}"
           hx-trigger="change"
           hx-vals='{"key": "push_notifications"}'
           hx-swap="none"&gt;
    &lt;span class="ux-checkbox__box"&gt;
      &lt;span class="ux-checkbox__checkmark"&gt;
        &lt;svg fill="none" stroke="currentColor" viewBox="0 0 24 24"&gt;
          &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/&gt;
        &lt;/svg&gt;
      &lt;/span&gt;
    &lt;/span&gt;
    &lt;span class="ux-checkbox__label"&gt;Notificaciones push&lt;/span&gt;
  &lt;/label&gt;

  &lt;span id="pref-indicator" class="htmx-indicator ux-spinner ux-spinner--sm"&gt;&lt;/span&gt;
&lt;/div&gt;</pre>
    </div>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Lista de checkboxes para seleccion multiple</h4>
      <pre class="ux-code-block" data-lang="html">&lt;!-- Template: product_list.html --&gt;
&lt;form hx-post="{% url 'bulk_action' %}"
      hx-target="#action-result"
      hx-indicator="#bulk-spinner"&gt;

  {% csrf_token %}

  &lt;!-- Seleccionar todos --&gt;
  &lt;label class="ux-checkbox ux-checkbox--primary" style="margin-bottom: var(--ux-space-md);"&gt;
    &lt;input type="checkbox" class="ux-checkbox__input"
           x-data
           @change="
             document.querySelectorAll('input[name=product_ids]')
               .forEach(cb =&gt; cb.checked = $el.checked)
           "&gt;
    &lt;span class="ux-checkbox__box"&gt;
      &lt;span class="ux-checkbox__checkmark"&gt;
        &lt;svg fill="none" stroke="currentColor" viewBox="0 0 24 24"&gt;
          &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/&gt;
        &lt;/svg&gt;
      &lt;/span&gt;
    &lt;/span&gt;
    &lt;span class="ux-checkbox__label"&gt;&lt;strong&gt;Seleccionar todos&lt;/strong&gt;&lt;/span&gt;
  &lt;/label&gt;

  &lt;!-- Lista de productos --&gt;
  {% for product in products %}
  &lt;label class="ux-checkbox-item"&gt;
    &lt;input type="checkbox" class="ux-checkbox__input"
           name="product_ids"
           value="{{ product.id }}"&gt;
    &lt;span class="ux-checkbox__box"&gt;
      &lt;span class="ux-checkbox__checkmark"&gt;
        &lt;svg fill="none" stroke="currentColor" viewBox="0 0 24 24"&gt;
          &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/&gt;
        &lt;/svg&gt;
      &lt;/span&gt;
    &lt;/span&gt;
    &lt;div class="ux-checkbox-item__content"&gt;
      &lt;span class="ux-checkbox-item__title"&gt;{{ product.name }}&lt;/span&gt;
      &lt;span class="ux-checkbox-item__subtitle"&gt;SKU: {{ product.sku }} - ${{ product.price }}&lt;/span&gt;
    &lt;/div&gt;
  &lt;/label&gt;
  {% endfor %}

  &lt;!-- Acciones masivas --&gt;
  &lt;div style="margin-top: var(--ux-space-lg); display: flex; gap: var(--ux-space-sm);"&gt;
    &lt;button type="submit" name="action" value="activate"
            class="ux-button ux-color-success"&gt;
      Activar seleccionados
    &lt;/button&gt;
    &lt;button type="submit" name="action" value="deactivate"
            class="ux-button ux-color-warning"&gt;
      Desactivar
    &lt;/button&gt;
    &lt;button type="submit" name="action" value="delete"
            class="ux-button ux-color-danger"
            hx-confirm="Estas seguro de eliminar los productos seleccionados?"&gt;
      Eliminar
    &lt;/button&gt;
    &lt;span id="bulk-spinner" class="htmx-indicator ux-spinner"&gt;&lt;/span&gt;
  &lt;/div&gt;
&lt;/form&gt;

&lt;div id="action-result"&gt;&lt;/div&gt;</pre>
    </div>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Vista Django que procesa los checkboxes</h4>
      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from django.contrib.auth.decorators import login_required
from .models import UserPreferences, Product

@login_required
@require_POST
def save_preference(request):
    """Guarda una preferencia individual via HTMX"""
    key = request.POST.get('key')
    # El checkbox envia su name si esta marcado, sino no envia nada
    value = key in request.POST

    # Obtener o crear preferencias del usuario
    prefs, created = UserPreferences.objects.get_or_create(user=request.user)

    # Actualizar la preferencia
    if hasattr(prefs, key):
        setattr(prefs, key, value)
        prefs.save(update_fields=[key])

    # Respuesta vacia (hx-swap="none")
    response = HttpResponse(status=204)
    response['HX-Trigger'] = 'preferencesSaved'
    return response


@login_required
@require_POST
def bulk_action(request):
    """Procesa acciones masivas sobre productos seleccionados"""
    product_ids = request.POST.getlist('product_ids')
    action = request.POST.get('action')

    if not product_ids:
        return HttpResponse(
            '&lt;div class="ux-alert ux-alert--warning"&gt;'
            'No seleccionaste ningun producto'
            '&lt;/div&gt;'
        )

    products = Product.objects.filter(
        id__in=product_ids,
        user=request.user  # Solo productos del usuario
    )
    count = products.count()

    if action == 'activate':
        products.update(is_active=True)
        message = f'{count} productos activados'
        alert_type = 'success'

    elif action == 'deactivate':
        products.update(is_active=False)
        message = f'{count} productos desactivados'
        alert_type = 'warning'

    elif action == 'delete':
        products.delete()
        message = f'{count} productos eliminados'
        alert_type = 'danger'

    else:
        return HttpResponse(status=400)

    return HttpResponse(
        f'&lt;div class="ux-alert ux-alert--{alert_type}"&gt;'
        f'{message}'
        '&lt;/div&gt;'
    )


# urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('preferences/save/', views.save_preference, name='save_preference'),
    path('products/bulk/', views.bulk_action, name='bulk_action'),
]</pre>
    </div>

    <div class="demo-box">
      <h4 style="font-weight: 600; margin-bottom: var(--ux-space-sm);">Modelo de preferencias de usuario</h4>
      <pre class="ux-code-block" data-lang="python"># models.py
from django.db import models
from django.contrib.auth import get_user_model

User = get_user_model()

class UserPreferences(models.Model):
    user = models.OneToOneField(
        User,
        on_delete=models.CASCADE,
        related_name='preferences'
    )
    email_notifications = models.BooleanField(default=True)
    push_notifications = models.BooleanField(default=False)
    dark_mode = models.BooleanField(default=False)
    newsletter = models.BooleanField(default=True)

    class Meta:
        verbose_name = 'User Preferences'
        verbose_name_plural = 'User Preferences'

    def __str__(self):
        return f'Preferences for {self.user.username}'


class Product(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    sku = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    is_active = models.BooleanField(default=True)

    def __str__(self):
        return self.name</pre>
    </div>
  </div>
