<div class="ux-scheduler"
             x-data="uxScheduler({
               view: 'day',
               startHour: 7,
               endHour: 20,
               businessStartHour: 9,
               businessEndHour: 17,
               bookings: [
                 {
                   id: 1,
                   title: 'Team Standup',
                   start: new Date(new Date().setHours(9, 0, 0, 0)),
                   end: new Date(new Date().setHours(9, 30, 0, 0)),
                   status: 'confirmed'
                 },
                 {
                   id: 2,
                   title: 'Client Meeting - Project Review',
                   start: new Date(new Date().setHours(10, 0, 0, 0)),
                   end: new Date(new Date().setHours(11, 30, 0, 0)),
                   status: 'confirmed'
                 },
                 {
                   id: 3,
                   title: 'Lunch Break',
                   start: new Date(new Date().setHours(12, 30, 0, 0)),
                   end: new Date(new Date().setHours(13, 30, 0, 0)),
                   status: 'pending'
                 },
                 {
                   id: 4,
                   title: 'Interview - Senior Developer',
                   start: new Date(new Date().setHours(14, 0, 0, 0)),
                   end: new Date(new Date().setHours(15, 0, 0, 0)),
                   status: 'confirmed'
                 },
                 {
                   id: 5,
                   title: 'Cancelled Meeting',
                   start: new Date(new Date().setHours(16, 0, 0, 0)),
                   end: new Date(new Date().setHours(16, 30, 0, 0)),
                   status: 'cancelled'
                 }
               ]
             })"
             @scheduler:bookingclick="alert('Booking: ' + $event.detail.booking.title)"
             @scheduler:slotclick="alert('Create booking at: ' + $event.detail.date.toLocaleTimeString())">
          <!-- Header -->
          <div class="ux-scheduler__header">
            <div class="ux-scheduler__nav">
              <button class="ux-scheduler__nav-btn" @click="prev()">
                <span x-html="icons.chevronLeft"></span>
              </button>
              <button class="ux-scheduler__nav-btn" @click="next()">
                <span x-html="icons.chevronRight"></span>
              </button>
              <span class="ux-scheduler__title" x-text="title"></span>
            </div>
            <button class="ux-scheduler__today-btn" @click="goToToday()">Today</button>
            <div class="ux-scheduler__view-toggle">
              <button class="ux-scheduler__view-btn"
                      :class="{ 'ux-scheduler__view-btn--active': view === 'day' }"
                      @click="setView('day')">Day</button>
              <button class="ux-scheduler__view-btn"
                      :class="{ 'ux-scheduler__view-btn--active': view === 'week' }"
                      @click="setView('week')">Week</button>
              <button class="ux-scheduler__view-btn"
                      :class="{ 'ux-scheduler__view-btn--active': view === 'month' }"
                      @click="setView('month')">Month</button>
            </div>
          </div>

          <!-- Day View -->
          <template x-if="view === 'day'">
            <div class="ux-scheduler__body" style="max-height: 500px;">
              <div class="ux-scheduler__grid">
                <!-- Time Column -->
                <div class="ux-scheduler__times">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-scheduler__time" x-text="hour.label"></div>
                  </template>
                </div>

                <!-- Day Column -->
                <div class="ux-scheduler__columns">
                  <div class="ux-scheduler__day-column">
                    <template x-for="hour in hours" :key="hour.value">
                      <div class="ux-scheduler__hour-slot"
                           :class="{
                             'ux-scheduler__hour-slot--business': showBusinessHours && hour.isBusiness,
                             'ux-scheduler__hour-slot--non-business': showBusinessHours && !hour.isBusiness
                           }"
                           @click="onSlotClick(currentDate, hour.value, null, $event)"
                           @mousedown="onDragStart(currentDate, hour.value, null, $event)"
                           @mousemove="onDragMove(currentDate, hour.value, $event)"
                           @mouseup="onDragEnd()">
                      </div>
                    </template>

                    <!-- Now Line -->
                    <div class="ux-scheduler__now-line"
                         x-show="isToday(currentDate)"
                         :style="{ top: nowLineTop + 'px' }"></div>

                    <!-- Bookings -->
                    <template x-for="booking in getBookingsForDay(currentDate)" :key="booking.id">
                      <div class="ux-scheduler__booking"
                           :class="'ux-scheduler__booking--' + (booking.status || 'primary')"
                           :style="getBookingStyle(booking)"
                           @click="onBookingClick(booking, $event)">
                        <div class="ux-scheduler__booking-title" x-text="booking.title"></div>
                        <div class="ux-scheduler__booking-time" x-text="formatTime(booking.start) + ' - ' + formatTime(booking.end)"></div>
                      </div>
                    </template>

                    <!-- Drag Preview -->
                    <div class="ux-scheduler__drag-preview"
                         x-show="isDragging && isSameDay(dragColumn, currentDate)"
                         :style="getDragPreviewStyle()"
                         x-text="getDragPreviewText()">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>

          <!-- Week View -->
          <template x-if="view === 'week'">
            <div>
              <!-- Day Headers -->
              <div class="ux-scheduler__day-headers">
                <div class="ux-scheduler__corner"></div>
                <template x-for="day in weekDays" :key="day.date.toISOString()">
                  <div class="ux-scheduler__day-header"
                       :class="{
                         'ux-scheduler__day-header--today': day.isToday,
                         'ux-scheduler__day-header--weekend': day.isWeekend,
                         'ux-scheduler__day-header--selected': day.isSelected
                       }"
                       @click="selectDay(day.date)">
                    <span class="ux-scheduler__day-name" x-text="day.name"></span>
                    <span class="ux-scheduler__day-number" x-text="day.number"></span>
                  </div>
                </template>
              </div>

              <!-- Grid -->
              <div class="ux-scheduler__body" style="max-height: 500px;">
                <div class="ux-scheduler__grid">
                  <div class="ux-scheduler__times">
                    <template x-for="hour in hours" :key="hour.value">
                      <div class="ux-scheduler__time" x-text="hour.label"></div>
                    </template>
                  </div>

                  <div class="ux-scheduler__columns">
                    <template x-for="day in weekDays" :key="'col-' + day.date.toISOString()">
                      <div class="ux-scheduler__day-column"
                           :class="{ 'ux-scheduler__day-column--weekend': day.isWeekend }">
                        <template x-for="hour in hours" :key="hour.value">
                          <div class="ux-scheduler__hour-slot"
                               :class="{
                                 'ux-scheduler__hour-slot--business': showBusinessHours && hour.isBusiness,
                                 'ux-scheduler__hour-slot--non-business': showBusinessHours && !hour.isBusiness
                               }"
                               @click="onSlotClick(day.date, hour.value, null, $event)">
                          </div>
                        </template>

                        <div class="ux-scheduler__now-line"
                             x-show="shouldShowNowLine(day.date)"
                             :style="{ top: nowLineTop + 'px' }"></div>

                        <template x-for="booking in getBookingsForDay(day.date)" :key="booking.id">
                          <div class="ux-scheduler__booking"
                               :class="'ux-scheduler__booking--' + (booking.status || 'primary')"
                               :style="getBookingStyle(booking)"
                               @click="onBookingClick(booking, $event)">
                            <div class="ux-scheduler__booking-title" x-text="booking.title"></div>
                            <div class="ux-scheduler__booking-time" x-text="formatTime(booking.start) + ' - ' + formatTime(booking.end)"></div>
                          </div>
                        </template>
                      </div>
                    </template>
                  </div>
                </div>
              </div>
            </div>
          </template>

          <!-- Month View -->
          <template x-if="view === 'month'">
            <div class="ux-scheduler__body">
              <div class="ux-scheduler__month-grid">
                <template x-for="dayName in dayNames" :key="dayName">
                  <div class="ux-scheduler__month-header" x-text="dayName"></div>
                </template>
              </div>
              <div class="ux-scheduler__month-grid">
                <template x-for="day in monthDays" :key="day.date.toISOString()">
                  <div class="ux-scheduler__month-day"
                       :class="{
                         'ux-scheduler__month-day--other': day.isOtherMonth,
                         'ux-scheduler__month-day--today': day.isToday,
                         'ux-scheduler__month-day--weekend': day.isWeekend
                       }"
                       @click="selectDay(day.date)">
                    <span class="ux-scheduler__month-day-number" x-text="day.number"></span>
                    <template x-for="booking in getBookingsForMonthDay(day.date, 2).visible" :key="booking.id">
                      <div class="ux-scheduler__month-booking"
                           :class="'ux-scheduler__month-booking--' + (booking.status || 'confirmed')"
                           @click.stop="onBookingClick(booking, $event)"
                           x-text="booking.title">
                      </div>
                    </template>
                    <div class="ux-scheduler__month-more"
                         x-show="getBookingsForMonthDay(day.date, 2).more > 0"
                         x-text="'+' + getBookingsForMonthDay(day.date, 2).more + ' more'">
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </template>
        </div>
