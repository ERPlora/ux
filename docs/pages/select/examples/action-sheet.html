<div x-data="{
       sheetOpen: false,
       value: null,
       options: [
         { value: 'new', label: 'Crear nuevo' },
         { value: 'edit', label: 'Editar' },
         { value: 'duplicate', label: 'Duplicar' },
         { value: 'archive', label: 'Archivar' },
         { value: 'delete', label: 'Eliminar', danger: true }
       ],
       get displayValue() {
         const opt = this.options.find(o => o.value === this.value);
         return opt ? opt.label : '';
       },
       openSheet() {
         this.sheetOpen = true;
         document.body.style.overflow = 'hidden';
       },
       closeSheet() {
         this.sheetOpen = false;
         document.body.style.overflow = '';
       },
       selectOption(option) {
         this.value = option.value;
         this.closeSheet();
       }
     }">
  <!-- Trigger Button -->
  <div class="ux-select">
    <span class="ux-select__label">Accion</span>
    <button type="button" class="ux-select__trigger" @click="openSheet()">
      <span class="ux-select__value" :class="{ 'ux-select__placeholder': !value }">
        <span x-text="displayValue || 'Selecciona una accion'"></span>
      </span>
      <span class="ux-select__icon">
        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </span>
    </button>
  </div>

  <!-- Action Sheet -->
  <template x-teleport="body">
    <div class="ux-select-action-sheet"
         :class="{ 'ux-select-action-sheet--open': sheetOpen }"
         x-show="sheetOpen"
         x-cloak
         @keydown.escape.window="closeSheet()">
      <div class="ux-select-action-sheet__backdrop" @click="closeSheet()"></div>
      <div class="ux-select-action-sheet__content" @click.stop>
        <div class="ux-select-action-sheet__handle">
          <div class="ux-select-action-sheet__handle-bar"></div>
        </div>
        <div class="ux-select-action-sheet__header">
          <h3 class="ux-select-action-sheet__title">Selecciona una accion</h3>
        </div>
        <div class="ux-select-action-sheet__options">
          <template x-for="option in options" :key="option.value">
            <div class="ux-select-action-sheet__option"
                 :class="{
                   'ux-select-action-sheet__option--selected': value === option.value,
                   'ux-select-action-sheet__option--danger': option.danger
                 }"
                 :style="option.danger ? 'color: var(--ux-danger)' : ''"
                 @click="selectOption(option)">
              <span x-text="option.label"></span>
              <span class="ux-select-action-sheet__option-check" x-show="value === option.value">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
              </span>
            </div>
          </template>
        </div>
      </div>
    </div>
  </template>
</div>
