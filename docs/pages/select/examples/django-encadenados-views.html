# views.py - Vista para estados
def get_states(request):
    """Retorna select de estados con trigger para ciudades."""
    country_id = request.GET.get('country')

    if not country_id:
        return HttpResponse('''
          <div class="ux-native-select">
            <label class="ux-select__label">Estado</label>
            <select name="state" class="ux-native-select__field" disabled>
              <option value="">Primero selecciona pais</option>
            </select>
          </div>
        ''')

    states = State.objects.filter(country_id=country_id)

    html = '''
      <div class="ux-native-select">
        <label class="ux-select__label">Estado</label>
        <select name="state"
                class="ux-native-select__field"
                hx-get="/get-cities/"
                hx-trigger="change"
                hx-target="#city-container">
          <option value="">Selecciona estado</option>
    '''
    for state in states:
        html += f'<option value="{state.id}">{state.name}</option>'
    html += '''
        </select>
      </div>
    '''
    return HttpResponse(html)
