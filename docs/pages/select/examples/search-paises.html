<div class="ux-search-select"
     x-data="uxSearchSelect({
       options: [
         { value: 'AR', label: 'Argentina', searchText: 'buenos aires latinoamerica' },
         { value: 'AU', label: 'Australia', searchText: 'oceania sydney' },
         { value: 'BR', label: 'Brasil', searchText: 'brazil sao paulo latinoamerica' },
         { value: 'CA', label: 'Canada', searchText: 'toronto america norte' },
         { value: 'CL', label: 'Chile', searchText: 'santiago latinoamerica' },
         { value: 'CN', label: 'China', searchText: 'beijing asia' },
         { value: 'CO', label: 'Colombia', searchText: 'bogota latinoamerica' },
         { value: 'DE', label: 'Alemania', searchText: 'germany berlin europa' },
         { value: 'ES', label: 'Espana', searchText: 'spain madrid europa' },
         { value: 'FR', label: 'Francia', searchText: 'france paris europa' },
         { value: 'GB', label: 'Reino Unido', searchText: 'uk united kingdom london europa' },
         { value: 'IT', label: 'Italia', searchText: 'italy roma europa' },
         { value: 'JP', label: 'Japon', searchText: 'japan tokyo asia' },
         { value: 'MX', label: 'Mexico', searchText: 'cdmx latinoamerica' },
         { value: 'NL', label: 'Paises Bajos', searchText: 'netherlands amsterdam holanda europa' },
         { value: 'PE', label: 'Peru', searchText: 'lima latinoamerica' },
         { value: 'PT', label: 'Portugal', searchText: 'lisboa europa' },
         { value: 'US', label: 'Estados Unidos', searchText: 'usa america washington' },
         { value: 'UY', label: 'Uruguay', searchText: 'montevideo latinoamerica' },
         { value: 'VE', label: 'Venezuela', searchText: 'caracas latinoamerica' }
       ],
       placeholder: 'Buscar pais...',
       minChars: 1
     })"
     :class="{
       'ux-search-select--open': shouldShowDropdown,
       'ux-search-select--has-value': hasValue
     }">
  <label class="ux-search-select__label">Pais</label>
  <div class="ux-search-select__wrapper">
    <div class="ux-search-select__input-wrapper">
      <span class="ux-search-select__icon">
        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
      </span>
      <input type="text"
             class="ux-search-select__input"
             x-ref="input"
             x-model="query"
             @input="handleInput()"
             @focus="handleFocus()"
             @blur="handleBlur()"
             @keydown="handleKeydown($event)"
             :placeholder="placeholder"
             autocomplete="off">
      <button type="button"
              class="ux-search-select__clear"
              @click="clear()"
              x-show="hasValue || query"
              aria-label="Clear">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <div class="ux-search-select__dropdown" x-ref="dropdown" x-show="shouldShowDropdown">
      <template x-if="filteredOptions.length === 0">
        <div class="ux-search-select__empty" x-text="emptyText"></div>
      </template>
      <template x-for="(option, index) in filteredOptions" :key="option.value">
        <div class="ux-search-select__option"
             :class="{
               'ux-search-select__option--selected': isSelected(option),
               'ux-search-select__option--focused': isFocused(index)
             }"
             @click="selectOption(option)"
             @mouseenter="focusedIndex = index">
          <span class="ux-search-select__option-label" x-html="highlightMatch(option.label)"></span>
          <span class="ux-search-select__option-check" x-show="isSelected(option)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </span>
        </div>
      </template>
    </div>
  </div>
</div>
