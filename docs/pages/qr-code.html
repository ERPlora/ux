<style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 {
      font-size: var(--ux-font-size-lg);
      font-weight: 600;
      margin-bottom: var(--ux-space-md);
      color: var(--ux-text);
    }
    .demo-section p {
      font-size: var(--ux-font-size-md);
      color: var(--ux-text-secondary);
      margin-bottom: var(--ux-space-md);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: var(--ux-border-radius-lg);
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
      display: flex;
      flex-wrap: wrap;
      gap: var(--ux-space-lg);
      align-items: flex-start;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: var(--ux-space-md);
    }
    th, td {
      padding: var(--ux-space-sm) var(--ux-space-md);
      text-align: left;
      border-bottom: 1px solid var(--ux-border-color);
    }
    th {
      font-weight: 600;
      color: var(--ux-text);
    }
    td {
      color: var(--ux-text-secondary);
    }
    td code {
      background: var(--ux-gray-100);
      padding: 2px 6px;
      border-radius: var(--ux-border-radius-sm);
      font-size: var(--ux-font-size-sm);
    }
  </style>

<h1 style="margin-bottom: var(--ux-space-sm);">QR Code</h1>
    <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-xl);">Generador de codigos QR con opciones personalizables.</p>

    <!-- Basic QR Code -->
    <section class="component-section">
      <h3>QR Code Basico</h3>
      <p>Genera codigos QR simples con la clase <code>.ux-qr</code> y el componente Alpine.js.</p>
      <ux-playground src="examples/qr-code/qr-code-basico.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'https://example.com',
               size: 200
             })">
          <div class="ux-qr__wrapper">
            <div class="ux-qr__loading" x-show="loading" :style="{ width: size + 'px', height: size + 'px' }">
              <div class="ux-qr__spinner"></div>
            </div>
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading && !error"></canvas>
            <div class="ux-qr__error" x-show="error" :style="{ width: size + 'px', height: size + 'px' }">
              <span x-html="icons.error" class="ux-qr__error-icon"></span>
              <span class="ux-qr__error-text" x-text="error"></span>
            </div>
          </div>
        </div>

        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'Hello World!',
               size: 150
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Texto simple</span>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div class="ux-qr"
     x-data="uxQRCode({
       value: 'https://example.com',
       size: 200
     })">
  <div class="ux-qr__wrapper">
    <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
  </div>
</div></pre>
    </section>

    <!-- With Actions -->
    <section class="component-section">
      <h3>Con Acciones (Descargar / Copiar)</h3>
      <p>Usa los metodos <code>download()</code> y <code>copyToClipboard()</code> para agregar funcionalidad.</p>
      <ux-playground src="examples/qr-code/con-acciones-descargar-copiar.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'https://github.com',
               size: 200
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <div class="ux-qr__actions">
            <button class="ux-qr__action" @click="download('github-qr')">
              <span x-html="icons.download"></span>
              Descargar
            </button>
            <button class="ux-qr__action" @click="copyToClipboard()">
              <span x-html="icons.copy"></span>
              Copiar
            </button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div class="ux-qr" x-data="uxQRCode({ value: 'Hello' })">
  <div class="ux-qr__wrapper">
    <canvas x-ref="canvas" class="ux-qr__canvas"></canvas>
  </div>
  <div class="ux-qr__actions">
    <button class="ux-qr__action" @click="download('my-qr')">Descargar</button>
    <button class="ux-qr__action" @click="copyToClipboard()">Copiar</button>
  </div>
</div></pre>
    </section>

    <!-- With Border -->
    <section class="component-section">
      <h3>Con Borde</h3>
      <p>Usa la clase <code>.ux-qr--bordered</code> para agregar un borde elegante.</p>
      <ux-playground src="examples/qr-code/con-borde.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'https://example.com/product/12345',
               size: 180
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Producto #12345</span>
        </div>

        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'WIFI:T:WPA;S:MyNetwork;P:password123;;',
               size: 180
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">WiFi: MyNetwork</span>
        </div>
      </div>
    </section>

    <!-- Sizes -->
    <section class="component-section">
      <h3>Tamanos</h3>
      <p>Controla el tamano con la opcion <code>size</code> en pixeles.</p>
      <ux-playground src="examples/qr-code/tamanos.html"></ux-playground>
      <div class="demo-box" style="align-items: flex-end;">
        <div class="ux-qr ux-qr--sm"
             x-data="uxQRCode({
               value: 'Small',
               size: 100
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Small (100px)</span>
        </div>

        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'Default size',
               size: 200
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Default (200px)</span>
        </div>

        <div class="ux-qr ux-qr--lg"
             x-data="uxQRCode({
               value: 'Large QR',
               size: 250
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Large (250px)</span>
        </div>
      </div>
    </section>

    <!-- Custom Colors -->
    <section class="component-section">
      <h3>Colores Personalizados</h3>
      <p>Usa las opciones <code>foreground</code> y <code>background</code> para personalizar colores.</p>
      <ux-playground src="examples/qr-code/colores-personalizados.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'Blue QR Code',
               size: 150,
               foreground: '#2563eb',
               background: '#eff6ff'
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Azul</span>
        </div>

        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'Green QR Code',
               size: 150,
               foreground: '#16a34a',
               background: '#f0fdf4'
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Verde</span>
        </div>

        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'Dark theme',
               size: 150,
               foreground: '#ffffff',
               background: '#1f2937'
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Oscuro</span>
        </div>

        <div class="ux-qr"
             x-data="uxQRCode({
               value: 'Purple gradient feel',
               size: 150,
               foreground: '#7c3aed',
               background: '#faf5ff'
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Purpura</span>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div x-data="uxQRCode({
       value: 'Custom colors',
       foreground: '#2563eb',
       background: '#eff6ff'
     })">
  ...
</div></pre>
    </section>

    <!-- Common Use Cases -->
    <section class="component-section">
      <h3>Casos de Uso Comunes</h3>
      <p>Formatos de datos soportados: URLs, emails, telefonos, WiFi, vCards, etc.</p>
      <ux-playground src="examples/qr-code/casos-de-uso-comunes.html"></ux-playground>
      <div class="demo-box">
        <!-- URL -->
        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'https://example.com',
               size: 130
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">URL</span>
        </div>

        <!-- Email -->
        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'mailto:hello@example.com?subject=Hello',
               size: 130
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Email</span>
        </div>

        <!-- Phone -->
        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'tel:+34612345678',
               size: 130
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">Telefono</span>
        </div>

        <!-- WiFi -->
        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'WIFI:T:WPA;S:NetworkName;P:Password123;;',
               size: 130
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">WiFi</span>
        </div>

        <!-- vCard -->
        <div class="ux-qr ux-qr--bordered"
             x-data="uxQRCode({
               value: 'BEGIN:VCARD\nVERSION:3.0\nN:Doe;John\nTEL:+34612345678\nEMAIL:john@example.com\nEND:VCARD',
               size: 130
             })">
          <div class="ux-qr__wrapper">
            <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
          </div>
          <span class="ux-qr__label">vCard</span>
        </div>
      </div>
    </section>

    <!-- HTMX + Django -->
    <section class="component-section">
      <h3>HTMX + Django</h3>
      <p>Genera codigos QR dinamicamente desde el servidor con Django y HTMX.</p>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Vista Django (views.py)</h4>
      <pre class="ux-code-block" data-lang="python">from django.http import JsonResponse
from django.shortcuts import render

def qr_code_view(request, product_id):
    """Genera datos para QR de producto."""
    product = Product.objects.get(id=product_id)
    return render(request, 'partials/qr_code.html', {
        'qr_value': f'https://example.com/product/{product.id}',
        'qr_label': f'Producto #{product.id}',
        'qr_size': 200
    })

def qr_wifi_view(request):
    """Genera QR para WiFi con datos del formulario."""
    ssid = request.GET.get('ssid', '')
    password = request.GET.get('password', '')
    security = request.GET.get('security', 'WPA')

    wifi_string = f'WIFI:T:{security};S:{ssid};P:{password};;'

    return render(request, 'partials/qr_code.html', {
        'qr_value': wifi_string,
        'qr_label': f'WiFi: {ssid}',
        'qr_size': 180
    })</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Template Parcial (partials/qr_code.html)</h4>
      <pre class="ux-code-block" data-lang="html"><div class="ux-qr ux-qr--bordered"
     x-data="uxQRCode({
       value: '{{ qr_value|escapejs }}',
       size: {{ qr_size|default:200 }}
     })">
  <div class="ux-qr__wrapper">
    <canvas x-ref="canvas" class="ux-qr__canvas" x-show="!loading"></canvas>
  </div>
  {% if qr_label %}
  <span class="ux-qr__label">{{ qr_label }}</span>
  {% endif %}
  <div class="ux-qr__actions">
    <button class="ux-qr__action" @click="download('{{ qr_label|slugify }}')">
      <span x-html="icons.download"></span>
      Descargar
    </button>
  </div>
</div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Uso con HTMX - Cargar QR dinamico</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Boton que carga QR de producto -->
<button class="ux-button"
        hx-get="/api/product/{{ product.id }}/qr/"
        hx-target="#qr-container"
        hx-swap="innerHTML">
  Ver QR del Producto
</button>

<div id="qr-container"></div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Uso con HTMX - Generador de QR WiFi</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Formulario que genera QR WiFi -->
<form hx-get="/api/qr/wifi/"
      hx-target="#wifi-qr-result"
      hx-trigger="submit">
  <div class="ux-input">
    <input type="text" name="ssid" required>
    <label>Nombre de Red (SSID)</label>
  </div>
  <div class="ux-input">
    <input type="password" name="password">
    <label>Contrasena</label>
  </div>
  <select name="security" class="ux-select">
    <option value="WPA">WPA/WPA2</option>
    <option value="WEP">WEP</option>
    <option value="nopass">Sin contrasena</option>
  </select>
  <button type="submit" class="ux-button ux-color-primary">
    Generar QR WiFi
  </button>
</form>

<div id="wifi-qr-result"></div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">URLs Django (urls.py)</h4>
      <pre class="ux-code-block" data-lang="python">from django.urls import path
from . import views

urlpatterns = [
    path('api/product/<int:product_id>/qr/', views.qr_code_view, name='product_qr'),
    path('api/qr/wifi/', views.qr_wifi_view, name='wifi_qr'),
]</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">QR con vCard desde Django</h4>
      <pre class="ux-code-block" data-lang="python">def qr_vcard_view(request, contact_id):
    """Genera QR vCard para contacto."""
    contact = Contact.objects.get(id=contact_id)

    vcard = f"""BEGIN:VCARD
VERSION:3.0
N:{contact.last_name};{contact.first_name}
FN:{contact.first_name} {contact.last_name}
TEL:{contact.phone}
EMAIL:{contact.email}
ORG:{contact.company}
END:VCARD"""

    return render(request, 'partials/qr_code.html', {
        'qr_value': vcard,
        'qr_label': f'{contact.first_name} {contact.last_name}',
        'qr_size': 200
    })</pre>
    </section>

    <!-- Options -->
    <section class="component-section">
      <h3>Opciones</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Opcion</th>
              <th>Tipo</th>
              <th>Default</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>value</code></td><td>String</td><td>''</td><td>Datos a codificar en el QR</td></tr>
            <tr><td><code>size</code></td><td>Number</td><td>200</td><td>Tamano en pixeles</td></tr>
            <tr><td><code>errorCorrection</code></td><td>String</td><td>'M'</td><td>'L' (7%), 'M' (15%), 'Q' (25%), 'H' (30%)</td></tr>
            <tr><td><code>foreground</code></td><td>String</td><td>'#000000'</td><td>Color de los modulos</td></tr>
            <tr><td><code>background</code></td><td>String</td><td>'#FFFFFF'</td><td>Color de fondo</td></tr>
            <tr><td><code>margin</code></td><td>Number</td><td>4</td><td>Margen en pixeles</td></tr>
            <tr><td><code>logo</code></td><td>String</td><td>null</td><td>URL del logo central</td></tr>
            <tr><td><code>logoSize</code></td><td>Number</td><td>0.2</td><td>Tamano del logo (0-1, % del QR)</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Methods -->
    <section class="component-section">
      <h3>Metodos</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Metodo</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>generate()</code></td><td>Regenera el codigo QR</td></tr>
            <tr><td><code>setValue(value)</code></td><td>Cambia el valor y regenera</td></tr>
            <tr><td><code>download(filename)</code></td><td>Descarga como PNG</td></tr>
            <tr><td><code>copyToClipboard()</code></td><td>Copia la imagen al portapapeles</td></tr>
            <tr><td><code>getDataURL(type, quality)</code></td><td>Obtiene data URL de la imagen</td></tr>
            <tr><td><code>getBlob(type, quality)</code></td><td>Obtiene Blob de la imagen</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Events -->
    <section class="component-section">
      <h3>Eventos</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Evento</th>
              <th>Detalle</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>qr:generated</code></td><td>{ value }</td><td>QR generado correctamente</td></tr>
            <tr><td><code>qr:download</code></td><td>{ filename }</td><td>QR descargado</td></tr>
            <tr><td><code>qr:copied</code></td><td>-</td><td>QR copiado al portapapeles</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Data Formats -->
    <section class="component-section">
      <h3>Formatos de Datos Comunes</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Formato</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>URL</td><td><code>https://example.com</code></td></tr>
            <tr><td>Email</td><td><code>mailto:email@example.com?subject=Subject&body=Body</code></td></tr>
            <tr><td>Telefono</td><td><code>tel:+34612345678</code></td></tr>
            <tr><td>SMS</td><td><code>sms:+34612345678?body=Message</code></td></tr>
            <tr><td>WiFi</td><td><code>WIFI:T:WPA;S:NetworkName;P:Password;;</code></td></tr>
            <tr><td>vCard</td><td><code>BEGIN:VCARD\nVERSION:3.0\nN:Last;First\n...</code></td></tr>
            <tr><td>Geo</td><td><code>geo:40.4168,-3.7038</code></td></tr>
            <tr><td>Evento</td><td><code>BEGIN:VEVENT\nSUMMARY:Event\n...</code></td></tr>
          </tbody>
        </table>
      </div>
    </section>