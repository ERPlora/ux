# views.py
from django.views.generic import DetailView

class BreadcrumbMixin:
    def get_breadcrumbs(self):
        return [{'title': 'Inicio', 'url': '/'}]

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['breadcrumbs'] = self.get_breadcrumbs()
        return context

class ProductDetailView(BreadcrumbMixin, DetailView):
    model = Product
    template_name = 'products/detail.html'

    def get_breadcrumbs(self):
        product = self.get_object()
        return [
            {'title': 'Inicio', 'url': '/'},
            {'title': 'Productos', 'url': '/productos/'},
            {'title': product.category.name, 'url': product.category.get_absolute_url()},
            {'title': product.name, 'url': product.get_absolute_url()},
        ]
