<h4 style="margin-bottom: var(--ux-space-md); font-weight: 600;">Vista con Busqueda (views.py)</h4>
      <pre class="ux-code-block" data-lang="python">def virtual_list_items(request):
    """Endpoint con soporte para busqueda."""
    page = int(request.GET.get('page', 1))
    search = request.GET.get('search', '').strip()
    per_page = 20

    users = User.objects.all()

    # Aplicar filtro de busqueda
    if search:
        users = users.filter(
            Q(first_name__icontains=search) |
            Q(last_name__icontains=search) |
            Q(email__icontains=search)
        )

    users = users.order_by('-created_at')
    paginator = Paginator(users, per_page)
    page_obj = paginator.get_page(page)

    items = [{
        'id': user.id,
        'name': user.get_full_name(),
        'email': user.email,
        'initials': user.get_initials(),
        'date': user.created_at.strftime('%d/%m/%Y')
    } for user in page_obj]

    # Siempre usar 'items-loaded' cuando hay busqueda para reemplazar lista
    event_name = 'items-loaded' if (page == 1 or search) else 'items-appended'

    return HttpResponse(
        f'''<script>
            window.dispatchEvent(new CustomEvent('{event_name}', {{
                detail: {{
                    items: {json.dumps(items)},
                    hasMore: {'true' if page_obj.has_next() else 'false'},
                    total: {paginator.count}
                }}
            }}));
        </script>''',
        content_type='text/html'
    )</pre>
