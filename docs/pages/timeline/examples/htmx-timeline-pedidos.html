<!-- Timeline de seguimiento de pedido -->
<div class="ux-timeline ux-timeline--vertical"
     hx-get="/orders/{{ order.id }}/timeline/"
     hx-trigger="load, every 30s"
     hx-swap="innerHTML">

  {% for event in order.events.all %}
  <div class="ux-timeline__item {% if forloop.first %}ux-timeline__item--active{% endif %}">
    <div class="ux-timeline__marker
                {% if event.completed %}ux-timeline__marker--success{% endif %}
                {% if forloop.first and not event.completed %}ux-timeline__marker--primary{% endif %}">
    </div>
    <div class="ux-timeline__content">
      <div class="ux-timeline__header">
        <h4 class="ux-timeline__title">{{ event.title }}</h4>
        <span class="ux-timeline__time">
          {% if event.completed_at %}
            {{ event.completed_at|date:"d M, H:i" }}
          {% else %}
            Pendiente
          {% endif %}
        </span>
      </div>
      {% if event.description %}
      <div class="ux-timeline__body">
        <p>{{ event.description }}</p>
      </div>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
