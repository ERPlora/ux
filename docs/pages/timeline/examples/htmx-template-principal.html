<!-- templates/activity/timeline.html -->
<div class="ux-timeline ux-timeline--vertical ux-timeline--activity"
     hx-ext="sse"
     sse-connect="/activity/stream/"
     sse-swap="message"
     hx-swap="afterbegin">

  {% for date, activities in grouped_activities.items %}
  <div class="ux-timeline__group">
    <div class="ux-timeline__group-title">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2"/>
        <path d="M16 2v4M8 2v4M3 10h18"/>
      </svg>
      {{ date }}
    </div>

    {% for activity in activities %}
    {% include "activity/_timeline_item.html" %}
    {% endfor %}
  </div>
  {% endfor %}

  <!-- Boton para cargar mas -->
  <div class="ux-timeline__item"
       hx-get="/activity/partial/?offset=20"
       hx-trigger="revealed"
       hx-swap="outerHTML">
    <div class="ux-timeline__marker ux-timeline__marker--dot"></div>
    <div class="ux-timeline__content">
      <span class="ux-spinner ux-spinner--sm"></span>
      Cargando mas actividad...
    </div>
  </div>
</div>
