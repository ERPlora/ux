<style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); color: var(--ux-text); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); }
    .api-table { width: 100%; border-collapse: collapse; font-size: var(--ux-font-size-md); }
    .api-table th { text-align: left; padding: var(--ux-space-sm) var(--ux-space-md); background: var(--ux-surface-secondary); font-weight: 600; border-bottom: 1px solid var(--ux-border-color); }
    .api-table td { padding: var(--ux-space-sm) var(--ux-space-md); border-bottom: 1px solid var(--ux-border-color); }
    .api-table code { background: var(--ux-surface-secondary); padding: 2px 6px; border-radius: 4px; font-size: var(--ux-font-size-md); }
    .shortcut-demo { display: flex; align-items: center; gap: var(--ux-space-md); padding: var(--ux-space-md); background: var(--ux-surface); border-radius: var(--ux-border-radius); margin-bottom: var(--ux-space-sm); }
    .shortcut-demo__action { flex: 1; }
    .shortcut-demo__keys { display: flex; gap: var(--ux-space-xs); }
  </style>

<div x-data="uxKeyboard()">
    <h2 style="margin-bottom: var(--ux-space-lg);">Keyboard Navigation</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-xl);">Sistema unificado de navegacion por teclado y atajos. Incluye manejo de focus, roving tabindex, focus trap y registro de shortcuts globales.</p>

    <!-- Keyboard Badges -->
    <section class="component-section">
      <h3>Keyboard Badges</h3>
      <p>Usa <code>.ux-kbd</code> para mostrar teclas y combinaciones de teclado.</p>

      <ux-playground src="examples/keyboard/keyboard-badges-1.html"></ux-playground>
      <div class="demo-box" style="display: flex; flex-wrap: wrap; gap: var(--ux-space-lg); align-items: center;">
        <kbd class="ux-kbd">Esc</kbd>
        <kbd class="ux-kbd">Tab</kbd>
        <kbd class="ux-kbd">Enter</kbd>
        <kbd class="ux-kbd">Space</kbd>
        <kbd class="ux-kbd">↑</kbd>
        <kbd class="ux-kbd">↓</kbd>
        <kbd class="ux-kbd">←</kbd>
        <kbd class="ux-kbd">→</kbd>

        <span class="ux-kbd-combo">
          <kbd class="ux-kbd">⌘</kbd>
          <span class="ux-kbd-combo__separator">+</span>
          <kbd class="ux-kbd">K</kbd>
        </span>

        <span class="ux-kbd-combo">
          <kbd class="ux-kbd">Ctrl</kbd>
          <span class="ux-kbd-combo__separator">+</span>
          <kbd class="ux-kbd">Shift</kbd>
          <span class="ux-kbd-combo__separator">+</span>
          <kbd class="ux-kbd">P</kbd>
        </span>
      </div>

      <ux-playground src="examples/keyboard/keyboard-badges.html"></ux-playground>
      <div class="demo-box" style="display: flex; flex-wrap: wrap; gap: var(--ux-space-lg); align-items: center;">
        <span>Sizes:</span>
        <kbd class="ux-kbd ux-kbd--sm">Esc</kbd>
        <kbd class="ux-kbd">Esc</kbd>
        <kbd class="ux-kbd ux-kbd--lg">Esc</kbd>
      </div>

      <pre class="ux-code-block" data-lang="html"><!-- Single key -->
<kbd class="ux-kbd">Esc</kbd>
<kbd class="ux-kbd">Tab</kbd>
<kbd class="ux-kbd">Enter</kbd>

<!-- Key combo -->
<span class="ux-kbd-combo">
  <kbd class="ux-kbd">⌘</kbd>
  <span class="ux-kbd-combo__separator">+</span>
  <kbd class="ux-kbd">K</kbd>
</span>

<!-- Sizes -->
<kbd class="ux-kbd ux-kbd--sm">Esc</kbd>
<kbd class="ux-kbd">Esc</kbd>
<kbd class="ux-kbd ux-kbd--lg">Esc</kbd>

<!-- Glass variant -->
<kbd class="ux-kbd ux-kbd--glass">Esc</kbd></pre>
    </section>

    <!-- Global Shortcuts -->
    <section class="component-section">
      <h3>Global Shortcuts</h3>
      <p>Registra atajos de teclado globales con <code>UXKeyboard.register()</code>.</p>

      <ux-playground src="examples/keyboard/global-shortcuts.html"></ux-playground>
      <div class="demo-box" x-data="{ log: [] }">
        <p style="margin-bottom: var(--ux-space-md);">Prueba estos atajos (mira la consola):</p>

        <div class="shortcut-demo">
          <div class="shortcut-demo__action">Buscar</div>
          <div class="shortcut-demo__keys">
            <kbd class="ux-kbd">⌘</kbd>
            <kbd class="ux-kbd">K</kbd>
          </div>
        </div>

        <div class="shortcut-demo">
          <div class="shortcut-demo__action">Guardar</div>
          <div class="shortcut-demo__keys">
            <kbd class="ux-kbd">⌘</kbd>
            <kbd class="ux-kbd">S</kbd>
          </div>
        </div>

        <div class="shortcut-demo">
          <div class="shortcut-demo__action">Nuevo</div>
          <div class="shortcut-demo__keys">
            <kbd class="ux-kbd">⌘</kbd>
            <kbd class="ux-kbd">N</kbd>
          </div>
        </div>

        <div class="shortcut-demo">
          <div class="shortcut-demo__action">Ayuda de atajos</div>
          <div class="shortcut-demo__keys">
            <kbd class="ux-kbd">Shift</kbd>
            <kbd class="ux-kbd">?</kbd>
          </div>
        </div>

        <template x-if="log.length > 0">
          <div style="margin-top: var(--ux-space-md); padding: var(--ux-space-md); background: var(--ux-surface-tertiary); border-radius: var(--ux-border-radius); font-family: monospace; font-size: var(--ux-font-size-sm);">
            <template x-for="item in log.slice(-5)" :key="item.time">
              <div x-text="item.text"></div>
            </template>
          </div>
        </template>
      </div>

      <pre class="ux-code-block" data-lang="javascript">// Registrar un shortcut
UXKeyboard.register('mod+k', () => {
  openSearch();
}, {
  description: 'Open search',
  preventDefault: true
});

// mod = ⌘ en Mac, Ctrl en Windows/Linux

// Registrar con scope (para modales)
UXKeyboard.register('enter', () => {
  submitForm();
}, {
  scope: 'modal',
  description: 'Submit form'
});

// Permitir en inputs
UXKeyboard.register('mod+enter', () => {
  submitForm();
}, {
  allowInInput: true,
  description: 'Submit from anywhere'
});

// Desregistrar
const unregister = UXKeyboard.register('mod+s', save);
unregister(); // Eliminar shortcut</pre>
    </section>

    <!-- Scopes -->
    <section class="component-section">
      <h3>Shortcut Scopes</h3>
      <p>Los scopes permiten tener diferentes atajos segun el contexto (modal abierto, menu activo, etc.).</p>

      <pre class="ux-code-block" data-lang="javascript">// Cuando se abre un modal
function openModal() {
  showModal();
  UXKeyboard.pushScope('modal');

  // Registrar atajos especificos del modal
  UXKeyboard.register('enter', submitModal, { scope: 'modal' });
  UXKeyboard.register('escape', closeModal, { scope: 'modal' });
}

// Cuando se cierra
function closeModal() {
  hideModal();
  UXKeyboard.popScope(); // Vuelve al scope anterior
}

// Los atajos globales siguen funcionando si no hay conflicto</pre>
    </section>

    <!-- Roving Tabindex -->
    <section class="component-section">
      <h3>Roving Tabindex</h3>
      <p>Para navegacion con flechas en listas, menus y tabs. Solo un elemento tiene <code>tabindex="0"</code> a la vez.</p>

      <ux-playground src="examples/keyboard/roving-tabindex-1.html"></ux-playground>
      <div class="demo-box">
        <p style="margin-bottom: var(--ux-space-md);">Usa Tab para entrar, flechas para navegar:</p>

        <div x-data x-init="UXRovingTabindex.init($el, { orientation: 'horizontal' })"
             role="toolbar"
             aria-label="Formatting options"
             style="display: flex; gap: var(--ux-space-xs);">
          <button class="ux-button ux-button--sm">Bold</button>
          <button class="ux-button ux-button--sm">Italic</button>
          <button class="ux-button ux-button--sm">Underline</button>
          <button class="ux-button ux-button--sm">Strike</button>
        </div>
      </div>

      <ux-playground src="examples/keyboard/roving-tabindex.html"></ux-playground>
      <div class="demo-box">
        <p style="margin-bottom: var(--ux-space-md);">Lista vertical:</p>

        <ul class="ux-list ux-list--inset"
            x-data
            x-init="UXRovingTabindex.init($el, {
              selector: '.ux-list__item',
              orientation: 'vertical',
              onSelect: (el) => el.click()
            })"
            role="listbox"
            style="max-width: 300px;">
          <li class="ux-list__item" role="option">Opcion 1</li>
          <li class="ux-list__item" role="option">Opcion 2</li>
          <li class="ux-list__item" role="option">Opcion 3</li>
          <li class="ux-list__item" role="option">Opcion 4</li>
        </ul>
      </div>

      <pre class="ux-code-block" data-lang="javascript">// Inicializar roving tabindex
const roving = UXRovingTabindex.init(container, {
  // Selector de items navegables
  selector: '[role="option"], button',

  // Direccion: 'horizontal', 'vertical', 'both'
  orientation: 'vertical',

  // Envolver al llegar al final
  wrap: true,

  // Callback al seleccionar con Enter/Space
  onSelect: (element, index) => {
    element.click();
  }
});

// Refrescar despues de cambios en el DOM
roving.refresh();

// Limpiar
roving.destroy();</pre>

      <pre class="ux-code-block" data-lang="html"><!-- Toolbar horizontal -->
<div role="toolbar"
     x-data
     x-init="UXRovingTabindex.init($el, { orientation: 'horizontal' })">
  <button>Bold</button>
  <button>Italic</button>
  <button>Underline</button>
</div>

<!-- Menu vertical -->
<ul role="menu"
    x-data
    x-init="UXRovingTabindex.init($el, {
      selector: '[role=menuitem]',
      orientation: 'vertical'
    })">
  <li role="menuitem" tabindex="0">Item 1</li>
  <li role="menuitem" tabindex="-1">Item 2</li>
  <li role="menuitem" tabindex="-1">Item 3</li>
</ul></pre>
    </section>

    <!-- Focus Trap -->
    <section class="component-section">
      <h3>Focus Trap</h3>
      <p>Mantiene el foco dentro de un contenedor (modales, dialogs). Incluido en <code>ux-core.js</code> como <code>UX.trapFocus()</code>.</p>

      <ux-playground src="examples/keyboard/focus-trap.html"></ux-playground>
      <div class="demo-box" x-data="{ showTrap: false }">
        <button class="ux-button ux-color-primary" @click="showTrap = true">
          Abrir Focus Trap Demo
        </button>

        <div x-show="showTrap"
             x-trap="showTrap"
             style="margin-top: var(--ux-space-md); padding: var(--ux-space-lg); background: var(--ux-surface); border: 2px solid var(--ux-primary); border-radius: var(--ux-border-radius-lg);">
          <p style="margin-bottom: var(--ux-space-md);">El foco esta atrapado aqui. Tab solo cicla entre estos elementos:</p>

          <div class="ux-input-group" style="margin-bottom: var(--ux-space-md);">
            <input type="text" class="ux-input" placeholder="Input 1">
          </div>

          <div class="ux-input-group" style="margin-bottom: var(--ux-space-md);">
            <input type="text" class="ux-input" placeholder="Input 2">
          </div>

          <div style="display: flex; gap: var(--ux-space-sm);">
            <button class="ux-button ux-button--outline" @click="showTrap = false">Cancelar</button>
            <button class="ux-button ux-color-primary" @click="showTrap = false">Aceptar</button>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="javascript">// Usando UXFocusTrap directamente
const trap = UXFocusTrap.create(modalElement, {
  // Elemento a enfocar inicialmente (selector)
  initialFocus: '.ux-modal__content input',

  // Devolver foco al cerrar
  returnFocus: true,

  // Escape cierra el trap
  escapeDeactivates: true,

  // Callback cuando se presiona Escape
  onEscape: () => closeModal()
});

// Desactivar trap
trap.deactivate();

// Usando UX.trapFocus (de ux-core.js)
const release = UX.trapFocus(modalElement);
release(); // Liberar</pre>

      <pre class="ux-code-block" data-lang="html"><!-- Con Alpine.js x-trap -->
<div x-data="{ open: false }">
  <button @click="open = true">Open</button>

  <div x-show="open" x-trap="open">
    <!-- Focus trapped here -->
    <input type="text">
    <button @click="open = false">Close</button>
  </div>
</div></pre>
    </section>

    <!-- Skip Link -->
    <section class="component-section">
      <h3>Skip to Content Link</h3>
      <p>Link de accesibilidad que aparece al presionar Tab. Se crea automaticamente si existe <code>&lt;main&gt;</code>.</p>

      <ux-playground src="examples/keyboard/skip-to-content-link.html"></ux-playground>
      <div class="demo-box">
        <p>Presiona <kbd class="ux-kbd">Tab</kbd> en esta pagina para ver el skip link en la esquina superior izquierda.</p>
      </div>

      <pre class="ux-code-block" data-lang="html"><!-- Se crea automaticamente, pero puedes agregarlo manualmente -->
<a href="#main-content" class="ux-skip-link">
  Skip to main content
</a>

<nav>...</nav>

<main id="main-content">
  ...
</main></pre>
    </section>

    <!-- Component Integration -->
    <section class="component-section">
      <h3>Keyboard en Componentes UX</h3>
      <p>Todos los componentes interactivos de UX soportan navegacion por teclado:</p>

      <div class="ux-card" style="margin-bottom: var(--ux-space-lg);">
        <table class="api-table">
          <thead>
            <tr>
              <th>Componente</th>
              <th>Teclas</th>
              <th>Accion</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Modal / Sheet / Alert</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Esc</kbd></td>
              <td>Cerrar</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Tab</kbd></td>
              <td>Navegar elementos (trapped)</td>
            </tr>
            <tr>
              <td><strong>Tabs</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">←</kbd> <kbd class="ux-kbd ux-kbd--sm">→</kbd></td>
              <td>Cambiar tab</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Home</kbd> <kbd class="ux-kbd ux-kbd--sm">End</kbd></td>
              <td>Primer/ultimo tab</td>
            </tr>
            <tr>
              <td><strong>Dropdown / Select / Menu</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">↓</kbd> <kbd class="ux-kbd ux-kbd--sm">↑</kbd></td>
              <td>Navegar opciones</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Enter</kbd> <kbd class="ux-kbd ux-kbd--sm">Space</kbd></td>
              <td>Seleccionar</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Esc</kbd></td>
              <td>Cerrar</td>
            </tr>
            <tr>
              <td><strong>Accordion</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">↓</kbd> <kbd class="ux-kbd ux-kbd--sm">↑</kbd></td>
              <td>Navegar headers</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Enter</kbd> <kbd class="ux-kbd ux-kbd--sm">Space</kbd></td>
              <td>Expandir/colapsar</td>
            </tr>
            <tr>
              <td><strong>Datatable</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">↓</kbd> <kbd class="ux-kbd ux-kbd--sm">↑</kbd></td>
              <td>Navegar filas</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Enter</kbd></td>
              <td>Seleccionar fila</td>
            </tr>
            <tr>
              <td><strong>Carousel</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">←</kbd> <kbd class="ux-kbd ux-kbd--sm">→</kbd></td>
              <td>Slide anterior/siguiente</td>
            </tr>
            <tr>
              <td><strong>Calendar</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">←</kbd> <kbd class="ux-kbd ux-kbd--sm">→</kbd> <kbd class="ux-kbd ux-kbd--sm">↑</kbd> <kbd class="ux-kbd ux-kbd--sm">↓</kbd></td>
              <td>Navegar dias</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Enter</kbd></td>
              <td>Seleccionar dia</td>
            </tr>
            <tr>
              <td><strong>Rating</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">←</kbd> <kbd class="ux-kbd ux-kbd--sm">→</kbd></td>
              <td>Cambiar valor</td>
            </tr>
            <tr>
              <td><strong>Toggle / Checkbox</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Space</kbd></td>
              <td>Toggle on/off</td>
            </tr>
            <tr>
              <td><strong>Numpad</strong></td>
              <td><kbd class="ux-kbd ux-kbd--sm">0-9</kbd></td>
              <td>Ingresar digitos</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Backspace</kbd></td>
              <td>Borrar ultimo</td>
            </tr>
            <tr>
              <td></td>
              <td><kbd class="ux-kbd ux-kbd--sm">Enter</kbd></td>
              <td>Confirmar</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Alpine Component -->
    <section class="component-section">
      <h3>Alpine Component</h3>
      <p>Usa <code>x-data="uxKeyboard()"</code> para registrar shortcuts declarativamente.</p>

      <pre class="ux-code-block" data-lang="html"><div x-data="uxKeyboard({
  scope: 'global',
  showHelpOnQuestion: true,
  shortcuts: [
    { combo: 'mod+k', action: 'openSearch', description: 'Open search' },
    { combo: 'mod+s', action: 'save', description: 'Save', allowInInput: true },
    { combo: 'mod+n', action: 'newItem', description: 'New item' }
  ]
})"
@ux-shortcut.window="console.log('Shortcut:', $event.detail)">

  <!-- Tus metodos -->
  <template x-init="
    openSearch = () => $dispatch('open-search');
    save = () => console.log('Saving...');
    newItem = () => console.log('New item');
  "></template>

  <!-- Modal de ayuda (Shift+?) -->
  <div x-show="showHelp" class="ux-modal-backdrop ux-modal-backdrop--open">
    <div class="ux-modal">
      <div class="ux-modal__header">
        <h3>Keyboard Shortcuts</h3>
        <button @click="showHelp = false">&times;</button>
      </div>
      <div class="ux-modal__content">
        <template x-for="s in shortcuts">
          <div style="display: flex; justify-content: space-between; padding: 8px 0;">
            <span x-text="s.description"></span>
            <span x-html="renderCombo(s.original)"></span>
          </div>
        </template>
      </div>
    </div>
  </div>
</div></pre>
    </section>

    <!-- API Reference -->
    <section class="component-section">
      <h3>API Reference</h3>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">UXKeyboard Methods</h4>
      <div class="ux-card">
        <table class="api-table">
          <thead>
            <tr>
              <th>Metodo</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>register(combo, callback, options)</code></td>
              <td>Registra un shortcut. Retorna funcion para desregistrar.</td>
            </tr>
            <tr>
              <td><code>unregister(combo, scope)</code></td>
              <td>Elimina un shortcut registrado.</td>
            </tr>
            <tr>
              <td><code>pushScope(scope)</code></td>
              <td>Activa un nuevo scope (ej: al abrir modal).</td>
            </tr>
            <tr>
              <td><code>popScope()</code></td>
              <td>Vuelve al scope anterior.</td>
            </tr>
            <tr>
              <td><code>getShortcuts(scope)</code></td>
              <td>Obtiene todos los shortcuts de un scope.</td>
            </tr>
            <tr>
              <td><code>formatCombo(combo)</code></td>
              <td>Formatea combo para display (ej: "mod+k" -> "⌘ + K").</td>
            </tr>
            <tr>
              <td><code>renderCombo(combo)</code></td>
              <td>Genera HTML con badges para el combo.</td>
            </tr>
            <tr>
              <td><code>on(event, callback)</code></td>
              <td>Escucha eventos: 'shortcut', 'scopeChange'.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Register Options</h4>
      <div class="ux-card">
        <table class="api-table">
          <thead>
            <tr>
              <th>Opcion</th>
              <th>Tipo</th>
              <th>Default</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>scope</code></td>
              <td>string</td>
              <td>'global'</td>
              <td>Scope del shortcut.</td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td>string</td>
              <td>''</td>
              <td>Descripcion para UI de ayuda.</td>
            </tr>
            <tr>
              <td><code>preventDefault</code></td>
              <td>boolean</td>
              <td>true</td>
              <td>Prevenir accion por defecto del browser.</td>
            </tr>
            <tr>
              <td><code>allowInInput</code></td>
              <td>boolean</td>
              <td>false</td>
              <td>Ejecutar aunque el foco este en un input.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Key Modifiers</h4>
      <div class="ux-card">
        <table class="api-table">
          <thead>
            <tr>
              <th>Alias</th>
              <th>Mac</th>
              <th>Windows/Linux</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>mod</code></td>
              <td>⌘ Command</td>
              <td>Ctrl</td>
            </tr>
            <tr>
              <td><code>ctrl</code></td>
              <td>⌃ Control</td>
              <td>Ctrl</td>
            </tr>
            <tr>
              <td><code>alt</code> / <code>opt</code></td>
              <td>⌥ Option</td>
              <td>Alt</td>
            </tr>
            <tr>
              <td><code>shift</code></td>
              <td>⇧ Shift</td>
              <td>Shift</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- HTMX + Django -->
    <section class="component-section">
      <h3>HTMX + Django</h3>
      <p>Integracion de atajos de teclado con Django y HTMX.</p>

      <pre class="ux-code-block" data-lang="html"><!-- templates/base.html -->
<body x-data="uxKeyboard({
  shortcuts: [
    { combo: 'mod+k', action: 'openSearch', description: 'Buscar' },
    { combo: 'mod+/', action: 'showHelp', description: 'Ayuda' },
    { combo: 'g h', action: 'goHome', description: 'Ir a inicio' },
    { combo: 'g p', action: 'goProducts', description: 'Ir a productos' }
  ]
})"
x-init="
  openSearch = () => $dispatch('open-command');
  showHelp = () => showHelp = true;
  goHome = () => htmx.ajax('GET', '/', { target: '#main' });
  goProducts = () => htmx.ajax('GET', '/products/', { target: '#main' });
">

  <!-- Command palette con HTMX -->
  <div x-show="$store.command.open"
       @open-command.window="$store.command.open = true"
       class="ux-command">
    <input type="search"
           class="ux-command__input"
           placeholder="Type a command..."
           hx-get="{% url 'command_search' %}"
           hx-trigger="keyup changed delay:200ms"
           hx-target="#command-results">
    <div id="command-results"></div>
  </div>

  <main id="main">
    {% block content %}{% endblock %}
  </main>
</body></pre>

      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.shortcuts import render

def command_search(request):
    """Busqueda para command palette"""
    query = request.GET.get('q', '')

    commands = [
        {'name': 'Nuevo producto', 'url': '/products/new/', 'keys': 'N'},
        {'name': 'Ver pedidos', 'url': '/orders/', 'keys': 'G O'},
        {'name': 'Configuracion', 'url': '/settings/', 'keys': 'G S'},
    ]

    if query:
        commands = [c for c in commands if query.lower() in c['name'].lower()]

    return render(request, 'partials/command_results.html', {
        'commands': commands
    })</pre>

      <pre class="ux-code-block" data-lang="html"><!-- partials/command_results.html -->
<ul class="ux-list"
    x-data
    x-init="UXRovingTabindex.init($el, {
      selector: '.ux-list__item',
      orientation: 'vertical',
      onSelect: (el) => htmx.ajax('GET', el.dataset.url, { target: '#main' })
    })">
  {% for cmd in commands %}
  <li class="ux-list__item" data-url="{{ cmd.url }}">
    <div class="ux-list__content">
      <span class="ux-list__title">{{ cmd.name }}</span>
    </div>
    <span class="ux-kbd ux-kbd--sm">{{ cmd.keys }}</span>
  </li>
  {% empty %}
  <li class="ux-list__item ux-list__item--disabled">
    No results found
  </li>
  {% endfor %}
</ul></pre>
    </section>

    <!-- CSS Classes -->
    <section class="component-section">
      <h3>CSS Classes</h3>
      <div class="ux-card">
        <table class="api-table">
          <thead>
            <tr>
              <th>Clase</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>.ux-kbd</code></td>
              <td>Badge de tecla individual</td>
            </tr>
            <tr>
              <td><code>.ux-kbd--sm</code></td>
              <td>Tamano pequeno</td>
            </tr>
            <tr>
              <td><code>.ux-kbd--lg</code></td>
              <td>Tamano grande</td>
            </tr>
            <tr>
              <td><code>.ux-kbd--glass</code></td>
              <td>Variante glass</td>
            </tr>
            <tr>
              <td><code>.ux-kbd-combo</code></td>
              <td>Contenedor para combinacion de teclas</td>
            </tr>
            <tr>
              <td><code>.ux-kbd-combo__separator</code></td>
              <td>Separador "+" entre teclas</td>
            </tr>
            <tr>
              <td><code>.ux-skip-link</code></td>
              <td>Link "Skip to content"</td>
            </tr>
            <tr>
              <td><code>.ux-keyboard-nav</code></td>
              <td>Clase en body cuando hay navegacion por teclado</td>
            </tr>
            <tr>
              <td><code>.ux-keyboard-nav--mouse</code></td>
              <td>Clase cuando se usa mouse (oculta focus rings)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>

  <script>
    // Demo shortcuts
    document.addEventListener('DOMContentLoaded', () => {
      UXKeyboard.register('mod+k', () => {
        console.log('Search triggered!');
        alert('Search shortcut triggered! (Cmd/Ctrl + K)');
      }, { description: 'Open search' });

      UXKeyboard.register('mod+s', (e) => {
        console.log('Save triggered!');
        alert('Save shortcut triggered! (Cmd/Ctrl + S)');
      }, { description: 'Save', allowInInput: true });

      UXKeyboard.register('mod+n', () => {
        console.log('New item triggered!');
        alert('New item shortcut triggered! (Cmd/Ctrl + N)');
      }, { description: 'New item' });
    });
  </script>