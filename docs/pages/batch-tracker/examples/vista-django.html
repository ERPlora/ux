<h4 style="margin-bottom: var(--ux-space-md);">Template Django con HTMX</h4>
      <pre class="ux-code-block" data-lang="html"><!-- templates/batches/batch_detail.html -->
{% extends 'base.html' %}

{% block content %}
<div class="ux-batch-card">
  <div class="ux-batch-card__header">
    <div class="ux-batch-card__title-group">
      <h2 class="ux-batch-card__batch-number">{{ batch.batch_number }}</h2>
      <p class="ux-batch-card__product-name">{{ batch.product.name }}</p>
    </div>
    <div class="ux-batch-card__qr">
      <img src="{% url 'batch_qr' batch.pk %}" alt="QR Code">
    </div>
  </div>

  <div class="ux-batch-card__body">
    <!-- Status (HTMX) -->
    <div id="batch-status"
         hx-get="{% url 'batch_status' batch.pk %}"
         hx-trigger="batch:status-updated from:body">
      {% include "batches/partials/batch_status.html" %}
    </div>

    <!-- Info Grid -->
    <div class="ux-batch-info">
      <div class="ux-batch-info__item">
        <span class="ux-batch-info__label">Lot Number</span>
        <span class="ux-batch-info__value ux-batch-info__value--mono">{{ batch.lot_number }}</span>
      </div>
      <div class="ux-batch-info__item">
        <span class="ux-batch-info__label">Manufactured</span>
        <span class="ux-batch-info__value">{{ batch.manufactured_date|date:"d M Y" }}</span>
      </div>
      <div class="ux-batch-info__item">
        <span class="ux-batch-info__label">Expiry</span>
        <span class="ux-batch-info__value">{{ batch.expiry_date|date:"d M Y" }}</span>
      </div>
      <div class="ux-batch-info__item">
        <span class="ux-batch-info__label">Location</span>
        <span class="ux-batch-info__value">{{ batch.location }}</span>
      </div>
    </div>

    <!-- Quantity Tracking -->
    <div class="ux-batch-quantity">
      <div class="ux-batch-quantity__header">
        <span class="ux-batch-quantity__title">Quantity Tracking</span>
      </div>
      <div class="ux-batch-quantity__values">
        <div class="ux-batch-quantity__stat">
          <span class="ux-batch-quantity__stat-value ux-batch-quantity__stat-value--initial">
            {{ batch.initial_quantity }}
          </span>
          <span class="ux-batch-quantity__stat-label">Initial</span>
        </div>
        <div class="ux-batch-quantity__stat">
          <span class="ux-batch-quantity__stat-value ux-batch-quantity__stat-value--current">
            {{ batch.current_quantity }}
          </span>
          <span class="ux-batch-quantity__stat-label">Current</span>
        </div>
        <div class="ux-batch-quantity__stat">
          <span class="ux-batch-quantity__stat-value ux-batch-quantity__stat-value--rejected">
            {{ batch.rejected_quantity }}
          </span>
          <span class="ux-batch-quantity__stat-label">Rejected</span>
        </div>
        <div class="ux-batch-quantity__stat">
          <span class="ux-batch-quantity__stat-value ux-batch-quantity__stat-value--yield">
            {{ batch.yield_percentage }}%
          </span>
          <span class="ux-batch-quantity__stat-label">Yield</span>
        </div>
      </div>
      <div class="ux-batch-quantity__bar">
        <div class="ux-batch-quantity__bar-segment ux-batch-quantity__bar-segment--good"
             style="width: {{ batch.yield_percentage }}%"></div>
        {% with rejected_pct=batch.rejected_quantity|divide:batch.initial_quantity|multiply:100 %}
        <div class="ux-batch-quantity__bar-segment ux-batch-quantity__bar-segment--rejected"
             style="width: {{ rejected_pct }}%"></div>
        {% endwith %}
      </div>
    </div>

    <!-- Timeline (HTMX) -->
    <div id="batch-timeline"
         hx-get="{% url 'batch_timeline' batch.pk %}"
         hx-trigger="load"
         hx-swap="innerHTML">
      <div class="ux-spinner"></div>
    </div>

    <!-- History Log (HTMX) -->
    <div class="ux-batch-history">
      <div class="ux-batch-history__title">Activity Log</div>
      <div id="batch-history"
           class="ux-batch-history__list"
           hx-get="{% url 'batch_history' batch.pk %}"
           hx-trigger="load, batch:history-updated from:body"
           hx-swap="innerHTML">
        <div class="ux-spinner"></div>
      </div>
    </div>
  </div>

  <div class="ux-batch-card__footer">
    <span style="font-size: var(--ux-font-size-xs); color: var(--ux-text-tertiary);">
      Created: {{ batch.created_at|date:"d M Y, H:i" }}
    </span>
    <div style="display: flex; gap: var(--ux-space-sm);">
      <button class="ux-button ux-button--sm ux-button--outline"
              hx-get="{% url 'batch_print' batch.pk %}"
              hx-target="#print-modal .ux-modal__content"
              @click="$dispatch('open-modal', 'print')">
        Print Label
      </button>
      <button class="ux-button ux-button--sm ux-color-primary"
              hx-get="{% url 'batch_edit' batch.pk %}"
              hx-target="#edit-modal .ux-modal__content"
              @click="$dispatch('open-modal', 'edit')">
        Edit
      </button>
    </div>
  </div>
</div>
{% endblock %}</pre>
