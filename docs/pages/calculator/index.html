<style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); display: flex; flex-wrap: wrap; gap: var(--ux-space-lg); justify-content: center; }
  </style>

<h2 style="margin-bottom: var(--ux-space-lg);">Calculator</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-xl);">Calculadora con estilo iOS, ideal para sistemas POS y aplicaciones financieras.</p>

    <section class="component-section">
      <h3>Calculadora Completa</h3>
      <p>Calculadora interactiva con soporte de teclado.</p>
      <ux-playground src="pages/calculator/examples/calculadora-completa.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-calculator" x-data="uxCalculator()" @calculator-result="console.log('Result:', $event.detail)">
          <div class="ux-calculator__display">
            <div class="ux-calculator__expression" x-text="expression">&nbsp;</div>
            <div class="ux-calculator__result" :class="{ 'ux-calculator__result--small': needsSmallFont(), 'ux-calculator__result--error': hasError }" x-text="display">0</div>
          </div>
          <div class="ux-calculator__keypad">
            <!-- Row 1: Functions -->
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="clear()">AC</button>
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="toggleSign()">+/-</button>
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="inputPercent()">%</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" :class="{ 'is-active': isOperatorActive('/') }" @click="inputOperator('/')">÷</button>
            <!-- Row 2 -->
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('7')">7</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('8')">8</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('9')">9</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" :class="{ 'is-active': isOperatorActive('*') }" @click="inputOperator('*')">×</button>
            <!-- Row 3 -->
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('4')">4</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('5')">5</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('6')">6</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" :class="{ 'is-active': isOperatorActive('-') }" @click="inputOperator('-')">−</button>
            <!-- Row 4 -->
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('1')">1</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('2')">2</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('3')">3</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" :class="{ 'is-active': isOperatorActive('+') }" @click="inputOperator('+')">+</button>
            <!-- Row 5 -->
            <button class="ux-calculator__btn ux-calculator__btn--number ux-calculator__btn--wide" @click="inputDigit('0')">0</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDecimal()">.</button>
            <button class="ux-calculator__btn ux-calculator__btn--equals" @click="calculate()">=</button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-calculator" x-data="uxCalculator()"&gt;
  &lt;div class="ux-calculator__display"&gt;
    &lt;div class="ux-calculator__expression" x-text="expression"&gt;&lt;/div&gt;
    &lt;div class="ux-calculator__result" x-text="display"&gt;0&lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="ux-calculator__keypad"&gt;
    &lt;button class="ux-calculator__btn ux-calculator__btn--function" @click="clear()"&gt;AC&lt;/button&gt;
    &lt;button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('7')"&gt;7&lt;/button&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </section>

    <section class="component-section">
      <h3>Compact Variant</h3>
      <ux-playground src="pages/calculator/examples/compact-variant.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-calculator ux-calculator--compact" x-data="uxCalculator()">
          <div class="ux-calculator__display">
            <div class="ux-calculator__expression" x-text="expression">&nbsp;</div>
            <div class="ux-calculator__result" :class="{ 'ux-calculator__result--small': needsSmallFont() }" x-text="display">0</div>
          </div>
          <div class="ux-calculator__keypad">
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="clear()">AC</button>
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="toggleSign()">+/-</button>
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="inputPercent()">%</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('/')">÷</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('7')">7</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('8')">8</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('9')">9</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('*')">×</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('4')">4</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('5')">5</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('6')">6</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('-')">−</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('1')">1</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('2')">2</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('3')">3</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('+')">+</button>
            <button class="ux-calculator__btn ux-calculator__btn--number ux-calculator__btn--wide" @click="inputDigit('0')">0</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDecimal()">.</button>
            <button class="ux-calculator__btn ux-calculator__btn--equals" @click="calculate()">=</button>
          </div>
        </div>
      </div>
    </section>

    <section class="component-section">
      <h3>Glass Variant</h3>
      <ux-playground src="pages/calculator/examples/glass-variant.html"></ux-playground>
      <div class="demo-box" style="background: var(--ux-demo-gradient-dark); padding: var(--ux-space-xl);">
        <div class="ux-calculator ux-calculator--glass" x-data="uxCalculator()">
          <div class="ux-calculator__display">
            <div class="ux-calculator__expression" x-text="expression">&nbsp;</div>
            <div class="ux-calculator__result" :class="{ 'ux-calculator__result--small': needsSmallFont() }" x-text="display">0</div>
          </div>
          <div class="ux-calculator__keypad">
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="clear()">AC</button>
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="toggleSign()">+/-</button>
            <button class="ux-calculator__btn ux-calculator__btn--function" @click="inputPercent()">%</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('/')">÷</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('7')">7</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('8')">8</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('9')">9</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('*')">×</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('4')">4</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('5')">5</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('6')">6</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('-')">−</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('1')">1</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('2')">2</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDigit('3')">3</button>
            <button class="ux-calculator__btn ux-calculator__btn--operator" @click="inputOperator('+')">+</button>
            <button class="ux-calculator__btn ux-calculator__btn--number ux-calculator__btn--wide" @click="inputDigit('0')">0</button>
            <button class="ux-calculator__btn ux-calculator__btn--number" @click="inputDecimal()">.</button>
            <button class="ux-calculator__btn ux-calculator__btn--equals" @click="calculate()">=</button>
          </div>
        </div>
      </div>
    </section>

    <section class="component-section">
      <h3>Keyboard Support</h3>
      <p>La calculadora soporta entrada por teclado:</p>
      <ul style="color: var(--ux-text-secondary); margin-left: var(--ux-space-lg);">
        <li><strong>0-9</strong> - Digitos</li>
        <li><strong>.</strong> - Decimal</li>
        <li><strong>+ - * /</strong> - Operadores</li>
        <li><strong>Enter o =</strong> - Calcular</li>
        <li><strong>Escape</strong> - Limpiar</li>
        <li><strong>Backspace</strong> - Borrar ultimo digito</li>
        <li><strong>%</strong> - Porcentaje</li>
      </ul>
    </section>

    <section class="component-section">
      <h3>HTMX + Django</h3>
      <p>Enviar el resultado de la calculadora al servidor para guardarlo o procesarlo.</p>
      <pre class="ux-code-block" data-lang="html">&lt;!-- Template: calculator.html --&gt;
&lt;div class="ux-calculator"
     x-data="uxCalculator()"
     @calculator-result="$refs.resultInput.value = $event.detail.result"&gt;
  &lt;!-- Calculator display and keypad... --&gt;

  &lt;!-- Hidden form for HTMX submission --&gt;
  &lt;form hx-post="{% url 'save_calculation' %}"
        hx-target="#calculation-history"
        hx-swap="afterbegin"&gt;
    {% csrf_token %}
    &lt;input type="hidden" name="result" x-ref="resultInput"&gt;
    &lt;button type="submit" class="ux-button ux-color-primary" style="width: 100%; margin-top: var(--ux-space-md);"&gt;
      Guardar Calculo
    &lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;

&lt;div id="calculation-history"&gt;
  &lt;!-- History items will be inserted here --&gt;
&lt;/div&gt;</pre>

      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from .models import Calculation

@require_POST
def save_calculation(request):
    result = request.POST.get('result', '0')
    calc = Calculation.objects.create(
        user=request.user,
        result=result
    )
    return HttpResponse(f'''
        &lt;div class="ux-list__item"&gt;
            &lt;span&gt;{calc.result}&lt;/span&gt;
            &lt;small&gt;{calc.created_at.strftime('%H:%M')}&lt;/small&gt;
        &lt;/div&gt;
    ''')</pre>

      <pre class="ux-code-block" data-lang="python"># urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('calculator/', views.calculator_view, name='calculator'),
    path('calculator/save/', views.save_calculation, name='save_calculation'),
]</pre>
    </section>