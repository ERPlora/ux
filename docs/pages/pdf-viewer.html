<style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 {
      font-size: var(--ux-font-size-lg);
      font-weight: 600;
      margin-bottom: var(--ux-space-md);
      color: var(--ux-text);
    }
    .demo-section p {
      font-size: var(--ux-font-size-md);
      color: var(--ux-text-secondary);
      margin-bottom: var(--ux-space-md);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: var(--ux-border-radius-lg);
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
    }
  </style>

<div style="padding: var(--ux-space-lg);">

    <section class="component-section">
      <h3>PDF Viewer</h3>
      <p>Visor de documentos PDF con controles de navegacion, zoom, busqueda y modo pantalla completa. Requiere PDF.js.</p>
      <ux-playground src="examples/pdf-viewer/pdf-viewer.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-pdf-viewer"
             x-data="uxPdfViewer({ src: 'https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf' })"
             style="height: 500px;">

          <!-- Toolbar -->
          <div class="ux-pdf-viewer__toolbar">
            <div class="ux-pdf-viewer__toolbar-group">
              <button class="ux-pdf-viewer__btn" @click="prevPage()" :disabled="currentPage <= 1">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="number" class="ux-pdf-viewer__page-input"
                     :value="currentPage"
                     @change="goToPage(parseInt($event.target.value))"
                     min="1" :max="totalPages">
              <span class="ux-pdf-viewer__page-total">/ <span x-text="totalPages"></span></span>
              <button class="ux-pdf-viewer__btn" @click="nextPage()" :disabled="currentPage >= totalPages">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
              </button>
            </div>

            <div class="ux-pdf-viewer__toolbar-separator"></div>

            <div class="ux-pdf-viewer__toolbar-group">
              <button class="ux-pdf-viewer__btn" @click="zoomOut()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/></svg>
              </button>
              <select class="ux-pdf-viewer__zoom-select" @change="setZoom($event.target.value)" x-model="scale">
                <template x-for="opt in zoomOptions" :key="opt.value">
                  <option :value="opt.value" x-text="opt.label"></option>
                </template>
              </select>
              <button class="ux-pdf-viewer__btn" @click="zoomIn()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
              </button>
            </div>

            <div class="ux-pdf-viewer__toolbar-spacer"></div>

            <div class="ux-pdf-viewer__toolbar-group">
              <button class="ux-pdf-viewer__btn" @click="download()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
              </button>
              <button class="ux-pdf-viewer__btn" @click="print()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/></svg>
              </button>
              <button class="ux-pdf-viewer__btn" @click="toggleFullscreen()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
              </button>
            </div>
          </div>

          <!-- Container -->
          <div class="ux-pdf-viewer__container" x-ref="container">
            <div class="ux-pdf-viewer__page">
              <canvas x-ref="canvas"></canvas>
            </div>
          </div>

          <!-- Loading -->
          <div class="ux-pdf-viewer__loading" x-show="isLoading">
            <div class="ux-pdf-viewer__loading-spinner"></div>
            <span class="ux-pdf-viewer__loading-text">Cargando documento...</span>
          </div>

          <!-- Error -->
          <div class="ux-pdf-viewer__error" x-show="error" x-cloak>
            <svg class="ux-pdf-viewer__error-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
            <span class="ux-pdf-viewer__error-text" x-text="error"></span>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><!-- Incluir PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<div class="ux-pdf-viewer"
     x-data="uxPdfViewer({ src: 'documento.pdf' })">
  <!-- Toolbar y contenido... -->
</div></pre>
    </section>

    <section class="component-section">
      <h3>Opciones</h3>
      <p>Configuracion disponible para el componente.</p>
      <ux-playground src="examples/pdf-viewer/opciones.html"></ux-playground>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Opcion</th>
              <th style="padding: var(--ux-space-sm);">Tipo</th>
              <th style="padding: var(--ux-space-sm);">Default</th>
              <th style="padding: var(--ux-space-sm);">Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>src</code></td>
              <td style="padding: var(--ux-space-sm);">string</td>
              <td style="padding: var(--ux-space-sm);">''</td>
              <td style="padding: var(--ux-space-sm);">URL del documento PDF</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>scale</code></td>
              <td style="padding: var(--ux-space-sm);">number | string</td>
              <td style="padding: var(--ux-space-sm);">1</td>
              <td style="padding: var(--ux-space-sm);">Escala inicial (1, 1.5, 'fit-width', 'fit-page')</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>showThumbnails</code></td>
              <td style="padding: var(--ux-space-sm);">boolean</td>
              <td style="padding: var(--ux-space-sm);">false</td>
              <td style="padding: var(--ux-space-sm);">Mostrar panel de miniaturas</td>
            </tr>
          </tbody>
        </table>
      </div>
      <pre class="ux-code-block" data-lang="html"><div x-data="uxPdfViewer({
  src: 'documento.pdf',
  scale: 'fit-width',
  showThumbnails: true
})">...
</div></pre>
    </section>

    <section class="component-section">
      <h3>Metodos</h3>
      <p>Metodos disponibles para controlar el visor.</p>
      <ux-playground src="examples/pdf-viewer/metodos.html"></ux-playground>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Metodo</th>
              <th style="padding: var(--ux-space-sm);">Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>loadPDF(url)</code></td>
              <td style="padding: var(--ux-space-sm);">Carga un nuevo documento</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>goToPage(num)</code></td>
              <td style="padding: var(--ux-space-sm);">Navega a una pagina especifica</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>prevPage() / nextPage()</code></td>
              <td style="padding: var(--ux-space-sm);">Navega a la pagina anterior/siguiente</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>zoomIn() / zoomOut()</code></td>
              <td style="padding: var(--ux-space-sm);">Aumenta/reduce el zoom</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>setZoom(value)</code></td>
              <td style="padding: var(--ux-space-sm);">Establece zoom especifico</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>search()</code></td>
              <td style="padding: var(--ux-space-sm);">Busca texto en el documento</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>print() / download()</code></td>
              <td style="padding: var(--ux-space-sm);">Imprimir o descargar documento</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="component-section">
      <h3>Eventos</h3>
      <p>Eventos emitidos por el componente.</p>
      <ux-playground src="examples/pdf-viewer/eventos.html"></ux-playground>
      <div class="demo-box">
        <ul style="margin: 0; padding-left: var(--ux-space-lg);">
          <li><code>pdf:loaded</code> - Documento cargado ({ totalPages })</li>
          <li><code>pdf:error</code> - Error al cargar ({ error })</li>
          <li><code>pdf:pagechange</code> - Cambio de pagina ({ page })</li>
          <li><code>pdf:pagerendered</code> - Pagina renderizada ({ page })</li>
          <li><code>pdf:search</code> - Busqueda completada ({ results })</li>
        </ul>
      </div>
      <pre class="ux-code-block" data-lang="html"><div x-data="uxPdfViewer({ src: 'doc.pdf' })"
     @pdf:loaded="console.log('Paginas:', $event.detail.totalPages)"
     @pdf:pagechange="console.log('Pagina actual:', $event.detail.page)">
</div></pre>
    </section>

    <section class="component-section">
      <h3>Atajos de Teclado</h3>
      <p>El visor soporta navegacion por teclado.</p>
      <ux-playground src="examples/pdf-viewer/atajos-de-teclado.html"></ux-playground>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Tecla</th>
              <th style="padding: var(--ux-space-sm);">Accion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>←</kbd> / <kbd>PageUp</kbd></td>
              <td style="padding: var(--ux-space-sm);">Pagina anterior</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>→</kbd> / <kbd>PageDown</kbd></td>
              <td style="padding: var(--ux-space-sm);">Pagina siguiente</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>Home</kbd> / <kbd>End</kbd></td>
              <td style="padding: var(--ux-space-sm);">Primera/ultima pagina</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>+</kbd> / <kbd>-</kbd></td>
              <td style="padding: var(--ux-space-sm);">Zoom in/out</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>Ctrl + F</kbd></td>
              <td style="padding: var(--ux-space-sm);">Buscar en documento</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="component-section">
      <h3>HTMX + Django</h3>
      <p>Ejemplos de integracion con Django para cargar PDFs dinamicamente.</p>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Vista Django</h4>
      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import FileResponse, JsonResponse
from django.views.decorators.http import require_GET
from .models import Document

@require_GET
def serve_pdf(request, document_id):
    """Sirve un PDF desde el sistema de archivos o storage"""
    document = Document.objects.get(pk=document_id)
    return FileResponse(
        document.file.open('rb'),
        content_type='application/pdf',
        as_attachment=False,
        filename=document.filename
    )

@require_GET
def pdf_viewer_partial(request, document_id):
    """Retorna el HTML del visor PDF via HTMX"""
    document = Document.objects.get(pk=document_id)
    return render(request, 'partials/pdf_viewer.html', {
        'document': document,
        'pdf_url': document.file.url
    })</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">URLs Django</h4>
      <pre class="ux-code-block" data-lang="python"># urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('pdf/<int:document_id>/', views.serve_pdf, name='serve_pdf'),
    path('pdf-viewer/<int:document_id>/', views.pdf_viewer_partial, name='pdf_viewer_partial'),
]</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Template parcial (partials/pdf_viewer.html)</h4>
      <pre class="ux-code-block" data-lang="html"><div class="ux-pdf-viewer"
     x-data="uxPdfViewer({ src: '{{ pdf_url }}' })"
     style="height: 600px;">

  <!-- Toolbar -->
  <div class="ux-pdf-viewer__toolbar">
    <div class="ux-pdf-viewer__toolbar-group">
      <button class="ux-pdf-viewer__btn" @click="prevPage()" :disabled="currentPage <= 1">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span x-text="currentPage + ' / ' + totalPages"></span>
      <button class="ux-pdf-viewer__btn" @click="nextPage()" :disabled="currentPage >= totalPages">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Container -->
  <div class="ux-pdf-viewer__container" x-ref="container">
    <div class="ux-pdf-viewer__page">
      <canvas x-ref="canvas"></canvas>
    </div>
  </div>

  <!-- Loading -->
  <div class="ux-pdf-viewer__loading" x-show="isLoading">
    <div class="ux-pdf-viewer__loading-spinner"></div>
  </div>
</div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Cargar visor con HTMX</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Boton que carga el visor PDF en un contenedor -->
<button class="ux-button ux-color-primary"
        hx-get="{% url 'pdf_viewer_partial' document.id %}"
        hx-target="#pdf-container"
        hx-swap="innerHTML">
  Ver PDF
</button>

<div id="pdf-container">
  <!-- El visor PDF se cargara aqui -->
</div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Cargar PDF en modal</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Lista de documentos con preview en modal -->
<ul class="ux-list">
  {% for doc in documents %}
  <li class="ux-list__item"
      hx-get="{% url 'pdf_viewer_partial' doc.id %}"
      hx-target="#modal-pdf-content"
      hx-swap="innerHTML"
      @click="$dispatch('open-pdf-modal')">
    <div class="ux-list__content">
      <span class="ux-list__title">{{ doc.name }}</span>
      <span class="ux-list__note">{{ doc.file.size|filesizeformat }}</span>
    </div>
  </li>
  {% endfor %}
</ul>

<!-- Modal para el visor -->
<div x-data="uxModal()" @open-pdf-modal.window="open()">
  <template x-teleport="body">
    <div class="ux-modal-backdrop" x-show="isOpen" @click="close()"></div>
    <div class="ux-modal ux-modal--lg" x-show="isOpen">
      <div class="ux-modal__header">
        <h3>Vista previa</h3>
        <button class="ux-modal__close" @click="close()">&times;</button>
      </div>
      <div class="ux-modal__content" id="modal-pdf-content">
        <!-- PDF viewer se carga aqui via HTMX -->
      </div>
    </div>
  </template>
</div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Cambiar PDF dinamicamente</h4>
      <pre class="ux-code-block" data-lang="html"><!-- Select para cambiar documento -->
<div x-data="{ pdfUrl: '' }">
  <select class="ux-select"
          hx-get="/api/documents/"
          hx-trigger="load"
          hx-target="this"
          hx-swap="innerHTML"
          @change="pdfUrl = $event.target.value">
    <option value="">Seleccionar documento...</option>
    {% for doc in documents %}
    <option value="{{ doc.file.url }}">{{ doc.name }}</option>
    {% endfor %}
  </select>

  <div class="ux-pdf-viewer"
       x-data="uxPdfViewer()"
       x-effect="if (pdfUrl) loadPDF(pdfUrl)"
       style="height: 500px;">
    <!-- Toolbar y contenido... -->
  </div>
</div></pre>
    </section>

  </div>

  <script>
    // Configurar PDF.js worker
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }
  </script>