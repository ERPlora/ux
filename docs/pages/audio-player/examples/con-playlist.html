<div x-data="uxAudioPlayer({
          playlist: [
            { src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3', title: 'SoundHelix Song 1', artist: 'T. Schurger', artwork: 'https://picsum.photos/200/200?random=10' },
            { src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3', title: 'SoundHelix Song 2', artist: 'T. Schurger', artwork: 'https://picsum.photos/200/200?random=11' },
            { src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3', title: 'SoundHelix Song 3', artist: 'T. Schurger', artwork: 'https://picsum.photos/200/200?random=12' },
            { src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3', title: 'SoundHelix Song 4', artist: 'T. Schurger', artwork: 'https://picsum.photos/200/200?random=13' }
          ]
        })" class="ux-audio-player"
            @keydown="handleKeydown($event)"
            tabindex="0">

          <!-- Track Info -->
          <div class="ux-audio-player__info">
            <div class="ux-audio-player__artwork">
              <template x-if="currentTrack.artwork">
                <img :src="currentTrack.artwork" :alt="currentTrack.title">
              </template>
            </div>
            <div class="ux-audio-player__meta">
              <h4 class="ux-audio-player__title" x-text="currentTrack.title"></h4>
              <p class="ux-audio-player__artist" x-text="currentTrack.artist"></p>
            </div>
          </div>

          <!-- Progress -->
          <div class="ux-audio-player__progress" @click="onProgressClick($event)">
            <div class="ux-audio-player__progress-track">
              <div class="ux-audio-player__progress-fill" :style="{ width: progress + '%' }"></div>
            </div>
            <div class="ux-audio-player__progress-thumb" :style="{ left: progress + '%' }"></div>
          </div>

          <!-- Time -->
          <div class="ux-audio-player__time">
            <span x-text="currentTimeFormatted"></span>
            <span x-text="durationFormatted"></span>
          </div>

          <!-- Controls with prev/next -->
          <div class="ux-audio-player__controls">
            <button class="ux-audio-player__btn ux-audio-player__btn--sm"
                    @click="toggleShuffle()"
                    :style="{ color: shuffle ? 'var(--ux-primary)' : '' }"
                    aria-label="Aleatorio">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
            </button>

            <button class="ux-audio-player__btn ux-audio-player__btn--sm" @click="prevTrack()" :disabled="!canPrev" aria-label="Pista anterior">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"/>
              </svg>
            </button>

            <button class="ux-audio-player__btn ux-audio-player__btn--play" @click="toggle()">
              <template x-if="!isPlaying">
                <svg fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              </template>
              <template x-if="isPlaying">
                <svg fill="currentColor" viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>
              </template>
            </button>

            <button class="ux-audio-player__btn ux-audio-player__btn--sm" @click="nextTrack()" :disabled="!canNext" aria-label="Siguiente pista">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zm8-12h2v12h-2V6z"/>
              </svg>
            </button>

            <button class="ux-audio-player__btn ux-audio-player__btn--sm"
                    @click="toggleRepeat()"
                    :style="{ color: repeat !== 'none' ? 'var(--ux-primary)' : '' }"
                    aria-label="Repetir">
              <template x-if="repeat !== 'one'">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
              </template>
              <template x-if="repeat === 'one'">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </template>
            </button>
          </div>

          <!-- Playlist -->
          <div class="ux-audio-player__playlist">
            <div class="ux-audio-player__playlist-header">
              <h5 class="ux-audio-player__playlist-title">Playlist</h5>
              <span class="ux-audio-player__playlist-count" x-text="playlist.length + ' pistas'"></span>
            </div>
            <template x-for="(track, index) in playlist" :key="index">
              <div class="ux-audio-player__playlist-item"
                   :class="{ 'ux-audio-player__playlist-item--active': currentTrackIndex === index }"
                   @click="playTrack(index)">
                <span class="ux-audio-player__playlist-item-index" x-text="index + 1"></span>
                <div class="ux-audio-player__playlist-item-info">
                  <div class="ux-audio-player__playlist-item-title" x-text="track.title"></div>
                </div>
              </div>
            </template>
          </div>
        </div>
