<style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); display: flex; flex-wrap: wrap; gap: var(--ux-space-lg); justify-content: center; }
  </style>

<h2 style="margin-bottom: var(--ux-space-lg);">Order Ticket</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-xl);">Ticket de pedido para kitchen display y sistemas POS de restaurantes.</p>

    <section class="component-section">
      <h3>Estados de Orden</h3>
      <p>Pending, preparing, ready, completed, cancelled.</p>
      <ux-playground src="examples/order-ticket/estados-de-orden.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-order-ticket ux-order-ticket--pending">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number">#1234</h3>
              <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
                <span class="ux-order-ticket__status-dot"></span>
                Pending
              </span>
            </div>
            <div class="ux-order-ticket__header-meta">
              <span class="ux-order-ticket__time">2:30 PM</span>
              <span class="ux-order-ticket__table">Table 5</span>
              <span class="ux-order-ticket__type ux-order-ticket__type--dine-in">Dine In</span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <li class="ux-order-ticket__item">
              <span class="ux-order-ticket__item-qty">2</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Margherita Pizza</span>
                <div class="ux-order-ticket__item-modifiers">
                  <span class="ux-order-ticket__item-modifier">Extra cheese</span>
                </div>
              </div>
            </li>
            <li class="ux-order-ticket__item">
              <span class="ux-order-ticket__item-qty">1</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Caesar Salad</span>
                <div class="ux-order-ticket__item-modifiers">
                  <span class="ux-order-ticket__item-modifier ux-order-ticket__item-modifier--remove">No croutons</span>
                </div>
              </div>
            </li>
          </ul>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--primary">Start Preparing</button>
          </div>
        </div>

        <div class="ux-order-ticket ux-order-ticket--preparing">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number">#1235</h3>
              <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
                <span class="ux-order-ticket__status-dot"></span>
                Preparing
              </span>
            </div>
            <div class="ux-order-ticket__header-meta">
              <span class="ux-order-ticket__time">2:25 PM</span>
              <span class="ux-order-ticket__type ux-order-ticket__type--takeout">Takeout</span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <li class="ux-order-ticket__item ux-order-ticket__item--completed">
              <span class="ux-order-ticket__item-qty">1</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Chicken Sandwich</span>
              </div>
            </li>
            <li class="ux-order-ticket__item">
              <span class="ux-order-ticket__item-qty">2</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">French Fries</span>
              </div>
            </li>
          </ul>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--success">Mark Ready</button>
          </div>
        </div>

        <div class="ux-order-ticket ux-order-ticket--ready">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number">#1233</h3>
              <span class="ux-order-ticket__status">
                <span class="ux-order-ticket__status-dot"></span>
                Ready
              </span>
            </div>
            <div class="ux-order-ticket__header-meta">
              <span class="ux-order-ticket__time">2:20 PM</span>
              <span class="ux-order-ticket__type ux-order-ticket__type--delivery">Delivery</span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <li class="ux-order-ticket__item">
              <span class="ux-order-ticket__item-qty">1</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Burger Deluxe</span>
              </div>
            </li>
          </ul>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--secondary">Complete</button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><!-- Pending -->
<div class="ux-order-ticket ux-order-ticket--pending">
  <div class="ux-order-ticket__header">
    <div class="ux-order-ticket__header-top">
      <h3 class="ux-order-ticket__order-number">#1234</h3>
      <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
        <span class="ux-order-ticket__status-dot"></span>
        Pending
      </span>
    </div>
    <div class="ux-order-ticket__header-meta">
      <span class="ux-order-ticket__time">2:30 PM</span>
      <span class="ux-order-ticket__table">Table 5</span>
      <span class="ux-order-ticket__type ux-order-ticket__type--dine-in">Dine In</span>
    </div>
  </div>
  <ul class="ux-order-ticket__items">
    <li class="ux-order-ticket__item">
      <span class="ux-order-ticket__item-qty">2</span>
      <div class="ux-order-ticket__item-content">
        <span class="ux-order-ticket__item-name">Margherita Pizza</span>
        <div class="ux-order-ticket__item-modifiers">
          <span class="ux-order-ticket__item-modifier">Extra cheese</span>
        </div>
      </div>
    </li>
  </ul>
  <div class="ux-order-ticket__actions">
    <button class="ux-order-ticket__action ux-order-ticket__action--primary">Start Preparing</button>
  </div>
</div>

<!-- Preparing -->
<div class="ux-order-ticket ux-order-ticket--preparing">...</div>

<!-- Ready -->
<div class="ux-order-ticket ux-order-ticket--ready">...</div>

<!-- Completed -->
<div class="ux-order-ticket ux-order-ticket--completed">...</div>

<!-- Cancelled -->
<div class="ux-order-ticket ux-order-ticket--cancelled">...</div></pre>
    </section>

    <section class="component-section">
      <h3>Con Timer y Totales</h3>
      <ux-playground src="examples/order-ticket/con-timer-y-totales.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-order-ticket ux-order-ticket--pending"
             x-data="uxOrderTicket({
               orderNumber: '#1240',
               table: 'Table 8',
               type: 'dine-in',
               items: [
                 { qty: 1, name: 'Steak Medium-Rare', price: 24.99, modifiers: ['Mushroom sauce'] },
                 { qty: 1, name: 'Grilled Salmon', price: 19.99 },
                 { qty: 2, name: 'House Wine', price: 8.00 }
               ],
               showTotals: true,
               subtotal: 60.98,
               tax: 4.88,
               total: 65.86,
               warningThreshold: 1,
               dangerThreshold: 2
             })">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number" x-text="orderNumber"></h3>
              <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
                <span class="ux-order-ticket__status-dot"></span>
                <span x-text="status"></span>
              </span>
            </div>
            <div class="ux-order-ticket__header-meta">
              <span class="ux-order-ticket__timer" :class="{ 'ux-order-ticket__timer--warning': timerStatus === 'warning', 'ux-order-ticket__timer--danger': timerStatus === 'danger' }">
                <span class="ux-order-ticket__timer-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                </span>
                <span x-text="formattedTime"></span>
              </span>
              <span class="ux-order-ticket__table" x-text="table"></span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <template x-for="(item, index) in items" :key="index">
              <li class="ux-order-ticket__item" :class="{ 'ux-order-ticket__item--completed': item.completed }">
                <span class="ux-order-ticket__item-qty" x-text="item.qty"></span>
                <div class="ux-order-ticket__item-content">
                  <span class="ux-order-ticket__item-name" x-text="item.name"></span>
                  <template x-if="item.modifiers">
                    <div class="ux-order-ticket__item-modifiers">
                      <template x-for="mod in item.modifiers" :key="mod">
                        <span class="ux-order-ticket__item-modifier" x-text="mod"></span>
                      </template>
                    </div>
                  </template>
                </div>
                <span class="ux-order-ticket__item-price" x-text="formatPrice(item.price * item.qty)"></span>
              </li>
            </template>
          </ul>
          <div class="ux-order-ticket__footer">
            <div class="ux-order-ticket__totals">
              <div class="ux-order-ticket__total-row">
                <span class="ux-order-ticket__total-label">Subtotal</span>
                <span class="ux-order-ticket__total-value" x-text="formatPrice(subtotal)"></span>
              </div>
              <div class="ux-order-ticket__total-row">
                <span class="ux-order-ticket__total-label">Tax</span>
                <span class="ux-order-ticket__total-value" x-text="formatPrice(tax)"></span>
              </div>
              <div class="ux-order-ticket__total-row ux-order-ticket__total-row--grand">
                <span class="ux-order-ticket__total-label">Total</span>
                <span class="ux-order-ticket__total-value" x-text="formatPrice(total)"></span>
              </div>
            </div>
          </div>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--secondary" @click="setStatus('cancelled')">Cancel</button>
            <button class="ux-order-ticket__action ux-order-ticket__action--primary" @click="startPreparing()">Start</button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div class="ux-order-ticket ux-order-ticket--pending"
     x-data="uxOrderTicket({
       orderNumber: '#1240',
       table: 'Table 8',
       type: 'dine-in',
       items: [
         { qty: 1, name: 'Steak Medium-Rare', price: 24.99, modifiers: ['Mushroom sauce'] },
         { qty: 1, name: 'Grilled Salmon', price: 19.99 },
         { qty: 2, name: 'House Wine', price: 8.00 }
       ],
       showTotals: true,
       subtotal: 60.98,
       tax: 4.88,
       total: 65.86,
       warningThreshold: 1,
       dangerThreshold: 2
     })">
  <!-- Header with timer -->
  <div class="ux-order-ticket__header">
    <div class="ux-order-ticket__header-top">
      <h3 class="ux-order-ticket__order-number" x-text="orderNumber"></h3>
      <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
        <span class="ux-order-ticket__status-dot"></span>
        <span x-text="status"></span>
      </span>
    </div>
    <div class="ux-order-ticket__header-meta">
      <span class="ux-order-ticket__timer"
            :class="{ 'ux-order-ticket__timer--warning': timerStatus === 'warning',
                      'ux-order-ticket__timer--danger': timerStatus === 'danger' }">
        <span x-text="formattedTime"></span>
      </span>
      <span class="ux-order-ticket__table" x-text="table"></span>
    </div>
  </div>

  <!-- Items -->
  <ul class="ux-order-ticket__items">
    <template x-for="(item, index) in items" :key="index">
      <li class="ux-order-ticket__item">
        <span class="ux-order-ticket__item-qty" x-text="item.qty"></span>
        <div class="ux-order-ticket__item-content">
          <span class="ux-order-ticket__item-name" x-text="item.name"></span>
        </div>
        <span class="ux-order-ticket__item-price" x-text="formatPrice(item.price * item.qty)"></span>
      </li>
    </template>
  </ul>

  <!-- Totals -->
  <div class="ux-order-ticket__footer">
    <div class="ux-order-ticket__totals">
      <div class="ux-order-ticket__total-row">
        <span class="ux-order-ticket__total-label">Subtotal</span>
        <span class="ux-order-ticket__total-value" x-text="formatPrice(subtotal)"></span>
      </div>
      <div class="ux-order-ticket__total-row ux-order-ticket__total-row--grand">
        <span class="ux-order-ticket__total-label">Total</span>
        <span class="ux-order-ticket__total-value" x-text="formatPrice(total)"></span>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="ux-order-ticket__actions">
    <button class="ux-order-ticket__action ux-order-ticket__action--secondary"
            @click="setStatus('cancelled')">Cancel</button>
    <button class="ux-order-ticket__action ux-order-ticket__action--primary"
            @click="startPreparing()">Start</button>
  </div>
</div></pre>
    </section>

    <section class="component-section">
      <h3>Urgente</h3>
      <ux-playground src="examples/order-ticket/urgente.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-order-ticket ux-order-ticket--pending ux-order-ticket--urgent">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number">#1241</h3>
              <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
                <span class="ux-order-ticket__status-dot"></span>
                URGENT
              </span>
            </div>
            <div class="ux-order-ticket__header-meta">
              <span class="ux-order-ticket__timer ux-order-ticket__timer--danger">15:30</span>
              <span class="ux-order-ticket__table">VIP Table 1</span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <li class="ux-order-ticket__item ux-order-ticket__item--urgent">
              <span class="ux-order-ticket__item-qty">1</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Lobster Thermidor</span>
                <div class="ux-order-ticket__item-notes">Rush order - VIP guest!</div>
              </div>
            </li>
          </ul>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--primary">Start NOW</button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div class="ux-order-ticket ux-order-ticket--pending ux-order-ticket--urgent">
  <div class="ux-order-ticket__header">
    <div class="ux-order-ticket__header-top">
      <h3 class="ux-order-ticket__order-number">#1241</h3>
      <span class="ux-order-ticket__status ux-order-ticket__status--pulse">
        <span class="ux-order-ticket__status-dot"></span>
        URGENT
      </span>
    </div>
    <div class="ux-order-ticket__header-meta">
      <span class="ux-order-ticket__timer ux-order-ticket__timer--danger">15:30</span>
      <span class="ux-order-ticket__table">VIP Table 1</span>
    </div>
  </div>
  <ul class="ux-order-ticket__items">
    <li class="ux-order-ticket__item ux-order-ticket__item--urgent">
      <span class="ux-order-ticket__item-qty">1</span>
      <div class="ux-order-ticket__item-content">
        <span class="ux-order-ticket__item-name">Lobster Thermidor</span>
        <div class="ux-order-ticket__item-notes">Rush order - VIP guest!</div>
      </div>
    </li>
  </ul>
  <div class="ux-order-ticket__actions">
    <button class="ux-order-ticket__action ux-order-ticket__action--primary">Start NOW</button>
  </div>
</div></pre>
    </section>

    <section class="component-section">
      <h3>Con Notas</h3>
      <ux-playground src="examples/order-ticket/con-notas.html"></ux-playground>
      <div class="demo-box">
        <div class="ux-order-ticket ux-order-ticket--pending">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number">#1242</h3>
              <span class="ux-order-ticket__status">
                <span class="ux-order-ticket__status-dot"></span>
                Pending
              </span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <li class="ux-order-ticket__item">
              <span class="ux-order-ticket__item-qty">1</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Gluten-Free Pasta</span>
              </div>
            </li>
          </ul>
          <div class="ux-order-ticket__notes">
            <span class="ux-order-ticket__notes-label">Note:</span>
            Severe gluten allergy - use separate cookware!
          </div>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--primary">Start</button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div class="ux-order-ticket ux-order-ticket--pending">
  <!-- Header... -->
  <ul class="ux-order-ticket__items">
    <li class="ux-order-ticket__item">
      <span class="ux-order-ticket__item-qty">1</span>
      <div class="ux-order-ticket__item-content">
        <span class="ux-order-ticket__item-name">Gluten-Free Pasta</span>
      </div>
    </li>
  </ul>
  <div class="ux-order-ticket__notes">
    <span class="ux-order-ticket__notes-label">Note:</span>
    Severe gluten allergy - use separate cookware!
  </div>
  <div class="ux-order-ticket__actions">
    <button class="ux-order-ticket__action ux-order-ticket__action--primary">Start</button>
  </div>
</div></pre>
    </section>

    <section class="component-section">
      <h3>Glass Variant</h3>
      <ux-playground src="examples/order-ticket/glass-variant.html"></ux-playground>
      <div class="demo-box" style="background: var(--ux-demo-gradient-dark); padding: var(--ux-space-xl);">
        <div class="ux-order-ticket ux-order-ticket--preparing ux-order-ticket--glass">
          <div class="ux-order-ticket__header">
            <div class="ux-order-ticket__header-top">
              <h3 class="ux-order-ticket__order-number">#1243</h3>
              <span class="ux-order-ticket__status">
                <span class="ux-order-ticket__status-dot"></span>
                Preparing
              </span>
            </div>
          </div>
          <ul class="ux-order-ticket__items">
            <li class="ux-order-ticket__item">
              <span class="ux-order-ticket__item-qty">2</span>
              <div class="ux-order-ticket__item-content">
                <span class="ux-order-ticket__item-name">Espresso</span>
              </div>
            </li>
          </ul>
          <div class="ux-order-ticket__actions">
            <button class="ux-order-ticket__action ux-order-ticket__action--success">Ready</button>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html"><div class="ux-order-ticket ux-order-ticket--preparing ux-order-ticket--glass">
  <div class="ux-order-ticket__header">
    <div class="ux-order-ticket__header-top">
      <h3 class="ux-order-ticket__order-number">#1243</h3>
      <span class="ux-order-ticket__status">
        <span class="ux-order-ticket__status-dot"></span>
        Preparing
      </span>
    </div>
  </div>
  <ul class="ux-order-ticket__items">
    <li class="ux-order-ticket__item">
      <span class="ux-order-ticket__item-qty">2</span>
      <div class="ux-order-ticket__item-content">
        <span class="ux-order-ticket__item-name">Espresso</span>
      </div>
    </li>
  </ul>
  <div class="ux-order-ticket__actions">
    <button class="ux-order-ticket__action ux-order-ticket__action--success">Ready</button>
  </div>
</div></pre>
    </section>

    <section class="component-section">
      <h3>HTMX + Django</h3>
      <p>Ejemplos de integracion con Django y HTMX para Kitchen Display System (KDS).</p>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Django Model</h4>
      <pre class="ux-code-block" data-lang="python"># models.py
from django.db import models

class Order(models.Model):
    STATUS_CHOICES = [
        ('pending', 'Pending'),
        ('preparing', 'Preparing'),
        ('ready', 'Ready'),
        ('completed', 'Completed'),
        ('cancelled', 'Cancelled'),
    ]
    TYPE_CHOICES = [
        ('dine-in', 'Dine In'),
        ('takeout', 'Takeout'),
        ('delivery', 'Delivery'),
    ]

    order_number = models.CharField(max_length=20, unique=True)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='pending')
    order_type = models.CharField(max_length=20, choices=TYPE_CHOICES, default='dine-in')
    table_number = models.CharField(max_length=20, blank=True)
    notes = models.TextField(blank=True)
    is_urgent = models.BooleanField(default=False)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

class OrderItem(models.Model):
    order = models.ForeignKey(Order, related_name='items', on_delete=models.CASCADE)
    product_name = models.CharField(max_length=200)
    quantity = models.PositiveIntegerField(default=1)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    is_completed = models.BooleanField(default=False)

class OrderItemModifier(models.Model):
    MODIFIER_TYPE = [
        ('add', 'Add'),
        ('remove', 'Remove'),
    ]
    order_item = models.ForeignKey(OrderItem, related_name='modifiers', on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    modifier_type = models.CharField(max_length=10, choices=MODIFIER_TYPE, default='add')</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Django Views</h4>
      <pre class="ux-code-block" data-lang="python"># views.py
from django.shortcuts import render, get_object_or_404
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from .models import Order, OrderItem

def kitchen_display(request):
    """Vista principal del Kitchen Display System"""
    orders = Order.objects.filter(
        status__in=['pending', 'preparing', 'ready']
    ).prefetch_related('items__modifiers').order_by('created_at')
    return render(request, 'kitchen/display.html', {'orders': orders})

def order_ticket(request, order_id):
    """Renderiza un ticket individual (para actualizaciones HTMX)"""
    order = get_object_or_404(Order, id=order_id)
    return render(request, 'kitchen/partials/order_ticket.html', {'order': order})

@require_POST
def update_order_status(request, order_id):
    """Actualiza el estado de una orden via HTMX"""
    order = get_object_or_404(Order, id=order_id)
    new_status = request.POST.get('status')

    if new_status in dict(Order.STATUS_CHOICES):
        order.status = new_status
        order.save()

    # Retorna el ticket actualizado
    return render(request, 'kitchen/partials/order_ticket.html', {'order': order})

@require_POST
def toggle_item_completed(request, item_id):
    """Marca un item como completado"""
    item = get_object_or_404(OrderItem, id=item_id)
    item.is_completed = not item.is_completed
    item.save()

    # Retorna solo el item actualizado
    return render(request, 'kitchen/partials/order_item.html', {'item': item})

def pending_orders_count(request):
    """Endpoint para polling del contador de ordenes pendientes"""
    count = Order.objects.filter(status='pending').count()
    return HttpResponse(f'<span id="pending-count">{count}</span>')</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Django URLs</h4>
      <pre class="ux-code-block" data-lang="python"># urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('kitchen/', views.kitchen_display, name='kitchen_display'),
    path('kitchen/order/<int:order_id>/', views.order_ticket, name='order_ticket'),
    path('kitchen/order/<int:order_id>/status/', views.update_order_status, name='update_order_status'),
    path('kitchen/item/<int:item_id>/toggle/', views.toggle_item_completed, name='toggle_item'),
    path('kitchen/pending-count/', views.pending_orders_count, name='pending_count'),
]</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Template Principal (display.html)</h4>
      <pre class="ux-code-block" data-lang="html"><!-- templates/kitchen/display.html -->
{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kitchen Display</title>
  <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  <script src="{% static 'js/ux.min.js' %}"></script>
</head>
<body class="ux-app">

<nav class="ux-navbar">
  <div class="ux-navbar__start">
    <h1>Kitchen Display</h1>
  </div>
  <div class="ux-navbar__end">
    <span class="ux-badge ux-color-warning"
          hx-get="{% url 'pending_count' %}"
          hx-trigger="every 5s"
          hx-swap="innerHTML">
      {{ orders.filter.status__exact:'pending'|length }} Pending
    </span>
  </div>
</nav>

<div class="ux-content" style="padding: var(--ux-space-lg);">
  <!-- Grid de tickets con auto-refresh -->
  <div id="orders-grid"
       style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: var(--ux-space-lg);"
       hx-get="{% url 'kitchen_display' %}"
       hx-trigger="every 10s"
       hx-select="#orders-grid"
       hx-swap="outerHTML">

    {% for order in orders %}
      {% include 'kitchen/partials/order_ticket.html' with order=order %}
    {% empty %}
      <div class="ux-card" style="grid-column: 1 / -1; text-align: center; padding: var(--ux-space-xl);">
        <p style="color: var(--ux-text-secondary);">No hay ordenes pendientes</p>
      </div>
    {% endfor %}
  </div>
</div>

</body>
</html></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Partial del Ticket (order_ticket.html)</h4>
      <pre class="ux-code-block" data-lang="html"><!-- templates/kitchen/partials/order_ticket.html -->
<div id="order-{{ order.id }}"
     class="ux-order-ticket ux-order-ticket--{{ order.status }}{% if order.is_urgent %} ux-order-ticket--urgent{% endif %}">

  <div class="ux-order-ticket__header">
    <div class="ux-order-ticket__header-top">
      <h3 class="ux-order-ticket__order-number">{{ order.order_number }}</h3>
      <span class="ux-order-ticket__status{% if order.status == 'pending' or order.status == 'preparing' %} ux-order-ticket__status--pulse{% endif %}">
        <span class="ux-order-ticket__status-dot"></span>
        {{ order.get_status_display }}
      </span>
    </div>
    <div class="ux-order-ticket__header-meta">
      <span class="ux-order-ticket__time">{{ order.created_at|time:"g:i A" }}</span>
      {% if order.table_number %}
        <span class="ux-order-ticket__table">{{ order.table_number }}</span>
      {% endif %}
      <span class="ux-order-ticket__type ux-order-ticket__type--{{ order.order_type }}">
        {{ order.get_order_type_display }}
      </span>
    </div>
  </div>

  <ul class="ux-order-ticket__items">
    {% for item in order.items.all %}
      {% include 'kitchen/partials/order_item.html' with item=item %}
    {% endfor %}
  </ul>

  {% if order.notes %}
    <div class="ux-order-ticket__notes">
      <span class="ux-order-ticket__notes-label">Note:</span>
      {{ order.notes }}
    </div>
  {% endif %}

  <div class="ux-order-ticket__actions">
    {% if order.status == 'pending' %}
      <button class="ux-order-ticket__action ux-order-ticket__action--secondary"
              hx-post="{% url 'update_order_status' order.id %}"
              hx-vals='{"status": "cancelled"}'
              hx-target="#order-{{ order.id }}"
              hx-swap="outerHTML">
        Cancel
      </button>
      <button class="ux-order-ticket__action ux-order-ticket__action--primary"
              hx-post="{% url 'update_order_status' order.id %}"
              hx-vals='{"status": "preparing"}'
              hx-target="#order-{{ order.id }}"
              hx-swap="outerHTML">
        Start Preparing
      </button>
    {% elif order.status == 'preparing' %}
      <button class="ux-order-ticket__action ux-order-ticket__action--success"
              hx-post="{% url 'update_order_status' order.id %}"
              hx-vals='{"status": "ready"}'
              hx-target="#order-{{ order.id }}"
              hx-swap="outerHTML">
        Mark Ready
      </button>
    {% elif order.status == 'ready' %}
      <button class="ux-order-ticket__action ux-order-ticket__action--secondary"
              hx-post="{% url 'update_order_status' order.id %}"
              hx-vals='{"status": "completed"}'
              hx-target="#order-{{ order.id }}"
              hx-swap="outerHTML delete:1s">
        Complete
      </button>
    {% endif %}
  </div>
</div></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">Partial del Item (order_item.html)</h4>
      <pre class="ux-code-block" data-lang="html"><!-- templates/kitchen/partials/order_item.html -->
<li id="item-{{ item.id }}"
    class="ux-order-ticket__item{% if item.is_completed %} ux-order-ticket__item--completed{% endif %}"
    hx-post="{% url 'toggle_item' item.id %}"
    hx-target="#item-{{ item.id }}"
    hx-swap="outerHTML"
    style="cursor: pointer;">
  <span class="ux-order-ticket__item-qty">{{ item.quantity }}</span>
  <div class="ux-order-ticket__item-content">
    <span class="ux-order-ticket__item-name">{{ item.product_name }}</span>
    {% if item.modifiers.exists %}
      <div class="ux-order-ticket__item-modifiers">
        {% for mod in item.modifiers.all %}
          <span class="ux-order-ticket__item-modifier{% if mod.modifier_type == 'remove' %} ux-order-ticket__item-modifier--remove{% endif %}">
            {{ mod.name }}
          </span>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</li></pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">WebSocket con Django Channels (Opcional)</h4>
      <pre class="ux-code-block" data-lang="python"># consumers.py - Para actualizaciones en tiempo real
import json
from channels.generic.websocket import AsyncWebsocketConsumer

class KitchenConsumer(AsyncWebsocketConsumer):
    async def connect(self):
        await self.channel_layer.group_add("kitchen", self.channel_name)
        await self.accept()

    async def disconnect(self, close_code):
        await self.channel_layer.group_discard("kitchen", self.channel_name)

    async def order_update(self, event):
        """Envia actualizacion de orden al frontend"""
        await self.send(text_data=json.dumps({
            'type': 'order_update',
            'order_id': event['order_id'],
            'html': event['html']
        }))

# En views.py, notificar al grupo despues de actualizar:
from channels.layers import get_channel_layer
from asgiref.sync import async_to_sync

def notify_kitchen(order):
    channel_layer = get_channel_layer()
    html = render_to_string('kitchen/partials/order_ticket.html', {'order': order})
    async_to_sync(channel_layer.group_send)(
        "kitchen",
        {
            "type": "order_update",
            "order_id": order.id,
            "html": html
        }
    )</pre>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); font-weight: 600;">JavaScript para WebSocket + HTMX</h4>
      <pre class="ux-code-block" data-lang="html"><!-- En display.html, agregar al final del body -->
<script>
// Conexion WebSocket para actualizaciones en tiempo real
const socket = new WebSocket(
  'ws://' + window.location.host + '/ws/kitchen/'
);

socket.onmessage = function(e) {
  const data = JSON.parse(e.data);
  if (data.type === 'order_update') {
    const orderEl = document.getElementById('order-' + data.order_id);
    if (orderEl) {
      // Actualizar ticket existente
      orderEl.outerHTML = data.html;
    } else {
      // Nueva orden - agregar al grid
      const grid = document.getElementById('orders-grid');
      grid.insertAdjacentHTML('beforeend', data.html);
    }
    // Re-procesar HTMX en el nuevo contenido
    htmx.process(document.getElementById('order-' + data.order_id));
  }
};

socket.onclose = function(e) {
  console.error('Kitchen socket closed unexpectedly');
  // Reconectar despues de 3 segundos
  setTimeout(() => location.reload(), 3000);
};
</script></pre>
    </section>