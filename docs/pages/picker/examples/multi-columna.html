<section x-data="uxPicker({
  title: 'Fecha',
  columns: [
    { label: 'Dia', options: Array.from({length: 31}, (_, i) => i + 1), selectedIndex: 14 },
    { label: 'Mes', options: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'], selectedIndex: 5 },
    { label: 'Ano', options: ['2022', '2023', '2024', '2025', '2026'], selectedIndex: 2 }
  ]
})">
  <div class="demo-box">
    <button class="ux-button ux-color-primary" @click="open()">Seleccionar Fecha</button>
    <span class="ux-text-secondary" x-text="'Fecha: ' + columns[0].options[selectedIndexes[0]] + ' ' + columns[1].options[selectedIndexes[1]] + ' ' + columns[2].options[selectedIndexes[2]]"></span>
  </div>

  <!-- Picker Backdrop -->
  <div class="ux-picker-backdrop" :class="{ 'ux-picker-backdrop--open': isOpen }" @click.self="cancel()">
    <div class="ux-picker">
      <div class="ux-picker__header">
        <button class="ux-picker__button ux-picker__button--cancel" @click="cancel()">Cancelar</button>
        <span class="ux-picker__title" x-text="title"></span>
        <button class="ux-picker__button ux-picker__button--confirm" @click="confirm()">Listo</button>
      </div>
      <div class="ux-picker__columns">
        <template x-for="(column, colIndex) in columns" :key="colIndex">
          <div class="ux-picker__column"
               :class="{ 'ux-picker__column--dragging': _columnStates[colIndex]?.isDragging }"
               @touchstart="onTouchStart($event, colIndex)"
               @touchmove="onTouchMove($event, colIndex)"
               @touchend="onTouchEnd($event, colIndex)"
               @mousedown="onTouchStart($event, colIndex)"
               @mousemove="onTouchMove($event, colIndex)"
               @mouseup="onTouchEnd($event, colIndex)"
               @mouseleave="onTouchEnd($event, colIndex)">
            <div class="ux-picker__column-wrapper" :style="{ transform: getColumnTransform(colIndex) }">
              <template x-for="(option, optIndex) in column.options" :key="optIndex">
                <div class="ux-picker__item"
                     :class="{ 'ux-picker__item--selected': isSelected(colIndex, optIndex) }"
                     @click="selectItem(colIndex, optIndex)"
                     x-text="typeof option === 'object' ? option.text : option"></div>
              </template>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>
</section>
