<!-- Basic Picker -->
<section class="component-section">
  <h3>Picker Basico</h3>
  <p>Selector de columna unica estilo iOS.</p>
  <ux-playground src="pages/picker/examples/basico.html"></ux-playground>
</section>

<!-- Multi-column Picker -->
<section class="component-section">
  <h3>Picker Multi-columna</h3>
  <p>Selector con multiples columnas para fechas u otros datos.</p>
  <ux-playground src="pages/picker/examples/multi-columna.html"></ux-playground>
</section>

<!-- Time Picker -->
<section class="component-section">
  <h3>Selector de Hora</h3>
  <p>Picker configurado como selector de hora.</p>
  <ux-playground src="pages/picker/examples/hora.html"></ux-playground>
</section>

<!-- Inline Picker -->
<section class="component-section">
  <h3>Picker Inline</h3>
  <p>Picker mostrado directamente en la pagina sin modal.</p>
  <ux-playground src="pages/picker/examples/inline.html"></ux-playground>
</section>

<!-- Events -->
<section class="component-section">
  <h3>Eventos</h3>
  <p>Escuchar eventos del picker.</p>
  <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxPicker({ columns: [...] })"
     @picker-confirm="console.log('Valores:', $event.detail.values)"
     @picker-cancel="console.log('Cancelado')"
     @picker-change="console.log('Columna:', $event.detail.columnIndex, 'Valor:', $event.detail.value)"&gt;
  ...
&lt;/div&gt;</pre>
</section>

<!-- HTMX + Django -->
<section class="component-section">
  <h3>HTMX + Django</h3>
  <p>Cargar opciones del picker dinamicamente desde el servidor.</p>

  <h4 style="font-size: var(--ux-font-size-md); margin: var(--ux-space-md) 0;">Picker con opciones dinamicas</h4>
  <pre class="ux-code-block" data-lang="html">&lt;!-- Boton que carga opciones y abre el picker --&gt;
&lt;div x-data="uxPicker({ columns: [] })"
     @htmx:after-request="
       if ($event.detail.successful) {
         columns = JSON.parse($event.detail.xhr.response);
         selectedIndexes = columns.map(c =&gt; c.selectedIndex || 0);
         open();
       }
     "&gt;
  &lt;button class="ux-button"
          hx-get="/api/picker-options/"
          hx-trigger="click"&gt;
    Seleccionar Categoria
  &lt;/button&gt;

  &lt;!-- Picker backdrop --&gt;
  &lt;div class="ux-picker-backdrop" :class="{ 'ux-picker-backdrop--open': isOpen }"&gt;
    &lt;div class="ux-picker"&gt;...&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>

  <h4 style="font-size: var(--ux-font-size-md); margin: var(--ux-space-md) 0;">Vista Django</h4>
  <pre class="ux-code-block" data-lang="python"># views.py
from django.http import JsonResponse

def picker_options(request):
    """Retorna opciones para el picker"""
    categorias = Categoria.objects.values_list('nombre', flat=True)

    columns = [{
        'label': 'Categoria',
        'options': list(categorias),
        'selectedIndex': 0
    }]

    return JsonResponse(columns, safe=False)</pre>

  <h4 style="font-size: var(--ux-font-size-md); margin: var(--ux-space-md) 0;">Picker cascada (columnas dependientes)</h4>
  <pre class="ux-code-block" data-lang="html">&lt;!-- Picker con columnas que dependen entre si --&gt;
&lt;div x-data="uxPicker({
       columns: [
         { label: 'Pais', options: [], selectedIndex: 0 },
         { label: 'Ciudad', options: [], selectedIndex: 0 }
       ]
     })"
     x-init="
       fetch('/api/paises/').then(r =&gt; r.json()).then(data =&gt; {
         columns[0].options = data;
       });
     "
     @picker-change="
       if ($event.detail.columnIndex === 0) {
         const pais = columns[0].options[$event.detail.optionIndex];
         fetch('/api/ciudades/?pais=' + encodeURIComponent(pais))
           .then(r =&gt; r.json())
           .then(data =&gt; {
             columns[1].options = data;
             selectedIndexes[1] = 0;
           });
       }
     "&gt;
  &lt;button class="ux-button" @click="open()"&gt;Seleccionar Ubicacion&lt;/button&gt;
  ...
&lt;/div&gt;</pre>

  <h4 style="font-size: var(--ux-font-size-md); margin: var(--ux-space-md) 0;">Enviar seleccion al servidor</h4>
  <pre class="ux-code-block" data-lang="html">&lt;!-- Enviar valor seleccionado via HTMX --&gt;
&lt;div x-data="uxPicker({ columns: [...] })"
     @picker-confirm="
       const valores = getValues();
       htmx.ajax('POST', '/api/guardar-seleccion/', {
         values: { seleccion: JSON.stringify(valores) },
         target: '#resultado'
       });
     "&gt;
  ...
&lt;/div&gt;

&lt;!-- O usando un input hidden --&gt;
&lt;form hx-post="/api/guardar/" hx-target="#resultado"&gt;
  &lt;div x-data="uxPicker({ columns: [...] })"
       @picker-confirm="$refs.input.value = JSON.stringify(getValues())"&gt;
    &lt;input type="hidden" name="seleccion" x-ref="input"&gt;
    &lt;button type="button" class="ux-button" @click="open()"&gt;Seleccionar&lt;/button&gt;
    ...
  &lt;/div&gt;
  &lt;button type="submit" class="ux-button ux-color-primary"&gt;Guardar&lt;/button&gt;
&lt;/form&gt;</pre>

  <h4 style="font-size: var(--ux-font-size-md); margin: var(--ux-space-md) 0;">Vista Django para columnas cascada</h4>
  <pre class="ux-code-block" data-lang="python"># views.py
def paises(request):
    paises = Pais.objects.values_list('nombre', flat=True)
    return JsonResponse(list(paises), safe=False)

def ciudades(request):
    pais = request.GET.get('pais')
    ciudades = Ciudad.objects.filter(
        pais__nombre=pais
    ).values_list('nombre', flat=True)
    return JsonResponse(list(ciudades), safe=False)

def guardar_seleccion(request):
    import json
    seleccion = json.loads(request.POST.get('seleccion', '[]'))
    # Procesar seleccion...
    return HttpResponse('&lt;div class="ux-alert"&gt;Guardado!&lt;/div&gt;')</pre>
</section>

<!-- API Table -->
<section class="component-section">
  <h3>API Alpine</h3>
  <table class="ux-table">
    <thead>
      <tr>
        <th>Metodo/Propiedad</th>
        <th>Descripcion</th>
      </tr>
    </thead>
    <tbody>
      <tr><td><code>open(options)</code></td><td>Abre el picker</td></tr>
      <tr><td><code>close()</code></td><td>Cierra el picker</td></tr>
      <tr><td><code>confirm()</code></td><td>Confirma y cierra</td></tr>
      <tr><td><code>cancel()</code></td><td>Cancela y cierra</td></tr>
      <tr><td><code>getValues()</code></td><td>Retorna array de valores seleccionados</td></tr>
      <tr><td><code>setValues(values)</code></td><td>Establece valores programaticamente</td></tr>
      <tr><td><code>scrollToIndex(col, idx)</code></td><td>Scroll a indice en columna</td></tr>
      <tr><td><code>columns</code></td><td>Array de columnas con opciones</td></tr>
      <tr><td><code>selectedIndexes</code></td><td>Array de indices seleccionados</td></tr>
      <tr><td><code>isOpen</code></td><td>Estado de visibilidad</td></tr>
    </tbody>
  </table>
</section>

<!-- CSS Classes -->
<section class="component-section">
  <h3>Clases CSS</h3>
  <table class="ux-table">
    <thead>
      <tr>
        <th>Clase</th>
        <th>Descripcion</th>
      </tr>
    </thead>
    <tbody>
      <tr><td><code>.ux-picker-backdrop</code></td><td>Fondo oscuro</td></tr>
      <tr><td><code>.ux-picker-backdrop--open</code></td><td>Estado visible</td></tr>
      <tr><td><code>.ux-picker</code></td><td>Contenedor del picker</td></tr>
      <tr><td><code>.ux-picker--inline</code></td><td>Picker sin modal</td></tr>
      <tr><td><code>.ux-picker--sm</code></td><td>Tamano pequeno</td></tr>
      <tr><td><code>.ux-picker--lg</code></td><td>Tamano grande</td></tr>
      <tr><td><code>.ux-picker__header</code></td><td>Cabecera con botones</td></tr>
      <tr><td><code>.ux-picker__columns</code></td><td>Contenedor de columnas</td></tr>
      <tr><td><code>.ux-picker__column</code></td><td>Columna individual</td></tr>
      <tr><td><code>.ux-picker__item</code></td><td>Item de columna</td></tr>
      <tr><td><code>.ux-picker__item--selected</code></td><td>Item seleccionado</td></tr>
    </tbody>
  </table>
</section>
