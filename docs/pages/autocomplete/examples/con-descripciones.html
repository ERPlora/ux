<div x-data="uxAutocomplete({
  items: [
    { label: 'Madrid', value: 'madrid', description: 'Capital de EspaÃ±a', icon: 'ðŸ›ï¸' },
    { label: 'Barcelona', value: 'barcelona', description: 'CataluÃ±a, EspaÃ±a', icon: 'â›±ï¸' },
    { label: 'Valencia', value: 'valencia', description: 'Comunidad Valenciana', icon: 'ðŸŠ' },
    { label: 'Sevilla', value: 'sevilla', description: 'AndalucÃ­a, EspaÃ±a', icon: 'ðŸŒž' },
    { label: 'Bilbao', value: 'bilbao', description: 'PaÃ­s Vasco, EspaÃ±a', icon: 'ðŸ”ï¸' },
    { label: 'MÃ¡laga', value: 'malaga', description: 'Costa del Sol', icon: 'ðŸ–ï¸' },
    { label: 'Zaragoza', value: 'zaragoza', description: 'AragÃ³n, EspaÃ±a', icon: 'â›ª' },
    { label: 'Palma', value: 'palma', description: 'Islas Baleares', icon: 'ðŸŒ´' }
  ],
  placeholder: 'Buscar ciudad...'
})">
  <div class="ux-autocomplete" style="max-width: 400px;">
    <input type="text"
           class="ux-autocomplete__input"
           x-ref="input"
           x-model="query"
           :placeholder="placeholder"
           @input="onInput()"
           @focus="onFocus()"
           @blur="onBlur()"
           @keydown="onKeydown($event)"
           autocomplete="off">

    <button class="ux-autocomplete__clear"
            :class="{ 'ux-autocomplete__clear--hidden': !query }"
            @click="clear()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>

    <div class="ux-autocomplete__dropdown"
         :class="{ 'ux-autocomplete__dropdown--open': isOpen }">
      <ul class="ux-autocomplete__list" x-show="filteredItems.length > 0">
        <template x-for="(item, index) in filteredItems" :key="getValue(item)">
          <li class="ux-autocomplete__item"
              :class="{ 'ux-autocomplete__item--active': index === activeIndex }"
              @click="select(item)"
              @mouseenter="activeIndex = index">
            <span style="font-size: 1.5rem; margin-right: 0.5rem;" x-text="item.icon"></span>
            <div class="ux-autocomplete__item-content">
              <div class="ux-autocomplete__item-label" x-html="highlight(getLabel(item))"></div>
              <div class="ux-autocomplete__item-description" x-html="highlight(getDescription(item))"></div>
            </div>
          </li>
        </template>
      </ul>

      <div class="ux-autocomplete__empty" x-show="filteredItems.length === 0 && query.length >= minChars">
        <div class="ux-autocomplete__empty-icon" x-html="icons.empty"></div>
        <span class="ux-autocomplete__empty-text" x-text="emptyText"></span>
      </div>
    </div>
  </div>
</div>
