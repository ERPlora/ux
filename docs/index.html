<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>UX - Universal eXtensions</title>
  <!-- Bootstrap Grid -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap-grid.min.css" rel="stylesheet">
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- UX Components -->
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-content.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-list.js"></script>
  <script src="../components/ux-navbar.js"></script>
  <script src="../components/ux-badge.js"></script>
  <script src="../components/ux-searchbar.js"></script>
  <script src="../components/ux-menu.js"></script>
  <script src="../components/ux-card.js"></script>
  <link rel="stylesheet" href="../css/themes.css">
</head>
<body class="ux-app" x-data="docsApp()">
  <div class="ux-split-pane" :class="{ 'ux-split-pane--open': sidebarOpen, 'ux-split-pane--collapsed': sidebarCollapsed }">
    <!-- Backdrop (mobile) -->
    <div class="ux-split-pane__backdrop" @click="sidebarOpen = false"></div>

    <!-- Sidebar -->
    <aside class="ux-split-pane__side" aria-label="Menu de navegacion">
      <!-- Sidebar Header -->
      <div class="ux-navbar">
        <div class="ux-navbar__content">
          <div class="ux-navbar__center">
            <a href="index.html" class="ux-navbar__title">
              UX
              <span class="ux-badge ux-color-primary ux-ml-sm">v1.0</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Search -->
      <div class="ux-p-sm">
        <div class="ux-searchbar ux-searchbar--sm">
          <span class="ux-searchbar__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
          </span>
          <input type="search"
                 class="ux-searchbar__input"
                 placeholder="Buscar componente..."
                 x-model="searchQuery"
                 @input="filterMenu()">
        </div>
      </div>

      <!-- Navigation Menu -->
      <nav class="ux-scroll" aria-label="Componentes">
        <ul class="ux-menu__list">
          <!-- Getting Started -->
          <li class="ux-menu__header" x-show="!searchQuery || 'getting started inicio'.includes(searchQuery.toLowerCase())">Getting Started</li>
          <li>
            <a class="ux-menu__item"
               :class="{ 'ux-menu__item--selected': currentPage === 'home' }"
               @click="loadPage('home', 'Home')">
              <span class="ux-menu__item-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
              </span>
              <span class="ux-menu__item-label">Home</span>
            </a>
          </li>

          <!-- Dynamic Sections -->
          <template x-for="section in filteredMenu" :key="section.name">
            <li>
              <div class="ux-menu__header" x-text="section.name"></div>
              <ul class="ux-menu__list">
                <template x-for="item in section.items" :key="item.page">
                  <li>
                    <a class="ux-menu__item"
                       :class="{ 'ux-menu__item--selected': currentPage === item.page }"
                       @click="loadPage(item.page, item.name)">
                      <span class="ux-menu__item-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" x-html="item.icon"></svg>
                      </span>
                      <span class="ux-menu__item-label" x-text="item.name"></span>
                    </a>
                  </li>
                </template>
              </ul>
            </li>
          </template>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="ux-split-pane__main">
      <!-- Top Navbar -->
      <nav class="ux-navbar ux-navbar--sticky" aria-label="Barra de navegacion">
        <div class="ux-navbar__content">
          <div class="ux-navbar__start">
            <button class="ux-navbar__button" @click="window.innerWidth >= 992 ? toggleSidebar() : sidebarOpen = true">
              <span class="ux-navbar__back">
                <span class="ux-navbar__back-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                  </svg>
                </span>
              </span>
            </button>
          </div>
          <div class="ux-navbar__center">
            <span class="ux-navbar__title" x-text="pageTitle"></span>
          </div>
          <div class="ux-navbar__end">
            <button class="ux-navbar__button" @click="toggleDarkMode()">
              <svg x-show="darkMode" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
              </svg>
              <svg x-show="!darkMode" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
              </svg>
            </button>
          </div>
        </div>
      </nav>

      <!-- Page Content -->
      <div class="ux-content">
        <!-- Home Page -->
        <div x-show="currentPage === 'home'" class="ux-p-xl">
          <div class="container-fluid">
            <div class="row justify-content-center">
              <div class="col-12 col-lg-10 col-xl-8">
                <!-- Header -->
                <h1 class="ux-text-2xl ux-font-bold ux-mb-md">UX - Universal eXtensions</h1>
                <p class="ux-text-lg ux-text-secondary ux-mb-xl">
                  Componentes iOS-style para web, optimizados para HTMX y Alpine.js. Zero-build, touch-first, y completamente autocontenidos.
                </p>

                <!-- Quick Start Card -->
                <div class="ux-card ux-mb-xl">
                  <div class="ux-card__header">
                    <h2 class="ux-card__title">Quick Start</h2>
                  </div>
                  <div class="ux-card__content">
                    <pre class="ux-code"><code>&lt;!-- Core (requerido) --&gt;
&lt;script src="components/ux-core.js"&gt;&lt;/script&gt;

&lt;!-- Componentes individuales --&gt;
&lt;script src="components/ux-button.js"&gt;&lt;/script&gt;
&lt;script src="components/ux-modal.js"&gt;&lt;/script&gt;

&lt;!-- O cargar todos --&gt;
&lt;script src="dist/ux.min.js"&gt;&lt;/script&gt;

&lt;!-- Dependencias opcionales --&gt;
&lt;script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"&gt;&lt;/script&gt;</code></pre>
                  </div>
                </div>

                <!-- Bootstrap Grid Card -->
                <div class="ux-card ux-mb-xl">
                  <div class="ux-card__header">
                    <h2 class="ux-card__title">Bootstrap Grid</h2>
                  </div>
                  <div class="ux-card__content">
                    <p class="ux-text-secondary ux-mb-md">UX usa Bootstrap Grid 5.3 para el sistema de layout. Cargar antes de ux-core.js:</p>
                    <pre class="ux-code"><code>&lt;!-- Bootstrap Grid (solo grid, sin componentes) --&gt;
&lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap-grid.min.css" rel="stylesheet"&gt;

&lt;!-- Luego cargar UX --&gt;
&lt;script src="dist/ux.min.js"&gt;&lt;/script&gt;</code></pre>
                    <p class="ux-text-secondary ux-mt-md">Uso del grid:</p>
                    <pre class="ux-code"><code>&lt;div class="container"&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-12 col-md-6 col-lg-4"&gt;Columna 1&lt;/div&gt;
    &lt;div class="col-12 col-md-6 col-lg-4"&gt;Columna 2&lt;/div&gt;
    &lt;div class="col-12 col-md-12 col-lg-4"&gt;Columna 3&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
                  </div>
                </div>

                <!-- Custom Themes Card -->
                <div class="ux-card ux-mb-xl">
                  <div class="ux-card__header">
                    <h2 class="ux-card__title">Crear Tema de Colores</h2>
                  </div>
                  <div class="ux-card__content">
                    <p class="ux-text-secondary ux-mb-md">Crea tu propio tema sobrescribiendo las variables CSS del primary color:</p>
                    <pre class="ux-code"><code>/* Mi tema personalizado */
.ux-theme-custom {
  /* Color primario - usar tonos de tu marca */
  --ux-primary: #8B5CF6;           /* Violeta */
  --ux-primary-rgb: 139, 92, 246;
  --ux-primary-contrast: #ffffff;
  --ux-primary-shade: #7C3AED;     /* Mas oscuro */
  --ux-primary-tint: #A78BFA;      /* Mas claro */
}

/* Aplicar a todo el documento */
&lt;body class="ux-theme-custom"&gt;</code></pre>
                    <p class="ux-text-secondary ux-mt-md ux-mb-md">Temas incluidos:</p>
                    <div class="row g-2">
                      <div class="col-auto"><span class="ux-badge ux-color-primary">ocean (default)</span></div>
                      <div class="col-auto"><span class="ux-badge ux-color-success">emerald</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-purple-500); color: white;">purple</span></div>
                      <div class="col-auto"><span class="ux-badge ux-color-warning">sunset</span></div>
                      <div class="col-auto"><span class="ux-badge ux-color-danger">rose</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-teal-500); color: white;">teal</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-amber-500); color: white;">amber</span></div>
                      <div class="col-auto"><span class="ux-badge ux-color-dark">slate</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-indigo-500); color: white;">indigo</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-cyan-500); color: white;">cyan</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-red-700); color: white;">crimson</span></div>
                      <div class="col-auto"><span class="ux-badge" style="background: var(--ux-green-700); color: white;">forest</span></div>
                    </div>
                    <pre class="ux-code ux-mt-md"><code>&lt;!-- Usar tema incluido --&gt;
&lt;body class="ux-theme-emerald"&gt;

&lt;!-- Dark mode --&gt;
&lt;body class="ux-theme-purple ux-dark"&gt;</code></pre>
                  </div>
                </div>

                <!-- Features Grid -->
                <h2 class="ux-text-lg ux-font-semibold ux-mb-md">Caracteristicas</h2>
                <div class="row g-3 ux-mb-xl">
                  <div class="col-6 col-md-4">
                    <div class="ux-card">
                      <div class="ux-card__content ux-text-center">
                        <div class="ux-text-2xl ux-mb-sm">&#9889;</div>
                        <div class="ux-font-semibold">Zero Build</div>
                        <div class="ux-text-sm ux-text-secondary">Sin compilacion</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-6 col-md-4">
                    <div class="ux-card">
                      <div class="ux-card__content ux-text-center">
                        <div class="ux-text-2xl ux-mb-sm">&#128230;</div>
                        <div class="ux-font-semibold">Autocontenido</div>
                        <div class="ux-text-sm ux-text-secondary">CSS + JS en uno</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-6 col-md-4">
                    <div class="ux-card">
                      <div class="ux-card__content ux-text-center">
                        <div class="ux-text-2xl ux-mb-sm">&#128241;</div>
                        <div class="ux-font-semibold">Touch-First</div>
                        <div class="ux-text-sm ux-text-secondary">Optimizado mobile</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-6 col-md-4">
                    <div class="ux-card">
                      <div class="ux-card__content ux-text-center">
                        <div class="ux-text-2xl ux-mb-sm">&#127822;</div>
                        <div class="ux-font-semibold">iOS Style</div>
                        <div class="ux-text-sm ux-text-secondary">Pixel-perfect</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-6 col-md-4">
                    <div class="ux-card">
                      <div class="ux-card__content ux-text-center">
                        <div class="ux-text-2xl ux-mb-sm">&#127769;</div>
                        <div class="ux-font-semibold">Dark Mode</div>
                        <div class="ux-text-sm ux-text-secondary">Claro y oscuro</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-6 col-md-4">
                    <div class="ux-card">
                      <div class="ux-card__content ux-text-center">
                        <div class="ux-text-2xl ux-mb-sm">&#128736;</div>
                        <div class="ux-font-semibold">HTMX Ready</div>
                        <div class="ux-text-sm ux-text-secondary">Compatible</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Component Count Card -->
                <div class="ux-card" style="background: linear-gradient(135deg, var(--ux-primary) 0%, var(--ux-primary-shade) 100%); color: white;">
                  <div class="ux-card__content ux-text-center">
                    <div class="ux-text-3xl ux-font-bold ux-mb-sm">40+</div>
                    <div>Componentes disponibles</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Component Pages (iframe) -->
        <iframe x-show="currentPage !== 'home'"
                :src="currentPage !== 'home' ? currentPage + '.html' : ''"
                class="ux-frame"
                title="Component documentation"
                @load="loading = false; syncThemeToIframe()"></iframe>
      </div>
    </main>
  </div>

  <script>
    function docsApp() {
      return {
        sidebarOpen: false,
        sidebarCollapsed: localStorage.getItem('ux-sidebar-collapsed') === 'true',
        darkMode: false,
        currentPage: 'home',
        pageTitle: 'Home',
        loading: false,
        searchQuery: '',

        menu: [
          {
            name: 'Basicos',
            items: [
              { name: 'Button', page: 'button', icon: '<rect x="3" y="6" width="18" height="12" rx="2" stroke-width="2"/>' },
              { name: 'Badge', page: 'badge', icon: '<circle cx="12" cy="12" r="8" stroke-width="2"/>' },
              { name: 'Chip', page: 'chip', icon: '<rect x="2" y="8" width="20" height="8" rx="4" stroke-width="2"/>' },
              { name: 'Spinner', page: 'spinner', icon: '<circle cx="12" cy="12" r="8" stroke-width="2" stroke-dasharray="40" stroke-dashoffset="10"/>' },
              { name: 'Progress', page: 'progress', icon: '<rect x="2" y="10" width="20" height="4" rx="2" stroke-width="2"/>' },
              { name: 'Avatar', page: 'avatar', icon: '<circle cx="12" cy="8" r="4" stroke-width="2"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6" stroke-width="2"/>' },
              { name: 'Img', page: 'img', icon: '<rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/><path d="M21 15l-5-5L5 21" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Formularios',
            items: [
              { name: 'Input', page: 'input', icon: '<rect x="3" y="6" width="18" height="12" rx="2" stroke-width="2"/><path d="M7 12h4" stroke-width="2"/>' },
              { name: 'Checkbox', page: 'checkbox', icon: '<rect x="4" y="4" width="16" height="16" rx="2" stroke-width="2"/><path d="M8 12l3 3 5-6" stroke-width="2"/>' },
              { name: 'Radio', page: 'radio', icon: '<circle cx="12" cy="12" r="8" stroke-width="2"/><circle cx="12" cy="12" r="4" fill="currentColor"/>' },
              { name: 'Toggle', page: 'toggle', icon: '<rect x="2" y="8" width="20" height="8" rx="4" stroke-width="2"/><circle cx="17" cy="12" r="3" fill="currentColor"/>' },
              { name: 'Select', page: 'select', icon: '<rect x="3" y="6" width="18" height="12" rx="2" stroke-width="2"/><path d="M9 10l3 3 3-3" stroke-width="2"/>' },
              { name: 'Searchbar', page: 'searchbar', icon: '<circle cx="10" cy="10" r="6" stroke-width="2"/><path d="M14 14l6 6" stroke-width="2"/>' },
              { name: 'Textarea', page: 'textarea', icon: '<rect x="3" y="4" width="18" height="16" rx="2" stroke-width="2"/><path d="M7 8h10M7 12h8M7 16h6" stroke-width="2"/>' },
              { name: 'Range', page: 'range', icon: '<path d="M4 12h16" stroke-width="2"/><circle cx="14" cy="12" r="3" fill="currentColor"/>' },
            ]
          },
          {
            name: 'Layout',
            items: [
              { name: 'Card', page: 'card', icon: '<rect x="3" y="4" width="18" height="16" rx="2" stroke-width="2"/>' },
              { name: 'List', page: 'list', icon: '<path d="M4 6h16M4 12h16M4 18h16" stroke-width="2"/>' },
              { name: 'Content', page: 'content', icon: '<rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2"/><path d="M3 9h18" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Navegacion',
            items: [
              { name: 'Navbar', page: 'navbar', icon: '<rect x="2" y="4" width="20" height="6" rx="1" stroke-width="2"/>' },
              { name: 'Toolbar', page: 'toolbar', icon: '<rect x="2" y="6" width="20" height="4" rx="1" stroke-width="2"/><rect x="2" y="14" width="20" height="4" rx="1" stroke-width="2"/>' },
              { name: 'Tabs', page: 'tabs', icon: '<path d="M4 18h16M4 18V8h5l2-3h6v13" stroke-width="2"/>' },
              { name: 'Segment', page: 'segment', icon: '<rect x="2" y="8" width="20" height="8" rx="2" stroke-width="2"/><path d="M9 8v8M15 8v8" stroke-width="2"/>' },
              { name: 'Menu', page: 'menu', icon: '<path d="M4 6h16M4 12h16M4 18h16" stroke-width="2"/>' },
              { name: 'Breadcrumbs', page: 'breadcrumbs', icon: '<path d="M4 12h4m4 0h4m4 0h0" stroke-width="2"/><path d="M10 8l4 4-4 4" stroke-width="2"/>' },
              { name: 'Back Button', page: 'back-button', icon: '<path d="M15 18l-6-6 6-6" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Overlay',
            items: [
              { name: 'Modal', page: 'modal', icon: '<rect x="4" y="4" width="16" height="16" rx="2" stroke-width="2"/><path d="M4 9h16" stroke-width="2"/>' },
              { name: 'Sheet', page: 'sheet', icon: '<path d="M4 14h16v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-6z" stroke-width="2"/><path d="M10 14V4h4v10" stroke-width="2"/>' },
              { name: 'Alert', page: 'alert', icon: '<path d="M12 9v4m0 4h.01" stroke-width="2"/><circle cx="12" cy="12" r="9" stroke-width="2"/>' },
              { name: 'Toast', page: 'toast', icon: '<rect x="3" y="14" width="18" height="6" rx="2" stroke-width="2"/>' },
              { name: 'Popover', page: 'popover', icon: '<rect x="4" y="4" width="16" height="12" rx="2" stroke-width="2"/><path d="M12 16l-3 4h6l-3-4z" fill="currentColor"/>' },
              { name: 'Loading', page: 'loading', icon: '<circle cx="12" cy="12" r="8" stroke-width="2" stroke-dasharray="40" stroke-dashoffset="10"/>' },
              { name: 'Picker', page: 'picker', icon: '<rect x="4" y="4" width="16" height="16" rx="2" stroke-width="2"/><path d="M4 10h16M4 14h16" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Feedback',
            items: [
              { name: 'Skeleton', page: 'skeleton', icon: '<rect x="3" y="4" width="18" height="4" rx="1" stroke-width="2" opacity="0.5"/><rect x="3" y="12" width="12" height="4" rx="1" stroke-width="2" opacity="0.5"/>' },
              { name: 'FAB', page: 'fab', icon: '<circle cx="12" cy="12" r="8" stroke-width="2"/><path d="M12 8v8M8 12h8" stroke-width="2"/>' },
              { name: 'Rating', page: 'rating', icon: '<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Interactivos',
            items: [
              { name: 'Accordion', page: 'accordion', icon: '<rect x="3" y="4" width="18" height="4" rx="1" stroke-width="2"/><rect x="3" y="10" width="18" height="4" rx="1" stroke-width="2"/><rect x="3" y="16" width="18" height="4" rx="1" stroke-width="2"/>' },
              { name: 'Carousel', page: 'carousel', icon: '<rect x="2" y="6" width="20" height="12" rx="2" stroke-width="2"/><path d="M6 18h2M11 18h2M16 18h2" stroke-width="2"/>' },
              { name: 'Datetime', page: 'datetime', icon: '<rect x="3" y="4" width="18" height="18" rx="2" stroke-width="2"/><path d="M16 2v4M8 2v4M3 10h18" stroke-width="2"/>' },
              { name: 'Datatable', page: 'datatable', icon: '<rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2"/><path d="M3 9h18M3 15h18M9 9v12M15 9v12" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Gestos',
            items: [
              { name: 'Swipe', page: 'swipe', icon: '<path d="M14 4l6 6-6 6" stroke-width="2"/><path d="M4 10h14" stroke-width="2"/>' },
              { name: 'Infinite Scroll', page: 'infinite-scroll', icon: '<path d="M12 5v14M5 12l7 7 7-7" stroke-width="2"/>' },
              { name: 'Refresher', page: 'refresher', icon: '<path d="M4 4v5h5" stroke-width="2"/><path d="M20 20v-5h-5" stroke-width="2"/><path d="M4 9a8 8 0 0114.33-4.5M20 15a8 8 0 01-14.33 4.5" stroke-width="2"/>' },
              { name: 'Reorder', page: 'reorder', icon: '<path d="M4 6h16M4 12h16M4 18h16" stroke-width="2"/><path d="M8 3v6M8 15v6" stroke-width="2"/>' },
            ]
          },
          {
            name: 'Otros',
            items: [
              { name: 'PWA', page: 'pwa', icon: '<rect x="5" y="2" width="14" height="20" rx="2" stroke-width="2"/><path d="M12 18h.01" stroke-width="2"/>' },
            ]
          },
        ],

        filteredMenu: [],

        init() {
          this.filteredMenu = this.menu;

          // Check dark mode preference
          if (localStorage.getItem('ux-dark-mode') === 'true' ||
              (!localStorage.getItem('ux-dark-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            this.darkMode = true;
            document.documentElement.classList.add('ux-dark');
          }

          // Check URL hash for initial page
          if (window.location.hash) {
            const page = window.location.hash.slice(1);
            const item = this.findMenuItem(page);
            if (item) {
              this.loadPage(item.page, item.name);
            }
          }
        },

        findMenuItem(page) {
          for (const section of this.menu) {
            const item = section.items.find(i => i.page === page);
            if (item) return item;
          }
          return null;
        },

        loadPage(page, title) {
          this.currentPage = page;
          this.pageTitle = title;
          this.loading = true;
          this.sidebarOpen = false;

          if (page !== 'home') {
            window.location.hash = page;
          } else {
            window.location.hash = '';
          }
        },

        filterMenu() {
          if (!this.searchQuery) {
            this.filteredMenu = this.menu;
            return;
          }

          const query = this.searchQuery.toLowerCase();
          this.filteredMenu = this.menu
            .map(section => ({
              ...section,
              items: section.items.filter(item =>
                item.name.toLowerCase().includes(query) ||
                item.page.toLowerCase().includes(query)
              )
            }))
            .filter(section => section.items.length > 0);
        },

        syncThemeToIframe() {
          const iframe = document.querySelector('.ux-frame');
          if (iframe && iframe.contentWindow) {
            iframe.contentWindow.postMessage({ type: 'ux-theme', darkMode: this.darkMode }, '*');
          }
        },

        toggleDarkMode() {
          this.darkMode = !this.darkMode;
          localStorage.setItem('ux-dark-mode', this.darkMode);

          if (this.darkMode) {
            document.documentElement.classList.add('ux-dark');
          } else {
            document.documentElement.classList.remove('ux-dark');
          }

          this.syncThemeToIframe();
        },

        toggleSidebar() {
          this.sidebarCollapsed = !this.sidebarCollapsed;
          localStorage.setItem('ux-sidebar-collapsed', this.sidebarCollapsed);
        }
      };
    }
  </script>
</body>
</html>
