<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Progress Circle - UX Library</title>
  <link rel="stylesheet" href="../bootstrap-grid.min.css">
  <script src="../dist/ux.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
      background: var(--ux-surface-secondary);
      padding: 2rem;
      padding-bottom: 4rem;
    }
    .demo-section {
      margin-bottom: 3rem;
    }
    .demo-section h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--ux-text);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
    .demo-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      align-items: center;
    }
    pre {
      background: var(--ux-gray-900);
      color: var(--ux-gray-100);
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 0.8125rem;
      line-height: 1.5;
    }
    .demo-glass-bg {
      background: linear-gradient(135deg, var(--ux-indigo-500), var(--ux-purple-600));
      padding: 2rem;
      border-radius: 16px;
    }
  </style>
</head>
<body class="ux-app">

  <h1 style="margin-bottom: 0.5rem;">Progress Circle</h1>
  <p style="color: var(--ux-text-secondary); margin-bottom: 2rem;">
    Indicador de progreso circular con porcentaje, animación y múltiples variantes.
  </p>

  <!-- Basic Progress Circle -->
  <section class="demo-section">
    <h2>Básico</h2>

    <div class="demo-box">
      <div class="demo-flex">
        <div x-data="uxProgressCircle({ value: 75 })">
          <div class="ux-progress-circle" :class="{ 'ux-progress-circle--animated': animated && isVisible }">
            <svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size">
              <circle class="ux-progress-circle__bg"
                      :cx="size / 2" :cy="size / 2" :r="radius"/>
              <circle class="ux-progress-circle__fill"
                      :cx="size / 2" :cy="size / 2" :r="radius"
                      :stroke-dasharray="circumference"
                      :stroke-dashoffset="isVisible ? dashOffset : circumference"
                      :style="'--circumference: ' + circumference"/>
            </svg>
            <div class="ux-progress-circle__content" x-show="showValue">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
        </div>

        <div x-data="uxProgressCircle({ value: 50, label: 'Completado', showLabel: true })">
          <div class="ux-progress-circle" :class="{ 'ux-progress-circle--animated': animated && isVisible }">
            <svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size">
              <circle class="ux-progress-circle__bg" :cx="size / 2" :cy="size / 2" :r="radius"/>
              <circle class="ux-progress-circle__fill" :cx="size / 2" :cy="size / 2" :r="radius"
                      :stroke-dasharray="circumference" :stroke-dashoffset="isVisible ? dashOffset : circumference"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
              <span class="ux-progress-circle__label" x-text="label" x-show="showLabel"></span>
            </div>
          </div>
        </div>

        <div x-data="uxProgressCircle({ value: 25 })">
          <div class="ux-progress-circle" :class="{ 'ux-progress-circle--animated': animated && isVisible }">
            <svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size">
              <circle class="ux-progress-circle__bg" :cx="size / 2" :cy="size / 2" :r="radius"/>
              <circle class="ux-progress-circle__fill" :cx="size / 2" :cy="size / 2" :r="radius"
                      :stroke-dasharray="circumference" :stroke-dashoffset="isVisible ? dashOffset : circumference"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <pre>&lt;div x-data="uxProgressCircle({ value: 75 })"&gt;
  &lt;div class="ux-progress-circle"&gt;
    &lt;svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size"&gt;
      &lt;circle class="ux-progress-circle__bg" :cx="size/2" :cy="size/2" :r="radius"/&gt;
      &lt;circle class="ux-progress-circle__fill" :cx="size/2" :cy="size/2" :r="radius"
              :stroke-dasharray="circumference" :stroke-dashoffset="dashOffset"/&gt;
    &lt;/svg&gt;
    &lt;div class="ux-progress-circle__content"&gt;
      &lt;span class="ux-progress-circle__value" x-text="displayValue"&gt;&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
  </section>

  <!-- Sizes -->
  <section class="demo-section">
    <h2>Tamaños</h2>

    <div class="demo-box">
      <div class="demo-flex">
        <div x-data="uxProgressCircle({ value: 65 })">
          <div class="ux-progress-circle ux-progress-circle--xs">
            <svg class="ux-progress-circle__svg" viewBox="0 0 48 48">
              <circle class="ux-progress-circle__bg" cx="24" cy="24" r="20"/>
              <circle class="ux-progress-circle__fill" cx="24" cy="24" r="20"
                      :stroke-dasharray="2 * Math.PI * 20" :stroke-dashoffset="2 * Math.PI * 20 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; color: var(--ux-text-tertiary); margin-top: 0.5rem;">XS</p>
        </div>

        <div x-data="uxProgressCircle({ value: 65 })">
          <div class="ux-progress-circle ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; color: var(--ux-text-tertiary); margin-top: 0.5rem;">SM</p>
        </div>

        <div x-data="uxProgressCircle({ value: 65 })">
          <div class="ux-progress-circle">
            <svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size">
              <circle class="ux-progress-circle__bg" :cx="size / 2" :cy="size / 2" :r="radius"/>
              <circle class="ux-progress-circle__fill" :cx="size / 2" :cy="size / 2" :r="radius"
                      :stroke-dasharray="circumference" :stroke-dashoffset="dashOffset"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; color: var(--ux-text-tertiary); margin-top: 0.5rem;">Default</p>
        </div>

        <div x-data="uxProgressCircle({ value: 65 })">
          <div class="ux-progress-circle ux-progress-circle--lg">
            <svg class="ux-progress-circle__svg" viewBox="0 0 160 160">
              <circle class="ux-progress-circle__bg" cx="80" cy="80" r="70"/>
              <circle class="ux-progress-circle__fill" cx="80" cy="80" r="70"
                      :stroke-dasharray="2 * Math.PI * 70" :stroke-dashoffset="2 * Math.PI * 70 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; color: var(--ux-text-tertiary); margin-top: 0.5rem;">LG</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Colors -->
  <section class="demo-section">
    <h2>Colores</h2>

    <div class="demo-box">
      <div class="demo-flex">
        <div x-data="uxProgressCircle({ value: 70 })">
          <div class="ux-progress-circle ux-progress-circle--primary ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Primary</p>
        </div>

        <div x-data="uxProgressCircle({ value: 85 })">
          <div class="ux-progress-circle ux-progress-circle--success ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Success</p>
        </div>

        <div x-data="uxProgressCircle({ value: 55 })">
          <div class="ux-progress-circle ux-progress-circle--warning ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Warning</p>
        </div>

        <div x-data="uxProgressCircle({ value: 30 })">
          <div class="ux-progress-circle ux-progress-circle--danger ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Danger</p>
        </div>
      </div>
    </div>
  </section>

  <!-- With Thresholds -->
  <section class="demo-section">
    <h2>Con Umbrales de Color</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Cambia de color automáticamente según el valor.
    </p>

    <div class="demo-box" x-data="{ value: 45 }">
      <div class="demo-flex" style="margin-bottom: 1.5rem;">
        <div x-data="uxProgressCircle({
          value: 45,
          thresholds: { warning: 50, danger: 80 }
        })" x-effect="value = $data.value; setValue($data.value)">
          <div class="ux-progress-circle" :class="colorClass">
            <svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size">
              <circle class="ux-progress-circle__bg" :cx="size / 2" :cy="size / 2" :r="radius"/>
              <circle class="ux-progress-circle__fill" :cx="size / 2" :cy="size / 2" :r="radius"
                      :stroke-dasharray="circumference" :stroke-dashoffset="dashOffset"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
        </div>

        <div style="flex: 1; max-width: 300px;">
          <label style="display: block; margin-bottom: 0.5rem; font-size: 0.875rem;">
            Ajustar valor: <span x-text="value"></span>%
          </label>
          <input type="range" min="0" max="100" x-model="value" style="width: 100%;">
          <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--ux-text-tertiary); margin-top: 0.25rem;">
            <span>0-49: Primary</span>
            <span>50-79: Warning</span>
            <span>80+: Danger</span>
          </div>
        </div>
      </div>
    </div>

    <pre>uxProgressCircle({
  value: 45,
  thresholds: { warning: 50, danger: 80 }
})</pre>
  </section>

  <!-- Indeterminate -->
  <section class="demo-section">
    <h2>Indeterminado (Spinner)</h2>

    <div class="demo-box">
      <div class="demo-flex">
        <div>
          <div class="ux-progress-circle ux-progress-circle--indeterminate ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"/>
            </svg>
          </div>
        </div>

        <div>
          <div class="ux-progress-circle ux-progress-circle--indeterminate">
            <svg class="ux-progress-circle__svg" viewBox="0 0 120 120">
              <circle class="ux-progress-circle__bg" cx="60" cy="60" r="52"/>
              <circle class="ux-progress-circle__fill" cx="60" cy="60" r="52"/>
            </svg>
          </div>
        </div>

        <div>
          <div class="ux-progress-circle ux-progress-circle--indeterminate ux-progress-circle--success ux-progress-circle--lg">
            <svg class="ux-progress-circle__svg" viewBox="0 0 160 160">
              <circle class="ux-progress-circle__bg" cx="80" cy="80" r="70"/>
              <circle class="ux-progress-circle__fill" cx="80" cy="80" r="70"/>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Custom Format -->
  <section class="demo-section">
    <h2>Formato Personalizado</h2>

    <div class="demo-box">
      <div class="demo-flex">
        <div x-data="uxProgressCircle({ value: 750, max: 1000, format: 'value' })">
          <div class="ux-progress-circle ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
              <span class="ux-progress-circle__label">puntos</span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Valor</p>
        </div>

        <div x-data="uxProgressCircle({ value: 7, max: 10, format: 'fraction' })">
          <div class="ux-progress-circle ux-progress-circle--sm">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
              <span class="ux-progress-circle__label">pasos</span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Fracción</p>
        </div>

        <div x-data="uxProgressCircle({
          value: 3.5,
          max: 5,
          customFormat: (v, m, p) => v.toFixed(1) + ' GB'
        })">
          <div class="ux-progress-circle ux-progress-circle--sm ux-progress-circle--warning">
            <svg class="ux-progress-circle__svg" viewBox="0 0 80 80">
              <circle class="ux-progress-circle__bg" cx="40" cy="40" r="34"/>
              <circle class="ux-progress-circle__fill" cx="40" cy="40" r="34"
                      :stroke-dasharray="2 * Math.PI * 34" :stroke-dashoffset="2 * Math.PI * 34 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
              <span class="ux-progress-circle__label">de 5 GB</span>
            </div>
          </div>
          <p style="text-align: center; font-size: 0.75rem; margin-top: 0.5rem;">Custom</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Glass Variant -->
  <section class="demo-section">
    <h2>Glass Variant</h2>

    <div class="demo-glass-bg">
      <div class="demo-flex" style="justify-content: center;">
        <div x-data="uxProgressCircle({ value: 68 })">
          <div class="ux-progress-circle ux-progress-circle--glass">
            <svg class="ux-progress-circle__svg" :viewBox="'0 0 ' + size + ' ' + size">
              <circle class="ux-progress-circle__bg" :cx="size / 2" :cy="size / 2" :r="radius"/>
              <circle class="ux-progress-circle__fill" :cx="size / 2" :cy="size / 2" :r="radius"
                      :stroke-dasharray="circumference" :stroke-dashoffset="dashOffset"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
              <span class="ux-progress-circle__label">Completado</span>
            </div>
          </div>
        </div>

        <div x-data="uxProgressCircle({ value: 42 })">
          <div class="ux-progress-circle ux-progress-circle--glass ux-progress-circle--lg">
            <svg class="ux-progress-circle__svg" viewBox="0 0 160 160">
              <circle class="ux-progress-circle__bg" cx="80" cy="80" r="70"/>
              <circle class="ux-progress-circle__fill" cx="80" cy="80" r="70"
                      :stroke-dasharray="2 * Math.PI * 70" :stroke-dashoffset="2 * Math.PI * 70 * (1 - percentage / 100)"/>
            </svg>
            <div class="ux-progress-circle__content">
              <span class="ux-progress-circle__value" x-text="displayValue"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Interactive Demo -->
  <section class="demo-section">
    <h2>Demo Interactivo</h2>

    <div class="demo-box" x-data="{
      ...uxProgressCircle({ value: 0, animated: true }),
      interval: null,
      isRunning: false
    }">
      <div class="demo-flex" style="margin-bottom: 1.5rem;">
        <div class="ux-progress-circle ux-progress-circle--lg" :class="colorClass">
          <svg class="ux-progress-circle__svg" viewBox="0 0 160 160">
            <circle class="ux-progress-circle__bg" cx="80" cy="80" r="70"/>
            <circle class="ux-progress-circle__fill" cx="80" cy="80" r="70"
                    :stroke-dasharray="2 * Math.PI * 70" :stroke-dashoffset="2 * Math.PI * 70 * (1 - percentage / 100)"
                    style="transition: stroke-dashoffset 0.1s ease-out;"/>
          </svg>
          <div class="ux-progress-circle__content">
            <span class="ux-progress-circle__value" x-text="displayValue"></span>
            <span class="ux-progress-circle__label">Progreso</span>
          </div>
        </div>

        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
          <div style="display: flex; gap: 0.5rem;">
            <button class="ux-button ux-button--sm" @click="decrement(10)">-10</button>
            <button class="ux-button ux-button--sm" @click="decrement(1)">-1</button>
            <button class="ux-button ux-button--sm" @click="increment(1)">+1</button>
            <button class="ux-button ux-button--sm" @click="increment(10)">+10</button>
          </div>
          <div style="display: flex; gap: 0.5rem;">
            <button class="ux-button ux-button--sm ux-color-danger--outline" @click="reset()">Reset</button>
            <button class="ux-button ux-button--sm ux-color-success" @click="complete()">100%</button>
          </div>
          <button class="ux-button ux-button--sm ux-color-primary"
                  @click="
                    if (isRunning) {
                      clearInterval(interval);
                      isRunning = false;
                    } else {
                      reset();
                      interval = setInterval(() => {
                        if (value >= 100) {
                          clearInterval(interval);
                          isRunning = false;
                        } else {
                          increment(1);
                        }
                      }, 50);
                      isRunning = true;
                    }
                  "
                  x-text="isRunning ? 'Detener' : 'Animar'">
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- API Reference -->
  <section class="demo-section">
    <h2>API Reference</h2>

    <h3>Opciones</h3>
    <pre>uxProgressCircle({
  value: 0,                  // Valor actual
  max: 100,                  // Valor máximo
  size: 120,                 // Tamaño en px
  strokeWidth: 8,            // Grosor del trazo
  showValue: true,           // Mostrar valor
  showLabel: false,          // Mostrar etiqueta
  label: '',                 // Texto de etiqueta
  format: 'percent',         // 'percent', 'value', 'fraction', 'custom'
  customFormat: null,        // Función (value, max, percent) => string
  animated: true,            // Animar al aparecer
  animateOnVisible: true,    // Animar al entrar en viewport
  thresholds: null           // { warning: 50, danger: 80 }
})</pre>

    <h3>Propiedades</h3>
    <pre>percentage       // Porcentaje calculado (0-100)
radius           // Radio del círculo
circumference    // Circunferencia
dashOffset       // Offset para el trazo
displayValue     // Valor formateado
colorClass       // Clase de color por umbral</pre>

    <h3>Métodos</h3>
    <pre>setValue(value)    // Establecer valor
increment(amount)  // Incrementar
decrement(amount)  // Decrementar
reset()            // Resetear a 0
complete()         // Completar (100%)</pre>

    <h3>Clases CSS</h3>
    <pre>.ux-progress-circle              // Contenedor
.ux-progress-circle--xs/sm/lg/xl // Tamaños
.ux-progress-circle--thin/thick  // Grosor del trazo
.ux-progress-circle--primary/success/warning/danger  // Colores
.ux-progress-circle--indeterminate  // Modo spinner
.ux-progress-circle--glass       // Glass morphism
.ux-progress-circle--animated    // Con animación</pre>
  </section>

</body>
</html>
