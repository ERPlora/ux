<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Context Menu - UX Library</title>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-navbar.js"></script>
  <script src="../components/ux-content.js"></script>
  <script src="../components/ux-context-menu.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-xl); margin-bottom: var(--ux-space-md); min-height: 200px; display: flex; align-items: center; justify-content: center; }
    .code-block { background: #1a1a2e; color: #e5e5e5; padding: var(--ux-space-md); border-radius: var(--ux-border-radius); overflow-x: auto; font-family: 'SF Mono', Monaco, monospace; font-size: var(--ux-font-size-md); }
    .code-block .tag { color: #ff7b72; }
    .code-block .attr { color: #79c0ff; }
    .code-block .string { color: #a5d6ff; }
    .context-trigger { padding: var(--ux-space-xl); background: var(--ux-surface); border: 2px dashed var(--ux-border-color); border-radius: var(--ux-border-radius-lg); text-align: center; cursor: context-menu; user-select: none; }
  </style>
</head>
<body class="ux-app">

  <div class="ux-content" style="padding: var(--ux-space-lg);">
    <h2 style="margin-bottom: var(--ux-space-lg);">Context Menu</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-xl);">Menu contextual que aparece con click derecho o long press, estilo iOS/macOS.</p>

    <section class="demo-section">
      <h3>Basico (Click derecho)</h3>
      <p>Haz click derecho o long press en el area para abrir el menu.</p>
      <div class="demo-box">
        <div class="context-trigger"
             x-data="uxContextMenu({
               items: [
                 { id: 'edit', label: 'Edit', icon: 'edit' },
                 { id: 'copy', label: 'Copy', icon: 'copy' },
                 { id: 'paste', label: 'Paste', icon: 'clipboard', disabled: true },
                 { divider: true },
                 { id: 'delete', label: 'Delete', icon: 'trash', danger: true }
               ]
             })"
             @contextmenu.prevent="open($event)"
             @context-menu:select="console.log('Selected:', $event.detail)">
          Right-click or long press here
          <div class="ux-context-menu" x-show="isOpen" x-transition :style="menuStyle" @click.outside="close()">
            <template x-for="item in items" :key="item.id || item.divider">
              <template x-if="item.divider">
                <div class="ux-context-menu__divider"></div>
              </template>
              <template x-if="!item.divider">
                <button class="ux-context-menu__item"
                        :class="{
                          'ux-context-menu__item--danger': item.danger,
                          'ux-context-menu__item--disabled': item.disabled
                        }"
                        @click="select(item)"
                        :disabled="item.disabled">
                  <span class="ux-context-menu__item-icon" x-html="getIcon(item.icon)"></span>
                  <span class="ux-context-menu__item-label" x-text="item.label"></span>
                  <span class="ux-context-menu__item-shortcut" x-text="item.shortcut" x-show="item.shortcut"></span>
                </button>
              </template>
            </template>
          </div>
        </div>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">x-data</span>=<span class="string">"uxContextMenu({ items: [...] })"</span>
     <span class="attr">@contextmenu.prevent</span>=<span class="string">"open($event)"</span><span class="tag">&gt;</span>
  Right-click here
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-context-menu"</span> <span class="attr">x-show</span>=<span class="string">"isOpen"</span> <span class="attr">:style</span>=<span class="string">"menuStyle"</span><span class="tag">&gt;</span>
    ...
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Con Shortcuts</h3>
      <div class="demo-box">
        <div class="context-trigger"
             x-data="uxContextMenu({
               items: [
                 { id: 'cut', label: 'Cut', icon: 'scissors', shortcut: '⌘X' },
                 { id: 'copy', label: 'Copy', icon: 'copy', shortcut: '⌘C' },
                 { id: 'paste', label: 'Paste', icon: 'clipboard', shortcut: '⌘V' },
                 { divider: true },
                 { id: 'selectAll', label: 'Select All', shortcut: '⌘A' },
                 { divider: true },
                 { id: 'undo', label: 'Undo', icon: 'undo', shortcut: '⌘Z' },
                 { id: 'redo', label: 'Redo', icon: 'redo', shortcut: '⇧⌘Z' }
               ]
             })"
             @contextmenu.prevent="open($event)">
          Right-click for edit actions
          <div class="ux-context-menu" x-show="isOpen" x-transition :style="menuStyle" @click.outside="close()">
            <template x-for="item in items" :key="item.id || 'divider-' + Math.random()">
              <template x-if="item.divider">
                <div class="ux-context-menu__divider"></div>
              </template>
              <template x-if="!item.divider">
                <button class="ux-context-menu__item" @click="select(item)">
                  <span class="ux-context-menu__item-icon" x-html="getIcon(item.icon)"></span>
                  <span class="ux-context-menu__item-label" x-text="item.label"></span>
                  <span class="ux-context-menu__item-shortcut" x-text="item.shortcut" x-show="item.shortcut"></span>
                </button>
              </template>
            </template>
          </div>
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h3>File Actions</h3>
      <div class="demo-box">
        <div class="context-trigger"
             x-data="uxContextMenu({
               items: [
                 { id: 'open', label: 'Open', icon: 'folder' },
                 { id: 'openWith', label: 'Open With...', icon: 'external-link' },
                 { divider: true },
                 { id: 'rename', label: 'Rename', icon: 'edit' },
                 { id: 'move', label: 'Move to...', icon: 'folder' },
                 { id: 'duplicate', label: 'Duplicate', icon: 'copy' },
                 { divider: true },
                 { id: 'share', label: 'Share', icon: 'share' },
                 { id: 'download', label: 'Download', icon: 'download' },
                 { divider: true },
                 { id: 'delete', label: 'Move to Trash', icon: 'trash', danger: true }
               ]
             })"
             @contextmenu.prevent="open($event)"
             @context-menu:select="console.log('Action:', $event.detail)">
          Right-click for file actions
          <div class="ux-context-menu" x-show="isOpen" x-transition :style="menuStyle" @click.outside="close()">
            <template x-for="item in items" :key="item.id || 'divider-' + Math.random()">
              <template x-if="item.divider">
                <div class="ux-context-menu__divider"></div>
              </template>
              <template x-if="!item.divider">
                <button class="ux-context-menu__item"
                        :class="{ 'ux-context-menu__item--danger': item.danger }"
                        @click="select(item)">
                  <span class="ux-context-menu__item-icon" x-html="getIcon(item.icon)"></span>
                  <span class="ux-context-menu__item-label" x-text="item.label"></span>
                </button>
              </template>
            </template>
          </div>
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h3>Glass Variant</h3>
      <div class="demo-box" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <div class="context-trigger"
             style="background: transparent; border-color: rgba(255,255,255,0.3); color: white;"
             x-data="uxContextMenu({
               items: [
                 { id: 'view', label: 'View', icon: 'eye' },
                 { id: 'edit', label: 'Edit', icon: 'edit' },
                 { divider: true },
                 { id: 'delete', label: 'Delete', icon: 'trash', danger: true }
               ]
             })"
             @contextmenu.prevent="open($event)">
          Right-click for glass menu
          <div class="ux-context-menu ux-context-menu--glass" x-show="isOpen" x-transition :style="menuStyle" @click.outside="close()">
            <template x-for="item in items" :key="item.id || 'divider-' + Math.random()">
              <template x-if="item.divider">
                <div class="ux-context-menu__divider"></div>
              </template>
              <template x-if="!item.divider">
                <button class="ux-context-menu__item"
                        :class="{ 'ux-context-menu__item--danger': item.danger }"
                        @click="select(item)">
                  <span class="ux-context-menu__item-icon" x-html="getIcon(item.icon)"></span>
                  <span class="ux-context-menu__item-label" x-text="item.label"></span>
                </button>
              </template>
            </template>
          </div>
        </div>
      </div>
    </section>

    <section class="demo-section">
      <h3>API</h3>
      <table style="width: 100%; border-collapse: collapse; margin-top: var(--ux-space-md);">
        <thead>
          <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
            <th style="padding: var(--ux-space-sm);">Propiedad</th>
            <th style="padding: var(--ux-space-sm);">Tipo</th>
            <th style="padding: var(--ux-space-sm);">Descripcion</th>
          </tr>
        </thead>
        <tbody style="font-size: var(--ux-font-size-sm);">
          <tr style="border-bottom: 1px solid var(--ux-border-color);">
            <td style="padding: var(--ux-space-sm);"><code>items</code></td>
            <td style="padding: var(--ux-space-sm);">Array</td>
            <td style="padding: var(--ux-space-sm);">Lista de items del menu</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--ux-border-color);">
            <td style="padding: var(--ux-space-sm);"><code>item.label</code></td>
            <td style="padding: var(--ux-space-sm);">String</td>
            <td style="padding: var(--ux-space-sm);">Texto del item</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--ux-border-color);">
            <td style="padding: var(--ux-space-sm);"><code>item.icon</code></td>
            <td style="padding: var(--ux-space-sm);">String</td>
            <td style="padding: var(--ux-space-sm);">Icono (edit, copy, trash, etc.)</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--ux-border-color);">
            <td style="padding: var(--ux-space-sm);"><code>item.shortcut</code></td>
            <td style="padding: var(--ux-space-sm);">String</td>
            <td style="padding: var(--ux-space-sm);">Atajo de teclado</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--ux-border-color);">
            <td style="padding: var(--ux-space-sm);"><code>item.danger</code></td>
            <td style="padding: var(--ux-space-sm);">Boolean</td>
            <td style="padding: var(--ux-space-sm);">Estilo de accion destructiva</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--ux-border-color);">
            <td style="padding: var(--ux-space-sm);"><code>item.disabled</code></td>
            <td style="padding: var(--ux-space-sm);">Boolean</td>
            <td style="padding: var(--ux-space-sm);">Item deshabilitado</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>item.divider</code></td>
            <td style="padding: var(--ux-space-sm);">Boolean</td>
            <td style="padding: var(--ux-space-sm);">Linea separadora</td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</body>
</html>
