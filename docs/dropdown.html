<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Dropdown - UX Library</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap-grid.min.css">
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-navbar.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-dropdown.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-2xl); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section h4 { font-size: var(--ux-font-size-md); font-weight: 500; margin: var(--ux-space-lg) 0 var(--ux-space-sm); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .code-block { background: #1a1a2e; color: #e5e5e5; padding: var(--ux-space-md); border-radius: var(--ux-border-radius); font-family: monospace; font-size: var(--ux-font-size-sm); overflow-x: auto; margin-top: var(--ux-space-md); white-space: pre; }
    .demo-box {
      background: var(--ux-surface-secondary);
      border-radius: var(--ux-border-radius-lg);
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
      border: 1px solid var(--ux-border-color);
    }
    .demo-frame {
      background: var(--ux-surface);
      border: 1px solid var(--ux-border-color);
      border-radius: var(--ux-border-radius-lg);
      overflow: visible;
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
      min-height: 200px;
    }
    .class-table {
      width: 100%;
      border-collapse: collapse;
      font-size: var(--ux-font-size-sm);
    }
    .class-table th, .class-table td {
      padding: var(--ux-space-sm) var(--ux-space-md);
      text-align: left;
      border-bottom: 1px solid var(--ux-border-color);
    }
    .class-table th {
      background: var(--ux-surface-secondary);
      font-weight: 600;
    }
    .class-table code {
      background: var(--ux-surface-secondary);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: var(--ux-font-size-sm);
    }
  </style>
</head>
<body class="ux-app">

  <div class="ux-content ux-padding">
    <!-- Intro -->
    <div class="demo-section">
      <h3>Dropdown Menu</h3>
      <p>Menu desplegable estilo iOS con animaciones suaves, navegacion por teclado y variantes glass.</p>
      <pre class="code-block"><code>&lt;link rel="stylesheet" href="bootstrap-grid.min.css"&gt;
&lt;script src="components/ux-dropdown.js"&gt;&lt;/script&gt;</code></pre>
    </div>

    <!-- Basic Dropdown -->
    <div class="demo-section">
      <h3>Dropdown Basico</h3>
      <p>Dropdown simple con items clickeables.</p>

      <div class="demo-frame">
        <div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses">
          <button
            class="ux-button ux-dropdown__trigger"
            @click="toggle()"
            @keydown="handleKeydown($event)"
            x-bind="triggerAttrs"
          >
            <span>Opciones</span>
            <span class="ux-dropdown__caret">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </span>
          </button>

          <div class="ux-dropdown__menu" role="menu">
            <button class="ux-dropdown__item" role="menuitem" @click="select('edit')">
              <span class="ux-dropdown__item-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
              </span>
              <span class="ux-dropdown__item-text">Editar</span>
            </button>
            <button class="ux-dropdown__item" role="menuitem" @click="select('duplicate')">
              <span class="ux-dropdown__item-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </span>
              <span class="ux-dropdown__item-text">Duplicar</span>
            </button>
            <div class="ux-dropdown__divider"></div>
            <button class="ux-dropdown__item ux-dropdown__item--danger" role="menuitem" @click="select('delete')">
              <span class="ux-dropdown__item-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
              </span>
              <span class="ux-dropdown__item-text">Eliminar</span>
            </button>
          </div>
        </div>
      </div>

      <pre class="code-block"><code>&lt;div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses"&gt;
  &lt;button class="ux-button ux-dropdown__trigger"
          @click="toggle()"
          @keydown="handleKeydown($event)"
          x-bind="triggerAttrs"&gt;
    &lt;span&gt;Opciones&lt;/span&gt;
    &lt;span class="ux-dropdown__caret"&gt;&lt;svg&gt;...&lt;/svg&gt;&lt;/span&gt;
  &lt;/button&gt;

  &lt;div class="ux-dropdown__menu" role="menu"&gt;
    &lt;button class="ux-dropdown__item" @click="select('edit')"&gt;
      &lt;span class="ux-dropdown__item-icon"&gt;&lt;svg&gt;...&lt;/svg&gt;&lt;/span&gt;
      &lt;span class="ux-dropdown__item-text"&gt;Editar&lt;/span&gt;
    &lt;/button&gt;
    &lt;div class="ux-dropdown__divider"&gt;&lt;/div&gt;
    &lt;button class="ux-dropdown__item ux-dropdown__item--danger"&gt;Eliminar&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
    </div>

    <!-- Dropdown Positions -->
    <div class="demo-section">
      <h3>Posiciones</h3>
      <p>El menu puede abrirse en diferentes posiciones.</p>

      <div class="demo-frame">
        <div class="row g-3">
          <!-- Left (default) -->
          <div class="col-auto">
            <div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses">
              <button class="ux-button ux-button--outline ux-dropdown__trigger" @click="toggle()" x-bind="triggerAttrs">
                Izquierda
                <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
              </button>
              <div class="ux-dropdown__menu ux-dropdown__menu--left" role="menu">
                <button class="ux-dropdown__item" @click="select('1')">Opcion 1</button>
                <button class="ux-dropdown__item" @click="select('2')">Opcion 2</button>
                <button class="ux-dropdown__item" @click="select('3')">Opcion 3</button>
              </div>
            </div>
          </div>

          <!-- Right -->
          <div class="col-auto">
            <div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses">
              <button class="ux-button ux-button--outline ux-dropdown__trigger" @click="toggle()" x-bind="triggerAttrs">
                Derecha
                <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
              </button>
              <div class="ux-dropdown__menu ux-dropdown__menu--right" role="menu">
                <button class="ux-dropdown__item" @click="select('1')">Opcion 1</button>
                <button class="ux-dropdown__item" @click="select('2')">Opcion 2</button>
                <button class="ux-dropdown__item" @click="select('3')">Opcion 3</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <pre class="code-block"><code>&lt;!-- Alineado a la izquierda (default) --&gt;
&lt;div class="ux-dropdown__menu ux-dropdown__menu--left"&gt;...&lt;/div&gt;

&lt;!-- Alineado a la derecha --&gt;
&lt;div class="ux-dropdown__menu ux-dropdown__menu--right"&gt;...&lt;/div&gt;

&lt;!-- Abre hacia arriba --&gt;
&lt;div class="ux-dropdown__menu ux-dropdown__menu--top"&gt;...&lt;/div&gt;

&lt;!-- Centrado --&gt;
&lt;div class="ux-dropdown__menu ux-dropdown__menu--center"&gt;...&lt;/div&gt;</code></pre>
    </div>

    <!-- With Headers and Groups -->
    <div class="demo-section">
      <h3>Headers y Grupos</h3>
      <p>Organiza items con headers y grupos.</p>

      <div class="demo-frame">
        <div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses">
          <button class="ux-button ux-color-primary ux-dropdown__trigger" @click="toggle()" x-bind="triggerAttrs">
            Menu con grupos
            <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
          </button>

          <div class="ux-dropdown__menu ux-dropdown__menu--wide" role="menu">
            <div class="ux-dropdown__group">
              <div class="ux-dropdown__header">Acciones</div>
              <button class="ux-dropdown__item" @click="select('new')">
                <span class="ux-dropdown__item-text">Nuevo documento</span>
                <span class="ux-dropdown__item-shortcut">⌘N</span>
              </button>
              <button class="ux-dropdown__item" @click="select('open')">
                <span class="ux-dropdown__item-text">Abrir...</span>
                <span class="ux-dropdown__item-shortcut">⌘O</span>
              </button>
            </div>

            <div class="ux-dropdown__group">
              <div class="ux-dropdown__header">Recientes</div>
              <button class="ux-dropdown__item" @click="select('doc1')">
                <span class="ux-dropdown__item-text">Informe Q4 2024.pdf</span>
              </button>
              <button class="ux-dropdown__item" @click="select('doc2')">
                <span class="ux-dropdown__item-text">Presupuesto.xlsx</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <pre class="code-block"><code>&lt;div class="ux-dropdown__menu"&gt;
  &lt;div class="ux-dropdown__group"&gt;
    &lt;div class="ux-dropdown__header"&gt;Acciones&lt;/div&gt;
    &lt;button class="ux-dropdown__item"&gt;
      &lt;span class="ux-dropdown__item-text"&gt;Nuevo&lt;/span&gt;
      &lt;span class="ux-dropdown__item-shortcut"&gt;⌘N&lt;/span&gt;
    &lt;/button&gt;
  &lt;/div&gt;

  &lt;div class="ux-dropdown__group"&gt;
    &lt;div class="ux-dropdown__header"&gt;Recientes&lt;/div&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
    </div>

    <!-- With Badges and Checks -->
    <div class="demo-section">
      <h3>Badges y Seleccion</h3>
      <p>Items con badges y estados de seleccion.</p>

      <div class="demo-frame">
        <div class="row g-3">
          <!-- With badge -->
          <div class="col-auto">
            <div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses">
              <button class="ux-button ux-button--outline ux-dropdown__trigger" @click="toggle()" x-bind="triggerAttrs">
                Notificaciones
                <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
              </button>
              <div class="ux-dropdown__menu" role="menu">
                <button class="ux-dropdown__item" @click="select('inbox')">
                  <span class="ux-dropdown__item-text">Bandeja de entrada</span>
                  <span class="ux-dropdown__item-badge">12</span>
                </button>
                <button class="ux-dropdown__item" @click="select('mentions')">
                  <span class="ux-dropdown__item-text">Menciones</span>
                  <span class="ux-dropdown__item-badge">3</span>
                </button>
                <button class="ux-dropdown__item" @click="select('archived')">
                  <span class="ux-dropdown__item-text">Archivados</span>
                </button>
              </div>
            </div>
          </div>

          <!-- With selection -->
          <div class="col-auto">
            <div class="ux-dropdown" x-data="{ ...uxDropdown(), selected: 'medium' }" :class="containerClasses">
              <button class="ux-button ux-button--outline ux-dropdown__trigger" @click="toggle()" x-bind="triggerAttrs">
                Prioridad
                <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
              </button>
              <div class="ux-dropdown__menu" role="menu">
                <button class="ux-dropdown__item" :class="{ 'ux-dropdown__item--selected': selected === 'high' }" @click="selected = 'high'; select('high')">
                  <span class="ux-dropdown__item-text">Alta</span>
                  <span class="ux-dropdown__item-check">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                  </span>
                </button>
                <button class="ux-dropdown__item" :class="{ 'ux-dropdown__item--selected': selected === 'medium' }" @click="selected = 'medium'; select('medium')">
                  <span class="ux-dropdown__item-text">Media</span>
                  <span class="ux-dropdown__item-check">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                  </span>
                </button>
                <button class="ux-dropdown__item" :class="{ 'ux-dropdown__item--selected': selected === 'low' }" @click="selected = 'low'; select('low')">
                  <span class="ux-dropdown__item-text">Baja</span>
                  <span class="ux-dropdown__item-check">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                  </span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Glass Variant -->
    <div class="demo-section">
      <h3>Glass Variant</h3>
      <p>Menu con efecto glass para fondos con imagen.</p>

      <div class="demo-frame" style="background: linear-gradient(135deg, var(--ux-primary) 0%, var(--ux-secondary) 100%); min-height: 250px;">
        <div class="ux-dropdown ux-dropdown--glass" x-data="uxDropdown()" :class="containerClasses">
          <button class="ux-button ux-dropdown__trigger" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);" @click="toggle()" x-bind="triggerAttrs">
            Menu Glass
            <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
          </button>

          <div class="ux-dropdown__menu ux-dropdown__menu--glass" role="menu">
            <button class="ux-dropdown__item" @click="select('profile')">Mi perfil</button>
            <button class="ux-dropdown__item" @click="select('settings')">Configuracion</button>
            <div class="ux-dropdown__divider"></div>
            <button class="ux-dropdown__item" @click="select('logout')">Cerrar sesion</button>
          </div>
        </div>
      </div>

      <pre class="code-block"><code>&lt;div class="ux-dropdown ux-dropdown--glass"&gt;
  ...
  &lt;div class="ux-dropdown__menu ux-dropdown__menu--glass"&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
    </div>

    <!-- Compact Variant -->
    <div class="demo-section">
      <h3>Variante Compacta</h3>
      <p>Menu mas compacto para espacios reducidos.</p>

      <div class="demo-frame">
        <div class="ux-dropdown" x-data="uxDropdown()" :class="containerClasses">
          <button class="ux-button ux-button--sm ux-button--outline ux-dropdown__trigger" @click="toggle()" x-bind="triggerAttrs">
            Mas
            <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
          </button>

          <div class="ux-dropdown__menu ux-dropdown__menu--compact" role="menu">
            <button class="ux-dropdown__item" @click="select('copy')">Copiar</button>
            <button class="ux-dropdown__item" @click="select('paste')">Pegar</button>
            <button class="ux-dropdown__item" @click="select('cut')">Cortar</button>
          </div>
        </div>
      </div>

      <pre class="code-block"><code>&lt;div class="ux-dropdown__menu ux-dropdown__menu--compact"&gt;
  ...
&lt;/div&gt;</code></pre>
    </div>

    <!-- Alpine.js API -->
    <div class="demo-section">
      <h3>Alpine.js API</h3>

      <div class="demo-box">
        <pre class="code-block"><code>x-data="uxDropdown({
  closeOnSelect: true,      // Cerrar al seleccionar item
  closeOnClickOutside: true, // Cerrar al click fuera
  closeOnEscape: true,       // Cerrar con Escape
  triggerOnHover: false,     // Abrir con hover
  hoverDelay: 150           // Delay para hover (ms)
})"

// Propiedades
isOpen       // Boolean - si esta abierto
activeIndex  // Number - indice del item activo

// Metodos
open()       // Abrir dropdown
close()      // Cerrar dropdown
toggle()     // Alternar
select(value) // Seleccionar y emitir evento
focusFirst() // Enfocar primer item
focusLast()  // Enfocar ultimo item
focusNext()  // Enfocar siguiente
focusPrev()  // Enfocar anterior

// Computed
containerClasses  // Clases para :class
triggerAttrs      // Atributos ARIA para trigger

// Eventos
@dropdown:open   // Al abrir
@dropdown:close  // Al cerrar
@dropdown:select="e => e.detail.value" // Al seleccionar</code></pre>
      </div>
    </div>

    <!-- CSS Reference -->
    <div class="demo-section">
      <h3>Referencia de Clases CSS</h3>

      <div style="overflow-x: auto;">
        <table class="class-table">
          <thead>
            <tr>
              <th>Clase</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="2" style="background: var(--ux-surface-secondary); font-weight: 600;">Contenedor</td></tr>
            <tr><td><code>.ux-dropdown</code></td><td>Contenedor principal</td></tr>
            <tr><td><code>.ux-dropdown--open</code></td><td>Estado abierto</td></tr>
            <tr><td><code>.ux-dropdown--glass</code></td><td>Variante glass</td></tr>
            <tr><td colspan="2" style="background: var(--ux-surface-secondary); font-weight: 600;">Trigger</td></tr>
            <tr><td><code>.ux-dropdown__trigger</code></td><td>Boton que abre el menu</td></tr>
            <tr><td><code>.ux-dropdown__caret</code></td><td>Icono flecha</td></tr>
            <tr><td colspan="2" style="background: var(--ux-surface-secondary); font-weight: 600;">Menu</td></tr>
            <tr><td><code>.ux-dropdown__menu</code></td><td>Contenedor del menu</td></tr>
            <tr><td><code>.ux-dropdown__menu--left</code></td><td>Alineado izquierda</td></tr>
            <tr><td><code>.ux-dropdown__menu--right</code></td><td>Alineado derecha</td></tr>
            <tr><td><code>.ux-dropdown__menu--top</code></td><td>Abre hacia arriba</td></tr>
            <tr><td><code>.ux-dropdown__menu--center</code></td><td>Centrado</td></tr>
            <tr><td><code>.ux-dropdown__menu--glass</code></td><td>Efecto glass</td></tr>
            <tr><td><code>.ux-dropdown__menu--compact</code></td><td>Tamano compacto</td></tr>
            <tr><td><code>.ux-dropdown__menu--wide</code></td><td>Mas ancho</td></tr>
            <tr><td colspan="2" style="background: var(--ux-surface-secondary); font-weight: 600;">Items</td></tr>
            <tr><td><code>.ux-dropdown__item</code></td><td>Item del menu</td></tr>
            <tr><td><code>.ux-dropdown__item--danger</code></td><td>Item destructivo</td></tr>
            <tr><td><code>.ux-dropdown__item--disabled</code></td><td>Item deshabilitado</td></tr>
            <tr><td><code>.ux-dropdown__item--selected</code></td><td>Item seleccionado</td></tr>
            <tr><td><code>.ux-dropdown__item-icon</code></td><td>Icono del item</td></tr>
            <tr><td><code>.ux-dropdown__item-text</code></td><td>Texto del item</td></tr>
            <tr><td><code>.ux-dropdown__item-shortcut</code></td><td>Atajo de teclado</td></tr>
            <tr><td><code>.ux-dropdown__item-badge</code></td><td>Badge/contador</td></tr>
            <tr><td><code>.ux-dropdown__item-check</code></td><td>Check de seleccion</td></tr>
            <tr><td colspan="2" style="background: var(--ux-surface-secondary); font-weight: 600;">Estructura</td></tr>
            <tr><td><code>.ux-dropdown__divider</code></td><td>Linea divisoria</td></tr>
            <tr><td><code>.ux-dropdown__header</code></td><td>Header de seccion</td></tr>
            <tr><td><code>.ux-dropdown__group</code></td><td>Grupo de items</td></tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <footer class="ux-padding" style="text-align: center; background: var(--ux-surface-secondary); color: var(--ux-text-secondary); font-size: var(--ux-font-size-sm);">
    <p>UX Library - Dropdown Component</p>
  </footer>
</body>
</html>
