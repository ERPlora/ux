<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Image Gallery - UX Library</title>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-image-gallery.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 {
      font-size: var(--ux-font-size-lg);
      font-weight: 600;
      margin-bottom: var(--ux-space-md);
      color: var(--ux-text);
    }
    .demo-section p {
      font-size: var(--ux-font-size-md);
      color: var(--ux-text-secondary);
      margin-bottom: var(--ux-space-md);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: var(--ux-border-radius-lg);
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
    }
    .code-block {
      background: #1a1a2e;
      color: #e5e5e5;
      padding: var(--ux-space-md);
      border-radius: var(--ux-border-radius);
      overflow-x: auto;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: var(--ux-font-size-md);
      line-height: 1.6;
    }
    .code-block .tag { color: #ff7b72; }
    .code-block .attr { color: #79c0ff; }
    .code-block .string { color: #a5d6ff; }
    .code-block .comment { color: #8b949e; }
  </style>
</head>
<body class="ux-app">

  <div class="ux-content" style="padding: var(--ux-space-lg);">

    <section class="demo-section">
      <h3>Grid Basico</h3>
      <p>Galeria de imagenes con grid de 3 columnas y lightbox.</p>
      <div class="demo-box">
        <div class="ux-gallery ux-gallery--cols-3"
             x-data="uxImageGallery({
               images: [
                 { src: 'https://picsum.photos/800/800?random=1', title: 'Imagen 1' },
                 { src: 'https://picsum.photos/800/800?random=2', title: 'Imagen 2' },
                 { src: 'https://picsum.photos/800/800?random=3', title: 'Imagen 3' },
                 { src: 'https://picsum.photos/800/800?random=4', title: 'Imagen 4' },
                 { src: 'https://picsum.photos/800/800?random=5', title: 'Imagen 5' },
                 { src: 'https://picsum.photos/800/800?random=6', title: 'Imagen 6' }
               ]
             })">
          <div class="ux-gallery__grid">
            <template x-for="(image, index) in visibleImages" :key="index">
              <div class="ux-gallery__item" @click="openLightbox(index)" tabindex="0" @keydown.enter="openLightbox(index)">
                <img :src="image.src" :alt="image.title || 'Image ' + (index + 1)" loading="lazy">
                <div class="ux-gallery__item-overlay">
                  <span x-html="icons.zoom" class="ux-gallery__item-icon"></span>
                </div>
              </div>
            </template>
          </div>

          <template x-teleport="body">
            <div class="ux-gallery-lightbox" :class="{ 'ux-gallery-lightbox--open': lightboxOpen }" @click.self="closeLightbox()">
              <div class="ux-gallery-lightbox__header">
                <span class="ux-gallery-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
                <div class="ux-gallery-lightbox__actions">
                  <button class="ux-gallery-lightbox__action" @click="closeLightbox()" title="Cerrar">
                    <span x-html="icons.close"></span>
                  </button>
                </div>
              </div>
              <div class="ux-gallery-lightbox__content">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--prev" @click="prev()" :disabled="!canPrev">
                  <span x-html="icons.prev"></span>
                </button>
                <img class="ux-gallery-lightbox__image" :src="currentImage.src" :alt="currentImage.title" @click="toggleZoom()">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--next" @click="next()" :disabled="!canNext">
                  <span x-html="icons.next"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__caption" x-show="currentImage.title">
                <div class="ux-gallery-lightbox__title" x-text="currentImage.title"></div>
              </div>
            </div>
          </template>
        </div>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery ux-gallery--cols-3"</span>
     <span class="attr">x-data</span>=<span class="string">"uxImageGallery({ images: [...] })"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery__grid"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;template</span> <span class="attr">x-for</span>=<span class="string">"(image, index) in visibleImages"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery__item"</span> <span class="attr">@click</span>=<span class="string">"openLightbox(index)"</span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attr">:src</span>=<span class="string">"image.src"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/template&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>4 Columnas</h3>
      <p>Grid con 4 columnas para mas imagenes.</p>
      <div class="demo-box">
        <div class="ux-gallery ux-gallery--cols-4"
             x-data="uxImageGallery({
               images: [
                 { src: 'https://picsum.photos/600/600?random=10' },
                 { src: 'https://picsum.photos/600/600?random=11' },
                 { src: 'https://picsum.photos/600/600?random=12' },
                 { src: 'https://picsum.photos/600/600?random=13' },
                 { src: 'https://picsum.photos/600/600?random=14' },
                 { src: 'https://picsum.photos/600/600?random=15' },
                 { src: 'https://picsum.photos/600/600?random=16' },
                 { src: 'https://picsum.photos/600/600?random=17' }
               ]
             })">
          <div class="ux-gallery__grid">
            <template x-for="(image, index) in images" :key="index">
              <div class="ux-gallery__item" @click="openLightbox(index)">
                <img :src="image.src" loading="lazy">
              </div>
            </template>
          </div>

          <template x-teleport="body">
            <div class="ux-gallery-lightbox" :class="{ 'ux-gallery-lightbox--open': lightboxOpen }" @click.self="closeLightbox()">
              <div class="ux-gallery-lightbox__header">
                <span class="ux-gallery-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
                <button class="ux-gallery-lightbox__action" @click="closeLightbox()">
                  <span x-html="icons.close"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__content">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--prev" @click="prev()">
                  <span x-html="icons.prev"></span>
                </button>
                <img class="ux-gallery-lightbox__image" :src="currentImage.src">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--next" @click="next()">
                  <span x-html="icons.next"></span>
                </button>
              </div>
            </div>
          </template>
        </div>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery ux-gallery--cols-4"</span><span class="tag">&gt;</span>...<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Con Limite (+X mas)</h3>
      <p>Mostrar solo algunas imagenes con indicador de cuantas mas hay.</p>
      <div class="demo-box">
        <div class="ux-gallery ux-gallery--cols-4"
             x-data="uxImageGallery({
               images: [
                 { src: 'https://picsum.photos/600/600?random=20' },
                 { src: 'https://picsum.photos/600/600?random=21' },
                 { src: 'https://picsum.photos/600/600?random=22' },
                 { src: 'https://picsum.photos/600/600?random=23' },
                 { src: 'https://picsum.photos/600/600?random=24' },
                 { src: 'https://picsum.photos/600/600?random=25' },
                 { src: 'https://picsum.photos/600/600?random=26' },
                 { src: 'https://picsum.photos/600/600?random=27' }
               ],
               maxVisible: 4
             })">
          <div class="ux-gallery__grid">
            <template x-for="(image, index) in visibleImages" :key="index">
              <div class="ux-gallery__item" @click="openLightbox(index)">
                <img :src="image.src" loading="lazy">
                <template x-if="index === visibleImages.length - 1 && remainingCount > 0">
                  <div class="ux-gallery__more">+<span x-text="remainingCount"></span></div>
                </template>
              </div>
            </template>
          </div>

          <template x-teleport="body">
            <div class="ux-gallery-lightbox" :class="{ 'ux-gallery-lightbox--open': lightboxOpen }" @click.self="closeLightbox()">
              <div class="ux-gallery-lightbox__header">
                <span class="ux-gallery-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
                <button class="ux-gallery-lightbox__action" @click="closeLightbox()">
                  <span x-html="icons.close"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__content">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--prev" @click="prev()">
                  <span x-html="icons.prev"></span>
                </button>
                <img class="ux-gallery-lightbox__image" :src="currentImage.src">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--next" @click="next()">
                  <span x-html="icons.next"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__thumbs">
                <template x-for="(image, index) in images" :key="'thumb-' + index">
                  <div class="ux-gallery-lightbox__thumb" :class="{ 'ux-gallery-lightbox__thumb--active': index === currentIndex }" @click="goTo(index)">
                    <img :src="image.src">
                  </div>
                </template>
              </div>
            </div>
          </template>
        </div>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">x-data</span>=<span class="string">"uxImageGallery({ images: [...], maxVisible: 4 })"</span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- La ultima imagen visible muestra +X --&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery__more"</span><span class="tag">&gt;</span>+<span class="tag">&lt;span</span> <span class="attr">x-text</span>=<span class="string">"remainingCount"</span><span class="tag">&gt;&lt;/span&gt;&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Aspecto Paisaje</h3>
      <p>Imagenes con aspecto 16:9.</p>
      <div class="demo-box">
        <div class="ux-gallery ux-gallery--cols-2 ux-gallery--wide"
             x-data="uxImageGallery({
               images: [
                 { src: 'https://picsum.photos/1200/675?random=30', title: 'Paisaje 1' },
                 { src: 'https://picsum.photos/1200/675?random=31', title: 'Paisaje 2' },
                 { src: 'https://picsum.photos/1200/675?random=32', title: 'Paisaje 3' },
                 { src: 'https://picsum.photos/1200/675?random=33', title: 'Paisaje 4' }
               ]
             })">
          <div class="ux-gallery__grid">
            <template x-for="(image, index) in images" :key="index">
              <div class="ux-gallery__item" @click="openLightbox(index)">
                <img :src="image.src" :alt="image.title" loading="lazy">
              </div>
            </template>
          </div>

          <template x-teleport="body">
            <div class="ux-gallery-lightbox" :class="{ 'ux-gallery-lightbox--open': lightboxOpen }" @click.self="closeLightbox()">
              <div class="ux-gallery-lightbox__header">
                <span class="ux-gallery-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
                <button class="ux-gallery-lightbox__action" @click="closeLightbox()">
                  <span x-html="icons.close"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__content">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--prev" @click="prev()">
                  <span x-html="icons.prev"></span>
                </button>
                <img class="ux-gallery-lightbox__image" :src="currentImage.src" :alt="currentImage.title">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--next" @click="next()">
                  <span x-html="icons.next"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__caption" x-show="currentImage.title">
                <div class="ux-gallery-lightbox__title" x-text="currentImage.title"></div>
              </div>
            </div>
          </template>
        </div>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery ux-gallery--cols-2 ux-gallery--wide"</span><span class="tag">&gt;</span>...<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Layout Masonry</h3>
      <p>Imagenes con diferentes alturas en formato masonry.</p>
      <div class="demo-box">
        <div class="ux-gallery ux-gallery--masonry ux-gallery--cols-3"
             x-data="uxImageGallery({
               images: [
                 { src: 'https://picsum.photos/400/600?random=50' },
                 { src: 'https://picsum.photos/400/300?random=51' },
                 { src: 'https://picsum.photos/400/500?random=52' },
                 { src: 'https://picsum.photos/400/400?random=53' },
                 { src: 'https://picsum.photos/400/350?random=54' },
                 { src: 'https://picsum.photos/400/550?random=55' }
               ]
             })">
          <div class="ux-gallery__grid">
            <template x-for="(image, index) in images" :key="index">
              <div class="ux-gallery__item" @click="openLightbox(index)">
                <img :src="image.src" loading="lazy">
              </div>
            </template>
          </div>

          <template x-teleport="body">
            <div class="ux-gallery-lightbox" :class="{ 'ux-gallery-lightbox--open': lightboxOpen }" @click.self="closeLightbox()">
              <div class="ux-gallery-lightbox__header">
                <span class="ux-gallery-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
                <button class="ux-gallery-lightbox__action" @click="closeLightbox()">
                  <span x-html="icons.close"></span>
                </button>
              </div>
              <div class="ux-gallery-lightbox__content">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--prev" @click="prev()">
                  <span x-html="icons.prev"></span>
                </button>
                <img class="ux-gallery-lightbox__image" :src="currentImage.src">
                <button class="ux-gallery-lightbox__nav ux-gallery-lightbox__nav--next" @click="next()">
                  <span x-html="icons.next"></span>
                </button>
              </div>
            </div>
          </template>
        </div>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-gallery ux-gallery--masonry ux-gallery--cols-3"</span><span class="tag">&gt;</span>...<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Opciones</h3>
      <p>Configuracion disponible para el componente.</p>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Opcion</th>
              <th style="padding: var(--ux-space-sm);">Tipo</th>
              <th style="padding: var(--ux-space-sm);">Default</th>
              <th style="padding: var(--ux-space-sm);">Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>images</code></td>
              <td style="padding: var(--ux-space-sm);">Array</td>
              <td style="padding: var(--ux-space-sm);">[]</td>
              <td style="padding: var(--ux-space-sm);">Array de {src, thumb, title, description}</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>maxVisible</code></td>
              <td style="padding: var(--ux-space-sm);">Number</td>
              <td style="padding: var(--ux-space-sm);">0</td>
              <td style="padding: var(--ux-space-sm);">Maximo de imagenes visibles (0 = todas)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>showThumbs</code></td>
              <td style="padding: var(--ux-space-sm);">Boolean</td>
              <td style="padding: var(--ux-space-sm);">true</td>
              <td style="padding: var(--ux-space-sm);">Mostrar miniaturas en lightbox</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>enableZoom</code></td>
              <td style="padding: var(--ux-space-sm);">Boolean</td>
              <td style="padding: var(--ux-space-sm);">true</td>
              <td style="padding: var(--ux-space-sm);">Permitir zoom en lightbox</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>loop</code></td>
              <td style="padding: var(--ux-space-sm);">Boolean</td>
              <td style="padding: var(--ux-space-sm);">true</td>
              <td style="padding: var(--ux-space-sm);">Loop al final de la galeria</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="demo-section">
      <h3>Clases CSS</h3>
      <p>Clases disponibles para personalizar la galeria.</p>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Clase</th>
              <th style="padding: var(--ux-space-sm);">Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>.ux-gallery--cols-2/3/4/5</code></td>
              <td style="padding: var(--ux-space-sm);">Numero de columnas</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>.ux-gallery--cols-auto</code></td>
              <td style="padding: var(--ux-space-sm);">Columnas automaticas (min 200px)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>.ux-gallery--masonry</code></td>
              <td style="padding: var(--ux-space-sm);">Layout masonry</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>.ux-gallery--featured</code></td>
              <td style="padding: var(--ux-space-sm);">Primera imagen destacada</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>.ux-gallery--wide</code></td>
              <td style="padding: var(--ux-space-sm);">Aspecto 16:9</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="demo-section">
      <h3>Eventos</h3>
      <p>Eventos emitidos por el componente.</p>
      <div class="demo-box">
        <ul style="margin: 0; padding-left: var(--ux-space-lg);">
          <li><code>gallery:open</code> - Lightbox abierto ({ index, image })</li>
          <li><code>gallery:close</code> - Lightbox cerrado</li>
          <li><code>gallery:change</code> - Imagen cambiada ({ index, image })</li>
        </ul>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">x-data</span>=<span class="string">"uxImageGallery({ images: [...] })"</span>
     <span class="attr">@gallery:open</span>=<span class="string">"console.log('Abierto:', $event.detail.index)"</span>
     <span class="attr">@gallery:change</span>=<span class="string">"trackView($event.detail.image)"</span><span class="tag">&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

  </div>

</body>
</html>
