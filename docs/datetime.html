<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Datetime - UX Library</title>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-navbar.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-datetime.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); }
    .code-block { background: #1a1a2e; color: #e5e5e5; padding: var(--ux-space-md); border-radius: var(--ux-border-radius); font-family: monospace; font-size: var(--ux-font-size-md); overflow-x: auto; white-space: pre; }
    .class-table { width: 100%; border-collapse: collapse; font-size: var(--ux-font-size-md); }
    .class-table th, .class-table td { padding: var(--ux-space-sm) var(--ux-space-md); text-align: left; border-bottom: 1px solid var(--ux-border-color); }
    .class-table th { font-weight: 600; background: var(--ux-surface-secondary); }
    .class-table code { background: var(--ux-surface-secondary); padding: 2px 6px; border-radius: 4px; font-size: var(--ux-font-size-md); }
  </style>
</head>
<body class="ux-app">

  <!-- Intro -->
  <div class="demo-section">
    <h3>Datetime</h3>
    <p>Selectores de fecha y hora estilo iOS con calendario interactivo y time picker.</p>
    <pre class="code-block">&lt;script src="components/ux-datetime.js"&gt;&lt;/script&gt;</pre>
  </div>

  <!-- Input Nativo Date -->
  <div class="demo-section">
    <h3>Input Nativo (Date)</h3>
    <p>Usa el selector de fecha nativo del navegador con estilos personalizados.</p>
    <div class="demo-box">
      <div class="ux-datetime">
        <label class="ux-datetime__label">Fecha de nacimiento</label>
        <input type="date" class="ux-datetime__native">
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-datetime"&gt;
  &lt;label class="ux-datetime__label"&gt;Fecha de nacimiento&lt;/label&gt;
  &lt;input type="date" class="ux-datetime__native"&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Input Nativo Time -->
  <div class="demo-section">
    <h3>Input Nativo (Time)</h3>
    <p>Selector de hora nativo con estilos personalizados.</p>
    <div class="demo-box">
      <div class="ux-datetime">
        <label class="ux-datetime__label">Hora de la reunion</label>
        <input type="time" class="ux-datetime__native">
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-datetime"&gt;
  &lt;label class="ux-datetime__label"&gt;Hora de la reunion&lt;/label&gt;
  &lt;input type="time" class="ux-datetime__native"&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Input Nativo Datetime-local -->
  <div class="demo-section">
    <h3>Input Nativo (Datetime)</h3>
    <p>Selector combinado de fecha y hora.</p>
    <div class="demo-box">
      <div class="ux-datetime">
        <label class="ux-datetime__label">Fecha y hora del evento</label>
        <input type="datetime-local" class="ux-datetime__native">
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-datetime"&gt;
  &lt;label class="ux-datetime__label"&gt;Fecha y hora del evento&lt;/label&gt;
  &lt;input type="datetime-local" class="ux-datetime__native"&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Tamanos -->
  <div class="demo-section">
    <h3>Tamanos</h3>
    <p>Tres tamanos disponibles para inputs.</p>
    <div class="demo-box" style="display: flex; flex-direction: column; gap: var(--ux-space-md);">
      <div class="ux-datetime ux-datetime--sm">
        <label class="ux-datetime__label">Pequeno</label>
        <input type="date" class="ux-datetime__native">
      </div>
      <div class="ux-datetime">
        <label class="ux-datetime__label">Normal (default)</label>
        <input type="date" class="ux-datetime__native">
      </div>
      <div class="ux-datetime ux-datetime--lg">
        <label class="ux-datetime__label">Grande</label>
        <input type="date" class="ux-datetime__native">
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-datetime ux-datetime--sm"&gt;...&lt;/div&gt;
&lt;div class="ux-datetime"&gt;...&lt;/div&gt;
&lt;div class="ux-datetime ux-datetime--lg"&gt;...&lt;/div&gt;</pre>
  </div>

  <!-- Custom Trigger -->
  <div class="demo-section">
    <h3>Trigger Personalizado</h3>
    <p>Boton trigger que abre el picker con valor formateado.</p>
    <div class="demo-box" x-data="uxDatetime({ mode: 'date' })">
      <div class="ux-datetime" :class="{ 'ux-datetime--open': isOpen }">
        <label class="ux-datetime__label">Seleccionar fecha</label>
        <button type="button" class="ux-datetime__trigger" @click="toggle()">
          <span class="ux-datetime__value" :class="{ 'ux-datetime__placeholder': !displayValue }">
            <span x-text="displayValue || 'Selecciona una fecha'"></span>
          </span>
          <span class="ux-datetime__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
          </span>
        </button>
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-datetime" x-data="uxDatetime({ mode: 'date' })"
     :class="{ 'ux-datetime--open': isOpen }"&gt;
  &lt;label class="ux-datetime__label"&gt;Seleccionar fecha&lt;/label&gt;
  &lt;button type="button" class="ux-datetime__trigger" @click="toggle()"&gt;
    &lt;span class="ux-datetime__value"
          :class="{ 'ux-datetime__placeholder': !displayValue }"&gt;
      &lt;span x-text="displayValue || 'Selecciona una fecha'"&gt;&lt;/span&gt;
    &lt;/span&gt;
    &lt;span class="ux-datetime__icon"&gt;&lt;svg&gt;...&lt;/svg&gt;&lt;/span&gt;
  &lt;/button&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Calendario Inline -->
  <div class="demo-section">
    <h3>Calendario Inline</h3>
    <p>Calendario siempre visible sin necesidad de dropdown.</p>
    <div class="demo-box" x-data="uxDatetime({ mode: 'date' })">
      <div class="ux-datetime-picker ux-calendar--inline">
        <!-- Header -->
        <div class="ux-calendar__header">
          <button type="button" class="ux-calendar__nav" @click="prevMonth()">
            <span class="ux-calendar__nav-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
            </span>
          </button>
          <span class="ux-calendar__title" x-text="months[currentMonth] + ' ' + currentYear"></span>
          <button type="button" class="ux-calendar__nav" @click="nextMonth()">
            <span class="ux-calendar__nav-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </span>
          </button>
        </div>
        <!-- Weekdays -->
        <div class="ux-calendar__weekdays">
          <template x-for="day in weekdays" :key="day">
            <span class="ux-calendar__weekday" x-text="day"></span>
          </template>
        </div>
        <!-- Days -->
        <div class="ux-calendar__days">
          <template x-for="date in daysInMonth" :key="date.day + '-' + date.month">
            <button type="button" class="ux-calendar__day"
                    :class="{
                      'ux-calendar__day--other-month': date.isOtherMonth,
                      'ux-calendar__day--today': isToday(date),
                      'ux-calendar__day--selected': isSelected(date)
                    }"
                    @click="selectDate(date)"
                    x-text="date.day">
            </button>
          </template>
        </div>
      </div>
      <p style="margin-top: var(--ux-space-md); font-size: var(--ux-font-size-md); color: var(--ux-text-secondary);">
        Seleccionado: <span x-text="displayValue || 'Ninguno'"></span>
      </p>
    </div>
    <pre class="code-block">&lt;div class="ux-datetime-picker ux-calendar--inline"
     x-data="uxDatetime({ mode: 'date' })"&gt;
  &lt;div class="ux-calendar__header"&gt;...&lt;/div&gt;
  &lt;div class="ux-calendar__weekdays"&gt;...&lt;/div&gt;
  &lt;div class="ux-calendar__days"&gt;
    &lt;template x-for="date in daysInMonth"&gt;
      &lt;button class="ux-calendar__day"
              :class="{ 'ux-calendar__day--selected': isSelected(date) }"
              @click="selectDate(date)"
              x-text="date.day"&gt;
      &lt;/button&gt;
    &lt;/template&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Time Picker -->
  <div class="demo-section">
    <h3>Time Picker</h3>
    <p>Selector de hora con formato 12h o 24h.</p>
    <div class="demo-box">
      <div class="ux-time-picker" x-data="{ hours: 10, minutes: 30, period: 'AM' }">
        <div class="ux-time-picker__column">
          <span class="ux-time-picker__label">Hora</span>
          <input type="number" class="ux-time-picker__input" min="1" max="12" x-model="hours">
        </div>
        <span class="ux-time-picker__separator">:</span>
        <div class="ux-time-picker__column">
          <span class="ux-time-picker__label">Min</span>
          <input type="number" class="ux-time-picker__input" min="0" max="59" x-model="minutes">
        </div>
        <div class="ux-time-picker__period">
          <button type="button" class="ux-time-picker__period-btn"
                  :class="{ 'ux-time-picker__period-btn--active': period === 'AM' }"
                  @click="period = 'AM'">AM</button>
          <button type="button" class="ux-time-picker__period-btn"
                  :class="{ 'ux-time-picker__period-btn--active': period === 'PM' }"
                  @click="period = 'PM'">PM</button>
        </div>
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-time-picker" x-data="{ hours: 10, minutes: 30, period: 'AM' }"&gt;
  &lt;div class="ux-time-picker__column"&gt;
    &lt;span class="ux-time-picker__label"&gt;Hora&lt;/span&gt;
    &lt;input type="number" class="ux-time-picker__input" x-model="hours"&gt;
  &lt;/div&gt;
  &lt;span class="ux-time-picker__separator"&gt;:&lt;/span&gt;
  &lt;div class="ux-time-picker__column"&gt;
    &lt;span class="ux-time-picker__label"&gt;Min&lt;/span&gt;
    &lt;input type="number" class="ux-time-picker__input" x-model="minutes"&gt;
  &lt;/div&gt;
  &lt;div class="ux-time-picker__period"&gt;
    &lt;button class="ux-time-picker__period-btn"
            :class="{ 'ux-time-picker__period-btn--active': period === 'AM' }"
            @click="period = 'AM'"&gt;AM&lt;/button&gt;
    &lt;button class="ux-time-picker__period-btn"
            :class="{ 'ux-time-picker__period-btn--active': period === 'PM' }"
            @click="period = 'PM'"&gt;PM&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Month Selector -->
  <div class="demo-section">
    <h3>Selector de Meses</h3>
    <p>Grid para seleccionar mes rapidamente.</p>
    <div class="demo-box" x-data="{ selected: 0, months: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'] }">
      <div class="ux-calendar__months">
        <template x-for="(month, index) in months" :key="index">
          <button type="button" class="ux-calendar__month"
                  :class="{ 'ux-calendar__month--selected': selected === index }"
                  @click="selected = index"
                  x-text="month">
          </button>
        </template>
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-calendar__months"&gt;
  &lt;template x-for="(month, index) in months"&gt;
    &lt;button class="ux-calendar__month"
            :class="{ 'ux-calendar__month--selected': selected === index }"
            @click="selectMonth(index)"
            x-text="month"&gt;
    &lt;/button&gt;
  &lt;/template&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Year Selector -->
  <div class="demo-section">
    <h3>Selector de Anos</h3>
    <p>Grid para seleccionar ano rapidamente.</p>
    <div class="demo-box" x-data="{ selected: 2024, years: [2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028] }">
      <div class="ux-calendar__years">
        <template x-for="year in years" :key="year">
          <button type="button" class="ux-calendar__year"
                  :class="{ 'ux-calendar__year--selected': selected === year }"
                  @click="selected = year"
                  x-text="year">
          </button>
        </template>
      </div>
    </div>
    <pre class="code-block">&lt;div class="ux-calendar__years"&gt;
  &lt;template x-for="year in years"&gt;
    &lt;button class="ux-calendar__year"
            :class="{ 'ux-calendar__year--selected': selected === year }"
            @click="selectYear(year)"
            x-text="year"&gt;
    &lt;/button&gt;
  &lt;/template&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Componente Alpine.js -->
  <div class="demo-section">
    <h3>Componente Alpine.js</h3>
    <div class="demo-box">
      <pre class="code-block">// Configuracion del componente uxDatetime
uxDatetime({
  value: null,           // Valor inicial (ISO string)
  mode: 'date',          // 'date', 'time', 'datetime'
  format: 'YYYY-MM-DD',  // Formato de salida
  min: null,             // Fecha minima
  max: null,             // Fecha maxima
  use24Hour: false       // Usar formato 24 horas
})

// Propiedades:
isOpen           // Si el picker esta abierto
value            // Valor seleccionado (ISO string)
displayValue     // Valor formateado para mostrar
view             // Vista actual ('days', 'months', 'years')
currentMonth     // Mes actual (0-11)
currentYear      // Ano actual
hours            // Hora seleccionada
minutes          // Minutos seleccionados
period           // 'AM' o 'PM'
daysInMonth      // Array de dias del mes actual
weekdays         // Array de nombres de dias
months           // Array de nombres de meses

// Metodos:
open()           // Abre el picker
close()          // Cierra el picker
toggle()         // Alterna abrir/cerrar
prevMonth()      // Mes anterior
nextMonth()      // Mes siguiente
selectDate(date) // Selecciona una fecha
selectMonth(m)   // Selecciona un mes
selectYear(y)    // Selecciona un ano
isToday(date)    // Verifica si es hoy
isSelected(date) // Verifica si esta seleccionado
confirm()        // Confirma la seleccion
clear()          // Limpia la seleccion</pre>
    </div>
  </div>

  <!-- Integracion HTMX -->
  <div class="demo-section">
    <h3>Integracion con HTMX</h3>
    <p>Datetime pickers que interactuan con el servidor.</p>
    <div class="demo-box">
      <pre class="code-block">&lt;!-- Enviar fecha al cambiar --&gt;
&lt;div class="ux-datetime"&gt;
  &lt;label class="ux-datetime__label"&gt;Fecha de entrega&lt;/label&gt;
  &lt;input type="date" class="ux-datetime__native"
         name="delivery_date"
         hx-post="/api/orders/update-date"
         hx-trigger="change"
         hx-swap="none"&gt;
&lt;/div&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="code-block">&lt;!-- Filtrar resultados por rango de fechas --&gt;
&lt;form hx-get="/api/reports"
      hx-target="#results"
      hx-trigger="change from:input"&gt;
  &lt;div style="display: flex; gap: 1rem;"&gt;
    &lt;div class="ux-datetime"&gt;
      &lt;label class="ux-datetime__label"&gt;Desde&lt;/label&gt;
      &lt;input type="date" class="ux-datetime__native" name="from"&gt;
    &lt;/div&gt;
    &lt;div class="ux-datetime"&gt;
      &lt;label class="ux-datetime__label"&gt;Hasta&lt;/label&gt;
      &lt;input type="date" class="ux-datetime__native" name="to"&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;
&lt;div id="results"&gt;&lt;/div&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="code-block">&lt;!-- Validar disponibilidad de fecha --&gt;
&lt;div class="ux-datetime"&gt;
  &lt;label class="ux-datetime__label"&gt;Fecha de reserva&lt;/label&gt;
  &lt;input type="date" class="ux-datetime__native"
         name="reservation_date"
         hx-get="/api/check-availability"
         hx-trigger="change"
         hx-target="#availability-status"
         hx-indicator="#loading"&gt;
&lt;/div&gt;
&lt;div id="availability-status"&gt;&lt;/div&gt;</pre>
    </div>

    <div class="demo-box">
      <pre class="code-block">&lt;!-- Programar tarea con fecha y hora --&gt;
&lt;form hx-post="/api/tasks/schedule"
      hx-target="#task-result"&gt;
  &lt;div class="ux-datetime"&gt;
    &lt;label class="ux-datetime__label"&gt;Programar para&lt;/label&gt;
    &lt;input type="datetime-local" class="ux-datetime__native"
           name="scheduled_at" required&gt;
  &lt;/div&gt;
  &lt;button type="submit" class="ux-button ux-button--primary"&gt;
    Programar
  &lt;/button&gt;
&lt;/form&gt;</pre>
    </div>
  </div>

  <!-- Referencia de Clases -->
  <div class="demo-section">
    <h3>Referencia de Clases CSS</h3>
    <div style="overflow-x: auto;">
      <table class="class-table">
        <thead>
          <tr>
            <th>Clase</th>
            <th>Descripcion</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Contenedor</td></tr>
          <tr><td><code>.ux-datetime</code></td><td>Contenedor principal</td></tr>
          <tr><td><code>.ux-datetime--sm</code></td><td>Tamano pequeno</td></tr>
          <tr><td><code>.ux-datetime--lg</code></td><td>Tamano grande</td></tr>
          <tr><td><code>.ux-datetime--open</code></td><td>Estado abierto (borde activo)</td></tr>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Input Nativo</td></tr>
          <tr><td><code>.ux-datetime__native</code></td><td>Input date/time/datetime-local</td></tr>
          <tr><td><code>.ux-datetime__label</code></td><td>Etiqueta del campo</td></tr>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Trigger Custom</td></tr>
          <tr><td><code>.ux-datetime__trigger</code></td><td>Boton que abre el picker</td></tr>
          <tr><td><code>.ux-datetime__value</code></td><td>Valor mostrado</td></tr>
          <tr><td><code>.ux-datetime__placeholder</code></td><td>Placeholder cuando no hay valor</td></tr>
          <tr><td><code>.ux-datetime__icon</code></td><td>Icono del trigger</td></tr>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Picker/Calendario</td></tr>
          <tr><td><code>.ux-datetime-picker</code></td><td>Contenedor del picker dropdown</td></tr>
          <tr><td><code>.ux-calendar--inline</code></td><td>Calendario sin dropdown</td></tr>
          <tr><td><code>.ux-calendar__header</code></td><td>Header con navegacion</td></tr>
          <tr><td><code>.ux-calendar__nav</code></td><td>Botones prev/next</td></tr>
          <tr><td><code>.ux-calendar__title</code></td><td>Titulo (mes/ano)</td></tr>
          <tr><td><code>.ux-calendar__weekdays</code></td><td>Fila de dias de semana</td></tr>
          <tr><td><code>.ux-calendar__days</code></td><td>Grid de dias</td></tr>
          <tr><td><code>.ux-calendar__day</code></td><td>Boton de dia</td></tr>
          <tr><td><code>.ux-calendar__day--today</code></td><td>Dia actual</td></tr>
          <tr><td><code>.ux-calendar__day--selected</code></td><td>Dia seleccionado</td></tr>
          <tr><td><code>.ux-calendar__day--other-month</code></td><td>Dia de otro mes</td></tr>
          <tr><td><code>.ux-calendar__day--disabled</code></td><td>Dia deshabilitado</td></tr>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Selectores Mes/Ano</td></tr>
          <tr><td><code>.ux-calendar__months</code></td><td>Grid de meses</td></tr>
          <tr><td><code>.ux-calendar__month</code></td><td>Boton de mes</td></tr>
          <tr><td><code>.ux-calendar__years</code></td><td>Grid de anos</td></tr>
          <tr><td><code>.ux-calendar__year</code></td><td>Boton de ano</td></tr>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Time Picker</td></tr>
          <tr><td><code>.ux-time-picker</code></td><td>Contenedor del time picker</td></tr>
          <tr><td><code>.ux-time-picker__column</code></td><td>Columna (hora/min)</td></tr>
          <tr><td><code>.ux-time-picker__input</code></td><td>Input numerico</td></tr>
          <tr><td><code>.ux-time-picker__separator</code></td><td>Separador (:)</td></tr>
          <tr><td><code>.ux-time-picker__period</code></td><td>Contenedor AM/PM</td></tr>
          <tr><td><code>.ux-time-picker__period-btn</code></td><td>Boton AM/PM</td></tr>
          <tr><td colspan="2" style="font-weight: 600; background: var(--ux-surface-secondary);">Footer</td></tr>
          <tr><td><code>.ux-datetime-picker__footer</code></td><td>Footer con botones</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Footer -->
  <footer class="ux-padding" style="text-align: center; background: var(--ux-surface-secondary); color: var(--ux-text-secondary); font-size: var(--ux-font-size-md);">
    <p>UX Library - Datetime Component</p>
  </footer>
</body>
</html>
