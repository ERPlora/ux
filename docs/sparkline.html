<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Sparkline - UX Library</title>
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-sparkline.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); color: var(--ux-text); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-row { display: flex; flex-wrap: wrap; gap: var(--ux-space-xl); align-items: center; margin-bottom: var(--ux-space-md); }
    .demo-item { display: flex; flex-direction: column; gap: var(--ux-space-sm); }
    .demo-label { font-size: var(--ux-font-size-xs); color: var(--ux-text-secondary); }
    .stats-card { background: var(--ux-surface); border: 1px solid var(--ux-border-color); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-md) var(--ux-space-lg); min-width: 200px; }
    .stats-card__title { font-size: var(--ux-font-size-xs); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-sm); }
    .stats-card__value { font-size: var(--ux-font-size-2xl); font-weight: 600; color: var(--ux-text); margin-bottom: var(--ux-space-sm); }
    .code-block { background: #1a1a2e; color: #e5e5e5; padding: var(--ux-space-md); border-radius: var(--ux-border-radius); font-family: 'SF Mono', Monaco, monospace; font-size: var(--ux-font-size-sm); overflow-x: auto; white-space: pre; }
    .code-block .tag { color: #ff7b72; }
    .code-block .attr { color: #79c0ff; }
    .code-block .string { color: #a5d6ff; }
    .code-block .comment { color: #8b949e; }
    .ux-table { width: 100%; border-collapse: collapse; margin-bottom: var(--ux-space-lg); }
    .ux-table th, .ux-table td { padding: var(--ux-space-sm) var(--ux-space-md); text-align: left; border-bottom: 1px solid var(--ux-border-color); }
    .ux-table th { font-weight: 600; color: var(--ux-text); background: var(--ux-surface-secondary); }
    .ux-table td { color: var(--ux-text-secondary); }
    .ux-table code { background: var(--ux-surface-secondary); padding: 2px 6px; border-radius: 4px; font-size: var(--ux-font-size-sm); }
    .page-header { margin-bottom: var(--ux-space-xl); }
    .page-header h1 { font-size: var(--ux-font-size-2xl); font-weight: 700; color: var(--ux-text); margin-bottom: var(--ux-space-sm); }
    .page-header p { font-size: var(--ux-font-size-lg); color: var(--ux-text-secondary); }
  </style>
</head>
<body class="ux-app">
  <div class="page-header">
    <h1>Sparkline</h1>
    <p>Gráficos en línea compactos para mostrar tendencias de datos.</p>
  </div>

    <!-- Basic Line Sparkline -->
    <div class="demo-section">
      <h3>Line Sparkline (Básico)</h3>
      <div class="demo-row">
        <div class="demo-item"
             x-data="uxSparkline({
               data: [5, 10, 5, 20, 8, 15, 12, 25, 18, 30],
               width: 120,
               height: 32
             })">
          <span class="demo-label">Tendencia de ventas</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <defs>
              <linearGradient id="sparklineGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color: var(--ux-primary); stop-opacity: 0.4"/>
                <stop offset="100%" style="stop-color: var(--ux-primary); stop-opacity: 0"/>
              </linearGradient>
            </defs>
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            <template x-if="showLastDot && points.length > 0">
              <circle class="ux-sparkline__dot--last"
                      :cx="points[points.length - 1].x"
                      :cy="points[points.length - 1].y"
                      r="4"/>
            </template>
          </svg>
        </div>

        <div class="demo-item"
             x-data="uxSparkline({
               data: [30, 25, 35, 28, 32, 40, 38, 45, 42, 50],
               width: 150,
               height: 40,
               showArea: true
             })">
          <span class="demo-label">Con área</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <defs>
              <linearGradient id="sparklineGradient2" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color: var(--ux-primary); stop-opacity: 0.3"/>
                <stop offset="100%" style="stop-color: var(--ux-primary); stop-opacity: 0"/>
              </linearGradient>
            </defs>
            <path class="ux-sparkline__area" :d="areaPath" fill="url(#sparklineGradient2)"/>
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            <circle class="ux-sparkline__dot--last"
                    :cx="points[points.length - 1]?.x"
                    :cy="points[points.length - 1]?.y"
                    r="4"/>
          </svg>
        </div>

        <div class="demo-item"
             x-data="uxSparkline({
               data: [12, 15, 13, 17, 14, 18, 16, 20, 19, 22],
               width: 120,
               height: 32,
               showDots: true
             })">
          <span class="demo-label">Con todos los puntos</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            <template x-for="(point, index) in points" :key="index">
              <circle class="ux-sparkline__dot" :cx="point.x" :cy="point.y" r="3"/>
            </template>
          </svg>
        </div>
      </div>
    </div>

    <!-- Bar Sparkline -->
    <div class="demo-section">
      <h3>Bar Sparkline</h3>
      <div class="demo-row">
        <div class="demo-item"
             x-data="uxSparkline({
               data: [5, 10, 15, 8, 12, 20, 18, 25, 22, 30],
               type: 'bar',
               width: 100,
               height: 32,
               barGap: 2
             })">
          <span class="demo-label">Ventas semanales</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <template x-for="(bar, index) in bars" :key="index">
              <rect class="ux-sparkline__bar"
                    :class="{ 'ux-sparkline__bar--negative': bar.isNegative }"
                    :x="bar.x"
                    :y="bar.y"
                    :width="bar.width"
                    :height="bar.height"/>
            </template>
          </svg>
        </div>

        <div class="demo-item"
             x-data="uxSparkline({
               data: [10, -5, 15, -8, 20, 12, -3, 18, 25, -10],
               type: 'bar',
               width: 120,
               height: 40,
               barGap: 3
             })">
          <span class="demo-label">Con valores negativos</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <template x-for="(bar, index) in bars" :key="index">
              <rect class="ux-sparkline__bar"
                    :class="{ 'ux-sparkline__bar--negative': bar.isNegative }"
                    :x="bar.x"
                    :y="bar.y"
                    :width="bar.width"
                    :height="bar.height"/>
            </template>
          </svg>
        </div>
      </div>
    </div>

    <!-- Color Variants -->
    <div class="demo-section">
      <h3>Variantes de Color</h3>
      <div class="demo-row">
        <div class="demo-item">
          <span class="demo-label">Primary (default)</span>
          <div class="ux-sparkline"
               x-data="uxSparkline({
                 data: [5, 12, 8, 20, 15, 25, 18, 30],
                 width: 100,
                 height: 28
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
          </div>
        </div>

        <div class="demo-item">
          <span class="demo-label">Success</span>
          <div class="ux-sparkline ux-sparkline--success"
               x-data="uxSparkline({
                 data: [10, 15, 12, 20, 18, 25, 22, 35],
                 width: 100,
                 height: 28
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
              <circle class="ux-sparkline__dot--last"
                      :cx="points[points.length - 1]?.x"
                      :cy="points[points.length - 1]?.y"
                      r="3"/>
            </svg>
          </div>
        </div>

        <div class="demo-item">
          <span class="demo-label">Danger</span>
          <div class="ux-sparkline ux-sparkline--danger"
               x-data="uxSparkline({
                 data: [30, 25, 28, 20, 22, 15, 18, 10],
                 width: 100,
                 height: 28
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
              <circle class="ux-sparkline__dot--last"
                      :cx="points[points.length - 1]?.x"
                      :cy="points[points.length - 1]?.y"
                      r="3"/>
            </svg>
          </div>
        </div>

        <div class="demo-item">
          <span class="demo-label">Warning</span>
          <div class="ux-sparkline ux-sparkline--warning"
               x-data="uxSparkline({
                 data: [15, 20, 18, 22, 25, 20, 28, 25],
                 width: 100,
                 height: 28
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- With Value Display -->
    <div class="demo-section">
      <h3>Con Valor y Cambio</h3>
      <div class="demo-row">
        <div class="stats-card"
             x-data="uxSparkline({
               data: [1200, 1350, 1280, 1500, 1420, 1680, 1590, 1850],
               width: 80,
               height: 32,
               showValue: true,
               showChange: true
             })">
          <div class="stats-card__title">Ingresos</div>
          <div class="stats-card__value" x-text="'€' + formatValue(currentValue)"></div>
          <div class="ux-sparkline">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
            <span class="ux-sparkline__change"
                  :class="'ux-sparkline__change--' + changeType"
                  x-html="icons[changeType === 'positive' ? 'up' : changeType === 'negative' ? 'down' : 'neutral'] + formatChange(change)">
            </span>
          </div>
        </div>

        <div class="stats-card"
             x-data="uxSparkline({
               data: [450, 420, 380, 350, 320, 290, 260, 230],
               width: 80,
               height: 32,
               showValue: true,
               showChange: true
             })">
          <div class="stats-card__title">Costes</div>
          <div class="stats-card__value" x-text="'€' + formatValue(currentValue)"></div>
          <div class="ux-sparkline ux-sparkline--danger">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
            <span class="ux-sparkline__change"
                  :class="'ux-sparkline__change--' + changeType"
                  x-html="icons[changeType === 'positive' ? 'up' : changeType === 'negative' ? 'down' : 'neutral'] + formatChange(change)">
            </span>
          </div>
        </div>

        <div class="stats-card"
             x-data="uxSparkline({
               data: [85, 87, 86, 88, 87, 89, 88, 90],
               width: 80,
               height: 32,
               showValue: true,
               showChange: true
             })">
          <div class="stats-card__title">Satisfacción</div>
          <div class="stats-card__value" x-text="currentValue + '%'"></div>
          <div class="ux-sparkline ux-sparkline--success">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
            <span class="ux-sparkline__change"
                  :class="'ux-sparkline__change--' + changeType"
                  x-html="icons[changeType === 'positive' ? 'up' : changeType === 'negative' ? 'down' : 'neutral'] + formatChange(change)">
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- With Reference Line -->
    <div class="demo-section">
      <h3>Con Línea de Referencia</h3>
      <div class="demo-row">
        <div class="demo-item"
             x-data="uxSparkline({
               data: [15, 25, 18, 30, 22, 35, 28, 40, 32, 45],
               width: 150,
               height: 50,
               showReference: true
             })">
          <span class="demo-label">Referencia: promedio</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <line class="ux-sparkline__reference"
                  x1="0" :y1="referenceY"
                  :x2="width" :y2="referenceY"/>
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            <circle class="ux-sparkline__dot--last"
                    :cx="points[points.length - 1]?.x"
                    :cy="points[points.length - 1]?.y"
                    r="4"/>
          </svg>
        </div>

        <div class="demo-item"
             x-data="uxSparkline({
               data: [60, 75, 65, 80, 70, 85, 78, 90, 82, 95],
               width: 150,
               height: 50,
               showReference: true,
               referenceValue: 75
             })">
          <span class="demo-label">Referencia: objetivo (75)</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <line class="ux-sparkline__reference"
                  x1="0" :y1="referenceY"
                  :x2="width" :y2="referenceY"/>
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Sizes -->
    <div class="demo-section">
      <h3>Tamaños</h3>
      <div class="demo-row">
        <div class="demo-item">
          <span class="demo-label">Small</span>
          <div class="ux-sparkline ux-sparkline--sm"
               x-data="uxSparkline({
                 data: [5, 10, 8, 15, 12, 18],
                 width: 60,
                 height: 20
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
          </div>
        </div>

        <div class="demo-item">
          <span class="demo-label">Default</span>
          <div class="ux-sparkline"
               x-data="uxSparkline({
                 data: [5, 10, 8, 15, 12, 18, 14, 20],
                 width: 100,
                 height: 32
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
          </div>
        </div>

        <div class="demo-item">
          <span class="demo-label">Large</span>
          <div class="ux-sparkline ux-sparkline--lg"
               x-data="uxSparkline({
                 data: [5, 10, 8, 15, 12, 18, 14, 20, 16, 25],
                 width: 150,
                 height: 48
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
              <circle class="ux-sparkline__dot--last"
                      :cx="points[points.length - 1]?.x"
                      :cy="points[points.length - 1]?.y"
                      r="4"/>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Animated -->
    <div class="demo-section">
      <h3>Animado</h3>
      <div class="demo-row">
        <div class="demo-item">
          <span class="demo-label">Con animación de dibujo</span>
          <div class="ux-sparkline ux-sparkline--animated"
               x-data="uxSparkline({
                 data: [10, 25, 15, 35, 20, 40, 30, 50, 35, 55],
                 width: 150,
                 height: 40,
                 animated: true
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Smooth vs Linear -->
    <div class="demo-section">
      <h3>Curvas</h3>
      <div class="demo-row">
        <div class="demo-item"
             x-data="uxSparkline({
               data: [10, 25, 15, 35, 20, 40, 30, 45],
               width: 120,
               height: 40,
               smooth: true
             })">
          <span class="demo-label">Suave (bezier)</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
          </svg>
        </div>

        <div class="demo-item"
             x-data="uxSparkline({
               data: [10, 25, 15, 35, 20, 40, 30, 45],
               width: 120,
               height: 40,
               smooth: false
             })">
          <span class="demo-label">Lineal</span>
          <svg class="ux-sparkline__svg" :width="width" :height="height">
            <path class="ux-sparkline__line" :d="linePath" fill="none"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- HTMX Integration -->
    <div class="demo-section">
      <h3>Integracion con HTMX</h3>
      <p>Los sparklines funcionan perfectamente con HTMX para cargar datos del servidor y actualizarlos en tiempo real.</p>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Dashboard con Datos en Tiempo Real</h4>
      <p>Cargar estadisticas con sparklines desde el servidor.</p>

      <div class="demo-row" style="flex-wrap: wrap;">
        <!-- Revenue Card - loads from server -->
        <div class="stats-card"
             hx-get="/api/stats/revenue"
             hx-trigger="load, every 30s"
             hx-swap="innerHTML">
          <div class="stats-card__title">Ingresos</div>
          <div class="stats-card__value">Cargando...</div>
        </div>

        <!-- Orders Card - loads from server -->
        <div class="stats-card"
             hx-get="/api/stats/orders"
             hx-trigger="load, every 30s"
             hx-swap="innerHTML">
          <div class="stats-card__title">Pedidos</div>
          <div class="stats-card__value">Cargando...</div>
        </div>

        <!-- Users Card - loads from server -->
        <div class="stats-card"
             hx-get="/api/stats/users"
             hx-trigger="load, every 30s"
             hx-swap="innerHTML">
          <div class="stats-card__title">Usuarios</div>
          <div class="stats-card__value">Cargando...</div>
        </div>
      </div>

      <pre class="code-block"><span class="comment">&lt;!-- Dashboard card que carga datos del servidor --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"stats-card"</span>
     <span class="attr">hx-get</span>=<span class="string">"/api/stats/revenue"</span>
     <span class="attr">hx-trigger</span>=<span class="string">"load, every 30s"</span>
     <span class="attr">hx-swap</span>=<span class="string">"innerHTML"</span><span class="tag">&gt;</span>
  Cargando...
<span class="tag">&lt;/div&gt;</span>

<span class="comment">&lt;!-- Respuesta del servidor (HTML parcial): --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"stats-card__title"</span><span class="tag">&gt;</span>Ingresos<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"stats-card__value"</span><span class="tag">&gt;</span>$12,450<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-sparkline ux-sparkline--success"</span>
     <span class="attr">x-data</span>=<span class="string">"uxSparkline({ data: [1200, 1350, 1500, 1420, 1680] })"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;svg</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__svg"</span> <span class="attr">:width</span>=<span class="string">"width"</span> <span class="attr">:height</span>=<span class="string">"height"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;path</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__line"</span> <span class="attr">:d</span>=<span class="string">"linePath"</span> <span class="attr">fill</span>=<span class="string">"none"</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/svg&gt;</span>
  <span class="tag">&lt;span</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__change ux-sparkline__change--positive"</span><span class="tag">&gt;</span>+12.5%<span class="tag">&lt;/span&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Sparkline con Polling HTMX</h4>
      <p>Actualizar grafico automaticamente cada pocos segundos.</p>

      <div class="demo-row">
        <div class="stats-card">
          <div class="stats-card__title">Ventas en Tiempo Real</div>
          <div id="live-sales-value"
               class="stats-card__value"
               hx-get="/api/sales/current"
               hx-trigger="every 5s"
               hx-swap="innerHTML">$0</div>
          <div id="live-sales-chart"
               hx-get="/api/sales/sparkline"
               hx-trigger="every 5s"
               hx-swap="innerHTML"
               class="ux-sparkline ux-sparkline--success"
               x-data="uxSparkline({ data: [100, 120, 115, 140, 135, 160, 155, 180], width: 100, height: 32 })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
              <circle class="ux-sparkline__dot--last"
                      :cx="points[points.length - 1]?.x"
                      :cy="points[points.length - 1]?.y"
                      r="3"/>
            </svg>
          </div>
        </div>
      </div>

      <pre class="code-block"><span class="comment">&lt;!-- Sparkline con polling cada 5 segundos --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">id</span>=<span class="string">"live-chart"</span>
     <span class="attr">hx-get</span>=<span class="string">"/api/sales/sparkline"</span>
     <span class="attr">hx-trigger</span>=<span class="string">"every 5s"</span>
     <span class="attr">hx-swap</span>=<span class="string">"innerHTML"</span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- El servidor devuelve el sparkline con datos actualizados --&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Seleccion de Periodo</h4>
      <p>Cambiar datos del sparkline segun periodo seleccionado.</p>

      <div class="demo-row" style="flex-direction: column; align-items: flex-start;">
        <div class="ux-segment" style="margin-bottom: var(--ux-space-md);">
          <button class="ux-segment__button ux-segment__button--active"
                  hx-get="/api/stats/revenue?period=7d"
                  hx-target="#period-sparkline"
                  hx-swap="outerHTML">7 dias</button>
          <button class="ux-segment__button"
                  hx-get="/api/stats/revenue?period=30d"
                  hx-target="#period-sparkline"
                  hx-swap="outerHTML">30 dias</button>
          <button class="ux-segment__button"
                  hx-get="/api/stats/revenue?period=90d"
                  hx-target="#period-sparkline"
                  hx-swap="outerHTML">90 dias</button>
          <button class="ux-segment__button"
                  hx-get="/api/stats/revenue?period=1y"
                  hx-target="#period-sparkline"
                  hx-swap="outerHTML">1 ano</button>
        </div>

        <div class="stats-card" style="width: 300px;">
          <div class="stats-card__title">Ingresos por Periodo</div>
          <div class="stats-card__value">$8,450</div>
          <div id="period-sparkline"
               class="ux-sparkline ux-sparkline--success"
               x-data="uxSparkline({
                 data: [1200, 1350, 1280, 1500, 1420, 1680, 1590],
                 width: 200,
                 height: 40,
                 showArea: true
               })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <defs>
                <linearGradient id="periodGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color: var(--ux-success); stop-opacity: 0.3"/>
                  <stop offset="100%" style="stop-color: var(--ux-success); stop-opacity: 0"/>
                </linearGradient>
              </defs>
              <path class="ux-sparkline__area" :d="areaPath" fill="url(#periodGradient)"/>
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
              <circle class="ux-sparkline__dot--last"
                      :cx="points[points.length - 1]?.x"
                      :cy="points[points.length - 1]?.y"
                      r="4"/>
            </svg>
          </div>
        </div>
      </div>

      <pre class="code-block"><span class="comment">&lt;!-- Selector de periodo con HTMX --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-segment"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;button</span> <span class="attr">hx-get</span>=<span class="string">"/api/stats/revenue?period=7d"</span>
          <span class="attr">hx-target</span>=<span class="string">"#sparkline"</span>
          <span class="attr">hx-swap</span>=<span class="string">"outerHTML"</span><span class="tag">&gt;</span>7 dias<span class="tag">&lt;/button&gt;</span>
  <span class="tag">&lt;button</span> <span class="attr">hx-get</span>=<span class="string">"/api/stats/revenue?period=30d"</span>
          <span class="attr">hx-target</span>=<span class="string">"#sparkline"</span><span class="tag">&gt;</span>30 dias<span class="tag">&lt;/button&gt;</span>
<span class="tag">&lt;/div&gt;</span>

<span class="tag">&lt;div</span> <span class="attr">id</span>=<span class="string">"sparkline"</span> <span class="attr">class</span>=<span class="string">"ux-sparkline"</span>
     <span class="attr">x-data</span>=<span class="string">"uxSparkline({ data: [...] })"</span><span class="tag">&gt;</span>
  ...
<span class="tag">&lt;/div&gt;</span></pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Tabla de Productos con Sparklines</h4>
      <p>Cargar tabla de productos con sparklines de ventas.</p>

      <div class="demo-row" style="width: 100%; overflow-x: auto;">
        <table class="ux-table"
               id="products-table"
               hx-get="/api/products/with-sparklines"
               hx-trigger="load"
               hx-swap="innerHTML">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Ventas (7d)</th>
              <th>Total</th>
              <th>Tendencia</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Cafe Americano</td>
              <td>
                <div class="ux-sparkline ux-sparkline--success ux-sparkline--sm"
                     x-data="uxSparkline({ data: [45, 52, 48, 60, 55, 70, 65], width: 60, height: 20 })">
                  <svg class="ux-sparkline__svg" :width="width" :height="height">
                    <path class="ux-sparkline__line" :d="linePath" fill="none"/>
                  </svg>
                </div>
              </td>
              <td>$395</td>
              <td><span style="color: var(--ux-success);">+15.2%</span></td>
            </tr>
            <tr>
              <td>Cappuccino</td>
              <td>
                <div class="ux-sparkline ux-sparkline--sm"
                     x-data="uxSparkline({ data: [30, 35, 32, 38, 36, 40, 38], width: 60, height: 20 })">
                  <svg class="ux-sparkline__svg" :width="width" :height="height">
                    <path class="ux-sparkline__line" :d="linePath" fill="none"/>
                  </svg>
                </div>
              </td>
              <td>$249</td>
              <td><span style="color: var(--ux-success);">+8.5%</span></td>
            </tr>
            <tr>
              <td>Croissant</td>
              <td>
                <div class="ux-sparkline ux-sparkline--danger ux-sparkline--sm"
                     x-data="uxSparkline({ data: [25, 22, 20, 18, 20, 17, 15], width: 60, height: 20 })">
                  <svg class="ux-sparkline__svg" :width="width" :height="height">
                    <path class="ux-sparkline__line" :d="linePath" fill="none"/>
                  </svg>
                </div>
              </td>
              <td>$137</td>
              <td><span style="color: var(--ux-danger);">-12.3%</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <pre class="code-block"><span class="comment">&lt;!-- Tabla con sparklines cargada via HTMX --&gt;</span>
<span class="tag">&lt;table</span> <span class="attr">class</span>=<span class="string">"ux-table"</span>
       <span class="attr">hx-get</span>=<span class="string">"/api/products/with-sparklines"</span>
       <span class="attr">hx-trigger</span>=<span class="string">"load"</span>
       <span class="attr">hx-swap</span>=<span class="string">"innerHTML"</span><span class="tag">&gt;</span>
<span class="tag">&lt;/table&gt;</span>

<span class="comment">&lt;!-- Respuesta del servidor incluye filas con sparklines --&gt;</span>
<span class="tag">&lt;tr&gt;</span>
  <span class="tag">&lt;td&gt;</span>Cafe Americano<span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;td&gt;</span>
    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-sparkline ux-sparkline--success ux-sparkline--sm"</span>
         <span class="attr">x-data</span>=<span class="string">"uxSparkline({ data: [45, 52, 48, 60, 55, 70, 65] })"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;svg</span> ...&gt;<span class="tag">&lt;path</span> <span class="attr">:d</span>=<span class="string">"linePath"</span><span class="tag">/&gt;&lt;/svg&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;td&gt;</span>$395<span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;td&gt;</span>+15.2%<span class="tag">&lt;/td&gt;</span>
<span class="tag">&lt;/tr&gt;</span></pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Click para Ver Detalle</h4>
      <p>Click en sparkline para cargar grafico detallado.</p>

      <div class="demo-row" style="flex-direction: column; align-items: flex-start;">
        <div class="stats-card"
             style="cursor: pointer;"
             hx-get="/api/stats/revenue/detail"
             hx-target="#detail-panel"
             hx-swap="innerHTML">
          <div class="stats-card__title">Click para ver detalle</div>
          <div class="stats-card__value">$12,450</div>
          <div class="ux-sparkline ux-sparkline--success"
               x-data="uxSparkline({ data: [1200, 1350, 1280, 1500, 1420, 1680, 1590, 1850], width: 100, height: 32 })">
            <svg class="ux-sparkline__svg" :width="width" :height="height">
              <path class="ux-sparkline__line" :d="linePath" fill="none"/>
            </svg>
          </div>
        </div>

        <div id="detail-panel" style="padding: var(--ux-space-md); background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius); min-height: 100px; width: 100%; max-width: 400px;">
          <span style="color: var(--ux-text-secondary);">Haz click en el card para ver detalles...</span>
        </div>
      </div>

      <pre class="code-block"><span class="comment">&lt;!-- Card clickeable que carga detalle --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"stats-card"</span>
     <span class="attr">hx-get</span>=<span class="string">"/api/stats/revenue/detail"</span>
     <span class="attr">hx-target</span>=<span class="string">"#detail-panel"</span>
     <span class="attr">hx-swap</span>=<span class="string">"innerHTML"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-sparkline"</span> <span class="attr">x-data</span>=<span class="string">"uxSparkline({...})"</span><span class="tag">&gt;</span>...<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>

<span class="tag">&lt;div</span> <span class="attr">id</span>=<span class="string">"detail-panel"</span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- Se carga el grafico detallado aqui --&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </div>

    <!-- Usage -->
    <div class="demo-section">
      <h3>Uso</h3>
      <pre class="code-block"><span class="comment">&lt;!-- Line Sparkline básico --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-sparkline"</span>
     <span class="attr">x-data</span>=<span class="string">"uxSparkline({
       data: [5, 10, 8, 15, 12, 20],
       width: 100,
       height: 32
     })"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;svg</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__svg"</span> <span class="attr">:width</span>=<span class="string">"width"</span> <span class="attr">:height</span>=<span class="string">"height"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;path</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__line"</span> <span class="attr">:d</span>=<span class="string">"linePath"</span> <span class="attr">fill</span>=<span class="string">"none"</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;circle</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__dot--last"</span>
            <span class="attr">:cx</span>=<span class="string">"points[points.length - 1]?.x"</span>
            <span class="attr">:cy</span>=<span class="string">"points[points.length - 1]?.y"</span>
            <span class="attr">r</span>=<span class="string">"4"</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/svg&gt;</span>
<span class="tag">&lt;/div&gt;</span>

<span class="comment">&lt;!-- Bar Sparkline --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">x-data</span>=<span class="string">"uxSparkline({
       data: [5, 10, 15, 8, 12],
       type: 'bar',
       width: 80,
       height: 32
     })"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;svg</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__svg"</span> <span class="attr">:width</span>=<span class="string">"width"</span> <span class="attr">:height</span>=<span class="string">"height"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;template</span> <span class="attr">x-for</span>=<span class="string">"(bar, index) in bars"</span> <span class="attr">:key</span>=<span class="string">"index"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;rect</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__bar"</span>
            <span class="attr">:x</span>=<span class="string">"bar.x"</span> <span class="attr">:y</span>=<span class="string">"bar.y"</span>
            <span class="attr">:width</span>=<span class="string">"bar.width"</span> <span class="attr">:height</span>=<span class="string">"bar.height"</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/template&gt;</span>
  <span class="tag">&lt;/svg&gt;</span>
<span class="tag">&lt;/div&gt;</span>

<span class="comment">&lt;!-- Con valor y cambio --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-sparkline ux-sparkline--success"</span>
     <span class="attr">x-data</span>=<span class="string">"uxSparkline({
       data: [100, 120, 110, 140, 130, 160],
       showValue: true,
       showChange: true
     })"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;svg</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__svg"</span> <span class="attr">:width</span>=<span class="string">"width"</span> <span class="attr">:height</span>=<span class="string">"height"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;path</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__line"</span> <span class="attr">:d</span>=<span class="string">"linePath"</span> <span class="attr">fill</span>=<span class="string">"none"</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/svg&gt;</span>
  <span class="tag">&lt;span</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__value"</span> <span class="attr">x-text</span>=<span class="string">"formatValue(currentValue)"</span><span class="tag">&gt;&lt;/span&gt;</span>
  <span class="tag">&lt;span</span> <span class="attr">class</span>=<span class="string">"ux-sparkline__change"</span>
        <span class="attr">:class</span>=<span class="string">"'ux-sparkline__change--' + changeType"</span>
        <span class="attr">x-text</span>=<span class="string">"formatChange(change)"</span><span class="tag">&gt;&lt;/span&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </div>

    <!-- Options -->
    <div class="demo-section">
      <h3>Opciones</h3>
      <table class="ux-table">
        <thead>
          <tr>
            <th>Opción</th>
            <th>Tipo</th>
            <th>Default</th>
            <th>Descripción</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>data</td><td>Array</td><td>[]</td><td>Datos numéricos a visualizar</td></tr>
          <tr><td>width</td><td>Number</td><td>100</td><td>Ancho del SVG en px</td></tr>
          <tr><td>height</td><td>Number</td><td>30</td><td>Alto del SVG en px</td></tr>
          <tr><td>type</td><td>String</td><td>'line'</td><td>Tipo: 'line', 'bar', 'area'</td></tr>
          <tr><td>showDots</td><td>Boolean</td><td>false</td><td>Mostrar todos los puntos</td></tr>
          <tr><td>showLastDot</td><td>Boolean</td><td>true</td><td>Mostrar punto del último valor</td></tr>
          <tr><td>showArea</td><td>Boolean</td><td>false</td><td>Mostrar área bajo la línea</td></tr>
          <tr><td>showReference</td><td>Boolean</td><td>false</td><td>Mostrar línea de referencia</td></tr>
          <tr><td>referenceValue</td><td>Number</td><td>null</td><td>Valor de referencia (null = promedio)</td></tr>
          <tr><td>smooth</td><td>Boolean</td><td>true</td><td>Usar curvas bezier suaves</td></tr>
          <tr><td>animated</td><td>Boolean</td><td>false</td><td>Animar el dibujo de la línea</td></tr>
          <tr><td>barGap</td><td>Number</td><td>2</td><td>Espacio entre barras (tipo bar)</td></tr>
          <tr><td>padding</td><td>Number</td><td>4</td><td>Padding interno del SVG</td></tr>
          <tr><td>showValue</td><td>Boolean</td><td>false</td><td>Mostrar valor actual</td></tr>
          <tr><td>showChange</td><td>Boolean</td><td>false</td><td>Mostrar porcentaje de cambio</td></tr>
          <tr><td>valueFormat</td><td>Function</td><td>null</td><td>Función para formatear el valor</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Computed Properties -->
    <div class="demo-section">
      <h3>Propiedades Computadas</h3>
      <table class="ux-table">
        <thead>
          <tr>
            <th>Propiedad</th>
            <th>Descripción</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>points</td><td>Array de puntos {x, y, value} para línea/área</td></tr>
          <tr><td>linePath</td><td>Path SVG para la línea</td></tr>
          <tr><td>areaPath</td><td>Path SVG para el área</td></tr>
          <tr><td>bars</td><td>Array de barras {x, y, width, height, value, isNegative}</td></tr>
          <tr><td>currentValue</td><td>Último valor de los datos</td></tr>
          <tr><td>firstValue</td><td>Primer valor de los datos</td></tr>
          <tr><td>minValue</td><td>Valor mínimo</td></tr>
          <tr><td>maxValue</td><td>Valor máximo</td></tr>
          <tr><td>average</td><td>Promedio de los datos</td></tr>
          <tr><td>change</td><td>Cambio porcentual (primero vs último)</td></tr>
          <tr><td>changeType</td><td>'positive', 'negative', o 'neutral'</td></tr>
          <tr><td>referenceY</td><td>Posición Y de la línea de referencia</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Methods -->
    <div class="demo-section">
      <h3>Métodos</h3>
      <table class="ux-table">
        <thead>
          <tr>
            <th>Método</th>
            <th>Descripción</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>setData(array)</td><td>Establece nuevos datos</td></tr>
          <tr><td>addPoint(value)</td><td>Añade un punto al final</td></tr>
          <tr><td>formatValue(value)</td><td>Formatea un valor para mostrar (1K, 1M, etc.)</td></tr>
          <tr><td>formatChange(value)</td><td>Formatea el cambio porcentual (+5.2%)</td></tr>
        </tbody>
      </table>
    </div>

    <!-- CSS Classes -->
    <div class="demo-section">
      <h3>Clases CSS</h3>
      <table class="ux-table">
        <thead>
          <tr>
            <th>Clase</th>
            <th>Descripción</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>.ux-sparkline</td><td>Contenedor principal</td></tr>
          <tr><td>.ux-sparkline--success</td><td>Color verde</td></tr>
          <tr><td>.ux-sparkline--danger</td><td>Color rojo</td></tr>
          <tr><td>.ux-sparkline--warning</td><td>Color amarillo</td></tr>
          <tr><td>.ux-sparkline--sm</td><td>Tamaño pequeño (línea más fina)</td></tr>
          <tr><td>.ux-sparkline--lg</td><td>Tamaño grande (línea más gruesa)</td></tr>
          <tr><td>.ux-sparkline--animated</td><td>Animación de dibujo</td></tr>
          <tr><td>.ux-sparkline--interactive</td><td>Cursor pointer y hover</td></tr>
          <tr><td>.ux-sparkline__line</td><td>Línea del gráfico</td></tr>
          <tr><td>.ux-sparkline__area</td><td>Área bajo la línea</td></tr>
          <tr><td>.ux-sparkline__bar</td><td>Barra individual</td></tr>
          <tr><td>.ux-sparkline__dot</td><td>Punto de datos</td></tr>
          <tr><td>.ux-sparkline__dot--last</td><td>Punto del último valor</td></tr>
          <tr><td>.ux-sparkline__reference</td><td>Línea de referencia</td></tr>
          <tr><td>.ux-sparkline__value</td><td>Valor numérico mostrado</td></tr>
          <tr><td>.ux-sparkline__change</td><td>Indicador de cambio</td></tr>
        </tbody>
      </table>
    </div>

</body>
</html>
