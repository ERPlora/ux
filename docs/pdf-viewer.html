<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>PDF Viewer - UX Library</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-pdf-viewer.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 {
      font-size: var(--ux-font-size-lg);
      font-weight: 600;
      margin-bottom: var(--ux-space-md);
      color: var(--ux-text);
    }
    .demo-section p {
      font-size: var(--ux-font-size-md);
      color: var(--ux-text-secondary);
      margin-bottom: var(--ux-space-md);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: var(--ux-border-radius-lg);
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
    }
    .code-block {
      background: #1a1a2e;
      color: #e5e5e5;
      padding: var(--ux-space-md);
      border-radius: var(--ux-border-radius);
      overflow-x: auto;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: var(--ux-font-size-md);
      line-height: 1.6;
    }
    .code-block .tag { color: #ff7b72; }
    .code-block .attr { color: #79c0ff; }
    .code-block .string { color: #a5d6ff; }
    .code-block .comment { color: #8b949e; }
  </style>
</head>
<body class="ux-app">

  <div class="ux-content" style="padding: var(--ux-space-lg);">

    <section class="demo-section">
      <h3>PDF Viewer</h3>
      <p>Visor de documentos PDF con controles de navegacion, zoom, busqueda y modo pantalla completa. Requiere PDF.js.</p>
      <div class="demo-box">
        <div class="ux-pdf-viewer"
             x-data="uxPdfViewer({ src: 'https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf' })"
             style="height: 500px;">

          <!-- Toolbar -->
          <div class="ux-pdf-viewer__toolbar">
            <div class="ux-pdf-viewer__toolbar-group">
              <button class="ux-pdf-viewer__btn" @click="prevPage()" :disabled="currentPage <= 1">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="number" class="ux-pdf-viewer__page-input"
                     :value="currentPage"
                     @change="goToPage(parseInt($event.target.value))"
                     min="1" :max="totalPages">
              <span class="ux-pdf-viewer__page-total">/ <span x-text="totalPages"></span></span>
              <button class="ux-pdf-viewer__btn" @click="nextPage()" :disabled="currentPage >= totalPages">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
              </button>
            </div>

            <div class="ux-pdf-viewer__toolbar-separator"></div>

            <div class="ux-pdf-viewer__toolbar-group">
              <button class="ux-pdf-viewer__btn" @click="zoomOut()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/></svg>
              </button>
              <select class="ux-pdf-viewer__zoom-select" @change="setZoom($event.target.value)" x-model="scale">
                <template x-for="opt in zoomOptions" :key="opt.value">
                  <option :value="opt.value" x-text="opt.label"></option>
                </template>
              </select>
              <button class="ux-pdf-viewer__btn" @click="zoomIn()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
              </button>
            </div>

            <div class="ux-pdf-viewer__toolbar-spacer"></div>

            <div class="ux-pdf-viewer__toolbar-group">
              <button class="ux-pdf-viewer__btn" @click="download()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
              </button>
              <button class="ux-pdf-viewer__btn" @click="print()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/></svg>
              </button>
              <button class="ux-pdf-viewer__btn" @click="toggleFullscreen()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
              </button>
            </div>
          </div>

          <!-- Container -->
          <div class="ux-pdf-viewer__container" x-ref="container">
            <div class="ux-pdf-viewer__page">
              <canvas x-ref="canvas"></canvas>
            </div>
          </div>

          <!-- Loading -->
          <div class="ux-pdf-viewer__loading" x-show="isLoading">
            <div class="ux-pdf-viewer__loading-spinner"></div>
            <span class="ux-pdf-viewer__loading-text">Cargando documento...</span>
          </div>

          <!-- Error -->
          <div class="ux-pdf-viewer__error" x-show="error" x-cloak>
            <svg class="ux-pdf-viewer__error-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
            <span class="ux-pdf-viewer__error-text" x-text="error"></span>
          </div>
        </div>
      </div>
      <pre class="code-block"><span class="comment">&lt;!-- Incluir PDF.js --&gt;</span>
<span class="tag">&lt;script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"</span><span class="tag">&gt;&lt;/script&gt;</span>

<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-pdf-viewer"</span>
     <span class="attr">x-data</span>=<span class="string">"uxPdfViewer({ src: 'documento.pdf' })"</span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- Toolbar y contenido... --&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Opciones</h3>
      <p>Configuracion disponible para el componente.</p>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Opcion</th>
              <th style="padding: var(--ux-space-sm);">Tipo</th>
              <th style="padding: var(--ux-space-sm);">Default</th>
              <th style="padding: var(--ux-space-sm);">Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>src</code></td>
              <td style="padding: var(--ux-space-sm);">string</td>
              <td style="padding: var(--ux-space-sm);">''</td>
              <td style="padding: var(--ux-space-sm);">URL del documento PDF</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>scale</code></td>
              <td style="padding: var(--ux-space-sm);">number | string</td>
              <td style="padding: var(--ux-space-sm);">1</td>
              <td style="padding: var(--ux-space-sm);">Escala inicial (1, 1.5, 'fit-width', 'fit-page')</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>showThumbnails</code></td>
              <td style="padding: var(--ux-space-sm);">boolean</td>
              <td style="padding: var(--ux-space-sm);">false</td>
              <td style="padding: var(--ux-space-sm);">Mostrar panel de miniaturas</td>
            </tr>
          </tbody>
        </table>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">x-data</span>=<span class="string">"uxPdfViewer({
  src: 'documento.pdf',
  scale: 'fit-width',
  showThumbnails: true
})"</span><span class="tag">&gt;</span>...
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Metodos</h3>
      <p>Metodos disponibles para controlar el visor.</p>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Metodo</th>
              <th style="padding: var(--ux-space-sm);">Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>loadPDF(url)</code></td>
              <td style="padding: var(--ux-space-sm);">Carga un nuevo documento</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>goToPage(num)</code></td>
              <td style="padding: var(--ux-space-sm);">Navega a una pagina especifica</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>prevPage() / nextPage()</code></td>
              <td style="padding: var(--ux-space-sm);">Navega a la pagina anterior/siguiente</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>zoomIn() / zoomOut()</code></td>
              <td style="padding: var(--ux-space-sm);">Aumenta/reduce el zoom</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>setZoom(value)</code></td>
              <td style="padding: var(--ux-space-sm);">Establece zoom especifico</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>search()</code></td>
              <td style="padding: var(--ux-space-sm);">Busca texto en el documento</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><code>print() / download()</code></td>
              <td style="padding: var(--ux-space-sm);">Imprimir o descargar documento</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="demo-section">
      <h3>Eventos</h3>
      <p>Eventos emitidos por el componente.</p>
      <div class="demo-box">
        <ul style="margin: 0; padding-left: var(--ux-space-lg);">
          <li><code>pdf:loaded</code> - Documento cargado ({ totalPages })</li>
          <li><code>pdf:error</code> - Error al cargar ({ error })</li>
          <li><code>pdf:pagechange</code> - Cambio de pagina ({ page })</li>
          <li><code>pdf:pagerendered</code> - Pagina renderizada ({ page })</li>
          <li><code>pdf:search</code> - Busqueda completada ({ results })</li>
        </ul>
      </div>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">x-data</span>=<span class="string">"uxPdfViewer({ src: 'doc.pdf' })"</span>
     <span class="attr">@pdf:loaded</span>=<span class="string">"console.log('Paginas:', $event.detail.totalPages)"</span>
     <span class="attr">@pdf:pagechange</span>=<span class="string">"console.log('Pagina actual:', $event.detail.page)"</span><span class="tag">&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <section class="demo-section">
      <h3>Atajos de Teclado</h3>
      <p>El visor soporta navegacion por teclado.</p>
      <div class="demo-box">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
              <th style="padding: var(--ux-space-sm);">Tecla</th>
              <th style="padding: var(--ux-space-sm);">Accion</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>←</kbd> / <kbd>PageUp</kbd></td>
              <td style="padding: var(--ux-space-sm);">Pagina anterior</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>→</kbd> / <kbd>PageDown</kbd></td>
              <td style="padding: var(--ux-space-sm);">Pagina siguiente</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>Home</kbd> / <kbd>End</kbd></td>
              <td style="padding: var(--ux-space-sm);">Primera/ultima pagina</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>+</kbd> / <kbd>-</kbd></td>
              <td style="padding: var(--ux-space-sm);">Zoom in/out</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--ux-border-color);">
              <td style="padding: var(--ux-space-sm);"><kbd>Ctrl + F</kbd></td>
              <td style="padding: var(--ux-space-sm);">Buscar en documento</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>

  <script>
    // Configurar PDF.js worker
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }
  </script>
</body>
</html>
