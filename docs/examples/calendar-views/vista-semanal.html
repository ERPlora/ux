<div class="ux-calendar-view"
             x-data="uxCalendarView({
               view: 'week',
               startHour: 8,
               endHour: 20,
               events: [
                 {
                   id: 1,
                   title: 'Reunion de equipo',
                   start: new Date(new Date().setHours(9, 0, 0, 0)),
                   end: new Date(new Date().setHours(10, 30, 0, 0)),
                   color: 'primary'
                 },
                 {
                   id: 2,
                   title: 'Almuerzo',
                   start: new Date(new Date().setHours(13, 0, 0, 0)),
                   end: new Date(new Date().setHours(14, 0, 0, 0)),
                   color: 'success'
                 },
                 {
                   id: 3,
                   title: 'Llamada cliente',
                   start: new Date(new Date().setHours(15, 0, 0, 0)),
                   end: new Date(new Date().setHours(16, 0, 0, 0)),
                   color: 'warning'
                 }
               ]
             })">
          <!-- Header -->
          <div class="ux-calendar-view__header">
            <div class="ux-calendar-view__nav">
              <button class="ux-calendar-view__nav-btn" @click="prev()">
                <span x-html="icons.chevronLeft"></span>
              </button>
              <button class="ux-calendar-view__nav-btn" @click="next()">
                <span x-html="icons.chevronRight"></span>
              </button>
              <span class="ux-calendar-view__title" x-text="title"></span>
            </div>
            <button class="ux-calendar-view__today-btn" @click="goToToday()">Hoy</button>
            <div class="ux-calendar-view__view-toggle">
              <button class="ux-calendar-view__view-btn"
                      :class="{ 'ux-calendar-view__view-btn--active': view === 'week' }"
                      @click="setView('week')">Semana</button>
              <button class="ux-calendar-view__view-btn"
                      :class="{ 'ux-calendar-view__view-btn--active': view === 'day' }"
                      @click="setView('day')">Dia</button>
            </div>
          </div>

          <!-- Week View Content -->
          <template x-if="view === 'week'">
            <div>
              <!-- Day Headers -->
              <div class="ux-calendar-view__day-headers">
                <div class="ux-calendar-view__corner"></div>
                <template x-for="day in weekDays" :key="day.date.toISOString()">
                  <div class="ux-calendar-view__day-header"
                       :class="{ 'ux-calendar-view__day-header--today': day.isToday }"
                       @click="selectDay(day.date)">
                    <span class="ux-calendar-view__day-name" x-text="day.name"></span>
                    <span class="ux-calendar-view__day-number" x-text="day.number"></span>
                  </div>
                </template>
              </div>

              <!-- Time Grid -->
              <div class="ux-calendar-view__grid">
                <!-- Time Labels -->
                <div class="ux-calendar-view__times">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-calendar-view__time" x-text="hour.label"></div>
                  </template>
                </div>

                <!-- Day Columns -->
                <template x-for="day in weekDays" :key="'col-' + day.date.toISOString()">
                  <div class="ux-calendar-view__day-column">
                    <!-- Hour slots -->
                    <template x-for="hour in hours" :key="hour.value">
                      <div class="ux-calendar-view__hour-slot"></div>
                    </template>

                    <!-- Now line -->
                    <div class="ux-calendar-view__now-line"
                         x-show="shouldShowNowLine(day.date)"
                         :style="{ top: nowLineTop + 'px' }"></div>

                    <!-- Events -->
                    <template x-for="event in getEventsForDay(day.date)" :key="event.id">
                      <div class="ux-calendar-view__event"
                           :class="'ux-calendar-view__event--' + (event.color || 'primary')"
                           :style="getEventStyle(event)"
                           @click="onEventClick(event)">
                        <div class="ux-calendar-view__event-title" x-text="event.title"></div>
                        <div class="ux-calendar-view__event-time" x-text="formatTime(event.start) + ' - ' + formatTime(event.end)"></div>
                      </div>
                    </template>
                  </div>
                </template>
              </div>
            </div>
          </template>

          <!-- Day View Content -->
          <template x-if="view === 'day'">
            <div>
              <div class="ux-calendar-view__day-headers ux-calendar-view__day-headers--single">
                <div class="ux-calendar-view__corner"></div>
                <div class="ux-calendar-view__day-header"
                     :class="{ 'ux-calendar-view__day-header--today': isToday(currentDate) }">
                  <span class="ux-calendar-view__day-name" x-text="dayNamesLong[currentDate.getDay()]"></span>
                  <span class="ux-calendar-view__day-number" x-text="currentDate.getDate()"></span>
                </div>
              </div>

              <div class="ux-calendar-view__grid ux-calendar-view__grid--single">
                <div class="ux-calendar-view__times">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-calendar-view__time" x-text="hour.label"></div>
                  </template>
                </div>

                <div class="ux-calendar-view__day-column">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-calendar-view__hour-slot"></div>
                  </template>

                  <div class="ux-calendar-view__now-line"
                       x-show="isToday(currentDate)"
                       :style="{ top: nowLineTop + 'px' }"></div>

                  <template x-for="event in getEventsForDay(currentDate)" :key="event.id">
                    <div class="ux-calendar-view__event"
                         :class="'ux-calendar-view__event--' + (event.color || 'primary')"
                         :style="getEventStyle(event)"
                         @click="onEventClick(event)">
                      <div class="ux-calendar-view__event-title" x-text="event.title"></div>
                      <div class="ux-calendar-view__event-time" x-text="formatTime(event.start) + ' - ' + formatTime(event.end)"></div>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </template>
        </div>
