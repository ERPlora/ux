<!-- Template Django -->
<form x-data="{
    signatureData: null,
    updateSignature(data) {
      this.signatureData = data;
      this.$refs.signatureInput.value = data;
    }
  }"
  hx-post="{% url 'save_signature' %}"
  hx-target="#result"
  hx-swap="innerHTML">

  {% csrf_token %}
  <input type="hidden"
         name="signature"
         x-ref="signatureInput">

  <div x-data="uxSignaturePad()"
       @signature:change="updateSignature(hasSignature ? getSignature() : null)"
       class="ux-signature-pad"
       :class="{ 'ux-signature-pad--has-signature': hasSignature }">

    <label class="ux-signature-pad__label">Firma del cliente</label>

    <div class="ux-signature-pad__container">
      <canvas x-ref="canvas" class="ux-signature-pad__canvas"></canvas>
      <div class="ux-signature-pad__guide"></div>
      <div class="ux-signature-pad__placeholder" x-show="!hasSignature">
        <span x-html="icons.pen"></span>
        <span>Firme aqu√≠</span>
      </div>
    </div>

    <div class="ux-signature-pad__actions">
      <button type="button" class="ux-signature-pad__btn"
              @click="clear()" :disabled="!hasSignature">
        Limpiar
      </button>
    </div>
  </div>

  <button type="submit" class="ux-button ux-color-primary"
          :disabled="!signatureData">
    Guardar firma
  </button>

  <div id="result"></div>
</form>
