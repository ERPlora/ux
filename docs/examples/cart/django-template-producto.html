<!-- templates/products/product_detail.html -->
<div class="ux-product-card">
  <img src="{{ product.image.url }}" alt="{{ product.name }}">
  <h2>{{ product.name }}</h2>
  <p class="price">${{ product.price }}</p>

  <form hx-post="{% url 'add_to_cart' %}"
        hx-target="#cart-notification"
        hx-swap="innerHTML"
        hx-indicator="#add-spinner">
    {% csrf_token %}
    <input type="hidden" name="product_id" value="{{ product.id }}">

    <div class="quantity-selector">
      <button type="button" onclick="this.nextElementSibling.stepDown()">-</button>
      <input type="number" name="quantity" value="1" min="1" max="{{ product.stock }}">
      <button type="button" onclick="this.previousElementSibling.stepUp()">+</button>
    </div>

    <button type="submit" class="ux-button ux-color-primary ux-button--lg">
      <span class="ux-spinner ux-spinner--sm htmx-indicator" id="add-spinner"></span>
      Agregar al Carrito
    </button>
  </form>

  <div id="cart-notification"></div>
</div>

<!-- templates/cart/partials/add_success.html -->
<div class="ux-toast ux-toast--success" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 3000)">
  Producto agregado al carrito
</div>
<span id="cart-count" hx-swap-oob="true">{{ cart.total_items }}</span>
