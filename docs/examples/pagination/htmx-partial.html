<!-- products/_list.html -->
<ul class="ux-list">
  {% for product in page_obj %}
    <li class="ux-list__item">{{ product.name }}</li>
  {% endfor %}
</ul>

<div class="ux-pagination ux-pagination--bordered">
  <div class="ux-pagination__info">
    Showing {{ page_obj.start_index }} to {{ page_obj.end_index }} of {{ page_obj.paginator.count }} items
  </div>

  <div class="ux-pagination__controls">
    <button class="ux-pagination__btn ux-pagination__prev"
            hx-get="?page={{ page_obj.previous_page_number }}&per_page={{ per_page }}"
            hx-target="#product-list"
            hx-swap="innerHTML"
            {% if not page_obj.has_previous %}disabled{% endif %}>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
    </button>

    {% for num in page_obj.paginator.page_range %}
      {% if num == page_obj.number %}
        <button class="ux-pagination__btn ux-pagination__btn--active">{{ num }}</button>
      {% elif num == 1 or num == page_obj.paginator.num_pages or num|add:"-2" <= page_obj.number and num|add:"2" >= page_obj.number %}
        <button class="ux-pagination__btn"
                hx-get="?page={{ num }}&per_page={{ per_page }}"
                hx-target="#product-list"
                hx-swap="innerHTML">{{ num }}</button>
      {% elif num == 2 or num == page_obj.paginator.num_pages|add:"-1" %}
        <span class="ux-pagination__ellipsis">...</span>
      {% endif %}
    {% endfor %}

    <button class="ux-pagination__btn ux-pagination__next"
            hx-get="?page={{ page_obj.next_page_number }}&per_page={{ per_page }}"
            hx-target="#product-list"
            hx-swap="innerHTML"
            {% if not page_obj.has_next %}disabled{% endif %}>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
    </button>
  </div>

  <div class="ux-pagination__per-page">
    <span>Show</span>
    <select hx-get="" hx-target="#product-list" hx-swap="innerHTML" name="per_page"
            hx-vals='{"page": "1"}'>
      <option value="10" {% if per_page == 10 %}selected{% endif %}>10</option>
      <option value="25" {% if per_page == 25 %}selected{% endif %}>25</option>
      <option value="50" {% if per_page == 50 %}selected{% endif %}>50</option>
      <option value="100" {% if per_page == 100 %}selected{% endif %}>100</option>
    </select>
    <span>per page</span>
  </div>
</div>
