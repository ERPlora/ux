<div class="demo-box" style="height: 500px;" x-data="uxGantt({
  tasks: [
    {
      id: 'phase-1',
      name: 'Phase 1: Planning',
      type: 'group',
      start: '2025-01-06',
      end: '2025-01-17',
      children: [
        {
          id: 'task-1',
          name: 'Requirements Gathering',
          start: '2025-01-06',
          end: '2025-01-10',
          progress: 100,
          status: 'completed',
          category: 'management'
        },
        {
          id: 'task-2',
          name: 'Technical Specification',
          start: '2025-01-13',
          end: '2025-01-17',
          progress: 100,
          status: 'completed',
          category: 'development',
          dependencies: ['task-1']
        }
      ]
    },
    {
      id: 'phase-2',
      name: 'Phase 2: Design',
      type: 'group',
      start: '2025-01-20',
      end: '2025-01-31',
      children: [
        {
          id: 'task-3',
          name: 'UI/UX Design',
          start: '2025-01-20',
          end: '2025-01-24',
          progress: 100,
          status: 'completed',
          category: 'design',
          dependencies: ['task-2']
        },
        {
          id: 'task-4',
          name: 'Design Review',
          start: '2025-01-27',
          end: '2025-01-28',
          progress: 80,
          status: 'in-progress',
          category: 'design',
          dependencies: ['task-3']
        },
        {
          id: 'milestone-1',
          name: 'Design Sign-off',
          type: 'milestone',
          date: '2025-01-31',
          dependencies: ['task-4']
        }
      ]
    },
    {
      id: 'phase-3',
      name: 'Phase 3: Development',
      type: 'group',
      start: '2025-02-03',
      end: '2025-02-28',
      children: [
        {
          id: 'task-5',
          name: 'Frontend Development',
          start: '2025-02-03',
          end: '2025-02-14',
          progress: 20,
          status: 'in-progress',
          category: 'development',
          dependencies: ['milestone-1']
        },
        {
          id: 'task-6',
          name: 'Backend Development',
          start: '2025-02-03',
          end: '2025-02-21',
          progress: 10,
          status: 'in-progress',
          category: 'development',
          dependencies: ['milestone-1']
        },
        {
          id: 'task-7',
          name: 'Integration Testing',
          start: '2025-02-17',
          end: '2025-02-28',
          progress: 0,
          status: 'not-started',
          category: 'testing',
          dependencies: ['task-5', 'task-6']
        }
      ]
    },
    {
      id: 'milestone-launch',
      name: 'Product Launch',
      type: 'milestone',
      date: '2025-03-03',
      dependencies: ['task-7']
    }
  ],
  zoom: 'week',
  expandedGroups: ['phase-1', 'phase-2', 'phase-3']
})">
  <div class="ux-gantt">
    <!-- Toolbar -->
    <div class="ux-gantt__toolbar">
      <div class="ux-gantt__toolbar-start">
        <h4 class="ux-gantt__title">Product Development</h4>
      </div>
      <div class="ux-gantt__toolbar-end">
        <button class="ux-gantt__today-btn" @click="scrollToToday()">Today</button>
        <div class="ux-gantt__zoom-controls">
          <button class="ux-gantt__zoom-btn"
                  :class="{'ux-gantt__zoom-btn--active': zoom === 'day'}"
                  @click="setZoom('day')">Day</button>
          <button class="ux-gantt__zoom-btn"
                  :class="{'ux-gantt__zoom-btn--active': zoom === 'week'}"
                  @click="setZoom('week')">Week</button>
          <button class="ux-gantt__zoom-btn"
                  :class="{'ux-gantt__zoom-btn--active': zoom === 'month'}"
                  @click="setZoom('month')">Month</button>
        </div>
      </div>
    </div>

    <!-- Body -->
    <div class="ux-gantt__body" style="height: 400px;">
      <!-- Tasks Panel -->
      <div class="ux-gantt__tasks" :style="{width: taskPanelWidth + 'px'}">
        <div class="ux-gantt__tasks-header">Tasks</div>
        <div class="ux-gantt__tasks-body" x-ref="tasksBody">
          <template x-for="task in flattenedTasks" :key="task.id">
            <div class="ux-gantt__task-row"
                 :class="{
                   'ux-gantt__task-row--selected': selectedTask === task.id,
                   'ux-gantt__task-row--group': task.type === 'group'
                 }"
                 @click="selectTask(task)">
              <div class="ux-gantt__task-indent" :style="{width: (task._level * 20) + 'px'}"></div>
              <template x-if="task._hasChildren">
                <button class="ux-gantt__task-expand"
                        :class="{'ux-gantt__task-expand--expanded': expandedGroups.has(task.id)}"
                        @click.stop="toggleGroup(task.id)">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                </button>
              </template>
              <span class="ux-gantt__task-name" x-text="task.name"></span>
              <template x-if="task.type === 'milestone'">
                <span class="ux-badge ux-badge--sm ux-color-warning--soft">Milestone</span>
              </template>
            </div>
          </template>
        </div>
      </div>

      <!-- Resizer -->
      <div class="ux-gantt__resizer"
           :class="{'ux-gantt__resizer--active': isResizing}"
           :style="{left: taskPanelWidth + 'px'}"
           @mousedown="startResize($event)"></div>

      <!-- Chart Area -->
      <div class="ux-gantt__chart">
        <div class="ux-gantt__chart-scroll" x-ref="chartScroll">
          <div class="ux-gantt__chart-inner" :style="{width: chartWidth + 'px'}">
            <!-- Header -->
            <div class="ux-gantt__header">
              <div class="ux-gantt__header-row ux-gantt__header-row--primary">
                <template x-for="(date, index) in timelineDates" :key="'primary-' + index">
                  <div class="ux-gantt__header-cell ux-gantt__header-cell--primary"
                       :style="{width: cellWidth + 'px'}"
                       x-text="formatHeaderDate(date, true)"></div>
                </template>
              </div>
              <div class="ux-gantt__header-row">
                <template x-for="(date, index) in timelineDates" :key="'secondary-' + index">
                  <div class="ux-gantt__header-cell"
                       :class="{
                         'ux-gantt__header-cell--today': isToday(date),
                         'ux-gantt__header-cell--weekend': zoom === 'day' && isWeekend(date)
                       }"
                       :style="{width: cellWidth + 'px'}"
                       x-text="formatHeaderDate(date, false)"></div>
                </template>
              </div>
            </div>

            <!-- Dependencies SVG -->
            <svg class="ux-gantt__dependencies" :style="{height: flattenedTasks.length * 40 + 'px'}">
              <template x-for="dep in getDependencyPaths()" :key="dep.path">
                <g>
                  <path class="ux-gantt__dependency" :d="dep.path"></path>
                  <polygon class="ux-gantt__dependency-arrow"
                           :points="`${dep.arrowX},${dep.arrowY} ${dep.arrowX-6},${dep.arrowY-3} ${dep.arrowX-6},${dep.arrowY+3}`"></polygon>
                </g>
              </template>
            </svg>

            <!-- Grid & Bars -->
            <div class="ux-gantt__bars">
              <template x-for="task in flattenedTasks" :key="'bar-' + task.id">
                <div class="ux-gantt__bar-row">
                  <template x-if="task.type === 'milestone'">
                    <div class="ux-gantt__milestone"
                         :class="{'ux-gantt__milestone--completed': task.status === 'completed'}"
                         :style="getBarStyle(task)"
                         @mouseenter="showTooltip(task, $event)"
                         @mouseleave="hideTooltip()"
                         @click="selectTask(task)"></div>
                  </template>
                  <template x-if="task.type !== 'milestone'">
                    <div :class="getBarClass(task)"
                         :style="getBarStyle(task)"
                         @mouseenter="showTooltip(task, $event)"
                         @mouseleave="hideTooltip()"
                         @click="selectTask(task)">
                      <template x-if="task.type !== 'group'">
                        <div class="ux-gantt__bar-progress"
                             :style="{width: (task.progress || 0) + '%'}"></div>
                      </template>
                      <template x-if="task.type !== 'group'">
                        <span class="ux-gantt__bar-label" x-text="task.name"></span>
                      </template>
                    </div>
                  </template>
                </div>
              </template>
            </div>

            <!-- Today Line -->
            <template x-if="showToday && todayPosition !== null">
              <div class="ux-gantt__today-line" :style="{left: todayPosition + 'px'}"></div>
            </template>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tooltip -->
  <div class="ux-gantt__tooltip"
       :class="{'ux-gantt__tooltip--visible': tooltip.visible}"
       :style="{left: tooltip.x + 'px', top: tooltip.y + 'px'}"
       x-show="tooltip.visible">
    <template x-if="tooltip.task">
      <div>
        <div class="ux-gantt__tooltip-title" x-text="tooltip.task.name"></div>
        <div class="ux-gantt__tooltip-dates">
          <template x-if="tooltip.task.type === 'milestone'">
            <span x-text="formatDate(tooltip.task.date)"></span>
          </template>
          <template x-if="tooltip.task.type !== 'milestone'">
            <span x-text="formatDate(tooltip.task.start) + ' - ' + formatDate(tooltip.task.end)"></span>
          </template>
        </div>
        <template x-if="tooltip.task.progress !== undefined">
          <div class="ux-gantt__tooltip-progress">
            <div class="ux-gantt__tooltip-progress-bar">
              <div class="ux-gantt__tooltip-progress-fill" :style="{width: tooltip.task.progress + '%'}"></div>
            </div>
            <span x-text="tooltip.task.progress + '%'"></span>
          </div>
        </template>
      </div>
    </template>
  </div>
</div>
