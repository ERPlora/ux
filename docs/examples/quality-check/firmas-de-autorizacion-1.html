<pre class="ux-code-block" data-lang="python"># views.py
import json
from django.http import HttpResponse
from django.views.decorators.http import require_POST

@require_POST
def save_inspection(request, inspection_id):
    data = json.loads(request.POST.get('data', '{}'))

    inspection = Inspection.objects.get(id=inspection_id)
    inspection.status = data.get('summary', {}).get('overallStatus')
    inspection.completed_at = data.get('completedAt')
    inspection.inspector_signature = data.get('inspectorSignature')
    inspection.save()

    # Save items
    for item_data in data.get('items', []):
        InspectionItem.objects.update_or_create(
            inspection=inspection,
            item_id=item_data['id'],
            defaults={
                'status': item_data['status'],
                'measurement_value': item_data.get('measurement', {}).get('value'),
                'notes': item_data.get('notes', ''),
                'defects': item_data.get('defects', [])
            }
        )

    return HttpResponse(
        '<div class="ux-alert ux-color-success">'
        'Inspeccion guardada correctamente</div>'
    )</pre>
