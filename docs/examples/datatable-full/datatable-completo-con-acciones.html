<!-- Toolbar -->
      <div class="ux-datatable-toolbar">
        <div class="ux-datatable-toolbar__start">
          <!-- Add New -->
          <button type="button" class="ux-button ux-color-primary" @click="openSheet('add')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
            <span>Nuevo</span>
          </button>

          <span class="ux-datatable-toolbar__divider"></span>

          <!-- Import/Export -->
          <button type="button" class="ux-icon-btn" title="Importar Excel" @click="openSheet('import')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
          </button>
          <button type="button" class="ux-icon-btn" title="Exportar Excel" @click="openSheet('export')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>

          <span class="ux-datatable-toolbar__divider"></span>

          <!-- Filters -->
          <button type="button" class="ux-icon-btn" :class="{ 'ux-icon-btn--active': hasActiveFilters }" title="Filtros" @click="openSheet('filters')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
            </svg>
          </button>
        </div>

        <div class="ux-datatable-toolbar__end">
          <!-- Search -->
          <div class="ux-searchbar" style="width: 250px;">
            <svg class="ux-searchbar__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            <input type="search" class="ux-searchbar__input" placeholder="Buscar usuarios..." x-model="searchQuery" @input.debounce.300ms="filterData()">
          </div>

          <!-- View Toggle -->
          <div class="ux-datatable__view-toggle">
            <button type="button" class="ux-datatable__view-toggle-btn" :class="{ 'ux-datatable__view-toggle-btn--active': viewMode === 'table' }" @click="viewMode = 'table'" title="Vista tabla">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18M3 12h18M3 18h18"/>
              </svg>
            </button>
            <button type="button" class="ux-datatable__view-toggle-btn" :class="{ 'ux-datatable__view-toggle-btn--active': viewMode === 'cards' }" @click="viewMode = 'cards'" title="Vista tarjetas">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7" rx="1"/>
                <rect x="14" y="3" width="7" height="7" rx="1"/>
                <rect x="3" y="14" width="7" height="7" rx="1"/>
                <rect x="14" y="14" width="7" height="7" rx="1"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Bulk Actions (shown when items selected) -->
      <div class="ux-datatable-bulk" x-show="selectedRows.length > 0" x-cloak>
        <span class="ux-datatable-bulk__count" x-text="selectedRows.length + ' seleccionados'"></span>
        <div class="ux-datatable-bulk__buttons">
          <button type="button" class="ux-button ux-button--sm ux-button--outline" @click="openSheet('bulkEdit')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
            Editar
          </button>
          <button type="button" class="ux-button ux-button--sm ux-button--outline ux-color-danger--outline" @click="openSheet('bulkDelete')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
            Eliminar
          </button>
          <button type="button" class="ux-icon-btn ux-icon-btn--sm" @click="selectedRows = []" title="Deseleccionar todo">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6 6 18M6 6l12 12"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Table Container with Scroll -->
      <div class="ux-datatable-container" x-show="viewMode === 'table'">
        <div class="ux-datatable__body">
          <table class="ux-datatable__table">
            <thead class="ux-datatable__thead">
              <tr>
                <th class="ux-datatable__th" style="width: 40px;">
                  <label class="ux-checkbox ux-checkbox--sm">
                    <input type="checkbox" @change="toggleSelectAll($event)" :checked="isAllSelected" :indeterminate.prop="isIndeterminate">
                    <span class="ux-checkbox__checkmark"></span>
                  </label>
                </th>
                <th class="ux-datatable__th ux-datatable__th--sortable" :class="{ 'ux-datatable__th--sorted': sortColumn === 'id' }" @click="sort('id')">
                  ID
                  <span class="ux-datatable__sort-icon">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12l7-7 7 7"/>
                    </svg>
                  </span>
                </th>
                <th class="ux-datatable__th ux-datatable__th--sortable" :class="{ 'ux-datatable__th--sorted': sortColumn === 'name' }" @click="sort('name')">
                  Nombre
                  <span class="ux-datatable__sort-icon">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12l7-7 7 7"/>
                    </svg>
                  </span>
                </th>
                <th class="ux-datatable__th">Email</th>
                <th class="ux-datatable__th">Rol</th>
                <th class="ux-datatable__th">Estado</th>
                <th class="ux-datatable__th" style="width: 120px; text-align: right;">Acciones</th>
              </tr>
            </thead>
            <tbody class="ux-datatable__tbody">
              <template x-for="row in paginatedData" :key="row.id">
                <tr class="ux-datatable__tr" :class="{ 'ux-datatable__tr--selected': selectedRows.includes(row.id) }">
                  <td class="ux-datatable__td" data-label="">
                    <label class="ux-checkbox ux-checkbox--sm">
                      <input type="checkbox" :value="row.id" x-model="selectedRows">
                      <span class="ux-checkbox__checkmark"></span>
                    </label>
                  </td>
                  <td class="ux-datatable__td" data-label="ID" x-text="row.id"></td>
                  <td class="ux-datatable__td" data-label="Nombre" x-text="row.name"></td>
                  <td class="ux-datatable__td" data-label="Email" x-text="row.email"></td>
                  <td class="ux-datatable__td" data-label="Rol" x-text="row.role"></td>
                  <td class="ux-datatable__td" data-label="Estado">
                    <span class="ux-status-badge" :class="row.status === 'Activo' ? 'ux-status-badge--active' : 'ux-status-badge--inactive'">
                      <span class="ux-status-badge__dot"></span>
                      <span x-text="row.status"></span>
                    </span>
                  </td>
                  <td class="ux-datatable__td" data-label="Acciones">
                    <div class="ux-datatable-actions">
                      <button type="button" class="ux-icon-btn ux-icon-btn--sm" title="Ver detalles" @click="openSheet('view', row)">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                          <circle cx="12" cy="12" r="3"/>
                        </svg>
                      </button>
                      <button type="button" class="ux-icon-btn ux-icon-btn--sm ux-icon-btn--primary" title="Editar" @click="openSheet('edit', row)">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                      </button>
                      <button type="button" class="ux-icon-btn ux-icon-btn--sm ux-icon-btn--danger" title="Eliminar" @click="openSheet('delete', row)">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="3 6 5 6 21 6"/>
                          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                          <line x1="10" y1="11" x2="10" y2="17"/>
                          <line x1="14" y1="11" x2="14" y2="17"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Cards View with Bootstrap Grid + Liquid Glass -->
      <div class="ux-datatable-cards" x-show="viewMode === 'cards'" x-cloak>
        <div class="row g-3 p-3">
          <template x-for="row in paginatedData" :key="row.id">
            <div class="col-12 col-sm-6 col-lg-3">
              <div class="ux-datatable-card ux-datatable-card--glass" :class="{ 'ux-datatable-card--selected': selectedRows.includes(row.id) }">
                <!-- Card Header: Toggle + Status -->
                <div class="ux-datatable-card__header">
                  <label class="ux-toggle ux-toggle--sm">
                    <input type="checkbox" :value="row.id" x-model="selectedRows" :aria-label="'Seleccionar ' + row.name">
                    <span class="ux-toggle__track">
                      <span class="ux-toggle__thumb"></span>
                    </span>
                  </label>
                  <span class="ux-status-badge" :class="row.status === 'Activo' ? 'ux-status-badge--active' : 'ux-status-badge--inactive'">
                    <span class="ux-status-badge__dot"></span>
                    <span x-text="row.status"></span>
                  </span>
                </div>

                <!-- Card Body: User Info -->
                <div class="ux-datatable-card__body">
                  <h4 class="ux-datatable-card__title" x-text="row.name"></h4>
                  <p class="ux-datatable-card__subtitle" x-text="'ID: ' + row.id + ' â€¢ ' + row.role"></p>

                  <div class="ux-datatable-card__meta">
                    <div class="ux-datatable-card__meta-item">
                      <span class="ux-datatable-card__meta-label">Email</span>
                      <span class="ux-datatable-card__meta-value" x-text="row.email"></span>
                    </div>
                    <div class="ux-datatable-card__meta-item">
                      <span class="ux-datatable-card__meta-label">Rol</span>
                      <span class="ux-datatable-card__meta-value" :class="row.role === 'Admin' ? 'ux-text-primary' : (row.role === 'Editor' ? 'ux-text-warning' : '')" x-text="row.role"></span>
                    </div>
                  </div>
                </div>

                <!-- Card Footer: Actions -->
                <div class="ux-datatable-card__footer">
                  <button type="button" class="ux-icon-btn ux-icon-btn--sm" title="Ver detalles" @click="openSheet('view', row)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>
                  </button>
                  <button type="button" class="ux-icon-btn ux-icon-btn--sm ux-icon-btn--primary" title="Editar" @click="openSheet('edit', row)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                      <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                  </button>
                  <button type="button" class="ux-icon-btn ux-icon-btn--sm ux-icon-btn--danger" title="Eliminar" @click="openSheet('delete', row)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="3 6 5 6 21 6"/>
                      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>

      <!-- Footer with Responsive Pagination -->
      <div class="ux-datatable-footer">
        <div class="ux-datatable-footer__info">
          Mostrando <span x-text="((currentPage - 1) * perPage) + 1"></span> a <span x-text="Math.min(currentPage * perPage, filteredData.length)"></span> de <span x-text="filteredData.length"></span>
        </div>
        <div class="ux-datatable-footer__per-page">
          <span>Mostrar</span>
          <div class="ux-select ux-select--sm" style="width: 75px;">
            <select x-model.number="perPage" @change="currentPage = 1">
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
            </select>
          </div>
        </div>
        <div class="ux-datatable-footer__pagination">
          <button class="ux-datatable-footer__page-btn" @click="currentPage = 1" :disabled="currentPage === 1" title="Primera">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 17l-5-5 5-5M18 17l-5-5 5-5"/>
            </svg>
          </button>
          <button class="ux-datatable-footer__page-btn" @click="currentPage--" :disabled="currentPage === 1" title="Anterior">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </button>
          <template x-for="page in visiblePages" :key="page">
            <button
              class="ux-datatable-footer__page-btn"
              :class="{
                'ux-datatable-footer__page-btn--active': page === currentPage,
                'ux-datatable-footer__page-btn--number': typeof page === 'number',
                'ux-datatable-footer__page-btn--ellipsis': page === '...'
              }"
              @click="typeof page === 'number' && (currentPage = page)"
              :disabled="page === '...'"
              x-text="page">
            </button>
          </template>
          <button class="ux-datatable-footer__page-btn" @click="currentPage++" :disabled="currentPage === totalPages" title="Siguiente">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </button>
          <button class="ux-datatable-footer__page-btn" @click="currentPage = totalPages" :disabled="currentPage === totalPages" title="Ultima">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 7l5 5-5 5M6 7l5 5-5 5"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- ================================================
           SIDE SHEETS (Right Panel)
      ================================================= -->

      <!-- Sheet Backdrop (no se usa para delete/bulkDelete, esos usan ux-alert) -->
      <div class="ux-sheet-backdrop" :class="{ 'ux-sheet-backdrop--open': sheetOpen && sheetType !== 'delete' && sheetType !== 'bulkDelete' }" @click="closeSheet()">
        <!-- Side Sheet Container with Responsive Columns -->
        <div class="ux-side-sheet-container ux-side-sheet-container--right">
          <div class="row">
            <div class="col-12 col-sm-10 col-md-8 col-lg-6">

        <!-- Add/Edit Form Sheet -->
        <div class="ux-side-sheet ux-side-sheet--grid" @click.stop x-show="sheetType === 'add' || sheetType === 'edit'" x-transition>
          <div class="ux-side-sheet__header">
            <h3 class="ux-side-sheet__title" x-text="sheetType === 'add' ? 'Nuevo Usuario' : 'Editar Usuario'"></h3>
            <button type="button" class="ux-side-sheet__close" @click="closeSheet()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="ux-side-sheet__content">
            <form class="ux-sheet-form" @submit.prevent="saveUser()">
              <div class="ux-form-group">
                <label class="ux-form-group__label ux-form-group__label--required">Nombre</label>
                <div class="ux-form-group__control">
                  <div class="ux-form-group__input-wrapper">
                    <input type="text" class="ux-input" x-model="formData.name" placeholder="Nombre completo" required>
                  </div>
                </div>
              </div>
              <div class="ux-form-group">
                <label class="ux-form-group__label ux-form-group__label--required">Email</label>
                <div class="ux-form-group__control">
                  <div class="ux-form-group__input-wrapper">
                    <input type="email" class="ux-input" x-model="formData.email" placeholder="correo@ejemplo.com" required>
                  </div>
                </div>
              </div>
              <div class="ux-form-group">
                <label class="ux-form-group__label">Rol</label>
                <div class="ux-form-group__control">
                  <div class="ux-native-select">
                    <select class="ux-native-select__field" x-model="formData.role">
                      <option value="">Seleccionar rol</option>
                      <option value="Admin">Admin</option>
                      <option value="Editor">Editor</option>
                      <option value="Usuario">Usuario</option>
                    </select>
                    <span class="ux-native-select__icon">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                    </span>
                  </div>
                </div>
              </div>
              <div class="ux-form-group">
                <label class="ux-form-group__label">Estado</label>
                <div class="ux-form-group__control">
                  <div class="ux-native-select">
                    <select class="ux-native-select__field" x-model="formData.status">
                      <option value="Activo">Activo</option>
                      <option value="Inactivo">Inactivo</option>
                    </select>
                    <span class="ux-native-select__icon">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                    </span>
                  </div>
                </div>
              </div>
              <div class="ux-sheet-form__actions">
                <button type="button" class="ux-button ux-button--outline" @click="closeSheet()">Cancelar</button>
                <button type="submit" class="ux-button ux-color-primary" x-text="sheetType === 'add' ? 'Crear Usuario' : 'Guardar Cambios'"></button>
              </div>
            </form>
          </div>
        </div>

        <!-- View Details Sheet -->
        <div class="ux-side-sheet ux-side-sheet--grid" @click.stop x-show="sheetType === 'view'" x-transition>
          <div class="ux-side-sheet__header">
            <h3 class="ux-side-sheet__title">Detalles del Usuario</h3>
            <button type="button" class="ux-side-sheet__close" @click="closeSheet()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="ux-side-sheet__content">
            <ul class="ux-list">
              <li class="ux-list__item">
                <span class="ux-list__label">ID</span>
                <span class="ux-list__value" x-text="currentRow?.id"></span>
              </li>
              <li class="ux-list__item">
                <span class="ux-list__label">Nombre</span>
                <span class="ux-list__value" x-text="currentRow?.name"></span>
              </li>
              <li class="ux-list__item">
                <span class="ux-list__label">Email</span>
                <span class="ux-list__value" x-text="currentRow?.email"></span>
              </li>
              <li class="ux-list__item">
                <span class="ux-list__label">Rol</span>
                <span class="ux-list__value" x-text="currentRow?.role"></span>
              </li>
              <li class="ux-list__item">
                <span class="ux-list__label">Estado</span>
                <span class="ux-status-badge" :class="currentRow?.status === 'Activo' ? 'ux-status-badge--active' : 'ux-status-badge--inactive'">
                  <span class="ux-status-badge__dot"></span>
                  <span x-text="currentRow?.status"></span>
                </span>
              </li>
            </ul>
            <div class="ux-sheet-form__actions">
              <button type="button" class="ux-button ux-button--outline" @click="closeSheet()">Cerrar</button>
              <button type="button" class="ux-button ux-color-primary" @click="openSheet('edit', currentRow)">Editar</button>
            </div>
          </div>
        </div>

        <!-- Bulk Edit Sheet -->
        <div class="ux-side-sheet ux-side-sheet--grid" @click.stop x-show="sheetType === 'bulkEdit'" x-transition>
          <div class="ux-side-sheet__header">
            <h3 class="ux-side-sheet__title">Editar <span x-text="selectedRows.length"></span> Usuarios</h3>
            <button type="button" class="ux-side-sheet__close" @click="closeSheet()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="ux-side-sheet__content">
            <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-lg);">Los cambios se aplicaran a todos los usuarios seleccionados. Deja en blanco los campos que no quieras modificar.</p>
            <form class="ux-sheet-form" @submit.prevent="bulkEdit()">
              <div class="ux-form-group">
                <label class="ux-form-group__label">Cambiar Rol</label>
                <div class="ux-form-group__control">
                  <div class="ux-native-select">
                    <select class="ux-native-select__field" x-model="bulkFormData.role">
                      <option value="">Sin cambios</option>
                      <option value="Admin">Admin</option>
                      <option value="Editor">Editor</option>
                      <option value="Usuario">Usuario</option>
                    </select>
                    <span class="ux-native-select__icon">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                    </span>
                  </div>
                </div>
              </div>
              <div class="ux-form-group">
                <label class="ux-form-group__label">Cambiar Estado</label>
                <div class="ux-form-group__control">
                  <div class="ux-native-select">
                    <select class="ux-native-select__field" x-model="bulkFormData.status">
                      <option value="">Sin cambios</option>
                      <option value="Activo">Activo</option>
                      <option value="Inactivo">Inactivo</option>
                    </select>
                    <span class="ux-native-select__icon">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                    </span>
                  </div>
                </div>
              </div>
              <div class="ux-sheet-form__actions">
                <button type="button" class="ux-button ux-button--outline" @click="closeSheet()">Cancelar</button>
                <button type="submit" class="ux-button ux-color-primary">Aplicar Cambios</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Filters Sheet -->
        <div class="ux-side-sheet ux-side-sheet--grid" @click.stop x-show="sheetType === 'filters'" x-transition>
          <div class="ux-side-sheet__header">
            <h3 class="ux-side-sheet__title">Filtros</h3>
            <button type="button" class="ux-side-sheet__close" @click="closeSheet()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="ux-side-sheet__content">
            <div class="ux-filter-panel">
              <div class="ux-filter-panel__section">
                <div class="ux-filter-panel__title">Rol</div>
                <label class="ux-checkbox">
                  <input type="checkbox" value="Admin" x-model="filters.roles">
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Admin</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" value="Editor" x-model="filters.roles">
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Editor</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" value="Usuario" x-model="filters.roles">
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Usuario</span>
                </label>
              </div>

              <div class="ux-filter-panel__section">
                <div class="ux-filter-panel__title">Estado</div>
                <label class="ux-checkbox">
                  <input type="checkbox" value="Activo" x-model="filters.statuses">
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Activo</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" value="Inactivo" x-model="filters.statuses">
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Inactivo</span>
                </label>
              </div>
            </div>
            <div class="ux-sheet-form__actions">
              <button type="button" class="ux-button ux-button--outline" @click="clearFilters()">Limpiar</button>
              <button type="button" class="ux-button ux-color-primary" @click="applyFilters()">Aplicar Filtros</button>
            </div>
          </div>
        </div>

        <!-- Import Sheet -->
        <div class="ux-side-sheet ux-side-sheet--grid" @click.stop x-show="sheetType === 'import'" x-transition>
          <div class="ux-side-sheet__header">
            <h3 class="ux-side-sheet__title">Importar desde Excel</h3>
            <button type="button" class="ux-side-sheet__close" @click="closeSheet()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="ux-side-sheet__content">
            <div style="border: 2px dashed var(--ux-border-color); border-radius: var(--ux-radius-lg); padding: var(--ux-space-2xl); text-align: center; margin-bottom: var(--ux-space-lg);">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--ux-text-tertiary)" stroke-width="1.5" style="margin-bottom: var(--ux-space-md);">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-sm);">Arrastra un archivo Excel aqui o</p>
              <button type="button" class="ux-button ux-button--outline">Seleccionar Archivo</button>
            </div>
            <p style="font-size: var(--ux-font-size-sm); color: var(--ux-text-tertiary);">Formatos soportados: .xlsx, .xls, .csv</p>
            <div class="ux-sheet-form__actions">
              <button type="button" class="ux-button ux-button--outline" @click="closeSheet()">Cancelar</button>
              <button type="button" class="ux-button ux-color-primary" disabled>Importar</button>
            </div>
          </div>
        </div>

        <!-- Export Sheet -->
        <div class="ux-side-sheet ux-side-sheet--grid" @click.stop x-show="sheetType === 'export'" x-transition>
          <div class="ux-side-sheet__header">
            <h3 class="ux-side-sheet__title">Exportar a Excel</h3>
            <button type="button" class="ux-side-sheet__close" @click="closeSheet()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="ux-side-sheet__content">
            <div class="ux-filter-panel">
              <div class="ux-filter-panel__section">
                <div class="ux-filter-panel__title">Formato</div>
                <label class="ux-radio">
                  <input type="radio" name="export-format" value="xlsx" checked>
                  <span class="ux-radio__checkmark"></span>
                  <span>Excel (.xlsx)</span>
                </label>
                <label class="ux-radio">
                  <input type="radio" name="export-format" value="csv">
                  <span class="ux-radio__checkmark"></span>
                  <span>CSV (.csv)</span>
                </label>
              </div>

              <div class="ux-filter-panel__section">
                <div class="ux-filter-panel__title">Datos a exportar</div>
                <label class="ux-radio">
                  <input type="radio" name="export-data" value="all" checked>
                  <span class="ux-radio__checkmark"></span>
                  <span>Todos los registros (<span x-text="data.length"></span>)</span>
                </label>
                <label class="ux-radio">
                  <input type="radio" name="export-data" value="filtered">
                  <span class="ux-radio__checkmark"></span>
                  <span>Solo filtrados (<span x-text="filteredData.length"></span>)</span>
                </label>
                <label class="ux-radio" x-show="selectedRows.length > 0">
                  <input type="radio" name="export-data" value="selected">
                  <span class="ux-radio__checkmark"></span>
                  <span>Solo seleccionados (<span x-text="selectedRows.length"></span>)</span>
                </label>
              </div>

              <div class="ux-filter-panel__section">
                <div class="ux-filter-panel__title">Columnas</div>
                <label class="ux-checkbox">
                  <input type="checkbox" checked>
                  <span class="ux-checkbox__checkmark"></span>
                  <span>ID</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" checked>
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Nombre</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" checked>
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Email</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" checked>
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Rol</span>
                </label>
                <label class="ux-checkbox">
                  <input type="checkbox" checked>
                  <span class="ux-checkbox__checkmark"></span>
                  <span>Estado</span>
                </label>
              </div>
            </div>
            <div class="ux-sheet-form__actions">
              <button type="button" class="ux-button ux-button--outline" @click="closeSheet()">Cancelar</button>
              <button type="button" class="ux-button ux-color-primary" @click="exportData()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                  <polyline points="7 10 12 15 17 10"/>
                  <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Exportar
              </button>
            </div>
          </div>
        </div>

            </div><!-- /col -->
          </div><!-- /row -->
        </div><!-- /ux-side-sheet-container -->
      </div><!-- /ux-sheet-backdrop -->

      <!-- ================================================
           DELETE ALERTS (usando ux-alert en vez de sheet)
      ================================================= -->

      <!-- Single Delete Alert -->
      <div class="ux-alert-backdrop" :class="{ 'ux-alert-backdrop--open': sheetType === 'delete' }" @click.self="closeSheet()">
        <div class="ux-alert">
          <div class="ux-alert__content">
            <h2 class="ux-alert__title">Eliminar Usuario</h2>
            <p class="ux-alert__message">Esta accion no se puede deshacer. El usuario <strong x-text="currentRow?.name"></strong> sera eliminado permanentemente.</p>
          </div>
          <div class="ux-alert__buttons">
            <button class="ux-alert__button ux-alert__button--cancel" @click="closeSheet()">Cancelar</button>
            <button class="ux-alert__button ux-alert__button--destructive" @click="deleteUser()">Eliminar</button>
          </div>
        </div>
      </div>

      <!-- Bulk Delete Alert -->
      <div class="ux-alert-backdrop" :class="{ 'ux-alert-backdrop--open': sheetType === 'bulkDelete' }" @click.self="closeSheet()">
        <div class="ux-alert">
          <div class="ux-alert__content">
            <h2 class="ux-alert__title">Eliminar <span x-text="selectedRows.length"></span> Usuarios</h2>
            <p class="ux-alert__message">Esta accion no se puede deshacer. Los usuarios seleccionados seran eliminados permanentemente.</p>
          </div>
          <div class="ux-alert__buttons">
            <button class="ux-alert__button ux-alert__button--cancel" @click="closeSheet()">Cancelar</button>
            <button class="ux-alert__button ux-alert__button--destructive" @click="bulkDelete()">Eliminar Todos</button>
          </div>
        </div>
      </div>
