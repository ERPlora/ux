<div x-data="uxTagInput({
  placeholder: 'Buscar categorias...',
  allowCreate: true
})" class="ux-tag-input-wrapper">
  <label>Categorias</label>
  <div class="ux-tag-input" @click="focus()">
    <template x-for="(tag, index) in tags" :key="index">
      <span class="ux-tag">
        <span class="ux-tag__text" x-text="getLabel(tag)"></span>
        <button type="button" class="ux-tag__remove" @click.stop="removeTag(index)">&times;</button>
      </span>
    </template>
    <input type="text"
           class="ux-tag-input__field"
           x-ref="input"
           x-model="inputValue"
           name="categories"
           hx-get="{% url 'tag_suggestions' %}"
           hx-trigger="input changed delay:300ms"
           hx-target="#tag-suggestions"
           :placeholder="tags.length === 0 ? placeholder : ''"
           @keydown="onKeydown($event)">
  </div>

  <!-- Sugerencias cargadas via HTMX -->
  <div id="tag-suggestions" class="ux-tag-input__suggestions">
    <!-- Django renderiza aqui las sugerencias -->
  </div>

  <!-- Hidden inputs para enviar tags seleccionados -->
  <template x-for="tag in tags" :key="tag">
    <input type="hidden" name="selected_tags" :value="getValue(tag)">
  </template>
</div>
