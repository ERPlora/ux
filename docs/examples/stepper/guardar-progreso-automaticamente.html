@stepper:change.window="htmx.ajax('POST', '/api/wizard/save-progress', { values: { step: $event.detail.step } })">
        <div class="ux-stepper ux-stepper--compact">
          <div class="ux-stepper__header">
            <div class="ux-stepper__progress" :style="{ width: progressWidth }"></div>
            <template x-for="i in totalSteps" :key="i">
              <div class="ux-stepper__step" :class="getStepClasses(i-1)" @click="goTo(i-1)">
                <div class="ux-stepper__circle">
                  <template x-if="isCompleted(i-1)">
                    <svg class="ux-stepper__check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                      <polyline points="20 6 9 17 4 12"/>
                    </svg>
                  </template>
                  <template x-if="!isCompleted(i-1)"><span x-text="i"></span></template>
                </div>
              </div>
            </template>
          </div>

          <div style="text-align: center; padding: var(--ux-space-xl);">
            <p>Paso <span x-text="currentStep + 1"></span> de <span x-text="totalSteps"></span></p>
            <p style="color: var(--ux-text-secondary); font-size: var(--ux-font-size-sm); margin-top: var(--ux-space-sm);">
              El progreso se guarda automaticamente
            </p>
          </div>

          <div style="display: flex; justify-content: center; gap: var(--ux-space-sm);">
            <button class="ux-button ux-button--outline" @click="prev()" :disabled="isFirst">Anterior</button>
            <button class="ux-button ux-button ux-color-primary" @click="complete(currentStep); next()" :disabled="isLast">Siguiente</button>
          </div>
        </div>
