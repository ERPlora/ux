<!-- Dropdown de cambio de estado -->
<div class="ux-dropdown" x-data="{ ...uxDropdown(), status: '{{ item.status }}' }" :class="containerClasses">
  <button class="ux-button ux-button--sm ux-dropdown__trigger"
          :class="{
            'ux-color-success': status === 'active',
            'ux-color-warning': status === 'pending',
            'ux-color-danger': status === 'inactive'
          }"
          @click="toggle()" x-bind="triggerAttrs">
    <span x-text="status === 'active' ? 'Activo' : status === 'pending' ? 'Pendiente' : 'Inactivo'"></span>
    <span class="ux-dropdown__caret"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
  </button>

  <div class="ux-dropdown__menu" role="menu">
    <button class="ux-dropdown__item"
            :class="{ 'ux-dropdown__item--selected': status === 'active' }"
            hx-patch="/items/{{ item.id }}/status/"
            hx-vals='{"status": "active"}'
            hx-swap="none"
            @htmx:after-request="status = 'active'; close()">
      <span class="ux-dropdown__item-text">Activo</span>
      <span class="ux-dropdown__item-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
    </button>

    <button class="ux-dropdown__item"
            :class="{ 'ux-dropdown__item--selected': status === 'pending' }"
            hx-patch="/items/{{ item.id }}/status/"
            hx-vals='{"status": "pending"}'
            hx-swap="none"
            @htmx:after-request="status = 'pending'; close()">
      <span class="ux-dropdown__item-text">Pendiente</span>
      <span class="ux-dropdown__item-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
    </button>

    <button class="ux-dropdown__item"
            :class="{ 'ux-dropdown__item--selected': status === 'inactive' }"
            hx-patch="/items/{{ item.id }}/status/"
            hx-vals='{"status": "inactive"}'
            hx-swap="none"
            @htmx:after-request="status = 'inactive'; close()">
      <span class="ux-dropdown__item-text">Inactivo</span>
      <span class="ux-dropdown__item-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
    </button>
  </div>
</div>
