<!-- Progreso con Server-Sent Events -->
<div id="upload-progress"
     hx-ext="sse"
     sse-connect="/api/upload/{{ upload_id }}/stream/"
     sse-swap="progress">
  {% include "components/progress_circle.html" with progress_value=0 label="Subiendo..." %}
</div>

<!-- Vista Django con StreamingHttpResponse -->
<!-- views.py -->
def upload_stream(request, upload_id):
    def event_stream():
        upload = Upload.objects.get(id=upload_id)
        while upload.progress < 100:
            upload.refresh_from_db()
            html = render_to_string('components/progress_circle.html', {
                'progress_value': upload.progress,
                'label': f'{upload.progress}% completado'
            })
            yield f"event: progress\ndata: {html}\n\n"
            time.sleep(0.5)
    return StreamingHttpResponse(event_stream(), content_type='text/event-stream')