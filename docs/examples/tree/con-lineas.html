<div x-data="uxTree({
  expanded: ['root', 'child1'],
  data: [
    { id: 'root', label: 'Raiz', children: [
      { id: 'child1', label: 'Hijo 1', children: [
        { id: 'gc1', label: 'Nieto 1' },
        { id: 'gc2', label: 'Nieto 2' }
      ]},
      { id: 'child2', label: 'Hijo 2' },
      { id: 'child3', label: 'Hijo 3' }
    ]}
  ]
})">
  <div class="ux-tree ux-tree--lines">
    <template x-for="node in data" :key="node.id">
      <div class="ux-tree__node">
        <div class="ux-tree__item" @click="toggle(node.id)">
          <span class="ux-tree__toggle"
                :class="{ 'ux-tree__toggle--expanded': expandedNodes.has(node.id), 'ux-tree__toggle--empty': !node.children }"
                x-html="icons.chevron"></span>
          <span class="ux-tree__label" x-text="node.label"></span>
        </div>
        <template x-if="node.children && expandedNodes.has(node.id)">
          <ul class="ux-tree__list ux-tree__list--nested">
            <template x-for="child in node.children" :key="child.id">
              <li class="ux-tree__node">
                <div class="ux-tree__item" @click="toggle(child.id)">
                  <span class="ux-tree__toggle"
                        :class="{ 'ux-tree__toggle--expanded': expandedNodes.has(child.id), 'ux-tree__toggle--empty': !child.children }"
                        x-html="icons.chevron"></span>
                  <span class="ux-tree__label" x-text="child.label"></span>
                </div>
                <template x-if="child.children && expandedNodes.has(child.id)">
                  <ul class="ux-tree__list ux-tree__list--nested">
                    <template x-for="gc in child.children" :key="gc.id">
                      <li class="ux-tree__node">
                        <div class="ux-tree__item">
                          <span class="ux-tree__toggle ux-tree__toggle--empty" x-html="icons.chevron"></span>
                          <span class="ux-tree__label" x-text="gc.label"></span>
                        </div>
                      </li>
                    </template>
                  </ul>
                </template>
              </li>
            </template>
          </ul>
        </template>
      </div>
    </template>
  </div>
</div>
