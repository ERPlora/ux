<div x-data="{
  query: '',
  focused: false,
  recentSearches: ['iPhone', 'MacBook', 'AirPods', 'Apple Watch']
}">
  <div class="ux-searchbar"
       :class="{
         'ux-searchbar--has-value': query.length > 0,
         'ux-searchbar--focused': focused
       }"
       style="position: relative;">
    <div class="ux-searchbar__container">
      <span class="ux-searchbar__icon">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
      </span>
      <input type="search" class="ux-searchbar__input" placeholder="Buscar..."
             x-model="query"
             @focus="focused = true"
             @blur="setTimeout(() => focused = false, 200)">
      <button class="ux-searchbar__clear" @click="query = ''" type="button">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Recent searches dropdown -->
    <div class="ux-searchbar__results" x-show="focused && query.length === 0 && recentSearches.length > 0" x-cloak>
      <div class="ux-searchbar__recent">
        <div class="ux-searchbar__recent-header">
          <span class="ux-searchbar__recent-title">Busquedas recientes</span>
          <button class="ux-searchbar__recent-clear" @click="recentSearches = []">Limpiar</button>
        </div>
        <template x-for="(term, index) in recentSearches" :key="index">
          <div class="ux-searchbar__recent-item" @click="query = term">
            <span class="ux-searchbar__recent-item-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </span>
            <span class="ux-searchbar__recent-item-text" x-text="term"></span>
            <button class="ux-searchbar__recent-item-remove" @click.stop="recentSearches.splice(index, 1)">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>
          </div>
        </template>
      </div>
    </div>
  </div>
</div>
