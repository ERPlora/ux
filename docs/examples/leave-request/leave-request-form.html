<div class="ux-leave-request-form"
             x-data="uxLeaveRequestForm({
               balance: { vacation: 15, sick: 10, personal: 3 }
             })"
             @leave-request:submit.window="alert('Leave request submitted: ' + JSON.stringify($event.detail))">
          <h3 class="ux-leave-request-form__title">Request Time Off</h3>
          <p class="ux-leave-request-form__subtitle">Select the type of leave and dates</p>

          <!-- Leave Balance -->
          <div class="ux-leave-request-form__balance">
            <span class="ux-leave-request-form__balance-label">Available Balance</span>
            <span class="ux-leave-request-form__balance-value"
                  :class="{ 'ux-leave-request-form__balance-value--low': isBalanceLow }"
                  x-text="currentBalance !== null ? currentBalance + ' days' : '--'"></span>
          </div>

          <!-- Leave Type Selection -->
          <div class="ux-leave-request-form__field">
            <span class="ux-leave-request-form__label ux-leave-request-form__label--required">Leave Type</span>
            <div class="ux-leave-request-form__types">
              <template x-for="type in leaveTypes" :key="type.id">
                <label class="ux-leave-request-form__type-option"
                       :class="{ 'ux-leave-request-form__type-option--selected': leaveType === type.id }"
                       @click="selectType(type.id)">
                  <input type="radio" name="leaveType" :value="type.id" x-model="leaveType">
                  <span class="ux-leave-request-form__type-icon">
                    <template x-if="type.icon === 'sun'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                    </template>
                    <template x-if="type.icon === 'medical'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    </template>
                    <template x-if="type.icon === 'user'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    </template>
                    <template x-if="type.icon === 'heart'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg>
                    </template>
                    <template x-if="type.icon === 'flower'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 2a4 4 0 014 4c0 1.95-1.4 3.58-3.25 3.93M12 2a4 4 0 00-4 4c0 1.95 1.4 3.58 3.25 3.93M12 22a4 4 0 01-4-4c0-1.95 1.4-3.58 3.25-3.93M12 22a4 4 0 004-4c0-1.95-1.4-3.58-3.25-3.93M2 12a4 4 0 014-4c1.95 0 3.58 1.4 3.93 3.25M2 12a4 4 0 004 4c1.95 0 3.58-1.4 3.93-3.25M22 12a4 4 0 00-4-4c-1.95 0-3.58 1.4-3.93 3.25M22 12a4 4 0 01-4 4c-1.95 0-3.58-1.4-3.93-3.25"/></svg>
                    </template>
                    <template x-if="type.icon === 'wallet'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 10H18a2 2 0 000 4h4"/></svg>
                    </template>
                    <template x-if="type.icon === 'home'">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M9 22V12h6v10"/></svg>
                    </template>
                  </span>
                  <span class="ux-leave-request-form__type-name" x-text="type.name"></span>
                </label>
              </template>
            </div>
            <span class="ux-input__error" x-show="errors.leaveType" x-text="errors.leaveType"></span>
          </div>

          <!-- Date Range -->
          <div class="ux-leave-request-form__row">
            <div class="ux-leave-request-form__field">
              <label class="ux-leave-request-form__label ux-leave-request-form__label--required">Start Date</label>
              <input type="date" class="ux-input" x-model="startDate">
              <span class="ux-input__error" x-show="errors.startDate" x-text="errors.startDate"></span>
            </div>
            <div class="ux-leave-request-form__field">
              <label class="ux-leave-request-form__label ux-leave-request-form__label--required">End Date</label>
              <input type="date" class="ux-input" x-model="endDate">
              <span class="ux-input__error" x-show="errors.endDate" x-text="errors.endDate"></span>
            </div>
          </div>

          <!-- Duration Display -->
          <div class="ux-leave-request__duration" x-show="duration > 0">
            <span class="ux-leave-request__duration-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
            </span>
            <span class="ux-leave-request__duration-value" x-text="duration"></span>
            <span class="ux-leave-request__duration-label" x-text="duration === 1 ? 'working day' : 'working days'"></span>
          </div>

          <!-- Half Day Toggle -->
          <div class="ux-leave-request-form__field" x-show="duration === 1">
            <label class="ux-toggle">
              <input type="checkbox" x-model="isHalfDay">
              <span class="ux-toggle__track"></span>
              <span class="ux-toggle__label">Half day only</span>
            </label>
          </div>

          <!-- Reason -->
          <div class="ux-leave-request-form__field">
            <label class="ux-leave-request-form__label">Reason (optional)</label>
            <textarea class="ux-input" rows="3" placeholder="Add any notes for your manager..." x-model="reason"></textarea>
          </div>

          <!-- Actions -->
          <div class="ux-leave-request-form__actions">
            <button class="ux-button ux-button--outline" type="button" @click="cancel()">Cancel</button>
            <button class="ux-button ux-color-primary" type="button" @click="submit()" :disabled="!isValid || submitting">
              <span x-show="submitting" class="ux-spinner ux-spinner--sm"></span>
              <span x-text="submitting ? 'Submitting...' : 'Submit Request'"></span>
            </button>
          </div>
        </div>
