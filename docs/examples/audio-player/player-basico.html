<div x-data="uxAudioPlayer({
          src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
          title: 'SoundHelix Song 1',
          artist: 'T. Schurger',
          artwork: 'https://picsum.photos/200/200?random=1'
        })" class="ux-audio-player"
            role="region"
            :aria-label="ariaLabel"
            @keydown="handleKeydown($event)"
            tabindex="0">

          <!-- Track Info -->
          <div class="ux-audio-player__info">
            <div class="ux-audio-player__artwork">
              <template x-if="artwork">
                <img :src="artwork" :alt="title">
              </template>
              <template x-if="!artwork">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
                </svg>
              </template>
            </div>
            <div class="ux-audio-player__meta">
              <h4 class="ux-audio-player__title" x-text="title"></h4>
              <p class="ux-audio-player__artist" x-text="artist"></p>
            </div>
          </div>

          <!-- Error Message -->
          <template x-if="hasError">
            <div class="ux-audio-player__error">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
              </svg>
              <span x-text="errorMessage"></span>
            </div>
          </template>

          <!-- Progress Bar -->
          <div class="ux-audio-player__progress"
               @click="onProgressClick($event)"
               @mousedown="onProgressDrag($event)"
               @mousemove="$event.buttons === 1 && onProgressDrag($event)"
               @mouseup="onProgressDragEnd()"
               role="slider"
               aria-label="Seek"
               :aria-valuenow="Math.round(progress)"
               aria-valuemin="0"
               aria-valuemax="100">
            <div class="ux-audio-player__progress-track">
              <div class="ux-audio-player__progress-buffer" :style="{ width: buffered + '%' }"></div>
              <div class="ux-audio-player__progress-fill" :style="{ width: progress + '%' }"></div>
            </div>
            <div class="ux-audio-player__progress-thumb" :style="{ left: progress + '%' }"></div>
          </div>

          <!-- Time Display -->
          <div class="ux-audio-player__time">
            <span class="ux-audio-player__time-current" x-text="currentTimeFormatted"></span>
            <span class="ux-audio-player__time-duration" x-text="durationFormatted"></span>
          </div>

          <!-- Controls -->
          <div class="ux-audio-player__controls">
            <button class="ux-audio-player__btn ux-audio-player__btn--sm" @click="seekBackward(10)" aria-label="Retroceder 10 segundos">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"/>
              </svg>
            </button>

            <button class="ux-audio-player__btn ux-audio-player__btn--play"
                    :class="{ 'ux-audio-player--loading': isLoading }"
                    @click="toggle()"
                    :aria-label="isPlaying ? 'Pausar' : 'Reproducir'">
              <template x-if="!isPlaying">
                <svg fill="currentColor" viewBox="0 0 24 24">
                  <path d="M8 5v14l11-7z"/>
                </svg>
              </template>
              <template x-if="isPlaying">
                <svg fill="currentColor" viewBox="0 0 24 24">
                  <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                </svg>
              </template>
            </button>

            <button class="ux-audio-player__btn ux-audio-player__btn--sm" @click="seekForward(10)" aria-label="Adelantar 10 segundos">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"/>
              </svg>
            </button>
          </div>

          <!-- Secondary Controls -->
          <div class="ux-audio-player__secondary">
            <!-- Volume -->
            <div class="ux-audio-player__volume">
              <button class="ux-audio-player__btn ux-audio-player__btn--sm" @click="toggleMute()" :aria-label="isMuted ? 'Activar sonido' : 'Silenciar'">
                <template x-if="isMuted || volume === 0">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"/>
                  </svg>
                </template>
                <template x-if="!isMuted && volume > 0 && volume < 0.5">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                  </svg>
                </template>
                <template x-if="!isMuted && volume >= 0.5">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                  </svg>
                </template>
              </button>
              <div class="ux-audio-player__volume-slider">
                <div class="ux-audio-player__volume-fill" :style="{ width: volumePercent + '%' }"></div>
                <input type="range"
                       class="ux-audio-player__volume-input"
                       min="0"
                       max="1"
                       step="0.01"
                       :value="isMuted ? 0 : volume"
                       @input="onVolumeInput($event)"
                       aria-label="Volumen">
              </div>
            </div>

            <!-- Speed -->
            <div class="ux-audio-player__speed">
              <button class="ux-audio-player__speed-btn" @click="cyclePlaybackRate()" x-text="playbackRate + 'x'" aria-label="Velocidad de reproduccion"></button>
            </div>
          </div>
        </div>
