<!-- Rendered by Django view -->
<div class="ux-mega-menu__grid ux-mega-menu__grid--3">
  {% for category in categories %}
  <div class="ux-mega-menu__section">
    <h3 class="ux-mega-menu__section-title">{{ category.name }}</h3>
    <ul class="ux-mega-menu__section-list">
      {% for product in category.products.all|slice:":5" %}
      <li>
        <a href="{% url 'product_detail' product.slug %}" class="ux-mega-menu__item">
          {% if product.icon %}
          <svg class="ux-mega-menu__item-icon">
            <use href="#icon-{{ product.icon }}"></use>
          </svg>
          {% endif %}
          <div class="ux-mega-menu__item-content">
            <p class="ux-mega-menu__item-title">{{ product.name }}</p>
            <p class="ux-mega-menu__item-desc">{{ product.short_description }}</p>
          </div>
          {% if product.is_new %}
          <span class="ux-mega-menu__item-badge">New</span>
          {% endif %}
        </a>
      </li>
      {% endfor %}
    </ul>
    {% if category.products.count > 5 %}
    <a href="{% url 'category_detail' category.slug %}" class="ux-mega-menu__section-link">
      View all {{ category.name }}
    </a>
    {% endif %}
  </div>
  {% endfor %}
</div>
