<!-- Command Palette con busqueda Django -->
<div x-data="uxCommand({ placeholder: 'Buscar comandos, paginas, usuarios...' })">
  <button class="ux-button ux-button--outline" @click="open()">
    Buscar... <span class="shortcut-hint"><span class="shortcut-key">Cmd</span><span class="shortcut-key">K</span></span>
  </button>

  <div class="ux-command-backdrop" :class="{ 'ux-command-backdrop--open': isOpen }" @click="close()"></div>

  <div class="ux-command" :class="{ 'ux-command--open': isOpen }">
    <div class="ux-command__search">
      <span class="ux-command__search-icon" x-html="icons.search"></span>
      <input type="text"
             class="ux-command__input"
             name="q"
             :placeholder="placeholder"
             x-model="query"
             hx-get="{% url 'command_search' %}"
             hx-trigger="keyup changed delay:300ms"
             hx-target="#command-results"
             hx-indicator=".ux-command__loading"
             autocomplete="off">
      <div class="ux-command__loading htmx-indicator">
        <div class="ux-command__loading-spinner"></div>
      </div>
    </div>

    <div id="command-results" class="ux-command__results">
      <!-- Resultados iniciales o recientes -->
      {% include 'partials/command_results.html' with results=recent_commands %}
    </div>

    <div class="ux-command__footer">
      <div class="ux-command__footer-hints">
        <span class="ux-command__footer-hint">
          <span class="ux-command__key">↑↓</span> Navegar
        </span>
        <span class="ux-command__footer-hint">
          <span class="ux-command__key">↵</span> Seleccionar
        </span>
      </div>
    </div>
  </div>
</div>
