<!-- templates/components/textarea_autosave.html -->
<div class="ux-textarea"
     x-data="{ saving: false, saved: false }">
  <label class="ux-textarea__label">Contenido del articulo</label>
  <textarea class="ux-textarea__field"
            name="content"
            hx-post="{% url 'save_draft' article.id %}"
            hx-trigger="keyup changed delay:1000ms"
            hx-swap="none"
            hx-indicator=".save-indicator"
            @htmx:before-request="saving = true; saved = false"
            @htmx:after-request="saving = false; saved = true"
            placeholder="Escribe tu articulo...">{{ article.content }}</textarea>
  <div class="ux-textarea__footer">
    <span class="ux-textarea__helper">
      <span x-show="saving" class="save-indicator">Guardando...</span>
      <span x-show="saved && !saving">Borrador guardado</span>
    </span>
  </div>
</div>
