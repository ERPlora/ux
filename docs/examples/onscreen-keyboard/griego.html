x-data="{
           ...uxOnscreenKeyboard({
             languages: ['es', 'en'],
             defaultLanguage: 'es',
             targetSelector: '#pos-search'
           }),
           searchResults: [],
           doSearch() {
             const input = document.getElementById('pos-search');
             if (input.value.trim()) {
               this.searchResults.unshift(input.value);
               input.value = '';
             }
           }
         }">
      <div class="row g-3">
        <div class="col-md-8">
          <label style="font-weight: 600; margin-bottom: 0.5rem; display: block;">Buscar producto</label>
          <div style="display: flex; gap: 0.75rem; align-items: center;">
            <input type="text"
                   id="pos-search"
                   class="keyboard-demo-input"
                   placeholder="Nombre o codigo de producto..."
                   @focus="open()"
                   @keydown.enter="doSearch()"
                   style="margin-bottom: 0; flex: 1;">
            <button class="keyboard-trigger-btn" @click="toggle()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="2" y="4" width="20" height="16" rx="2"/>
                <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M6 12h.01M10 12h.01M14 12h.01M18 12h.01M8 16h8"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="col-md-4">
          <label style="font-weight: 600; margin-bottom: 0.5rem; display: block;">Busquedas recientes</label>
          <div style="background: var(--ux-surface-secondary); border-radius: 12px; padding: 1rem; min-height: 120px;">
            <template x-for="(result, index) in searchResults.slice(0, 5)" :key="index">
              <div style="padding: 0.5rem; border-bottom: 1px solid var(--ux-border-color);" x-text="result"></div>
            </template>
            <div x-show="searchResults.length === 0" style="color: var(--ux-text-tertiary); text-align: center; padding: 1.5rem;">
              Presiona Enter para buscar
            </div>
          </div>
        </div>
      </div>

      <div class="ux-osk-sheet" :class="{ 'ux-osk-sheet--open': isOpen }">
        <div class="ux-osk-sheet__container">
          <div class="ux-osk-sheet__header">
            <div class="ux-osk-sheet__actions">
              <button class="ux-onscreen-keyboard__lang-btn"
                      @click="showLangPicker = !showLangPicker"
                      @mousedown.prevent>
                <span class="ux-onscreen-keyboard__lang-icon" x-html="icons.globe"></span>
                <span x-text="currentLanguage.toUpperCase()"></span>
              </button>
            </div>
            <span class="ux-osk-sheet__title" x-text="currentLayout?.name"></span>
            <div class="ux-osk-sheet__actions">
              <button class="ux-osk-sheet__btn"
                      @click="doSearch(); close()"
                      @mousedown.prevent>
                Buscar
              </button>
              <button class="ux-osk-sheet__btn ux-osk-sheet__btn--close"
                      @click="close()"
                      @mousedown.prevent
                      x-html="icons.close">
              </button>
            </div>
          </div>

          <div class="ux-onscreen-keyboard__lang-picker"
               x-show="showLangPicker"
               x-transition
               style="position: relative; top: 0; left: 0; right: 0; margin: 0; border-radius: 0; border-left: none; border-right: none;">
            <template x-for="lang in availableLayouts" :key="lang.code">
              <div class="ux-onscreen-keyboard__lang-option"
                   :class="{ 'active': lang.code === currentLanguage }"
                   @click="selectLanguage(lang.code)">
                <span x-text="lang.code.toUpperCase()"></span>
                <span x-text="lang.name"></span>
              </div>
            </template>
          </div>

          <div class="ux-osk-sheet__content">
            <div class="ux-onscreen-keyboard">
              <template x-for="(row, rowIndex) in currentRows" :key="rowIndex">
                <div class="ux-onscreen-keyboard__row">
                  <template x-for="(key, keyIndex) in row" :key="keyIndex">
                    <button :class="getKeyClass(key)"
                            @click="pressKey(key, $event)"
                            @mousedown.prevent>
                      <template x-if="isSpecialKey(key) && isSpecialKeyIcon(key)">
                        <span class="ux-onscreen-keyboard__key-icon" x-html="getSpecialKeyContent(key)"></span>
                      </template>
                      <template x-if="isSpecialKey(key) && !isSpecialKeyIcon(key)">
                        <span x-text="getSpecialKeyContent(key)"></span>
                      </template>
                      <template x-if="!isSpecialKey(key)">
                        <span x-text="displayKey(key)"></span>
                      </template>
                    </button>
                  </template>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
