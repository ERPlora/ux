<h4 style="margin-bottom: var(--ux-space-md);">Vista Django</h4>
      <pre class="ux-code-block" data-lang="python"># views.py
from django.shortcuts import render, get_object_or_404
from django.http import HttpResponse
from django.template.loader import render_to_string
from .models import Receipt, Company

def receipt_detail(request, pk):
    """Vista para mostrar un recibo individual."""
    receipt = get_object_or_404(Receipt, pk=pk)
    company = Company.objects.first()

    context = {
        'receipt': receipt,
        'company': company,
    }

    # Si es una peticion HTMX, devolver solo el fragmento
    if request.headers.get('HX-Request'):
        return render(request, 'receipts/partials/receipt_content.html', context)

    return render(request, 'receipts/receipt_detail.html', context)


def receipt_print(request, pk):
    """Vista para imprimir recibo (formato optimizado)."""
    receipt = get_object_or_404(Receipt, pk=pk)
    company = Company.objects.first()

    context = {
        'receipt': receipt,
        'company': company,
        'print_mode': True,
    }

    return render(request, 'receipts/receipt_print.html', context)


def receipt_list(request):
    """Lista de recibos con carga HTMX."""
    receipts = Receipt.objects.all()[:50]

    if request.headers.get('HX-Request'):
        return render(request, 'receipts/partials/receipt_list.html', {'receipts': receipts})

    return render(request, 'receipts/receipt_list.html', {'receipts': receipts})</pre>
