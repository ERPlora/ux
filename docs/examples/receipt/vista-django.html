<h4 style="margin-bottom: var(--ux-space-md);">Template Django con HTMX</h4>
      <pre class="ux-code-block" data-lang="html"><!-- templates/receipts/receipt_detail.html -->
{% extends 'base.html' %}

{% block content %}
<div class="demo-box">
  <div class="demo-controls">
    <button class="ux-button ux-button--outline ux-button--sm"
            hx-get="{% url 'receipt_print' receipt.pk %}"
            hx-target="#print-frame"
            hx-swap="innerHTML">
      Imprimir
    </button>
    <button class="ux-button ux-button--outline ux-button--sm"
            hx-get="{% url 'receipt_pdf' receipt.pk %}"
            hx-swap="none">
      Descargar PDF
    </button>
  </div>

  <div class="ux-receipt-preview">
    <div class="ux-receipt">
      <!-- Header -->
      <div class="ux-receipt__header">
        {% if company.logo %}
        <div class="ux-receipt__logo">
          <img src="{{ company.logo.url }}" alt="{{ company.name }}">
        </div>
        {% endif %}
        <div class="ux-receipt__company">{{ company.name }}</div>
        {% if company.address %}
        <div class="ux-receipt__address">{{ company.address }}</div>
        {% endif %}
        {% if company.phone %}
        <div class="ux-receipt__phone">{{ company.phone }}</div>
        {% endif %}
        {% if company.tax_id %}
        <div class="ux-receipt__tax-id">{{ company.tax_id }}</div>
        {% endif %}
      </div>

      <!-- Receipt Info -->
      <div class="ux-receipt__info">
        <div class="ux-receipt__info-item">
          <span class="ux-receipt__info-label">Ticket:</span>
          <span class="ux-receipt__info-value">{{ receipt.number }}</span>
        </div>
        <div class="ux-receipt__info-item">
          <span class="ux-receipt__info-label">Fecha:</span>
          <span class="ux-receipt__info-value">{{ receipt.date|date:"d/m/Y" }}</span>
        </div>
        <div class="ux-receipt__info-item">
          <span class="ux-receipt__info-label">Hora:</span>
          <span class="ux-receipt__info-value">{{ receipt.time|time:"H:i" }}</span>
        </div>
        {% if receipt.cashier %}
        <div class="ux-receipt__info-item">
          <span class="ux-receipt__info-label">Cajero:</span>
          <span class="ux-receipt__info-value">{{ receipt.cashier.first_name }}</span>
        </div>
        {% endif %}
      </div>

      <!-- Items -->
      <div class="ux-receipt__items">
        <div class="ux-receipt__items-header">
          <span>Producto</span>
          <span>Importe</span>
        </div>
        {% for item in receipt.items.all %}
        <div class="ux-receipt__item">
          <span class="ux-receipt__item-name">{{ item.name }}</span>
          <span class="ux-receipt__item-qty">{{ item.quantity }}x</span>
          <span class="ux-receipt__item-price">{{ item.price|floatformat:2 }}EUR</span>
          <span class="ux-receipt__item-total">{{ item.total|floatformat:2 }}EUR</span>
        </div>
        {% endfor %}
      </div>

      <!-- Totals -->
      <div class="ux-receipt__totals">
        <div class="ux-receipt__total-row ux-receipt__total-row--subtotal">
          <span class="ux-receipt__total-label">Subtotal</span>
          <span class="ux-receipt__total-value">{{ receipt.subtotal|floatformat:2 }}EUR</span>
        </div>
        {% if receipt.discount %}
        <div class="ux-receipt__total-row" style="color: #c00;">
          <span class="ux-receipt__total-label">{{ receipt.discount_label|default:"Descuento" }}</span>
          <span class="ux-receipt__total-value">-{{ receipt.discount|floatformat:2 }}EUR</span>
        </div>
        {% endif %}
        <div class="ux-receipt__total-row">
          <span class="ux-receipt__total-label">IVA ({{ receipt.tax_rate }}%)</span>
          <span class="ux-receipt__total-value">{{ receipt.tax|floatformat:2 }}EUR</span>
        </div>
        <div class="ux-receipt__total-row ux-receipt__total-row--grand">
          <span class="ux-receipt__total-label">TOTAL</span>
          <span class="ux-receipt__total-value">{{ receipt.total|floatformat:2 }}EUR</span>
        </div>
      </div>

      <!-- Payment -->
      {% if receipt.payments.exists %}
      <div class="ux-receipt__payment">
        <div class="ux-receipt__payment-title">Forma de Pago</div>
        {% for payment in receipt.payments.all %}
        <div class="ux-receipt__payment-row">
          <span class="ux-receipt__payment-method">{{ payment.get_method_display }}</span>
          <span>{{ payment.amount|floatformat:2 }}EUR</span>
        </div>
        {% endfor %}
        {% if receipt.change %}
        <div class="ux-receipt__payment-row ux-receipt__change">
          <span>Cambio</span>
          <span>{{ receipt.change|floatformat:2 }}EUR</span>
        </div>
        {% endif %}
      </div>
      {% endif %}

      <!-- Footer -->
      <div class="ux-receipt__footer">
        <div class="ux-receipt__thanks">{{ company.thanks_message }}</div>
        {% if company.footer_message %}
        <div class="ux-receipt__message">{{ company.footer_message }}</div>
        {% endif %}
        {% if company.social %}
        <div class="ux-receipt__social">{{ company.social }}</div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Hidden print frame -->
<iframe id="print-frame" style="display: none;"></iframe>
{% endblock %}</pre>
