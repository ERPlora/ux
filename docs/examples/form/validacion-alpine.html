<div class="demo-frame" x-data="{
  email: '',
  emailError: '',
  emailSuccess: '',
  validateEmail() {
    this.emailSuccess = '';
    if (!this.email) {
      this.emailError = 'El email es requerido';
      return;
    }
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)) {
      this.emailError = 'Por favor ingresa un email valido';
      return;
    }
    this.emailError = '';
    this.emailSuccess = 'Email valido';
  }
}">
  <div class="ux-form-group" :class="{
    'ux-form-group--error': emailError,
    'ux-form-group--success': emailSuccess && !emailError
  }">
    <label class="ux-form-group__label ux-form-group__label--required">Email</label>
    <div class="ux-form-group__control">
      <div class="ux-form-group__input-wrapper">
        <input
          type="email"
          class="ux-input"
          x-model="email"
          @blur="validateEmail()"
          @input="emailError = ''; emailSuccess = ''"
          placeholder="tu@email.com"
        >
        <span class="ux-form-group__icon ux-form-group__icon--error" x-show="emailError">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
        </span>
        <span class="ux-form-group__icon ux-form-group__icon--success" x-show="emailSuccess && !emailError">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
        </span>
      </div>
      <span class="ux-form-group__helper" x-show="!emailError && !emailSuccess">Usaremos tu email para notificaciones</span>
      <span class="ux-form-group__error" x-show="emailError" x-text="emailError" style="opacity: 1; max-height: 100px;"></span>
      <span class="ux-form-group__success" x-show="emailSuccess && !emailError" x-text="emailSuccess" style="opacity: 1; max-height: 100px;"></span>
    </div>
  </div>

  <p style="font-size: var(--ux-font-size-sm); color: var(--ux-text-tertiary); margin-top: var(--ux-space-md);">
    Escribe un email y haz blur para validar
  </p>
</div>
