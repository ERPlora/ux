<pre class="ux-code-block" data-lang="html"><!-- templates/users/user_table.html -->
<div class="ux-datatable ux-datatable--bordered ux-datatable--responsive">
  <div class="ux-datatable__toolbar">
    <div class="ux-datatable__toolbar-start">
      <span class="ux-text-sm ux-text-secondary">{{ page_obj.paginator.count }} usuarios</span>
    </div>
    <div class="ux-datatable__toolbar-end">
      <input type="search"
             name="q"
             class="ux-input ux-datatable__search"
             placeholder="Buscar usuarios..."
             value="{{ request.GET.q }}"
             hx-get="{% url 'users:list' %}"
             hx-trigger="input changed delay:300ms, search"
             hx-target="#user-table-container"
             hx-push-url="true">
    </div>
  </div>

  <div class="ux-datatable__body">
    <table class="ux-datatable__table">
      <thead class="ux-datatable__thead">
        <tr>
          <th class="ux-datatable__th ux-datatable__th--sortable
                     {% if order_by == 'name' %}ux-datatable__th--sorted{% endif %}
                     {% if order_by == '-name' %}ux-datatable__th--sorted ux-datatable__th--sorted-desc{% endif %}"
              hx-get="{% url 'users:list' %}?order_by={% if order_by == 'name' %}-{% endif %}name&q={{ request.GET.q }}"
              hx-target="#user-table-container"
              hx-push-url="true">
            Nombre
            <span class="ux-datatable__sort-icon">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12l7-7 7 7"/>
              </svg>
            </span>
          </th>
          <th class="ux-datatable__th">Email</th>
          <th class="ux-datatable__th">Estado</th>
          <th class="ux-datatable__th ux-datatable__th--actions">Acciones</th>
        </tr>
      </thead>
      <tbody class="ux-datatable__tbody">
        {% for user in page_obj %}
        <tr class="ux-datatable__tr">
          <td class="ux-datatable__td" data-label="Nombre">{{ user.name }}</td>
          <td class="ux-datatable__td" data-label="Email">{{ user.email }}</td>
          <td class="ux-datatable__td" data-label="Estado">
            <span class="ux-badge ux-badge--soft {% if user.is_active %}ux-color-success--soft{% else %}ux-color-danger--soft{% endif %}">
              {{ user.status_display }}
            </span>
          </td>
          <td class="ux-datatable__td ux-datatable__td--actions">
            <div class="ux-datatable__row-actions">
              <button class="ux-datatable__row-action"
                      hx-get="{% url 'users:edit' user.pk %}"
                      hx-target="#modal-container"
                      title="Editar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                  <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
              </button>
              <button class="ux-datatable__row-action ux-datatable__row-action--danger"
                      hx-delete="{% url 'users:delete' user.pk %}"
                      hx-target="closest tr"
                      hx-swap="outerHTML swap:500ms"
                      hx-confirm="Eliminar a {{ user.name }}?"
                      title="Eliminar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                </svg>
              </button>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="ux-datatable__empty">
            <h4 class="ux-datatable__empty-title">Sin resultados</h4>
            <p class="ux-datatable__empty-text">No se encontraron usuarios</p>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Paginacion -->
  <div class="ux-datatable__footer">
    <div class="ux-datatable__info">
      Mostrando {{ page_obj.start_index }}-{{ page_obj.end_index }} de {{ page_obj.paginator.count }}
    </div>
    <div class="ux-datatable__pagination">
      {% if page_obj.has_previous %}
      <button class="ux-datatable__page-btn"
              hx-get="{% url 'users:list' %}?page=1&q={{ request.GET.q }}&order_by={{ order_by }}"
              hx-target="#user-table-container"
              hx-push-url="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M11 17l-5-5 5-5M18 17l-5-5 5-5"/>
        </svg>
      </button>
      <button class="ux-datatable__page-btn"
              hx-get="{% url 'users:list' %}?page={{ page_obj.previous_page_number }}&q={{ request.GET.q }}&order_by={{ order_by }}"
              hx-target="#user-table-container"
              hx-push-url="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
        <button class="ux-datatable__page-btn ux-datatable__page-btn--active">{{ num }}</button>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
        <button class="ux-datatable__page-btn"
                hx-get="{% url 'users:list' %}?page={{ num }}&q={{ request.GET.q }}&order_by={{ order_by }}"
                hx-target="#user-table-container"
                hx-push-url="true">{{ num }}</button>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
      <button class="ux-datatable__page-btn"
              hx-get="{% url 'users:list' %}?page={{ page_obj.next_page_number }}&q={{ request.GET.q }}&order_by={{ order_by }}"
              hx-target="#user-table-container"
              hx-push-url="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </button>
      <button class="ux-datatable__page-btn"
              hx-get="{% url 'users:list' %}?page={{ page_obj.paginator.num_pages }}&q={{ request.GET.q }}&order_by={{ order_by }}"
              hx-target="#user-table-container"
              hx-push-url="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M13 7l5 5-5 5M6 7l5 5-5 5"/>
        </svg>
      </button>
      {% endif %}
    </div>
  </div>
</div></pre>
