<div style="display: grid; grid-template-columns: 1fr auto; gap: var(--ux-space-lg); align-items: start;">
          <!-- Cropper -->
          <div class="ux-image-crop" :class="{ 'ux-image-crop--loading': isLoading, 'ux-image-crop--aspect-locked': isAspectLocked }">
            <div class="ux-image-crop__canvas"
                 :class="{ 'ux-image-crop__canvas--empty': !imageLoaded }"
                 x-ref="canvas"
                 @click="!imageLoaded && $refs.fileInput.click()">

              <template x-if="!imageLoaded && !isLoading">
                <div class="ux-image-crop__placeholder">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <path d="m21 15-5-5L5 21"/>
                  </svg>
                  <p class="ux-image-crop__placeholder-text">Select an image</p>
                </div>
              </template>

              <template x-if="imageLoaded">
                <div class="ux-image-crop__image-container">
                  <img :src="imageSrc"
                       class="ux-image-crop__image"
                       :style="{ transform: imageTransform }"
                       alt="Image to crop">

                  <div class="ux-image-crop__crop-area"
                       x-ref="cropArea"
                       :style="cropAreaStyle"
                       @mousedown="onCropMouseDown($event)"
                       @touchstart.prevent="onCropTouchStart($event)">
                    <div class="ux-image-crop__grid ux-image-crop__grid--thirds"></div>
                    <div class="ux-image-crop__handles">
                      <div class="ux-image-crop__handle ux-image-crop__handle--nw" @mousedown.stop="onHandleMouseDown($event, 'nw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'nw')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--ne" @mousedown.stop="onHandleMouseDown($event, 'ne')" @touchstart.stop.prevent="onHandleTouchStart($event, 'ne')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--sw" @mousedown.stop="onHandleMouseDown($event, 'sw')" @touchstart.stop.prevent="onHandleTouchStart($event, 'sw')"></div>
                      <div class="ux-image-crop__handle ux-image-crop__handle--se" @mousedown.stop="onHandleMouseDown($event, 'se')" @touchstart.stop.prevent="onHandleTouchStart($event, 'se')"></div>
                    </div>
                  </div>
                </div>
              </template>
            </div>

            <div class="ux-image-crop__controls" x-show="imageLoaded">
              <div class="ux-image-crop__control-row">
                <span class="ux-image-crop__control-label">Ratio</span>
                <div class="ux-image-crop__aspect-buttons">
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 1 }" @click="setAspectRatio(1, '1:1')">1:1</button>
                  <button class="ux-image-crop__aspect-btn" :class="{ 'ux-image-crop__aspect-btn--active': aspectRatio === 4/3 }" @click="setAspectRatio(4/3, '4:3')">4:3</button>
                </div>
              </div>
              <div class="ux-image-crop__control-row">
                <span class="ux-image-crop__control-label">Zoom</span>
                <div class="ux-image-crop__control-group">
                  <input type="range" class="ux-image-crop__slider" min="0.5" max="3" step="0.1" x-model="zoom">
                  <span class="ux-image-crop__control-value" x-text="zoomPercent + '%'"></span>
                </div>
              </div>
            </div>

            <input type="file" x-ref="fileInput" accept="image/*" style="display: none;" @change="onFileSelect($event)">
          </div>

          <!-- Preview -->
          <div x-show="imageLoaded" style="display: flex; flex-direction: column; gap: var(--ux-space-md);">
            <div class="ux-image-crop__preview ux-image-crop__preview--md" x-data="{ previewUrl: '' }" x-effect="if(imageLoaded) getCroppedImageDataURL().then(url => previewUrl = url)">
              <span class="ux-image-crop__preview-label">Preview</span>
              <img :src="previewUrl" class="ux-image-crop__preview-image" alt="Preview">
            </div>
            <div class="ux-image-crop__preview ux-image-crop__preview--sm ux-image-crop__preview--circle" x-data="{ previewUrl: '' }" x-effect="if(imageLoaded) getCroppedImageDataURL().then(url => previewUrl = url)">
              <img :src="previewUrl" class="ux-image-crop__preview-image" alt="Circle preview">
            </div>
          </div>
        </div>
