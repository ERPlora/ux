<div x-data="uxShiftCalendar({
  startHour: 8,
  endHour: 20,
  shifts: [
    { id: 's1', date: new Date().toISOString().split('T')[0], employeeId: 'e1', employeeName: 'Ana', startTime: '08:00', endTime: '14:00', type: 'morning' },
    { id: 's2', date: new Date().toISOString().split('T')[0], employeeId: 'e2', employeeName: 'Carlos', startTime: '14:00', endTime: '20:00', type: 'afternoon' },
    { id: 's3', date: new Date(Date.now() + 86400000).toISOString().split('T')[0], employeeId: 'e1', employeeName: 'Ana', startTime: '09:00', endTime: '17:00', type: 'full-day' }
  ],
  showLegend: true
})" style="height: 450px;">
  <div class="ux-shift-calendar ux-shift-calendar--compact">
    <div class="ux-shift-calendar__header">
      <div class="ux-shift-calendar__header-start">
        <div class="ux-shift-calendar__nav">
          <button class="ux-shift-calendar__nav-btn" @click="navigateWeek(-1)" x-html="icons.prev"></button>
          <button class="ux-shift-calendar__nav-btn" @click="navigateWeek(1)" x-html="icons.next"></button>
        </div>
      </div>
      <div class="ux-shift-calendar__header-center">
        <span class="ux-shift-calendar__title" x-text="weekRangeTitle"></span>
      </div>
      <div class="ux-shift-calendar__header-end">
        <button class="ux-shift-calendar__today-btn" @click="goToToday()">Hoy</button>
      </div>
    </div>

    <div class="ux-shift-calendar__grid-wrapper">
      <div class="ux-shift-calendar__grid">
        <div class="ux-shift-calendar__corner"></div>
        <template x-for="(date, dayIndex) in weekDates" :key="dayIndex">
          <div class="ux-shift-calendar__day-header"
               :class="{ 'ux-shift-calendar__day-header--today': isToday(date) }">
            <span class="ux-shift-calendar__day-name" x-text="dayNames[date.getDay()]"></span>
            <span class="ux-shift-calendar__day-number" x-text="date.getDate()"></span>
          </div>
        </template>

        <template x-for="slot in timeSlots" :key="slot.hour">
          <template x-for="(colIndex) in [0,1,2,3,4,5,6,7]" :key="colIndex">
            <template x-if="colIndex === 0">
              <div class="ux-shift-calendar__time-slot">
                <span x-text="slot.label"></span>
              </div>
            </template>
            <template x-if="colIndex > 0">
              <div class="ux-shift-calendar__cell">
                <template x-if="slot.hour === startHour">
                  <template x-for="shift in getShiftsForDay(weekDates[colIndex - 1])" :key="shift.id">
                    <div class="ux-shift-calendar__shift"
                         :class="'ux-shift-calendar__shift--' + getShiftType(shift)"
                         :style="getShiftStyle(shift)">
                      <div class="ux-shift-calendar__shift-name" x-text="shift.employeeName"></div>
                      <div class="ux-shift-calendar__shift-time" x-text="shift.startTime + ' - ' + shift.endTime"></div>
                    </div>
                  </template>
                </template>
              </div>
            </template>
          </template>
        </template>
      </div>
    </div>

    <div class="ux-shift-calendar__legend" x-show="showLegend">
      <div class="ux-shift-calendar__legend-item">
        <span class="ux-shift-calendar__legend-color ux-shift-calendar__legend-color--morning"></span>
        <span>Manana</span>
      </div>
      <div class="ux-shift-calendar__legend-item">
        <span class="ux-shift-calendar__legend-color ux-shift-calendar__legend-color--afternoon"></span>
        <span>Tarde</span>
      </div>
      <div class="ux-shift-calendar__legend-item">
        <span class="ux-shift-calendar__legend-color ux-shift-calendar__legend-color--night"></span>
        <span>Noche</span>
      </div>
    </div>
  </div>
</div>
