<div class="demo-calendar" x-data="uxShiftCalendar({
  shifts: [
    { id: 's1', date: new Date().toISOString().split('T')[0], employeeId: 'e1', employeeName: 'Ana Garcia', startTime: '08:00', endTime: '14:00', type: 'morning', department: 'Ventas' },
    { id: 's2', date: new Date().toISOString().split('T')[0], employeeId: 'e2', employeeName: 'Carlos Lopez', startTime: '14:00', endTime: '22:00', type: 'afternoon', department: 'Soporte' },
    { id: 's3', date: new Date(Date.now() + 86400000).toISOString().split('T')[0], employeeId: 'e3', employeeName: 'Maria Torres', startTime: '22:00', endTime: '06:00', type: 'night', department: 'Seguridad' },
    { id: 's4', date: new Date(Date.now() + 86400000 * 2).toISOString().split('T')[0], employeeId: 'e1', employeeName: 'Ana Garcia', startTime: '08:00', endTime: '18:00', type: 'full-day', department: 'Ventas' },
    { id: 's5', date: new Date(Date.now() + 86400000 * 3).toISOString().split('T')[0], employeeId: 'e2', employeeName: 'Carlos Lopez', startTime: '10:00', endTime: '16:00', type: 'morning', department: 'Soporte' }
  ],
  employees: [
    { id: 'e1', name: 'Ana Garcia' },
    { id: 'e2', name: 'Carlos Lopez' },
    { id: 'e3', name: 'Maria Torres' }
  ]
})" @shift-calendar:select="selectedShift = $event.detail.shift">
  <div class="ux-shift-calendar">
    <!-- Header -->
    <div class="ux-shift-calendar__header">
      <div class="ux-shift-calendar__header-start">
        <div class="ux-shift-calendar__nav">
          <button class="ux-shift-calendar__nav-btn" @click="navigateWeek(-1)" x-html="icons.prev"></button>
          <button class="ux-shift-calendar__nav-btn" @click="navigateWeek(1)" x-html="icons.next"></button>
        </div>
        <button class="ux-shift-calendar__today-btn" @click="goToToday()">Hoy</button>
      </div>

      <div class="ux-shift-calendar__header-center">
        <span class="ux-shift-calendar__title" x-text="weekRangeTitle"></span>
      </div>

      <div class="ux-shift-calendar__header-end">
        <div class="ux-shift-calendar__filter">
          <button class="ux-shift-calendar__filter-btn">
            <span x-html="icons.filter"></span>
            <span>Filtrar</span>
            <span class="ux-shift-calendar__filter-badge" x-show="filteredEmployeeIds.length > 0" x-text="filteredEmployeeIds.length"></span>
          </button>
        </div>
      </div>
    </div>

    <!-- Grid -->
    <div class="ux-shift-calendar__grid-wrapper">
      <div class="ux-shift-calendar__grid">
        <!-- Day headers -->
        <div class="ux-shift-calendar__corner"></div>
        <template x-for="(date, dayIndex) in weekDates" :key="dayIndex">
          <div class="ux-shift-calendar__day-header"
               :class="{
                 'ux-shift-calendar__day-header--today': isToday(date),
                 'ux-shift-calendar__day-header--weekend': isWeekend(date)
               }">
            <span class="ux-shift-calendar__day-name" x-text="dayNames[date.getDay()]"></span>
            <span class="ux-shift-calendar__day-number" x-text="date.getDate()"></span>
          </div>
        </template>

        <!-- Time slots and cells -->
        <template x-for="slot in timeSlots" :key="slot.hour">
          <template x-for="(colIndex) in [0,1,2,3,4,5,6,7]" :key="colIndex">
            <template x-if="colIndex === 0">
              <div class="ux-shift-calendar__time-slot">
                <span x-text="slot.label"></span>
              </div>
            </template>
            <template x-if="colIndex > 0">
              <div class="ux-shift-calendar__cell"
                   :class="{
                     'ux-shift-calendar__cell--weekend': isWeekend(weekDates[colIndex - 1])
                   }"
                   @mousedown="onCellMouseDown(weekDates[colIndex - 1], slot.hour, $event)"
                   @mousemove="onCellMouseMove(weekDates[colIndex - 1], slot.hour, $event)">

                <!-- Shifts for this day/hour -->
                <template x-if="slot.hour === startHour">
                  <template x-for="shift in getShiftsForDay(weekDates[colIndex - 1])" :key="shift.id">
                    <div class="ux-shift-calendar__shift"
                         :class="'ux-shift-calendar__shift--' + getShiftType(shift)"
                         :style="getShiftStyle(shift)"
                         @click="onShiftClick(shift, $event)">
                      <div class="ux-shift-calendar__shift-name" x-text="shift.employeeName"></div>
                      <div class="ux-shift-calendar__shift-time" x-text="shift.startTime + ' - ' + shift.endTime"></div>
                      <div class="ux-shift-calendar__shift-department" x-text="shift.department"></div>
                    </div>
                  </template>
                </template>
              </div>
            </template>
          </template>
        </template>
      </div>
    </div>

    <!-- Legend -->
    <div class="ux-shift-calendar__legend" x-show="showLegend">
      <div class="ux-shift-calendar__legend-item">
        <span class="ux-shift-calendar__legend-color ux-shift-calendar__legend-color--morning"></span>
        <span>Manana</span>
      </div>
      <div class="ux-shift-calendar__legend-item">
        <span class="ux-shift-calendar__legend-color ux-shift-calendar__legend-color--afternoon"></span>
        <span>Tarde</span>
      </div>
      <div class="ux-shift-calendar__legend-item">
        <span class="ux-shift-calendar__legend-color ux-shift-calendar__legend-color--night"></span>
        <span>Noche</span>
      </div>
    </div>
  </div>

  <div class="result-display" x-show="selectedShift">
    Turno seleccionado: <strong x-text="selectedShift?.employeeName"></strong> -
    <span x-text="selectedShift?.startTime + ' - ' + selectedShift?.endTime"></span>
    (<span x-text="selectedShift?.department"></span>)
  </div>
</div>

<style>
.demo-calendar { height: 600px; }
.result-display {
  margin-top: 1rem;
  padding: 0.75rem;
  background: var(--ux-surface-secondary);
  border-radius: 8px;
  font-size: 0.875rem;
}
</style>
