<section x-data="uxPicker({
  columns: [
    { label: 'Color', options: ['Rojo', 'Verde', 'Azul', 'Amarillo', 'Naranja', 'Morado', 'Rosa', 'Negro', 'Blanco'], selectedIndex: 2 }
  ]
})">
  <div class="demo-box">
    <button class="ux-button ux-color-primary" @click="open()">Seleccionar Color</button>
    <span class="ux-text-secondary" x-text="'Seleccionado: ' + (columns[0].options[selectedIndexes[0]] || 'Ninguno')"></span>
  </div>

  <!-- Picker Backdrop -->
  <div class="ux-picker-backdrop" :class="{ 'ux-picker-backdrop--open': isOpen }" @click.self="cancel()">
    <div class="ux-picker">
      <div class="ux-picker__header">
        <button class="ux-picker__button ux-picker__button--cancel" @click="cancel()">Cancelar</button>
        <span class="ux-picker__title" x-text="title || 'Seleccionar'"></span>
        <button class="ux-picker__button ux-picker__button--confirm" @click="confirm()">Listo</button>
      </div>
      <div class="ux-picker__columns">
        <template x-for="(column, colIndex) in columns" :key="colIndex">
          <div class="ux-picker__column"
               :class="{ 'ux-picker__column--dragging': _columnStates[colIndex]?.isDragging }"
               @touchstart="onTouchStart($event, colIndex)"
               @touchmove="onTouchMove($event, colIndex)"
               @touchend="onTouchEnd($event, colIndex)"
               @mousedown="onTouchStart($event, colIndex)"
               @mousemove="onTouchMove($event, colIndex)"
               @mouseup="onTouchEnd($event, colIndex)"
               @mouseleave="onTouchEnd($event, colIndex)">
            <div class="ux-picker__column-wrapper" :style="{ transform: getColumnTransform(colIndex) }">
              <template x-for="(option, optIndex) in column.options" :key="optIndex">
                <div class="ux-picker__item"
                     :class="{ 'ux-picker__item--selected': isSelected(colIndex, optIndex) }"
                     @click="selectItem(colIndex, optIndex)"
                     x-text="typeof option === 'object' ? option.text : option"></div>
              </template>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>
</section>
