<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lightbox - UX Library</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap-grid.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    body {
      padding: 2rem;
      background: var(--ux-surface);
      color: var(--ux-text);
      font-family: var(--ux-font-family);
    }
    .demo-section {
      margin-bottom: 3rem;
    }
    .demo-section h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--ux-border-color);
    }
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
    }
    .demo-image {
      aspect-ratio: 1;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .demo-image:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    .demo-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .code-block {
      background: var(--ux-gray-100);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
      font-family: monospace;
      font-size: 0.875rem;
      overflow-x: auto;
    }
    .ux-dark .code-block {
      background: var(--ux-gray-800);
    }
  </style>
</head>
<body class="ux-app">
  <header style="margin-bottom: 2rem;">
    <h1>Lightbox</h1>
    <p style="color: var(--ux-text-secondary);">Image viewer with zoom, pan, navigation, and gallery support. Touch-friendly with keyboard shortcuts.</p>
  </header>

  <!-- Basic Lightbox -->
  <section class="demo-section">
    <h2>Basic Lightbox</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">Click an image to open the lightbox.</p>

    <div data-lightbox-gallery x-data="uxLightbox()">
      <div class="demo-grid">
        <div class="demo-image ux-lightbox-trigger"
             data-lightbox-src="https://picsum.photos/1200/800?random=1"
             data-lightbox-thumb="https://picsum.photos/200/200?random=1"
             data-lightbox-title="Mountain Landscape"
             data-lightbox-desc="Beautiful mountain view at sunset"
             @click="open(0)">
          <img src="https://picsum.photos/200/200?random=1" alt="Mountain Landscape">
        </div>
        <div class="demo-image ux-lightbox-trigger"
             data-lightbox-src="https://picsum.photos/1200/800?random=2"
             data-lightbox-thumb="https://picsum.photos/200/200?random=2"
             data-lightbox-title="Ocean Waves"
             data-lightbox-desc="Peaceful ocean scenery"
             @click="open(1)">
          <img src="https://picsum.photos/200/200?random=2" alt="Ocean Waves">
        </div>
        <div class="demo-image ux-lightbox-trigger"
             data-lightbox-src="https://picsum.photos/1200/800?random=3"
             data-lightbox-thumb="https://picsum.photos/200/200?random=3"
             data-lightbox-title="Forest Path"
             data-lightbox-desc="A walk through the woods"
             @click="open(2)">
          <img src="https://picsum.photos/200/200?random=3" alt="Forest Path">
        </div>
        <div class="demo-image ux-lightbox-trigger"
             data-lightbox-src="https://picsum.photos/1200/800?random=4"
             data-lightbox-thumb="https://picsum.photos/200/200?random=4"
             data-lightbox-title="City Skyline"
             @click="open(3)">
          <img src="https://picsum.photos/200/200?random=4" alt="City Skyline">
        </div>
      </div>

      <!-- Lightbox Modal -->
      <div class="ux-lightbox" :class="{ 'ux-lightbox--open': isOpen, 'ux-lightbox--hide-ui': hideUI, 'ux-lightbox--zoomed': zoom > 1 }">
        <div class="ux-lightbox__backdrop" @click="handleBackdropClick($event)"></div>
        <div class="ux-lightbox__container">
          <!-- Header -->
          <header class="ux-lightbox__header">
            <div>
              <span class="ux-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
            </div>
            <div class="ux-lightbox__actions">
              <button class="ux-lightbox__btn" @click="close()" aria-label="Close">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 6L6 18M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </header>

          <!-- Image -->
          <div class="ux-lightbox__image-container" @click="toggleUI()" @dblclick="handleDoubleTap()"
               @mousedown="startPan($event)" @mousemove="pan($event)" @mouseup="endPan()" @mouseleave="endPan()"
               @touchstart="startPan($event)" @touchmove="pan($event)" @touchend="endPan()">
            <div class="ux-lightbox__loading" x-show="loading">
              <div class="ux-lightbox__spinner"></div>
            </div>
            <div class="ux-lightbox__image-wrapper" :style="{ transform: 'scale(' + zoom + ') translate(' + panX/zoom + 'px, ' + panY/zoom + 'px)' }">
              <img class="ux-lightbox__image" :src="currentImage.src" :alt="currentImage.title" x-show="!loading">
            </div>
          </div>

          <!-- Navigation -->
          <button class="ux-lightbox__nav ux-lightbox__nav--prev" @click.stop="prev()" :disabled="!hasPrev" x-show="images.length > 1">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"></polyline></svg>
          </button>
          <button class="ux-lightbox__nav ux-lightbox__nav--next" @click.stop="next()" :disabled="!hasNext" x-show="images.length > 1">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"></polyline></svg>
          </button>

          <!-- Zoom Controls -->
          <div class="ux-lightbox__zoom-controls" x-show="enableZoom">
            <button class="ux-lightbox__btn" @click.stop="zoomIn()" aria-label="Zoom in">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="M21 21l-4.35-4.35M11 8v6M8 11h6"></path>
              </svg>
            </button>
            <span class="ux-lightbox__zoom-level" x-text="zoomPercent + '%'"></span>
            <button class="ux-lightbox__btn" @click.stop="zoomOut()" aria-label="Zoom out">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="M21 21l-4.35-4.35M8 11h6"></path>
              </svg>
            </button>
          </div>

          <!-- Footer / Thumbnails -->
          <footer class="ux-lightbox__footer" x-show="showThumbnails && images.length > 1">
            <div class="ux-lightbox__thumbnails">
              <template x-for="(img, idx) in images" :key="idx">
                <button class="ux-lightbox__thumbnail" :class="{ 'ux-lightbox__thumbnail--active': idx === currentIndex }" @click.stop="goTo(idx)">
                  <img :src="img.thumbnail || img.src" :alt="img.title">
                </button>
              </template>
            </div>
            <div class="ux-lightbox__caption" x-show="currentImage.title || currentImage.description">
              <div class="ux-lightbox__caption-title" x-text="currentImage.title" x-show="currentImage.title"></div>
              <div class="ux-lightbox__caption-description" x-text="currentImage.description" x-show="currentImage.description"></div>
            </div>
          </footer>
        </div>
      </div>
    </div>

    <div class="code-block">
&lt;div data-lightbox-gallery x-data="uxLightbox()"&gt;
  &lt;!-- Trigger images --&gt;
  &lt;img class="ux-lightbox-trigger"
       data-lightbox-src="full-image.jpg"
       data-lightbox-thumb="thumb.jpg"
       data-lightbox-title="Image Title"
       data-lightbox-desc="Description"
       @click="open(0)"&gt;

  &lt;!-- Lightbox markup --&gt;
  &lt;div class="ux-lightbox" :class="{ 'ux-lightbox--open': isOpen }"&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;
    </div>
  </section>

  <!-- Manual Gallery -->
  <section class="demo-section">
    <h2>Manual Image Array</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">You can also pass images directly to the component.</p>

    <div x-data="uxLightbox({
      images: [
        { src: 'https://picsum.photos/1200/800?random=10', thumbnail: 'https://picsum.photos/200/200?random=10', title: 'Nature 1' },
        { src: 'https://picsum.photos/1200/800?random=11', thumbnail: 'https://picsum.photos/200/200?random=11', title: 'Nature 2' },
        { src: 'https://picsum.photos/1200/800?random=12', thumbnail: 'https://picsum.photos/200/200?random=12', title: 'Nature 3' }
      ]
    })">
      <div class="demo-grid">
        <template x-for="(img, idx) in images" :key="idx">
          <div class="demo-image ux-lightbox-trigger" @click="open(idx)">
            <img :src="img.thumbnail" :alt="img.title">
          </div>
        </template>
      </div>

      <!-- Lightbox Modal -->
      <div class="ux-lightbox" :class="{ 'ux-lightbox--open': isOpen, 'ux-lightbox--hide-ui': hideUI, 'ux-lightbox--zoomed': zoom > 1 }">
        <div class="ux-lightbox__backdrop" @click="handleBackdropClick($event)"></div>
        <div class="ux-lightbox__container">
          <header class="ux-lightbox__header">
            <div>
              <h3 class="ux-lightbox__title" x-text="currentImage.title"></h3>
              <span class="ux-lightbox__counter" x-text="(currentIndex + 1) + ' / ' + images.length"></span>
            </div>
            <div class="ux-lightbox__actions">
              <button class="ux-lightbox__btn" @click="close()" aria-label="Close">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 6L6 18M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </header>
          <div class="ux-lightbox__image-container" @click="toggleUI()" @dblclick="handleDoubleTap()">
            <div class="ux-lightbox__loading" x-show="loading">
              <div class="ux-lightbox__spinner"></div>
            </div>
            <div class="ux-lightbox__image-wrapper" :style="{ transform: 'scale(' + zoom + ')' }">
              <img class="ux-lightbox__image" :src="currentImage.src" :alt="currentImage.title" x-show="!loading">
            </div>
          </div>
          <button class="ux-lightbox__nav ux-lightbox__nav--prev" @click.stop="prev()" :disabled="!hasPrev" x-show="images.length > 1">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"></polyline></svg>
          </button>
          <button class="ux-lightbox__nav ux-lightbox__nav--next" @click.stop="next()" :disabled="!hasNext" x-show="images.length > 1">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"></polyline></svg>
          </button>
          <div class="ux-lightbox__zoom-controls">
            <button class="ux-lightbox__btn" @click.stop="zoomIn()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35M11 8v6M8 11h6"></path></svg>
            </button>
            <span class="ux-lightbox__zoom-level" x-text="zoomPercent + '%'"></span>
            <button class="ux-lightbox__btn" @click.stop="zoomOut()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35M8 11h6"></path></svg>
            </button>
          </div>
          <footer class="ux-lightbox__footer">
            <div class="ux-lightbox__thumbnails">
              <template x-for="(img, idx) in images" :key="idx">
                <button class="ux-lightbox__thumbnail" :class="{ 'ux-lightbox__thumbnail--active': idx === currentIndex }" @click.stop="goTo(idx)">
                  <img :src="img.thumbnail || img.src" :alt="img.title">
                </button>
              </template>
            </div>
          </footer>
        </div>
      </div>
    </div>

    <div class="code-block">
&lt;div x-data="uxLightbox({
  images: [
    { src: 'full1.jpg', thumbnail: 'thumb1.jpg', title: 'Title 1' },
    { src: 'full2.jpg', thumbnail: 'thumb2.jpg', title: 'Title 2' }
  ]
})"&gt;
  &lt;template x-for="(img, idx) in images" :key="idx"&gt;
    &lt;img :src="img.thumbnail" @click="open(idx)"&gt;
  &lt;/template&gt;
  ...
&lt;/div&gt;
    </div>
  </section>

  <!-- Single Image -->
  <section class="demo-section">
    <h2>Single Image</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">Works great with single images too.</p>

    <div x-data="uxLightbox({
      images: [{ src: 'https://picsum.photos/1200/900?random=20', title: 'Single Image View' }],
      showThumbnails: false
    })">
      <div class="demo-image ux-lightbox-trigger" style="max-width: 300px;" @click="open(0)">
        <img src="https://picsum.photos/300/300?random=20" alt="Single Image">
      </div>

      <div class="ux-lightbox" :class="{ 'ux-lightbox--open': isOpen, 'ux-lightbox--hide-ui': hideUI, 'ux-lightbox--zoomed': zoom > 1 }">
        <div class="ux-lightbox__backdrop" @click="handleBackdropClick($event)"></div>
        <div class="ux-lightbox__container">
          <header class="ux-lightbox__header">
            <h3 class="ux-lightbox__title" x-text="currentImage.title"></h3>
            <div class="ux-lightbox__actions">
              <button class="ux-lightbox__btn" @click="close()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
              </button>
            </div>
          </header>
          <div class="ux-lightbox__image-container" @click="toggleUI()" @dblclick="handleDoubleTap()">
            <div class="ux-lightbox__loading" x-show="loading">
              <div class="ux-lightbox__spinner"></div>
            </div>
            <div class="ux-lightbox__image-wrapper" :style="{ transform: 'scale(' + zoom + ')' }">
              <img class="ux-lightbox__image" :src="currentImage.src" x-show="!loading">
            </div>
          </div>
          <div class="ux-lightbox__zoom-controls">
            <button class="ux-lightbox__btn" @click.stop="zoomIn()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35M11 8v6M8 11h6"></path></svg>
            </button>
            <span class="ux-lightbox__zoom-level" x-text="zoomPercent + '%'"></span>
            <button class="ux-lightbox__btn" @click.stop="zoomOut()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35M8 11h6"></path></svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Keyboard Shortcuts -->
  <section class="demo-section">
    <h2>Keyboard Shortcuts</h2>
    <div class="ux-card">
      <div class="ux-card__content">
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Key</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>Esc</code></td><td>Close lightbox</td></tr>
            <tr><td><code>←</code></td><td>Previous image</td></tr>
            <tr><td><code>→</code></td><td>Next image</td></tr>
            <tr><td><code>+</code> / <code>=</code></td><td>Zoom in</td></tr>
            <tr><td><code>-</code></td><td>Zoom out</td></tr>
            <tr><td><code>0</code></td><td>Reset zoom</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Touch Gestures -->
  <section class="demo-section">
    <h2>Touch Gestures</h2>
    <div class="ux-card">
      <div class="ux-card__content">
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Gesture</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Tap</td><td>Toggle UI visibility</td></tr>
            <tr><td>Double Tap</td><td>Toggle zoom (1x / 2x)</td></tr>
            <tr><td>Swipe Left/Right</td><td>Navigate images (when not zoomed)</td></tr>
            <tr><td>Pan/Drag</td><td>Move image (when zoomed)</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- API Reference -->
  <section class="demo-section">
    <h2>API Reference</h2>
    <div class="ux-card">
      <div class="ux-card__content">
        <h3>CSS Classes</h3>
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Class</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>.ux-lightbox</code></td><td>Main container</td></tr>
            <tr><td><code>.ux-lightbox--open</code></td><td>Open state</td></tr>
            <tr><td><code>.ux-lightbox--hide-ui</code></td><td>Hide controls</td></tr>
            <tr><td><code>.ux-lightbox--zoomed</code></td><td>When zoomed in</td></tr>
            <tr><td><code>.ux-lightbox-trigger</code></td><td>Clickable image trigger</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top: 1.5rem;">Alpine.js Options</h3>
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Option</th>
              <th>Type</th>
              <th>Default</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>images</code></td><td>array</td><td>[]</td><td>Array of image objects</td></tr>
            <tr><td><code>showThumbnails</code></td><td>boolean</td><td>true</td><td>Show thumbnail strip</td></tr>
            <tr><td><code>enableZoom</code></td><td>boolean</td><td>true</td><td>Enable zoom controls</td></tr>
            <tr><td><code>enableKeyboard</code></td><td>boolean</td><td>true</td><td>Enable keyboard nav</td></tr>
            <tr><td><code>enableSwipe</code></td><td>boolean</td><td>true</td><td>Enable swipe nav</td></tr>
            <tr><td><code>closeOnBackdrop</code></td><td>boolean</td><td>true</td><td>Close on backdrop click</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top: 1.5rem;">Image Object Properties</h3>
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Property</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>src</code></td><td>string</td><td>Full-size image URL (required)</td></tr>
            <tr><td><code>thumbnail</code></td><td>string</td><td>Thumbnail URL (falls back to src)</td></tr>
            <tr><td><code>title</code></td><td>string</td><td>Image title</td></tr>
            <tr><td><code>description</code></td><td>string</td><td>Image description</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top: 1.5rem;">Methods</h3>
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Method</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>open(index)</code></td><td>Open lightbox at index</td></tr>
            <tr><td><code>close()</code></td><td>Close lightbox</td></tr>
            <tr><td><code>next()</code></td><td>Go to next image</td></tr>
            <tr><td><code>prev()</code></td><td>Go to previous image</td></tr>
            <tr><td><code>goTo(index)</code></td><td>Go to specific image</td></tr>
            <tr><td><code>zoomIn()</code></td><td>Zoom in (+0.5x)</td></tr>
            <tr><td><code>zoomOut()</code></td><td>Zoom out (-0.5x)</td></tr>
            <tr><td><code>resetZoom()</code></td><td>Reset to 1x zoom</td></tr>
            <tr><td><code>toggleZoom()</code></td><td>Toggle between 1x and 2x</td></tr>
            <tr><td><code>toggleUI()</code></td><td>Toggle controls visibility</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top: 1.5rem;">Events</h3>
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Event</th>
              <th>Detail</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>lightbox:open</code></td><td>{ index, image }</td><td>Lightbox opened</td></tr>
            <tr><td><code>lightbox:close</code></td><td>-</td><td>Lightbox closed</td></tr>
            <tr><td><code>lightbox:change</code></td><td>{ index, image }</td><td>Image changed</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top: 1.5rem;">Data Attributes</h3>
        <table class="ux-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Attribute</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>data-lightbox-gallery</code></td><td>Container for auto-collecting images</td></tr>
            <tr><td><code>data-lightbox-src</code></td><td>Full-size image URL</td></tr>
            <tr><td><code>data-lightbox-thumb</code></td><td>Thumbnail URL</td></tr>
            <tr><td><code>data-lightbox-title</code></td><td>Image title</td></tr>
            <tr><td><code>data-lightbox-desc</code></td><td>Image description</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-card.js"></script>
  <script src="../components/ux-lightbox.js"></script>
</body>
</html>
