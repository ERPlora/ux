<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Gantt Chart - UX Library</title>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-navbar.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-badge.js"></script>
  <script src="../components/ux-gantt.js"></script>
  <script src="../components/ux-code-block.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); }
    .demo-gantt { height: 400px; }
    .demo-gantt-tall { height: 500px; }
  </style>
</head>
<body class="ux-app">

  <!-- Basic Gantt Chart -->
  <div class="demo-section">
    <h3>Basic Gantt Chart</h3>
    <p>Interactive Gantt chart with task list, timeline, and progress tracking.</p>

    <div class="demo-box demo-gantt" x-data="uxGantt({
      tasks: [
        {
          id: 1,
          name: 'Project Planning',
          start: '2025-01-06',
          end: '2025-01-12',
          progress: 100,
          status: 'completed'
        },
        {
          id: 2,
          name: 'Design Phase',
          start: '2025-01-13',
          end: '2025-01-24',
          progress: 75,
          status: 'in-progress'
        },
        {
          id: 3,
          name: 'Development Sprint 1',
          start: '2025-01-20',
          end: '2025-02-07',
          progress: 30,
          status: 'in-progress'
        },
        {
          id: 4,
          name: 'Development Sprint 2',
          start: '2025-02-10',
          end: '2025-02-28',
          progress: 0,
          status: 'not-started'
        },
        {
          id: 5,
          name: 'Testing',
          start: '2025-02-24',
          end: '2025-03-07',
          progress: 0,
          status: 'not-started'
        },
        {
          id: 6,
          name: 'Launch',
          type: 'milestone',
          date: '2025-03-10',
          status: 'not-started'
        }
      ],
      zoom: 'week'
    })">
      <div class="ux-gantt">
        <!-- Toolbar -->
        <div class="ux-gantt__toolbar">
          <div class="ux-gantt__toolbar-start">
            <h4 class="ux-gantt__title">Project Timeline</h4>
          </div>
          <div class="ux-gantt__toolbar-end">
            <button class="ux-gantt__today-btn" @click="scrollToToday()">
              Today
            </button>
            <div class="ux-gantt__zoom-controls">
              <button class="ux-gantt__zoom-btn"
                      :class="{'ux-gantt__zoom-btn--active': zoom === 'day'}"
                      @click="setZoom('day')">Day</button>
              <button class="ux-gantt__zoom-btn"
                      :class="{'ux-gantt__zoom-btn--active': zoom === 'week'}"
                      @click="setZoom('week')">Week</button>
              <button class="ux-gantt__zoom-btn"
                      :class="{'ux-gantt__zoom-btn--active': zoom === 'month'}"
                      @click="setZoom('month')">Month</button>
            </div>
            <button class="ux-gantt__nav-btn" @click="navigate('prev')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <button class="ux-gantt__nav-btn" @click="navigate('next')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
            </button>
          </div>
        </div>

        <!-- Body -->
        <div class="ux-gantt__body" style="height: 300px;">
          <!-- Tasks Panel -->
          <div class="ux-gantt__tasks" :style="{width: taskPanelWidth + 'px'}">
            <div class="ux-gantt__tasks-header">Tasks</div>
            <div class="ux-gantt__tasks-body" x-ref="tasksBody">
              <template x-for="task in flattenedTasks" :key="task.id">
                <div class="ux-gantt__task-row"
                     :class="{'ux-gantt__task-row--selected': selectedTask === task.id}"
                     @click="selectTask(task)">
                  <div class="ux-gantt__task-indent" :style="{width: (task._level * 20) + 'px'}"></div>
                  <template x-if="task._hasChildren">
                    <button class="ux-gantt__task-expand"
                            :class="{'ux-gantt__task-expand--expanded': expandedGroups.has(task.id)}"
                            @click.stop="toggleGroup(task.id)">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                  </template>
                  <span class="ux-gantt__task-name" x-text="task.name"></span>
                  <template x-if="task.type === 'milestone'">
                    <span class="ux-badge ux-badge--sm ux-color-warning--soft">Milestone</span>
                  </template>
                </div>
              </template>
            </div>
          </div>

          <!-- Resizer -->
          <div class="ux-gantt__resizer"
               :class="{'ux-gantt__resizer--active': isResizing}"
               :style="{left: taskPanelWidth + 'px'}"
               @mousedown="startResize($event)"></div>

          <!-- Chart Area -->
          <div class="ux-gantt__chart">
            <div class="ux-gantt__chart-scroll" x-ref="chartScroll">
              <div class="ux-gantt__chart-inner" :style="{width: chartWidth + 'px'}">
                <!-- Header -->
                <div class="ux-gantt__header">
                  <div class="ux-gantt__header-row ux-gantt__header-row--primary">
                    <template x-for="(date, index) in timelineDates" :key="'primary-' + index">
                      <div class="ux-gantt__header-cell ux-gantt__header-cell--primary"
                           :style="{width: cellWidth + 'px'}"
                           x-text="formatHeaderDate(date, true)"></div>
                    </template>
                  </div>
                  <div class="ux-gantt__header-row">
                    <template x-for="(date, index) in timelineDates" :key="'secondary-' + index">
                      <div class="ux-gantt__header-cell"
                           :class="{
                             'ux-gantt__header-cell--today': isToday(date),
                             'ux-gantt__header-cell--weekend': zoom === 'day' && isWeekend(date)
                           }"
                           :style="{width: cellWidth + 'px'}"
                           x-text="formatHeaderDate(date, false)"></div>
                    </template>
                  </div>
                </div>

                <!-- Grid & Bars -->
                <div class="ux-gantt__bars">
                  <template x-for="task in flattenedTasks" :key="'bar-' + task.id">
                    <div class="ux-gantt__bar-row">
                      <template x-if="task.type === 'milestone'">
                        <div class="ux-gantt__milestone"
                             :class="{'ux-gantt__milestone--completed': task.status === 'completed'}"
                             :style="getBarStyle(task)"
                             @mouseenter="showTooltip(task, $event)"
                             @mouseleave="hideTooltip()"
                             @click="selectTask(task)"></div>
                      </template>
                      <template x-if="task.type !== 'milestone'">
                        <div :class="getBarClass(task)"
                             :style="getBarStyle(task)"
                             @mouseenter="showTooltip(task, $event)"
                             @mouseleave="hideTooltip()"
                             @click="selectTask(task)"
                             @mousedown="startDrag(task, 'move', $event)">
                          <div class="ux-gantt__bar-progress"
                               :style="{width: (task.progress || 0) + '%'}"></div>
                          <span class="ux-gantt__bar-label" x-text="task.name"></span>
                          <div class="ux-gantt__bar-handle ux-gantt__bar-handle--start"
                               @mousedown.stop="startDrag(task, 'resize-start', $event)"></div>
                          <div class="ux-gantt__bar-handle ux-gantt__bar-handle--end"
                               @mousedown.stop="startDrag(task, 'resize-end', $event)"></div>
                        </div>
                      </template>
                    </div>
                  </template>
                </div>

                <!-- Today Line -->
                <template x-if="showToday && todayPosition !== null">
                  <div class="ux-gantt__today-line" :style="{left: todayPosition + 'px'}"></div>
                </template>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tooltip -->
      <div class="ux-gantt__tooltip"
           :class="{'ux-gantt__tooltip--visible': tooltip.visible}"
           :style="{left: tooltip.x + 'px', top: tooltip.y + 'px'}"
           x-show="tooltip.visible">
        <template x-if="tooltip.task">
          <div>
            <div class="ux-gantt__tooltip-title" x-text="tooltip.task.name"></div>
            <div class="ux-gantt__tooltip-dates">
              <template x-if="tooltip.task.type === 'milestone'">
                <span x-text="formatDate(tooltip.task.date)"></span>
              </template>
              <template x-if="tooltip.task.type !== 'milestone'">
                <span x-text="formatDate(tooltip.task.start) + ' - ' + formatDate(tooltip.task.end)"></span>
              </template>
            </div>
            <template x-if="tooltip.task.progress !== undefined">
              <div class="ux-gantt__tooltip-progress">
                <div class="ux-gantt__tooltip-progress-bar">
                  <div class="ux-gantt__tooltip-progress-fill" :style="{width: tooltip.task.progress + '%'}"></div>
                </div>
                <span x-text="tooltip.task.progress + '%'"></span>
              </div>
            </template>
          </div>
        </template>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxGantt({
  tasks: [
    {
      id: 1,
      name: 'Project Planning',
      start: '2025-01-06',
      end: '2025-01-12',
      progress: 100,
      status: 'completed'
    },
    {
      id: 2,
      name: 'Design Phase',
      start: '2025-01-13',
      end: '2025-01-24',
      progress: 75,
      status: 'in-progress'
    },
    {
      id: 6,
      name: 'Launch',
      type: 'milestone',
      date: '2025-03-10'
    }
  ],
  zoom: 'week'
})"&gt;
  &lt;div class="ux-gantt"&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- Grouped Tasks -->
  <div class="demo-section">
    <h3>Grouped Tasks with Dependencies</h3>
    <p>Hierarchical tasks with parent-child relationships and task dependencies.</p>

    <div class="demo-box demo-gantt-tall" x-data="uxGantt({
      tasks: [
        {
          id: 'phase-1',
          name: 'Phase 1: Planning',
          type: 'group',
          start: '2025-01-06',
          end: '2025-01-17',
          children: [
            {
              id: 'task-1',
              name: 'Requirements Gathering',
              start: '2025-01-06',
              end: '2025-01-10',
              progress: 100,
              status: 'completed',
              category: 'management'
            },
            {
              id: 'task-2',
              name: 'Technical Specification',
              start: '2025-01-13',
              end: '2025-01-17',
              progress: 100,
              status: 'completed',
              category: 'development',
              dependencies: ['task-1']
            }
          ]
        },
        {
          id: 'phase-2',
          name: 'Phase 2: Design',
          type: 'group',
          start: '2025-01-20',
          end: '2025-01-31',
          children: [
            {
              id: 'task-3',
              name: 'UI/UX Design',
              start: '2025-01-20',
              end: '2025-01-24',
              progress: 100,
              status: 'completed',
              category: 'design',
              dependencies: ['task-2']
            },
            {
              id: 'task-4',
              name: 'Design Review',
              start: '2025-01-27',
              end: '2025-01-28',
              progress: 80,
              status: 'in-progress',
              category: 'design',
              dependencies: ['task-3']
            },
            {
              id: 'milestone-1',
              name: 'Design Sign-off',
              type: 'milestone',
              date: '2025-01-31',
              dependencies: ['task-4']
            }
          ]
        },
        {
          id: 'phase-3',
          name: 'Phase 3: Development',
          type: 'group',
          start: '2025-02-03',
          end: '2025-02-28',
          children: [
            {
              id: 'task-5',
              name: 'Frontend Development',
              start: '2025-02-03',
              end: '2025-02-14',
              progress: 20,
              status: 'in-progress',
              category: 'development',
              dependencies: ['milestone-1']
            },
            {
              id: 'task-6',
              name: 'Backend Development',
              start: '2025-02-03',
              end: '2025-02-21',
              progress: 10,
              status: 'in-progress',
              category: 'development',
              dependencies: ['milestone-1']
            },
            {
              id: 'task-7',
              name: 'Integration Testing',
              start: '2025-02-17',
              end: '2025-02-28',
              progress: 0,
              status: 'not-started',
              category: 'testing',
              dependencies: ['task-5', 'task-6']
            }
          ]
        },
        {
          id: 'milestone-launch',
          name: 'Product Launch',
          type: 'milestone',
          date: '2025-03-03',
          dependencies: ['task-7']
        }
      ],
      zoom: 'week',
      expandedGroups: ['phase-1', 'phase-2', 'phase-3']
    })">
      <div class="ux-gantt">
        <!-- Toolbar -->
        <div class="ux-gantt__toolbar">
          <div class="ux-gantt__toolbar-start">
            <h4 class="ux-gantt__title">Product Development</h4>
          </div>
          <div class="ux-gantt__toolbar-end">
            <button class="ux-gantt__today-btn" @click="scrollToToday()">Today</button>
            <div class="ux-gantt__zoom-controls">
              <button class="ux-gantt__zoom-btn"
                      :class="{'ux-gantt__zoom-btn--active': zoom === 'day'}"
                      @click="setZoom('day')">Day</button>
              <button class="ux-gantt__zoom-btn"
                      :class="{'ux-gantt__zoom-btn--active': zoom === 'week'}"
                      @click="setZoom('week')">Week</button>
              <button class="ux-gantt__zoom-btn"
                      :class="{'ux-gantt__zoom-btn--active': zoom === 'month'}"
                      @click="setZoom('month')">Month</button>
            </div>
          </div>
        </div>

        <!-- Body -->
        <div class="ux-gantt__body" style="height: 400px;">
          <!-- Tasks Panel -->
          <div class="ux-gantt__tasks" :style="{width: taskPanelWidth + 'px'}">
            <div class="ux-gantt__tasks-header">Tasks</div>
            <div class="ux-gantt__tasks-body" x-ref="tasksBody">
              <template x-for="task in flattenedTasks" :key="task.id">
                <div class="ux-gantt__task-row"
                     :class="{
                       'ux-gantt__task-row--selected': selectedTask === task.id,
                       'ux-gantt__task-row--group': task.type === 'group'
                     }"
                     @click="selectTask(task)">
                  <div class="ux-gantt__task-indent" :style="{width: (task._level * 20) + 'px'}"></div>
                  <template x-if="task._hasChildren">
                    <button class="ux-gantt__task-expand"
                            :class="{'ux-gantt__task-expand--expanded': expandedGroups.has(task.id)}"
                            @click.stop="toggleGroup(task.id)">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                  </template>
                  <span class="ux-gantt__task-name" x-text="task.name"></span>
                  <template x-if="task.type === 'milestone'">
                    <span class="ux-badge ux-badge--sm ux-color-warning--soft">Milestone</span>
                  </template>
                </div>
              </template>
            </div>
          </div>

          <!-- Resizer -->
          <div class="ux-gantt__resizer"
               :class="{'ux-gantt__resizer--active': isResizing}"
               :style="{left: taskPanelWidth + 'px'}"
               @mousedown="startResize($event)"></div>

          <!-- Chart Area -->
          <div class="ux-gantt__chart">
            <div class="ux-gantt__chart-scroll" x-ref="chartScroll">
              <div class="ux-gantt__chart-inner" :style="{width: chartWidth + 'px'}">
                <!-- Header -->
                <div class="ux-gantt__header">
                  <div class="ux-gantt__header-row ux-gantt__header-row--primary">
                    <template x-for="(date, index) in timelineDates" :key="'primary-' + index">
                      <div class="ux-gantt__header-cell ux-gantt__header-cell--primary"
                           :style="{width: cellWidth + 'px'}"
                           x-text="formatHeaderDate(date, true)"></div>
                    </template>
                  </div>
                  <div class="ux-gantt__header-row">
                    <template x-for="(date, index) in timelineDates" :key="'secondary-' + index">
                      <div class="ux-gantt__header-cell"
                           :class="{
                             'ux-gantt__header-cell--today': isToday(date),
                             'ux-gantt__header-cell--weekend': zoom === 'day' && isWeekend(date)
                           }"
                           :style="{width: cellWidth + 'px'}"
                           x-text="formatHeaderDate(date, false)"></div>
                    </template>
                  </div>
                </div>

                <!-- Dependencies SVG -->
                <svg class="ux-gantt__dependencies" :style="{height: flattenedTasks.length * 40 + 'px'}">
                  <template x-for="dep in getDependencyPaths()" :key="dep.path">
                    <g>
                      <path class="ux-gantt__dependency" :d="dep.path"></path>
                      <polygon class="ux-gantt__dependency-arrow"
                               :points="`${dep.arrowX},${dep.arrowY} ${dep.arrowX-6},${dep.arrowY-3} ${dep.arrowX-6},${dep.arrowY+3}`"></polygon>
                    </g>
                  </template>
                </svg>

                <!-- Grid & Bars -->
                <div class="ux-gantt__bars">
                  <template x-for="task in flattenedTasks" :key="'bar-' + task.id">
                    <div class="ux-gantt__bar-row">
                      <template x-if="task.type === 'milestone'">
                        <div class="ux-gantt__milestone"
                             :class="{'ux-gantt__milestone--completed': task.status === 'completed'}"
                             :style="getBarStyle(task)"
                             @mouseenter="showTooltip(task, $event)"
                             @mouseleave="hideTooltip()"
                             @click="selectTask(task)"></div>
                      </template>
                      <template x-if="task.type !== 'milestone'">
                        <div :class="getBarClass(task)"
                             :style="getBarStyle(task)"
                             @mouseenter="showTooltip(task, $event)"
                             @mouseleave="hideTooltip()"
                             @click="selectTask(task)">
                          <template x-if="task.type !== 'group'">
                            <div class="ux-gantt__bar-progress"
                                 :style="{width: (task.progress || 0) + '%'}"></div>
                          </template>
                          <template x-if="task.type !== 'group'">
                            <span class="ux-gantt__bar-label" x-text="task.name"></span>
                          </template>
                        </div>
                      </template>
                    </div>
                  </template>
                </div>

                <!-- Today Line -->
                <template x-if="showToday && todayPosition !== null">
                  <div class="ux-gantt__today-line" :style="{left: todayPosition + 'px'}"></div>
                </template>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tooltip -->
      <div class="ux-gantt__tooltip"
           :class="{'ux-gantt__tooltip--visible': tooltip.visible}"
           :style="{left: tooltip.x + 'px', top: tooltip.y + 'px'}"
           x-show="tooltip.visible">
        <template x-if="tooltip.task">
          <div>
            <div class="ux-gantt__tooltip-title" x-text="tooltip.task.name"></div>
            <div class="ux-gantt__tooltip-dates">
              <template x-if="tooltip.task.type === 'milestone'">
                <span x-text="formatDate(tooltip.task.date)"></span>
              </template>
              <template x-if="tooltip.task.type !== 'milestone'">
                <span x-text="formatDate(tooltip.task.start) + ' - ' + formatDate(tooltip.task.end)"></span>
              </template>
            </div>
            <template x-if="tooltip.task.progress !== undefined">
              <div class="ux-gantt__tooltip-progress">
                <div class="ux-gantt__tooltip-progress-bar">
                  <div class="ux-gantt__tooltip-progress-fill" :style="{width: tooltip.task.progress + '%'}"></div>
                </div>
                <span x-text="tooltip.task.progress + '%'"></span>
              </div>
            </template>
          </div>
        </template>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Grouped tasks with dependencies --&gt;
tasks: [
  {
    id: 'phase-1',
    name: 'Phase 1: Planning',
    type: 'group',
    start: '2025-01-06',
    end: '2025-01-17',
    children: [
      {
        id: 'task-1',
        name: 'Requirements Gathering',
        start: '2025-01-06',
        end: '2025-01-10',
        progress: 100,
        status: 'completed',
        category: 'management'
      },
      {
        id: 'task-2',
        name: 'Technical Specification',
        start: '2025-01-13',
        end: '2025-01-17',
        dependencies: ['task-1']
      }
    ]
  }
]</pre>
  </div>

  <!-- Compact Mode -->
  <div class="demo-section">
    <h3>Compact Mode</h3>
    <p>Denser layout for viewing more tasks at once.</p>

    <div class="demo-box demo-gantt" x-data="uxGantt({
      tasks: [
        { id: 1, name: 'Task Alpha', start: '2025-01-06', end: '2025-01-10', progress: 100, status: 'completed' },
        { id: 2, name: 'Task Beta', start: '2025-01-08', end: '2025-01-15', progress: 80, status: 'in-progress' },
        { id: 3, name: 'Task Gamma', start: '2025-01-13', end: '2025-01-20', progress: 50, status: 'in-progress' },
        { id: 4, name: 'Task Delta', start: '2025-01-16', end: '2025-01-24', progress: 20, status: 'in-progress' },
        { id: 5, name: 'Task Epsilon', start: '2025-01-20', end: '2025-01-28', progress: 0, status: 'not-started' },
        { id: 6, name: 'Task Zeta', start: '2025-01-22', end: '2025-01-31', progress: 0, status: 'not-started' },
        { id: 7, name: 'Task Eta', start: '2025-01-27', end: '2025-02-07', progress: 0, status: 'not-started' },
        { id: 8, name: 'Final Review', type: 'milestone', date: '2025-02-10' }
      ],
      zoom: 'day'
    })">
      <div class="ux-gantt ux-gantt--compact">
        <div class="ux-gantt__toolbar">
          <div class="ux-gantt__toolbar-start">
            <h4 class="ux-gantt__title">Sprint Tasks (Compact)</h4>
          </div>
          <div class="ux-gantt__toolbar-end">
            <button class="ux-gantt__today-btn" @click="scrollToToday()">Today</button>
            <div class="ux-gantt__zoom-controls">
              <button class="ux-gantt__zoom-btn" :class="{'ux-gantt__zoom-btn--active': zoom === 'day'}" @click="setZoom('day')">Day</button>
              <button class="ux-gantt__zoom-btn" :class="{'ux-gantt__zoom-btn--active': zoom === 'week'}" @click="setZoom('week')">Week</button>
            </div>
          </div>
        </div>

        <div class="ux-gantt__body" style="height: 300px;">
          <div class="ux-gantt__tasks" :style="{width: taskPanelWidth + 'px'}">
            <div class="ux-gantt__tasks-header">Tasks</div>
            <div class="ux-gantt__tasks-body" x-ref="tasksBody">
              <template x-for="task in flattenedTasks" :key="task.id">
                <div class="ux-gantt__task-row" @click="selectTask(task)">
                  <span class="ux-gantt__task-name" x-text="task.name"></span>
                </div>
              </template>
            </div>
          </div>
          <div class="ux-gantt__resizer" :style="{left: taskPanelWidth + 'px'}" @mousedown="startResize($event)"></div>
          <div class="ux-gantt__chart">
            <div class="ux-gantt__chart-scroll" x-ref="chartScroll">
              <div class="ux-gantt__chart-inner" :style="{width: chartWidth + 'px'}">
                <div class="ux-gantt__header">
                  <div class="ux-gantt__header-row ux-gantt__header-row--primary">
                    <template x-for="(date, index) in timelineDates" :key="'p-' + index">
                      <div class="ux-gantt__header-cell ux-gantt__header-cell--primary" :style="{width: cellWidth + 'px'}" x-text="formatHeaderDate(date, true)"></div>
                    </template>
                  </div>
                  <div class="ux-gantt__header-row">
                    <template x-for="(date, index) in timelineDates" :key="'s-' + index">
                      <div class="ux-gantt__header-cell" :class="{'ux-gantt__header-cell--today': isToday(date), 'ux-gantt__header-cell--weekend': zoom === 'day' && isWeekend(date)}" :style="{width: cellWidth + 'px'}" x-text="formatHeaderDate(date, false)"></div>
                    </template>
                  </div>
                </div>
                <div class="ux-gantt__bars">
                  <template x-for="task in flattenedTasks" :key="'b-' + task.id">
                    <div class="ux-gantt__bar-row">
                      <template x-if="task.type === 'milestone'">
                        <div class="ux-gantt__milestone" :style="getBarStyle(task)"></div>
                      </template>
                      <template x-if="task.type !== 'milestone'">
                        <div :class="getBarClass(task)" :style="getBarStyle(task)">
                          <div class="ux-gantt__bar-progress" :style="{width: (task.progress || 0) + '%'}"></div>
                        </div>
                      </template>
                    </div>
                  </template>
                </div>
                <template x-if="showToday && todayPosition !== null">
                  <div class="ux-gantt__today-line" :style="{left: todayPosition + 'px'}"></div>
                </template>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div class="ux-gantt ux-gantt--compact"&gt;
  ...
&lt;/div&gt;</pre>
  </div>

  <!-- Color Categories -->
  <div class="demo-section">
    <h3>Color Coding by Category</h3>
    <p>Tasks can be color-coded by status or custom categories.</p>

    <div class="demo-box">
      <div style="display: flex; flex-wrap: wrap; gap: var(--ux-space-md); margin-bottom: var(--ux-space-lg);">
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-gray-300);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Not Started</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-primary);"></span>
          <span style="font-size: var(--ux-font-size-sm);">In Progress</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-success);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Completed</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-danger);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Delayed</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-warning);"></span>
          <span style="font-size: var(--ux-font-size-sm);">On Hold / Milestone</span>
        </div>
      </div>

      <div style="display: flex; flex-wrap: wrap; gap: var(--ux-space-md);">
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-purple-500);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Design</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-blue-500);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Development</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-cyan-500);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Testing</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-orange-500);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Marketing</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--ux-space-xs);">
          <span style="width: 16px; height: 16px; border-radius: 4px; background: var(--ux-indigo-500);"></span>
          <span style="font-size: var(--ux-font-size-sm);">Management</span>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Status-based coloring --&gt;
{ status: 'not-started' }  // .ux-gantt__bar--not-started
{ status: 'in-progress' }  // .ux-gantt__bar--in-progress
{ status: 'completed' }    // .ux-gantt__bar--completed
{ status: 'delayed' }      // .ux-gantt__bar--delayed
{ status: 'on-hold' }      // .ux-gantt__bar--on-hold

&lt;!-- Category-based coloring --&gt;
{ category: 'design' }      // .ux-gantt__bar--category-design
{ category: 'development' } // .ux-gantt__bar--category-development
{ category: 'testing' }     // .ux-gantt__bar--category-testing
{ category: 'marketing' }   // .ux-gantt__bar--category-marketing
{ category: 'management' }  // .ux-gantt__bar--category-management</pre>
  </div>

  <!-- CSS Classes Reference -->
  <div class="demo-section">
    <h3>CSS Classes</h3>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">/* Container */
.ux-gantt                     // Base container
.ux-gantt--compact            // Compact/dense layout
.ux-gantt--readonly           // Read-only mode (no drag)
.ux-gantt--bordered           // Visible border
.ux-gantt--glass              // Glass morphism variant

/* Toolbar */
.ux-gantt__toolbar            // Top toolbar
.ux-gantt__toolbar-start      // Left section
.ux-gantt__toolbar-end        // Right section
.ux-gantt__title              // Chart title
.ux-gantt__zoom-controls      // Zoom button group
.ux-gantt__zoom-btn           // Zoom button
.ux-gantt__zoom-btn--active   // Active zoom level
.ux-gantt__nav-btn            // Navigation button
.ux-gantt__today-btn          // Go to today button

/* Task Panel */
.ux-gantt__tasks              // Task list panel
.ux-gantt__tasks-header       // Task list header
.ux-gantt__tasks-body         // Task list body
.ux-gantt__task-row           // Individual task row
.ux-gantt__task-row--selected // Selected task
.ux-gantt__task-row--group    // Group task row
.ux-gantt__task-indent        // Indentation for hierarchy
.ux-gantt__task-expand        // Expand/collapse button
.ux-gantt__task-expand--expanded // Expanded state
.ux-gantt__task-name          // Task name text
.ux-gantt__resizer            // Panel resize handle

/* Chart Area */
.ux-gantt__chart              // Chart container
.ux-gantt__chart-scroll       // Scrollable area
.ux-gantt__chart-inner        // Inner container

/* Timeline Header */
.ux-gantt__header             // Timeline header
.ux-gantt__header-row         // Header row
.ux-gantt__header-row--primary // Primary row (months/years)
.ux-gantt__header-cell        // Header cell
.ux-gantt__header-cell--primary // Primary cell
.ux-gantt__header-cell--today // Today cell
.ux-gantt__header-cell--weekend // Weekend cell

/* Task Bars */
.ux-gantt__bars               // Bars container
.ux-gantt__bar-row            // Bar row
.ux-gantt__bar                // Task bar
.ux-gantt__bar--selected      // Selected bar
.ux-gantt__bar--dragging      // Being dragged
.ux-gantt__bar--group         // Group bar
.ux-gantt__bar--not-started   // Not started status
.ux-gantt__bar--in-progress   // In progress status
.ux-gantt__bar--completed     // Completed status
.ux-gantt__bar--delayed       // Delayed status
.ux-gantt__bar--on-hold       // On hold status
.ux-gantt__bar--category-*    // Category colors
.ux-gantt__bar-progress       // Progress fill
.ux-gantt__bar-label          // Bar label text
.ux-gantt__bar-handle         // Resize handle
.ux-gantt__bar-handle--start  // Left handle
.ux-gantt__bar-handle--end    // Right handle

/* Milestones */
.ux-gantt__milestone          // Milestone marker
.ux-gantt__milestone--completed // Completed milestone
.ux-gantt__milestone--delayed // Delayed milestone

/* Dependencies */
.ux-gantt__dependencies       // SVG container
.ux-gantt__dependency         // Dependency line
.ux-gantt__dependency-arrow   // Arrow head

/* Today Line */
.ux-gantt__today-line         // Today indicator

/* Tooltip */
.ux-gantt__tooltip            // Tooltip container
.ux-gantt__tooltip--visible   // Visible state
.ux-gantt__tooltip-title      // Task name
.ux-gantt__tooltip-dates      // Date range
.ux-gantt__tooltip-progress   // Progress indicator

/* Empty State */
.ux-gantt__empty              // Empty container
.ux-gantt__empty-icon         // Empty icon
.ux-gantt__empty-title        // Empty title
.ux-gantt__empty-text         // Empty description</pre>
    </div>
  </div>

  <!-- Alpine Component API -->
  <div class="demo-section">
    <h3>Alpine.js Component API</h3>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">// Configuration
uxGantt({
  // Data
  tasks: [],                    // Array of task objects

  // View settings
  zoom: 'week',                 // 'day', 'week', 'month'
  startDate: null,              // Start date (auto-calculated if null)
  endDate: null,                // End date (auto-calculated if null)
  taskPanelWidth: 280,          // Initial task panel width

  // Options
  readonly: false,              // Disable editing
  showToday: true,              // Show today line
  showWeekends: true,           // Show weekend columns
  showDependencies: true,       // Show dependency arrows
  showProgress: true,           // Show progress bars
  highlightWeekends: true,      // Highlight weekend columns

  // Expanded groups (for hierarchical tasks)
  expandedGroups: [],           // Array of expanded group IDs

  // Labels (for i18n)
  labels: {
    tasks: 'Tasks',
    day: 'Day',
    week: 'Week',
    month: 'Month',
    today: 'Today',
    noTasks: 'No tasks',
    noTasksDesc: 'Add tasks to see them on the Gantt chart.'
  }
})

// Task object structure
{
  id: 'unique-id',              // Required: unique identifier
  name: 'Task Name',            // Required: display name
  start: '2025-01-15',          // Start date (YYYY-MM-DD)
  end: '2025-01-20',            // End date (YYYY-MM-DD)
  progress: 50,                 // Progress percentage (0-100)
  status: 'in-progress',        // Status: 'not-started', 'in-progress', 'completed', 'delayed', 'on-hold'
  category: 'development',      // Category for color coding
  type: 'task',                 // Type: 'task', 'milestone', 'group'
  date: '2025-01-25',           // For milestones only
  dependencies: ['task-1'],     // Array of dependency task IDs
  children: []                  // Nested tasks (for groups)
}

// Properties (read-only)
flattenedTasks                  // Flattened task array with hierarchy info
timelineDates                   // Array of timeline dates
chartWidth                      // Total chart width in pixels
cellWidth                       // Width per cell based on zoom
todayPosition                   // X position of today line

// Methods
setZoom(level)                  // Set zoom level
scrollToToday()                 // Scroll chart to today
scrollToStart()                 // Scroll to start
scrollToEnd()                   // Scroll to end
navigate(direction)             // 'prev' or 'next'
toggleGroup(taskId)             // Expand/collapse group
selectTask(task)                // Select a task
showTooltip(task, event)        // Show task tooltip
hideTooltip()                   // Hide tooltip
formatDate(dateStr)             // Format date string

// Events
@gantt:zoom                     // { zoom } - Zoom level changed
@gantt:select                   // { task } - Task selected
@gantt:toggle-group             // { taskId, expanded } - Group toggled
@gantt:task-update              // { task } - Task dates changed (drag)</pre>
    </div>
  </div>

  <!-- HTMX Integration -->
  <div class="demo-section">
    <h3>HTMX + Django Integration</h3>
    <p>Load tasks dynamically and handle updates via HTMX.</p>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Load tasks on page load --&gt;
&lt;div x-data="uxGantt({ tasks: [] })"
     hx-get="/api/projects/1/tasks/"
     hx-trigger="load"
     hx-target="this"
     hx-swap="none"
     @htmx:after-request="tasks = $event.detail.xhr.response"&gt;
  ...
&lt;/div&gt;

&lt;!-- Handle task updates --&gt;
&lt;div x-data="uxGantt({...})"
     @gantt:task-update="
       fetch('/api/tasks/' + $event.detail.task.id + '/', {
         method: 'PATCH',
         headers: {'Content-Type': 'application/json'},
         body: JSON.stringify({
           start: $event.detail.task.start,
           end: $event.detail.task.end
         })
       })
     "&gt;
  ...
&lt;/div&gt;</pre>

    <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Django Model</h4>
    <pre class="ux-code-block" data-lang="python"># models.py
from django.db import models

class Project(models.Model):
    name = models.CharField(max_length=200)
    start_date = models.DateField()
    end_date = models.DateField()

class Task(models.Model):
    STATUS_CHOICES = [
        ('not-started', 'Not Started'),
        ('in-progress', 'In Progress'),
        ('completed', 'Completed'),
        ('delayed', 'Delayed'),
        ('on-hold', 'On Hold'),
    ]

    TYPE_CHOICES = [
        ('task', 'Task'),
        ('milestone', 'Milestone'),
        ('group', 'Group'),
    ]

    project = models.ForeignKey(Project, on_delete=models.CASCADE, related_name='tasks')
    parent = models.ForeignKey('self', null=True, blank=True, on_delete=models.CASCADE, related_name='children')
    name = models.CharField(max_length=200)
    start_date = models.DateField(null=True, blank=True)
    end_date = models.DateField(null=True, blank=True)
    milestone_date = models.DateField(null=True, blank=True)  # For milestones
    progress = models.IntegerField(default=0)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='not-started')
    task_type = models.CharField(max_length=20, choices=TYPE_CHOICES, default='task')
    category = models.CharField(max_length=50, blank=True)
    order = models.IntegerField(default=0)

    class Meta:
        ordering = ['order', 'start_date']

    def to_gantt_dict(self):
        data = {
            'id': self.id,
            'name': self.name,
            'status': self.status,
            'type': self.task_type,
            'progress': self.progress,
            'category': self.category,
        }

        if self.task_type == 'milestone':
            data['date'] = self.milestone_date.isoformat() if self.milestone_date else None
        else:
            data['start'] = self.start_date.isoformat() if self.start_date else None
            data['end'] = self.end_date.isoformat() if self.end_date else None

        # Include children for groups
        if self.task_type == 'group':
            data['children'] = [child.to_gantt_dict() for child in self.children.all()]

        return data


class TaskDependency(models.Model):
    task = models.ForeignKey(Task, on_delete=models.CASCADE, related_name='dependencies')
    depends_on = models.ForeignKey(Task, on_delete=models.CASCADE, related_name='dependents')</pre>

    <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Django View</h4>
    <pre class="ux-code-block" data-lang="python"># views.py
from django.http import JsonResponse
from django.shortcuts import get_object_or_404
from .models import Project, Task

def project_tasks_api(request, project_id):
    project = get_object_or_404(Project, id=project_id)

    # Get top-level tasks (no parent)
    tasks = project.tasks.filter(parent__isnull=True)

    gantt_data = []
    for task in tasks:
        task_dict = task.to_gantt_dict()

        # Add dependencies
        deps = task.dependencies.values_list('depends_on_id', flat=True)
        if deps:
            task_dict['dependencies'] = list(deps)

        gantt_data.append(task_dict)

    return JsonResponse(gantt_data, safe=False)

def update_task_api(request, task_id):
    if request.method != 'PATCH':
        return JsonResponse({'error': 'Method not allowed'}, status=405)

    task = get_object_or_404(Task, id=task_id)

    import json
    data = json.loads(request.body)

    if 'start' in data:
        task.start_date = data['start']
    if 'end' in data:
        task.end_date = data['end']
    if 'progress' in data:
        task.progress = data['progress']
    if 'status' in data:
        task.status = data['status']

    task.save()

    return JsonResponse({'success': True, 'task': task.to_gantt_dict()})</pre>

    <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm);">Django URLs</h4>
    <pre class="ux-code-block" data-lang="python"># urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('api/projects/&lt;int:project_id&gt;/tasks/', views.project_tasks_api, name='project_tasks_api'),
    path('api/tasks/&lt;int:task_id&gt;/', views.update_task_api, name='update_task_api'),
]</pre>
  </div>

</body>
</html>
