---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="App / Page / Drawer">
  <p class="text-base-content/70 mb-8">
    Responsive layout system inspired by Ionic. <code>.header</code>, <code>.content</code>, and <code>.footer</code> are generic structural components that work inside any flex-column container: page, drawer, card, modal, etc. All children go directly inside <code>.page</code> — no wrapper needed.
  </p>

  <!-- Basic Structure -->
  <CodePreview
    title="Basic Structure"
    height="280px"
    semantic={`<div class="app">
  <div class="page">
    <header class="header">
      <div style="font-weight: 600;">Header</div>
    </header>

    <main class="content">
      <div style="padding: 1.5rem;">
        <p>Main scrollable content area</p>
        <p style="margin-top: 0.5rem; opacity: 0.5; font-size: 0.875rem;">The content scrolls while header and footer stay fixed.</p>
      </div>
    </main>

    <footer class="footer">
      <div style="text-align: center; font-size: 0.875rem; width: 100%;">Footer / Tabbar</div>
    </footer>
  </div>
</div>`}
    tailwind={`<div class="flex flex-col h-dvh overflow-hidden bg-base-100">
  <div class="relative flex flex-col flex-1 min-h-0 overflow-hidden">
    <header class="sticky top-0 z-50 shrink-0 bg-base-100 border-b border-base-300">
      <div class="px-4 py-3 font-semibold">Header</div>
    </header>

    <main class="flex-1 min-w-0 overflow-y-auto">
      <div class="p-6">
        <p>Main scrollable content area</p>
      </div>
    </main>

    <footer class="sticky bottom-0 z-50 shrink-0 bg-base-100 border-t border-base-300">
      <div class="px-4 py-3 text-center text-sm">Footer / Tabbar</div>
    </footer>
  </div>
</div>`}
  />

  <!-- Drawer without header/footer (Ionic-style padding) -->
  <CodePreview
    title="Drawer without header/footer"
    height="380px"
    semantic={`<div class="app" x-data="{ drawerOpen: false, drawerCollapsed: false }">
  <div class="page">
    <header class="header">
      <button @click="drawerCollapsed = !drawerCollapsed" style="background:none; border:1px solid var(--color-base-300); border-radius:0.375rem; padding:0.25rem 0.5rem; cursor:pointer; font-size:0.75rem;">
        Toggle Drawer
      </button>
      <div style="font-weight: 600;">My App</div>
    </header>

    <div class="drawer-backdrop" :class="drawerOpen ? 'drawer-backdrop-open' : ''" @click="drawerOpen = false"></div>

    <aside class="drawer drawer-start" :class="{ 'drawer-collapsed': drawerCollapsed, 'drawer-open': drawerOpen }">
      <div class="content" style="padding: 1rem 0.75rem;">
        <nav>
          <a href="#" style="display:block; padding:0.625rem 1rem; border-radius:0.5rem; font-size:0.9375rem;">Home</a>
          <a href="#" style="display:block; padding:0.625rem 1rem; border-radius:0.5rem; font-size:0.9375rem;">Settings</a>
          <a href="#" style="display:block; padding:0.625rem 1rem; border-radius:0.5rem; font-size:0.9375rem;">Profile</a>
          <a href="#" style="display:block; padding:0.625rem 1rem; border-radius:0.5rem; font-size:0.9375rem;">About</a>
        </nav>
      </div>
    </aside>

    <main class="content">
      <div class="header no-border">
        <span style="font-weight: 500;">Dashboard</span>
      </div>
      <div class="content" style="padding: 1rem;">
        <p>Main scrollable area with its own header and footer inside content.</p>
        <p style="margin-top: 0.5rem; opacity: 0.5; font-size: 0.875rem;">The drawer has no header/footer — just padded content like Ionic.</p>
      </div>
      <div class="footer">
        <span style="font-size: 0.75rem; opacity: 0.5;">Footer</span>
      </div>
    </main>

    <footer class="footer">
      <div style="text-align: center; font-size: 0.875rem; width: 100%;">Tabbar</div>
    </footer>
  </div>
</div>`}
    js={`// Desktop: toggle collapse/expand
drawer.classList.toggle('drawer-collapsed');

// Mobile: toggle overlay
drawer.classList.toggle('drawer-open');
backdrop.classList.toggle('drawer-backdrop-open');`}
  />

  <!-- Drawer with header and footer -->
  <CodePreview
    title="Drawer with header & footer"
    height="380px"
    semantic={`<div class="app" x-data="{ drawerOpen: false, drawerCollapsed: false }">
  <div class="page">
    <div class="drawer-backdrop" :class="drawerOpen ? 'drawer-backdrop-open' : ''" @click="drawerOpen = false"></div>

    <aside class="drawer drawer-start" :class="{ 'drawer-collapsed': drawerCollapsed, 'drawer-open': drawerOpen }">
      <div class="header">
        <h2 class="drawer-title">Menu</h2>
      </div>
      <div class="content">
        <nav style="padding: 0.5rem;">
          <a href="#" style="display:block; padding:0.5rem 0.75rem;">Home</a>
          <a href="#" style="display:block; padding:0.5rem 0.75rem;">Settings</a>
          <a href="#" style="display:block; padding:0.5rem 0.75rem;">Profile</a>
        </nav>
      </div>
      <div class="footer">
        <span style="font-size:0.75rem; opacity:0.5;">v3.0</span>
      </div>
    </aside>

    <main class="content" style="padding: 1rem; background: var(--color-base-200);">
      <div class="header no-border" style="background: var(--color-base-100); border-radius: 0.5rem 0.5rem 0 0;">
        <button @click="drawerCollapsed = !drawerCollapsed" style="background:none; border:1px solid var(--color-base-300); border-radius:0.375rem; padding:0.25rem 0.5rem; cursor:pointer; font-size:0.75rem;">
          Toggle Drawer
        </button>
        <span style="font-weight: 500;">Orders</span>
      </div>
      <div class="content" style="padding: 1rem; background: var(--color-base-100);">
        <p>Content area with its own header, content, and footer.</p>
        <p style="margin-top: 0.5rem; opacity: 0.5; font-size: 0.875rem;">The drawer has header + footer. The main content also has nested header/content/footer.</p>
      </div>
      <div class="footer" style="background: var(--color-base-100); border-radius: 0 0 0.5rem 0.5rem;">
        <span style="font-size: 0.75rem; opacity: 0.5;">Footer</span>
      </div>
    </main>
  </div>
</div>`}
    js={`// Desktop: toggle collapse/expand
drawer.classList.toggle('drawer-collapsed');

// Mobile: toggle overlay
drawer.classList.toggle('drawer-open');
backdrop.classList.toggle('drawer-backdrop-open');`}
  />

  <!-- Size Variants -->
  <CodePreview
    title="Drawer Sizes"
    height="320px"
    semantic={`<div class="app" x-data="{ size: '' }">
  <div class="page">
    <aside class="drawer drawer-start" :class="size" style="--drawer-width: 280px;">
      <div class="header">
        <h2 class="drawer-title" x-text="size || 'default (280px)'"></h2>
      </div>
      <div class="content" style="padding: 0.75rem;">
        <nav>
          <a href="#" style="display:block; padding:0.5rem 0.75rem;">Home</a>
          <a href="#" style="display:block; padding:0.5rem 0.75rem;">Settings</a>
        </nav>
      </div>
    </aside>

    <main class="content" style="padding: 1rem;">
      <p style="font-weight: 500; margin-bottom: 0.75rem;">Select drawer size:</p>
      <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
        <button @click="size = 'drawer-sm'" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">sm (220px)</button>
        <button @click="size = ''" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">default (280px)</button>
        <button @click="size = 'drawer-lg'" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">lg (360px)</button>
        <button @click="size = 'drawer-xl'" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">xl (480px)</button>
      </div>
    </main>
  </div>
</div>`}
    js={`// Size classes
drawer.classList.add('drawer-sm');  // 220px
drawer.classList.add('drawer-lg');  // 360px
drawer.classList.add('drawer-xl');  // 480px

// Or custom width
drawer.style.setProperty('--drawer-width', '400px');`}
  />

  <!-- All Positions -->
  <CodePreview
    title="All Drawer Positions"
    height="360px"
    semantic={`<div class="app" x-data="{ pos: 'start', collapsed: true }">
  <div class="page">
    <aside class="drawer drawer-start" :class="{ 'drawer-collapsed': pos !== 'start' || collapsed }" style="--drawer-width: 180px;">
      <div class="header"><h2 class="drawer-title">Left</h2></div>
      <div class="content" style="padding: 0.75rem;">
        <p style="font-size: 0.8125rem;">drawer-start</p>
      </div>
    </aside>

    <aside class="drawer drawer-end" :class="{ 'drawer-collapsed': pos !== 'end' || collapsed }" style="--drawer-width: 180px;">
      <div class="header"><h2 class="drawer-title">Right</h2></div>
      <div class="content" style="padding: 0.75rem;">
        <p style="font-size: 0.8125rem;">drawer-end</p>
      </div>
    </aside>

    <main class="content" style="padding: 1rem;">
      <p style="font-weight: 500; margin-bottom: 0.75rem;">Select position:</p>
      <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
        <button @click="pos = 'start'; collapsed = false" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">Left (start)</button>
        <button @click="pos = 'end'; collapsed = false" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">Right (end)</button>
        <button @click="collapsed = true" style="padding: 0.375rem 0.75rem; border: 1px solid var(--color-base-300); border-radius: 0.375rem; cursor: pointer; background: none; font-size: 0.8125rem;">Close all</button>
      </div>
      <p style="opacity: 0.5; font-size: 0.8125rem;">drawer-top and drawer-bottom also available for horizontal drawers.</p>
    </main>
  </div>
</div>`}
    js={`// Positions
<aside class="drawer drawer-start">  // Left
<aside class="drawer drawer-end">    // Right
<aside class="drawer drawer-top">    // Top
<aside class="drawer drawer-bottom"> // Bottom`}
  />

  <!-- Glass Variant -->
  <CodePreview
    title="Glass Variant"
    height="320px"
    semantic={`<div class="app">
  <div class="page" style="background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <header class="header glass">
      <div style="font-weight: 600; color: white;">Glass Header</div>
    </header>

    <aside class="drawer drawer-start glass" style="--drawer-width: 200px;">
      <div class="header glass no-border">
        <h2 class="drawer-title" style="color: white;">Menu</h2>
      </div>
      <div class="content" style="padding: 0.75rem;">
        <nav>
          <a href="#" style="display:block; padding:0.5rem 0.75rem; color: white;">Home</a>
          <a href="#" style="display:block; padding:0.5rem 0.75rem; color: white;">Settings</a>
        </nav>
      </div>
    </aside>

    <main class="content" style="padding: 1.5rem;">
      <p style="color: white; opacity: 0.9;">Glass morphism applied via the <code style="background: rgba(255,255,255,0.2); padding: 0.125rem 0.375rem; border-radius: 0.25rem; color: white;">.glass</code> modifier class.</p>
      <p style="color: white; opacity: 0.6; font-size: 0.875rem; margin-top: 0.5rem;">Works on header, footer, and drawer.</p>
    </main>

    <footer class="footer glass">
      <span style="font-size: 0.75rem; color: white; opacity: 0.7;">Glass Footer</span>
    </footer>
  </div>
</div>`}
    js={`// Add glass class to any structural component
<header class="header glass">
<footer class="footer glass">
<aside class="drawer drawer-start glass">`}
  />

  <!-- Classes Reference -->
  <div class="mt-8 space-y-4">
    <h2 class="text-xl font-bold">Classes Reference</h2>

    <h3 class="text-base font-semibold mt-6">Generic Structure</h3>
    <p class="text-sm text-base-content/60 mb-2">Work inside any flex-column container: page, drawer, card, modal, sheet...</p>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-base-300">
            <th class="text-left py-2 px-3">Class</th>
            <th class="text-left py-2 px-3">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">header</td><td class="py-2 px-3">Top bar (flex, shrink-0, border-bottom)</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">content</td><td class="py-2 px-3">Scrollable body (flex-1, overflow-y auto)</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">footer</td><td class="py-2 px-3">Bottom bar (flex, shrink-0, border-top)</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">no-border</td><td class="py-2 px-3">Remove border from header/footer</td></tr>
          <tr><td class="py-2 px-3 font-mono text-xs">glass</td><td class="py-2 px-3">Glass morphism variant for header/footer/drawer</td></tr>
        </tbody>
      </table>
    </div>

    <h3 class="text-base font-semibold mt-6">Layout</h3>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-base-300">
            <th class="text-left py-2 px-3">Class</th>
            <th class="text-left py-2 px-3">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">app</td><td class="py-2 px-3">Root container, 100dvh, flex column</td></tr>
          <tr><td class="py-2 px-3 font-mono text-xs">page</td><td class="py-2 px-3">CSS Grid container for header + drawers + content + footer</td></tr>
        </tbody>
      </table>
    </div>

    <h3 class="text-base font-semibold mt-6">Drawer</h3>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-base-300">
            <th class="text-left py-2 px-3">Class</th>
            <th class="text-left py-2 px-3">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer</td><td class="py-2 px-3">Sidebar panel base</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-start</td><td class="py-2 px-3">Left position</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-end</td><td class="py-2 px-3">Right position</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-top</td><td class="py-2 px-3">Top position</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-bottom</td><td class="py-2 px-3">Bottom position</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-title</td><td class="py-2 px-3">Title text styling</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-collapsed</td><td class="py-2 px-3">Desktop: width 0, content expands</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-open</td><td class="py-2 px-3">Mobile: visible as overlay</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">drawer-sm / lg / xl</td><td class="py-2 px-3">Size variants (220/360/480px)</td></tr>
          <tr><td class="py-2 px-3 font-mono text-xs">drawer-backdrop</td><td class="py-2 px-3">Overlay backdrop (mobile)</td></tr>
        </tbody>
      </table>
    </div>

    <h3 class="text-base font-semibold mt-6">Page Context</h3>
    <p class="text-sm text-base-content/60 mb-2">Applied automatically when .header/.footer are direct children of .page</p>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-base-300">
            <th class="text-left py-2 px-3">Selector</th>
            <th class="text-left py-2 px-3">Effect</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">.page > .header</td><td class="py-2 px-3">Full width, sticky, z-index 200</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">.page > .content</td><td class="py-2 px-3">Center column in grid</td></tr>
          <tr class="border-b border-base-300/50"><td class="py-2 px-3 font-mono text-xs">.page > .footer</td><td class="py-2 px-3">Full width, sticky, z-index 200</td></tr>
          <tr><td class="py-2 px-3 font-mono text-xs">safe-area</td><td class="py-2 px-3">Adds safe-area padding (notch devices)</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</DocsLayout>
