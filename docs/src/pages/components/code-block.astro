---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="Code Block">
  <p class="text-base-content/70 mb-6">Syntax-highlighted code display with line numbers, copy button, diff lines, and light/dark themes.</p>

  <CodePreview
    title="Basic Code Block"
    semantic={`<div class="code-block">
  <div class="code-block-header">
    <div class="code-block-title">
      <span class="code-block-lang">js</span>
      <span>app.js</span>
    </div>
    <div class="code-block-actions">
      <button class="code-block-btn">
        <svg xmlns="http://www.w3.org/2000/svg" class="size-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
        Copy
      </button>
    </div>
  </div>
  <div class="code-block-content">
    <div class="code-block-code"><span class="token-keyword">const</span> <span class="token-variable">app</span> <span class="token-operator">=</span> <span class="token-function">express</span><span class="token-punctuation">();</span>

<span class="token-variable">app</span><span class="token-punctuation">.</span><span class="token-function">get</span><span class="token-punctuation">(</span><span class="token-string">'/'</span><span class="token-punctuation">,</span> <span class="token-punctuation">(</span><span class="token-variable">req</span><span class="token-punctuation">,</span> <span class="token-variable">res</span><span class="token-punctuation">)</span> <span class="token-operator">=></span> <span class="token-punctuation">{</span>
  <span class="token-variable">res</span><span class="token-punctuation">.</span><span class="token-function">send</span><span class="token-punctuation">(</span><span class="token-string">'Hello World!'</span><span class="token-punctuation">);</span>
<span class="token-punctuation">}</span><span class="token-punctuation">);</span></div>
  </div>
</div>`}
    tailwind={`<div class="relative overflow-x-auto rounded-box font-mono text-sm leading-relaxed" style="background: #1e1e2e; color: #cdd6f4">
  <div class="flex items-center justify-between px-4 py-3" style="background: #181825; border-bottom: 1px solid #313244">
    <span class="text-xs text-gray-500">app.js</span>
    <button class="text-xs text-gray-500 hover:text-gray-300">Copy</button>
  </div>
  <pre class="p-4 m-0 overflow-visible whitespace-pre bg-transparent"><code>...</code></pre>
</div>`}
    js={`// Copy to clipboard:
// btn.addEventListener('click', async () => {
//   await navigator.clipboard.writeText(codeEl.textContent);
//   btn.classList.add('code-block-btn-copied');
//   btn.textContent = 'Copied!';
//   setTimeout(() => { btn.classList.remove('code-block-btn-copied'); }, 2000);
// });`}
  />

  <CodePreview
    title="With Line Numbers & Highlights"
    semantic={`<div class="code-block">
  <div class="code-block-header">
    <div class="code-block-title"><span class="code-block-lang">py</span></div>
    <div class="code-block-actions">
      <button class="code-block-btn">Copy</button>
    </div>
  </div>
  <div class="code-block-content">
    <div class="code-block-line-numbers">
      <span class="code-block-line-number">1</span>
      <span class="code-block-line-number">2</span>
      <span class="code-block-line-number code-block-line-number-highlight">3</span>
      <span class="code-block-line-number code-block-line-number-highlight">4</span>
      <span class="code-block-line-number">5</span>
    </div>
    <div class="code-block-code"><span class="token-keyword">def</span> <span class="token-function">greet</span><span class="token-punctuation">(</span><span class="token-variable">name</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span>
    <span class="token-comment"># Format greeting</span>
<span class="code-block-line code-block-line-highlight">    <span class="token-variable">message</span> <span class="token-operator">=</span> <span class="token-string">f"Hello, {name}!"</span></span>
<span class="code-block-line code-block-line-highlight">    <span class="token-keyword">return</span> <span class="token-variable">message</span></span>
<span class="token-function">print</span><span class="token-punctuation">(</span><span class="token-function">greet</span><span class="token-punctuation">(</span><span class="token-string">"World"</span><span class="token-punctuation">)</span><span class="token-punctuation">)</span></div>
  </div>
</div>`}
    tailwind={`<!-- Line numbers: separate column with right border, user-select: none
     Highlighted lines: tinted primary background + left border accent -->`}
    js={`// No JavaScript required for static highlighting`}
  />

  <CodePreview
    title="Diff Lines"
    semantic={`<div class="code-block">
  <div class="code-block-content">
    <div class="code-block-code"><span class="code-block-line">  <span class="token-keyword">const</span> config <span class="token-operator">=</span> <span class="token-punctuation">{</span></span>
<span class="code-block-line code-block-line-removed">    port: <span class="token-number">3000</span>,</span>
<span class="code-block-line code-block-line-added">    port: <span class="token-number">8080</span>,</span>
<span class="code-block-line code-block-line-removed">    host: <span class="token-string">'localhost'</span>,</span>
<span class="code-block-line code-block-line-added">    host: <span class="token-string">'0.0.0.0'</span>,</span>
<span class="code-block-line">  <span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div>
  </div>
</div>`}
    tailwind={`<!-- Added lines: green tinted bg + green left border + "+" prefix
     Removed lines: red tinted bg + red left border + "-" prefix -->`}
    js={`// No JavaScript required for diff display`}
  />

  <CodePreview
    title="Light Theme"
    semantic={`<div class="code-block code-block-light">
  <div class="code-block-header">
    <div class="code-block-title"><span class="code-block-lang">html</span></div>
  </div>
  <div class="code-block-content">
    <div class="code-block-code"><span class="token-tag">&lt;div</span> <span class="token-attr-name">class</span><span class="token-operator">=</span><span class="token-attr-value">"card"</span><span class="token-tag">&gt;</span>
  <span class="token-tag">&lt;h2&gt;</span>Hello<span class="token-tag">&lt;/h2&gt;</span>
<span class="token-tag">&lt;/div&gt;</span></div>
  </div>
</div>`}
    tailwind={`<!-- Light theme: white background, dark text, adjusted syntax colors -->`}
    js={`// No JavaScript required`}
  />

  <div class="overflow-x-auto mt-8">
    <table class="table">
      <thead><tr><th>Class</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>.code-block</code></td><td>Base container (dark theme)</td></tr>
        <tr><td><code>.code-block-header</code></td><td>Header with lang badge + actions</td></tr>
        <tr><td><code>.code-block-title</code></td><td>File name / title area</td></tr>
        <tr><td><code>.code-block-lang</code></td><td>Language badge</td></tr>
        <tr><td><code>.code-block-actions</code></td><td>Action buttons container</td></tr>
        <tr><td><code>.code-block-btn</code></td><td>Action button (copy)</td></tr>
        <tr><td><code>.code-block-btn-copied</code></td><td>Copied success state</td></tr>
        <tr><td><code>.code-block-content</code></td><td>Scrollable content area</td></tr>
        <tr><td><code>.code-block-line-numbers</code></td><td>Line numbers column</td></tr>
        <tr><td><code>.code-block-line-number-highlight</code></td><td>Highlighted line number</td></tr>
        <tr><td><code>.code-block-code</code></td><td>Code content area</td></tr>
        <tr><td><code>.code-block-line-highlight</code></td><td>Highlighted code line</td></tr>
        <tr><td><code>.code-block-line-added</code></td><td>Diff: added line (green)</td></tr>
        <tr><td><code>.code-block-line-removed</code></td><td>Diff: removed line (red)</td></tr>
        <tr><td><code>.code-block-sm</code></td><td>Small font size</td></tr>
        <tr><td><code>.code-block-lg</code></td><td>Large font size</td></tr>
        <tr><td><code>.code-block-light</code></td><td>Light theme variant</td></tr>
        <tr><td><code>.code-block-collapsed</code></td><td>Collapsed with gradient fade</td></tr>
        <tr><td><code>.code-block-expand</code></td><td>Expand button</td></tr>
        <tr><td><code>.code-inline</code></td><td>Inline code span</td></tr>
        <tr><td><code>.code-block.glass</code></td><td>Glass morphism variant</td></tr>
        <tr><td><code>.token-*</code></td><td>Syntax token colors (keyword, string, etc.)</td></tr>
      </tbody>
    </table>
  </div>
</DocsLayout>
