---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="Command Palette">
  <p class="text-base-content/70 mb-6">⌘K-style command palette with search, grouped results, keyboard shortcuts, and mobile support.</p>

  <CodePreview
    title="Basic Command Palette"
    semantic={`<!-- Trigger -->
<button class="btn" onclick="document.getElementById('cmd-demo').dataset.state='open'">
  <kbd class="text-xs opacity-60">⌘K</kbd> Search...
</button>

<!-- Command Palette -->
<div class="command-backdrop" id="cmd-demo" data-state="closed">
  <div class="command">
    <div class="command-search">
      <svg class="command-search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input class="command-input" placeholder="Type a command or search..." />
      <div class="command-shortcut">
        <span class="command-key">esc</span>
      </div>
    </div>
    <div class="command-results">
      <div class="command-group">
        <div class="command-group-title">Actions</div>
        <ul class="command-list">
          <li class="command-item command-item-active">
            <div class="command-item-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg></div>
            <div class="command-item-content">
              <div class="command-item-title">New File</div>
              <div class="command-item-description">Create a new document</div>
            </div>
            <div class="command-item-shortcut"><span class="command-key">⌘</span><span class="command-key">N</span></div>
          </li>
          <li class="command-item">
            <div class="command-item-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></div>
            <div class="command-item-content">
              <div class="command-item-title">Edit Settings</div>
            </div>
            <div class="command-item-shortcut"><span class="command-key">⌘</span><span class="command-key">,</span></div>
          </li>
        </ul>
      </div>
      <div class="command-group">
        <div class="command-group-title">Recent</div>
        <ul class="command-list">
          <li class="command-item">
            <div class="command-item-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/></svg></div>
            <div class="command-item-content">
              <div class="command-item-title">package.json</div>
            </div>
            <span class="command-recent">recent</span>
          </li>
        </ul>
      </div>
    </div>
    <div class="command-footer">
      <div class="command-footer-hints">
        <div class="command-footer-hint"><span class="command-key">↑↓</span> navigate</div>
        <div class="command-footer-hint"><span class="command-key">↵</span> select</div>
        <div class="command-footer-hint"><span class="command-key">esc</span> close</div>
      </div>
    </div>
  </div>
</div>`}
    tailwind={`<div class="fixed inset-0 z-400 bg-black/50">
  <div class="fixed top-[15%] left-1/2 -translate-x-1/2 w-[95%] max-w-[640px] max-h-[70dvh] bg-base-100 rounded-box shadow-2xl overflow-hidden">
    <div class="flex items-center gap-3 px-4 py-3 border-b border-base-300">
      <svg class="size-5 text-base-content/40" ...></svg>
      <input class="flex-1 h-10 text-lg bg-transparent border-none outline-none" placeholder="Type a command..." />
      <kbd class="px-1.5 py-0.5 text-xs bg-base-200 border border-base-300 rounded">esc</kbd>
    </div>
    <div class="max-h-[calc(70dvh-80px)] overflow-y-auto">
      <!-- Groups and items... -->
    </div>
  </div>
</div>`}
    js={`// Open: backdrop.dataset.state = 'open';
// Close: backdrop.dataset.state = 'closed';
// Keyboard shortcut:
// document.addEventListener('keydown', (e) => {
//   if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
//     e.preventDefault();
//     backdrop.dataset.state = 'open';
//   }
// });`}
  />

  <CodePreview
    title="Empty & Loading States"
    semantic={`<!-- Empty state -->
<div class="command-empty">
  <svg class="command-empty-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
  <div class="command-empty-title">No results found</div>
  <div class="command-empty-description">Try a different search term</div>
</div>

<!-- Loading state -->
<div class="command-loading">
  <div class="command-loading-spinner"></div>
</div>`}
    tailwind={`<!-- Empty: centered flex column with muted icon + text
     Loading: centered spinner (24px border animation) -->`}
    js={`// Show loading while fetching results, then swap to list or empty state`}
  />

  <div class="overflow-x-auto mt-8">
    <table class="table">
      <thead><tr><th>Class</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>.command-backdrop</code></td><td>Overlay (uses data-state)</td></tr>
        <tr><td><code>.command</code></td><td>Palette container (centered)</td></tr>
        <tr><td><code>.command-open</code></td><td>Visible state (standalone)</td></tr>
        <tr><td><code>.command-search</code></td><td>Search input area</td></tr>
        <tr><td><code>.command-search-icon</code></td><td>Search icon (20px)</td></tr>
        <tr><td><code>.command-input</code></td><td>Text input field</td></tr>
        <tr><td><code>.command-shortcut</code></td><td>Shortcut keys display</td></tr>
        <tr><td><code>.command-key</code></td><td>Keyboard key badge</td></tr>
        <tr><td><code>.command-results</code></td><td>Scrollable results</td></tr>
        <tr><td><code>.command-group</code></td><td>Result group</td></tr>
        <tr><td><code>.command-group-title</code></td><td>Group label</td></tr>
        <tr><td><code>.command-item</code></td><td>Result item</td></tr>
        <tr><td><code>.command-item-active</code></td><td>Highlighted item</td></tr>
        <tr><td><code>.command-item-icon</code></td><td>Item icon (32px rounded)</td></tr>
        <tr><td><code>.command-item-title</code></td><td>Item title</td></tr>
        <tr><td><code>.command-item-description</code></td><td>Item subtitle</td></tr>
        <tr><td><code>.command-item-shortcut</code></td><td>Item shortcut keys</td></tr>
        <tr><td><code>.command-highlight</code></td><td>Search match highlight</td></tr>
        <tr><td><code>.command-footer</code></td><td>Footer with hints</td></tr>
        <tr><td><code>.command-empty</code></td><td>No results state</td></tr>
        <tr><td><code>.command-loading</code></td><td>Loading spinner</td></tr>
        <tr><td><code>.command-recent</code></td><td>Recent badge</td></tr>
        <tr><td><code>.command.glass</code></td><td>Glass morphism variant</td></tr>
      </tbody>
    </table>
  </div>
</DocsLayout>
