---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="Swipe">
  <p class="text-base-content/70 mb-6">Swipe-to-reveal action overlays, drag handles, draggable items, and drop zones for touch-based list interactions.</p>

  <CodePreview
    title="Swipe Actions"
    semantic={`<div class="swipe-container" style="border:1px solid var(--color-base-200); border-radius:var(--radius-box);">
  <!-- Left actions (behind content) -->
  <div class="swipe-actions swipe-actions-start">
    <div class="swipe-action swipe-action-pin">
      <svg class="swipe-action-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 17v5M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>
    </div>
  </div>
  <!-- Right actions -->
  <div class="swipe-actions swipe-actions-end">
    <div class="swipe-action swipe-action-archive">Archive</div>
    <div class="swipe-action swipe-action-delete">Delete</div>
  </div>
  <!-- Visible content -->
  <div class="swipe-content" style="padding:1rem;">
    <div class="flex items-center gap-3">
      <div class="avatar avatar-sm avatar-placeholder">JD</div>
      <div>
        <div class="font-medium text-base-content">John Doe</div>
        <div class="text-sm text-base-content/60">Swipe left or right to reveal actions</div>
      </div>
    </div>
  </div>
</div>`}
    tailwind={`<div class="relative overflow-hidden" style="border:1px solid var(--color-base-200); border-radius:var(--radius-box); touch-action:pan-y;">
  <!-- Left actions -->
  <div class="absolute top-0 bottom-0 left-0 flex items-stretch" style="transform:translateX(-100%);">
    <div class="flex items-center justify-center min-w-20 px-6 bg-primary text-white font-medium">Pin</div>
  </div>
  <!-- Right actions -->
  <div class="absolute top-0 bottom-0 right-0 flex items-stretch" style="transform:translateX(100%);">
    <div class="flex items-center justify-center min-w-20 px-6 bg-warning text-white font-medium">Archive</div>
    <div class="flex items-center justify-center min-w-20 px-6 bg-error text-white font-medium">Delete</div>
  </div>
  <!-- Content -->
  <div class="relative bg-base-100 p-4">
    <div class="flex items-center gap-3">
      <div class="size-8 rounded-full bg-primary text-primary-content flex items-center justify-center text-xs font-semibold">JD</div>
      <div>
        <div class="font-medium text-base-content">John Doe</div>
        <div class="text-sm text-base-content/60">Swipe left or right to reveal actions</div>
      </div>
    </div>
  </div>
</div>`}
    js={`// Basic swipe handler:
// const content = el.querySelector('.swipe-content');
// let startX = 0;
// content.addEventListener('touchstart', (e) => &#123;
//   startX = e.touches[0].clientX;
//   content.classList.add('swipe-content-swiping');
// &#125;);
// content.addEventListener('touchmove', (e) => &#123;
//   const dx = e.touches[0].clientX - startX;
//   content.style.transform = \`translateX($&#123;dx&#125;px)\`;
// &#125;);
// content.addEventListener('touchend', () => &#123;
//   content.classList.remove('swipe-content-swiping');
//   content.style.transform = '';
// &#125;);`}
  />

  <CodePreview
    title="Drag Handle"
    semantic={`<div class="flex items-center gap-2 p-3" style="border:1px solid var(--color-base-200); border-radius:var(--radius-field);">
  <div class="drag-handle">
    <svg class="drag-handle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><circle cx="9" cy="6" r="1.5"/><circle cx="15" cy="6" r="1.5"/><circle cx="9" cy="12" r="1.5"/><circle cx="15" cy="12" r="1.5"/><circle cx="9" cy="18" r="1.5"/><circle cx="15" cy="18" r="1.5"/></svg>
  </div>
  <span class="text-base-content">Draggable list item</span>
</div>`}
    tailwind={`<div class="flex items-center gap-2 p-3" style="border:1px solid var(--color-base-200); border-radius:var(--radius-field);">
  <div class="flex items-center justify-center p-4 text-base-content/30 cursor-grab" style="touch-action:none;">
    <svg class="size-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><circle cx="9" cy="6" r="1.5"/><circle cx="15" cy="6" r="1.5"/><circle cx="9" cy="12" r="1.5"/><circle cx="15" cy="12" r="1.5"/><circle cx="9" cy="18" r="1.5"/><circle cx="15" cy="18" r="1.5"/></svg>
  </div>
  <span class="text-base-content">Draggable list item</span>
</div>`}
    js={`// Drag-and-drop with HTML5 API:
// handle.addEventListener('mousedown', () => &#123;
//   item.setAttribute('draggable', 'true');
// &#125;);
// item.addEventListener('dragend', () => &#123;
//   item.removeAttribute('draggable');
// &#125;);`}
  />

  <CodePreview
    title="Draggable States"
    semantic={`<div class="flex flex-col gap-2">
  <div class="draggable p-3 rounded-field bg-base-100" style="border:1px solid var(--color-base-200);">
    Normal item
  </div>
  <div class="draggable draggable-dragging p-3 rounded-field bg-base-100" style="border:1px solid var(--color-base-200);">
    Dragging (elevated shadow, slightly transparent)
  </div>
  <div class="draggable draggable-over p-3 rounded-field" style="border:1px solid var(--color-base-200);">
    Drop target (tinted background)
  </div>
</div>`}
    tailwind={`<div class="flex flex-col gap-2">
  <div class="p-3 rounded-field bg-base-100" style="border:1px solid var(--color-base-200); user-select:none;">
    Normal item
  </div>
  <div class="p-3 rounded-field bg-base-100 opacity-80 z-[100]" style="border:1px solid var(--color-base-200); box-shadow:0 20px 60px rgba(0,0,0,0.15); user-select:none;">
    Dragging (elevated shadow, slightly transparent)
  </div>
  <div class="p-3 rounded-field" style="border:1px solid var(--color-base-200); background-color:color-mix(in oklch, var(--color-primary) 8%, transparent); user-select:none;">
    Drop target (tinted background)
  </div>
</div>`}
    js={`// Toggle dragging state:
// item.classList.add('draggable-dragging');
// target.classList.add('draggable-over');`}
  />

  <div class="overflow-x-auto mt-8">
    <table class="table">
      <thead><tr><th>Class</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>.swipe-container</code></td><td>Wrapper with overflow hidden and pan-y touch</td></tr>
        <tr><td><code>.swipe-content</code></td><td>Visible row that slides on swipe</td></tr>
        <tr><td><code>.swipe-content-swiping</code></td><td>Disables transition during active drag</td></tr>
        <tr><td><code>.swipe-actions</code></td><td>Hidden action buttons behind content</td></tr>
        <tr><td><code>.swipe-actions-start</code></td><td>Actions on the left side</td></tr>
        <tr><td><code>.swipe-actions-end</code></td><td>Actions on the right side</td></tr>
        <tr><td><code>.swipe-action</code></td><td>Individual action button</td></tr>
        <tr><td><code>.swipe-action-delete</code></td><td>Red/error delete action</td></tr>
        <tr><td><code>.swipe-action-archive</code></td><td>Yellow/warning archive action</td></tr>
        <tr><td><code>.swipe-action-pin</code></td><td>Blue/primary pin action</td></tr>
        <tr><td><code>.swipe-action-more</code></td><td>Neutral more action</td></tr>
        <tr><td><code>.drag-handle</code></td><td>Grip handle for drag-and-drop</td></tr>
        <tr><td><code>.draggable</code></td><td>Draggable item base</td></tr>
        <tr><td><code>.draggable-dragging</code></td><td>Elevated shadow + opacity while dragging</td></tr>
        <tr><td><code>.draggable-over</code></td><td>Tinted background on drop target</td></tr>
        <tr><td><code>.drop-zone</code></td><td>Drop zone base</td></tr>
        <tr><td><code>.drop-zone-active</code></td><td>Highlighted when item is dragged over</td></tr>
        <tr><td><code>.gesture-feedback</code></td><td>Centered toast for gesture feedback</td></tr>
        <tr><td><code>.gesture-feedback-visible</code></td><td>Show the feedback toast</td></tr>
      </tbody>
    </table>
  </div>
</DocsLayout>
