---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="OTP Input">
  <p class="text-base-content/70 mb-6">One-time password code entry with individual fields, separator, states, underline/rounded variants, and resend timer.</p>

  <CodePreview
    title="Basic OTP Input"
    semantic={`<div class="otp">
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="4" />
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="2" />
  <input class="otp-field" type="text" maxlength="1" value="" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
</div>`}
    tailwind={`<div class="inline-flex gap-2">
  <input class="w-12 h-14 text-center text-2xl font-semibold border-[1.5px] border-primary bg-base-200 rounded-field outline-none caret-primary" type="text" maxlength="1" value="4" />
  <input class="w-12 h-14 text-center text-2xl font-semibold border-[1.5px] border-primary bg-base-200 rounded-field outline-none caret-primary" type="text" maxlength="1" value="2" />
  <input class="w-12 h-14 text-center text-2xl font-semibold border-[1.5px] border-base-300 bg-base-100 rounded-field outline-none focus:border-primary focus:ring-3 focus:ring-primary/15 caret-primary" type="text" maxlength="1" />
  <!-- 3 more fields... -->
</div>`}
    js={`// Auto-advance on input:
// fields.forEach((field, i) => {
//   field.addEventListener('input', () => {
//     if (field.value && i < fields.length - 1) fields[i + 1].focus();
//   });
//   field.addEventListener('keydown', (e) => {
//     if (e.key === 'Backspace' && !field.value && i > 0) fields[i - 1].focus();
//   });
// });`}
  />

  <CodePreview
    title="With Separator"
    semantic={`<div class="otp">
  <input class="otp-field" type="text" maxlength="1" value="1" />
  <input class="otp-field" type="text" maxlength="1" value="2" />
  <input class="otp-field" type="text" maxlength="1" value="3" />
  <span class="otp-separator">â€”</span>
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
</div>`}
    tailwind={`<!-- Separator: 16px wide flex center, muted text -->`}
    js={`// No JavaScript required for static display`}
  />

  <CodePreview
    title="States"
    semantic={`<!-- Success -->
<div class="otp otp-success mb-4">
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="1" />
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="2" />
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="3" />
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="4" />
</div>

<!-- Error (shakes) -->
<div class="otp otp-error mb-4">
  <input class="otp-field" type="text" maxlength="1" value="9" />
  <input class="otp-field" type="text" maxlength="1" value="9" />
  <input class="otp-field" type="text" maxlength="1" value="9" />
  <input class="otp-field" type="text" maxlength="1" value="9" />
</div>

<!-- Disabled -->
<div class="otp otp-disabled">
  <input class="otp-field" type="text" maxlength="1" disabled />
  <input class="otp-field" type="text" maxlength="1" disabled />
  <input class="otp-field" type="text" maxlength="1" disabled />
  <input class="otp-field" type="text" maxlength="1" disabled />
</div>`}
    tailwind={`<!-- Success: green border. Error: red border + shake animation. Disabled: opacity 0.6 -->`}
    js={`// Shake animation plays automatically on .otp-error`}
  />

  <CodePreview
    title="Variants & Sizes"
    semantic={`<!-- Underline variant -->
<div class="otp otp-underline mb-4">
  <input class="otp-field" type="text" maxlength="1" value="A" />
  <input class="otp-field" type="text" maxlength="1" value="B" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
</div>

<!-- Rounded variant -->
<div class="otp otp-rounded mb-4">
  <input class="otp-field otp-field-filled" type="text" maxlength="1" value="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
</div>

<!-- Small -->
<div class="otp otp-sm mb-4">
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
</div>

<!-- Large -->
<div class="otp otp-lg">
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
  <input class="otp-field" type="text" maxlength="1" />
</div>`}
    tailwind={`<!-- Underline: bottom border only, no radius, transparent bg
     Rounded: border-radius 50%, square aspect
     sm: 40x48px, lg: 56x64px -->`}
    js={`// No JavaScript required for variants`}
  />

  <CodePreview
    title="With Helper & Resend"
    semantic={`<div class="otp-wrapper">
  <div class="otp">
    <input class="otp-field" type="text" maxlength="1" />
    <input class="otp-field" type="text" maxlength="1" />
    <input class="otp-field" type="text" maxlength="1" />
    <input class="otp-field" type="text" maxlength="1" />
    <input class="otp-field" type="text" maxlength="1" />
    <input class="otp-field" type="text" maxlength="1" />
  </div>
  <div class="otp-helper">Enter the 6-digit code sent to your phone</div>
  <div class="otp-resend">
    Didn't receive the code?
    <button class="otp-resend-btn" disabled>Resend in 45s</button>
  </div>
</div>`}
    tailwind={`<!-- Helper text: centered, muted. Resend: underlined link, disabled while counting -->`}
    js={`// Countdown timer:
// let seconds = 60;
// const timer = setInterval(() => {
//   seconds--;
//   btn.textContent = 'Resend in ' + seconds + 's';
//   if (seconds <= 0) { clearInterval(timer); btn.disabled = false; btn.textContent = 'Resend'; }
// }, 1000);`}
  />

  <div class="overflow-x-auto mt-8">
    <table class="table">
      <thead><tr><th>Class</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>.otp</code></td><td>Container (inline-flex)</td></tr>
        <tr><td><code>.otp-field</code></td><td>Individual input (48x56px)</td></tr>
        <tr><td><code>.otp-field-filled</code></td><td>Filled field (tinted bg)</td></tr>
        <tr><td><code>.otp-separator</code></td><td>Dash between groups</td></tr>
        <tr><td><code>.otp-sm</code></td><td>Small (40x48px)</td></tr>
        <tr><td><code>.otp-lg</code></td><td>Large (56x64px)</td></tr>
        <tr><td><code>.otp-success</code></td><td>Success state (green)</td></tr>
        <tr><td><code>.otp-error</code></td><td>Error state (red + shake)</td></tr>
        <tr><td><code>.otp-disabled</code></td><td>Disabled state</td></tr>
        <tr><td><code>.otp-loading</code></td><td>Loading state</td></tr>
        <tr><td><code>.otp-underline</code></td><td>Underline variant</td></tr>
        <tr><td><code>.otp-rounded</code></td><td>Circular fields</td></tr>
        <tr><td><code>.otp-secure</code></td><td>Masked (dots) input</td></tr>
        <tr><td><code>.otp-wrapper</code></td><td>Wrapper with helper text</td></tr>
        <tr><td><code>.otp-helper</code></td><td>Helper text</td></tr>
        <tr><td><code>.otp-helper-error</code></td><td>Error helper text</td></tr>
        <tr><td><code>.otp-helper-success</code></td><td>Success helper text</td></tr>
        <tr><td><code>.otp-resend</code></td><td>Resend timer area</td></tr>
        <tr><td><code>.otp-resend-btn</code></td><td>Resend button</td></tr>
        <tr><td><code>.otp.glass</code></td><td>Glass morphism variant</td></tr>
      </tbody>
    </table>
  </div>
</DocsLayout>
