---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="Currency Input">
  <p class="text-base-content/70 mb-6">Formatted currency input with prefix/suffix symbol, sizes, display mode, and validation states.</p>

  <CodePreview
    title="Prefix Symbol"
    semantic={`<div class="currency-input currency-input-prefix">
  <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
  <input class="input" type="text" inputmode="decimal" placeholder="0.00" value="1,250.00" />
</div>`}
    tailwind={`<div class="relative inline-flex items-center w-full">
  <span class="absolute left-3 flex items-center justify-center h-full min-w-8 text-base-content/60 font-medium pointer-events-none select-none">$</span>
  <input class="input pl-10 tabular-nums" type="text" inputmode="decimal" placeholder="0.00" value="1,250.00" />
</div>`}
    js={`// Format on blur:
// input.addEventListener('blur', () => {
//   const val = parseFloat(input.value.replace(/[^0-9.-]/g, ''));
//   if (!isNaN(val)) input.value = val.toLocaleString('en-US', { minimumFractionDigits: 2 });
// });`}
  />

  <CodePreview
    title="Suffix Symbol"
    semantic={`<div class="currency-input currency-input-suffix">
  <input class="input" type="text" inputmode="decimal" placeholder="0.00" value="1,250.00" />
  <span class="currency-input-symbol currency-input-symbol-suffix">EUR</span>
</div>`}
    tailwind={`<div class="relative inline-flex items-center w-full">
  <input class="input pr-14 tabular-nums" type="text" inputmode="decimal" placeholder="0.00" value="1,250.00" />
  <span class="absolute right-3 flex items-center justify-center h-full min-w-8 text-base-content/60 font-medium pointer-events-none select-none">EUR</span>
</div>`}
    js={`// No JavaScript required for static display`}
  />

  <CodePreview
    title="Sizes"
    semantic={`<!-- Small -->
<div class="currency-input currency-input-prefix currency-input-sm mb-3">
  <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
  <input class="input" type="text" inputmode="decimal" placeholder="0.00" />
</div>

<!-- Default -->
<div class="currency-input currency-input-prefix mb-3">
  <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
  <input class="input" type="text" inputmode="decimal" placeholder="0.00" />
</div>

<!-- Large -->
<div class="currency-input currency-input-prefix currency-input-lg">
  <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
  <input class="input" type="text" inputmode="decimal" placeholder="0.00" />
</div>`}
    tailwind={`<!-- Small -->
<div class="relative inline-flex items-center w-full mb-3">
  <span class="absolute left-3 flex items-center h-full text-sm text-base-content/60 font-medium pointer-events-none">$</span>
  <input class="input pl-8 h-9 text-sm tabular-nums" type="text" inputmode="decimal" placeholder="0.00" />
</div>

<!-- Default -->
<div class="relative inline-flex items-center w-full mb-3">
  <span class="absolute left-3 flex items-center h-full text-base-content/60 font-medium pointer-events-none">$</span>
  <input class="input pl-10 tabular-nums" type="text" inputmode="decimal" placeholder="0.00" />
</div>

<!-- Large -->
<div class="relative inline-flex items-center w-full">
  <span class="absolute left-3 flex items-center h-full text-lg text-base-content/60 font-medium pointer-events-none">$</span>
  <input class="input pl-12 h-[3.25rem] text-lg tabular-nums" type="text" inputmode="decimal" placeholder="0.00" />
</div>`}
    js={`// No JavaScript required for sizing`}
  />

  <CodePreview
    title="Text Alignment"
    semantic={`<div class="currency-input currency-input-prefix currency-input-align-right">
  <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
  <input class="input" type="text" inputmode="decimal" value="9,999.99" />
</div>`}
    tailwind={`<div class="relative inline-flex items-center w-full">
  <span class="absolute left-3 flex items-center h-full text-base-content/60 font-medium pointer-events-none">$</span>
  <input class="input pl-10 text-right tabular-nums" type="text" inputmode="decimal" value="9,999.99" />
</div>`}
    js={`// No JavaScript required`}
  />

  <CodePreview
    title="Display Mode"
    semantic={`<div class="currency-input currency-input-display currency-input-prefix">
  <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
  <input class="input" type="text" value="24,500.00" readonly />
</div>`}
    tailwind={`<div class="inline-flex items-center text-3xl font-semibold">
  <span class="text-xl font-normal mr-1 text-base-content/60">$</span>
  <input class="h-auto p-0 border-none bg-transparent text-3xl font-semibold outline-none tabular-nums" type="text" value="24,500.00" readonly />
</div>`}
    js={`// No JavaScript required â€” read-only display`}
  />

  <CodePreview
    title="Validation States"
    semantic={`<!-- Error -->
<div class="currency-input-field mb-4">
  <label class="currency-input-label">Amount</label>
  <div class="currency-input currency-input-prefix currency-input-error">
    <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
    <input class="input" type="text" inputmode="decimal" value="-50" />
  </div>
  <span class="currency-input-helper currency-input-helper-error">Amount must be positive</span>
</div>

<!-- Success -->
<div class="currency-input-field">
  <label class="currency-input-label">Amount</label>
  <div class="currency-input currency-input-prefix currency-input-success">
    <span class="currency-input-symbol currency-input-symbol-prefix">$</span>
    <input class="input" type="text" inputmode="decimal" value="100.00" />
  </div>
  <span class="currency-input-helper">Looks good!</span>
</div>`}
    tailwind={`<!-- Error -->
<div class="flex flex-col gap-1 mb-4">
  <label class="text-sm font-medium text-base-content">Amount</label>
  <div class="relative inline-flex items-center w-full">
    <span class="absolute left-3 flex items-center h-full text-base-content/60 font-medium pointer-events-none">$</span>
    <input class="input pl-10 tabular-nums border-error focus:ring-3 focus:ring-error/15" type="text" inputmode="decimal" value="-50" />
  </div>
  <span class="text-xs text-error">Amount must be positive</span>
</div>

<!-- Success -->
<div class="flex flex-col gap-1">
  <label class="text-sm font-medium text-base-content">Amount</label>
  <div class="relative inline-flex items-center w-full">
    <span class="absolute left-3 flex items-center h-full text-base-content/60 font-medium pointer-events-none">$</span>
    <input class="input pl-10 tabular-nums border-success focus:ring-3 focus:ring-success/15" type="text" inputmode="decimal" value="100.00" />
  </div>
  <span class="text-xs text-base-content/60">Looks good!</span>
</div>`}
    js={`// Validate and toggle error:
// if (val < 0) wrapper.classList.add('currency-input-error');
// else wrapper.classList.remove('currency-input-error');`}
  />

  <div class="overflow-x-auto mt-8">
    <table class="table">
      <thead><tr><th>Class</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>.currency-input</code></td><td>Container (inline-flex)</td></tr>
        <tr><td><code>.currency-input-symbol</code></td><td>Currency symbol element</td></tr>
        <tr><td><code>.currency-input-symbol-prefix</code></td><td>Left-aligned symbol</td></tr>
        <tr><td><code>.currency-input-symbol-suffix</code></td><td>Right-aligned symbol</td></tr>
        <tr><td><code>.currency-input-prefix</code></td><td>Wrapper modifier for prefix padding</td></tr>
        <tr><td><code>.currency-input-suffix</code></td><td>Wrapper modifier for suffix padding</td></tr>
        <tr><td><code>.currency-input-sm</code></td><td>Small size</td></tr>
        <tr><td><code>.currency-input-lg</code></td><td>Large size</td></tr>
        <tr><td><code>.currency-input-align-left</code></td><td>Left-align text</td></tr>
        <tr><td><code>.currency-input-align-center</code></td><td>Center-align text</td></tr>
        <tr><td><code>.currency-input-align-right</code></td><td>Right-align text</td></tr>
        <tr><td><code>.currency-input-display</code></td><td>Large read-only display mode</td></tr>
        <tr><td><code>.currency-input-error</code></td><td>Error state</td></tr>
        <tr><td><code>.currency-input-success</code></td><td>Success state</td></tr>
        <tr><td><code>.currency-input-field</code></td><td>Field wrapper (label + helper)</td></tr>
        <tr><td><code>.currency-input-label</code></td><td>Field label</td></tr>
        <tr><td><code>.currency-input-helper</code></td><td>Helper text</td></tr>
        <tr><td><code>.currency-input-helper-error</code></td><td>Error helper text</td></tr>
        <tr><td><code>.currency-input.glass</code></td><td>Glass morphism variant</td></tr>
      </tbody>
    </table>
  </div>
</DocsLayout>
