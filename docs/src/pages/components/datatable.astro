---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="DataTable">
  <p class="text-base-content/70 mb-6">Full-featured data table with header, toolbar, sorting, pagination, row selection, and expandable rows. Responsive card view on mobile.</p>

  <CodePreview
    title="Basic DataTable"
    semantic={`<div class="datatable datatable-bordered">
  <div class="datatable-header">
    <div>
      <h3 class="datatable-title">Users</h3>
      <p class="datatable-subtitle">Manage your team members</p>
    </div>
    <div class="datatable-actions">
      <button class="btn btn-sm color-primary">Add User</button>
    </div>
  </div>
  <div class="datatable-body">
    <table class="datatable-table">
      <thead class="datatable-thead">
        <tr>
          <th class="datatable-th datatable-th-sortable">Name</th>
          <th class="datatable-th datatable-th-sortable">Email</th>
          <th class="datatable-th">Role</th>
          <th class="datatable-th datatable-th-right">Status</th>
        </tr>
      </thead>
      <tbody class="datatable-tbody">
        <tr class="datatable-tr">
          <td class="datatable-td">John Doe</td>
          <td class="datatable-td">john@example.com</td>
          <td class="datatable-td">Admin</td>
          <td class="datatable-td datatable-td-right"><span class="badge color-success badge-sm">Active</span></td>
        </tr>
        <tr class="datatable-tr">
          <td class="datatable-td">Jane Smith</td>
          <td class="datatable-td">jane@example.com</td>
          <td class="datatable-td">Editor</td>
          <td class="datatable-td datatable-td-right"><span class="badge color-success badge-sm">Active</span></td>
        </tr>
        <tr class="datatable-tr">
          <td class="datatable-td">Bob Wilson</td>
          <td class="datatable-td">bob@example.com</td>
          <td class="datatable-td">Viewer</td>
          <td class="datatable-td datatable-td-right"><span class="badge color-warning badge-sm">Pending</span></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="datatable-footer">
    <span class="datatable-info">Showing 1-3 of 3</span>
    <nav class="pagination pagination-sm">
      <button class="pagination-btn pagination-prev" disabled><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" /></svg></button>
      <button class="pagination-btn pagination-active">1</button>
      <button class="pagination-btn pagination-next" disabled><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg></button>
    </nav>
  </div>
</div>`}
    tailwind={`<!-- DataTable is complex — use semantic classes for best DX.
     The structure is: datatable > header + toolbar + body(table) + footer -->`}
    js={`// Sorting
document.querySelectorAll('.datatable-th-sortable').forEach(th => {
  th.addEventListener('click', () => {
    // Toggle sorted class
    th.classList.toggle('datatable-th-sorted');
    // Your sort logic here
  });
});`}
    height="280px"
  />

  <CodePreview
    title="With Toolbar & Search"
    semantic={`<div class="datatable datatable-bordered">
  <div class="datatable-toolbar">
    <div class="datatable-toolbar-start">
      <input class="input input-sm" placeholder="Search..." style="width: 200px" />
    </div>
    <div class="datatable-toolbar-end">
      <button class="btn btn-sm btn-outline">Filter</button>
      <button class="btn btn-sm btn-outline">Export</button>
    </div>
  </div>
  <div class="datatable-body">
    <table class="datatable-table">
      <thead class="datatable-thead">
        <tr>
          <th class="datatable-th datatable-th-checkbox"><input type="checkbox" class="checkbox checkbox-sm" /></th>
          <th class="datatable-th datatable-th-sortable datatable-th-sorted">Name <span class="datatable-sort-icon">↑</span></th>
          <th class="datatable-th">Email</th>
          <th class="datatable-th datatable-th-actions">Actions</th>
        </tr>
      </thead>
      <tbody class="datatable-tbody">
        <tr class="datatable-tr">
          <td class="datatable-td datatable-td-checkbox"><input type="checkbox" class="checkbox checkbox-sm" /></td>
          <td class="datatable-td">Alice Brown</td>
          <td class="datatable-td">alice@example.com</td>
          <td class="datatable-td datatable-td-actions">
            <div class="datatable-row-actions">
              <button class="datatable-row-action"><svg class="size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Z" /></svg></button>
              <button class="datatable-row-action datatable-row-action-danger"><svg class="size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg></button>
            </div>
          </td>
        </tr>
        <tr class="datatable-tr datatable-tr-selected">
          <td class="datatable-td datatable-td-checkbox"><input type="checkbox" class="checkbox checkbox-sm" checked /></td>
          <td class="datatable-td">Charlie Davis</td>
          <td class="datatable-td">charlie@example.com</td>
          <td class="datatable-td datatable-td-actions">
            <div class="datatable-row-actions">
              <button class="datatable-row-action"><svg class="size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Z" /></svg></button>
              <button class="datatable-row-action datatable-row-action-danger"><svg class="size-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg></button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="datatable-footer">
    <span class="datatable-info">1 selected</span>
    <div class="datatable-per-page">
      <span>Rows per page:</span>
      <select><option>10</option><option>25</option><option>50</option></select>
    </div>
  </div>
</div>`}
    tailwind={`<!-- DataTable is complex — use semantic classes -->`}
    js={`// Row selection
document.querySelectorAll('.datatable-td-checkbox input').forEach(cb => {
  cb.addEventListener('change', () => {
    cb.closest('.datatable-tr')?.classList.toggle('datatable-tr-selected', cb.checked);
  });
});`}
    height="280px"
  />

  <CodePreview
    title="Empty & Loading States"
    noFrame
    semantic={`<!-- Empty State -->
<div class="datatable datatable-bordered">
  <div class="datatable-empty">
    <svg class="datatable-empty-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" /></svg>
    <h3 class="datatable-empty-title">No data found</h3>
    <p class="datatable-empty-text">Try adjusting your search or filters.</p>
  </div>
</div>

<!-- Loading State -->
<div class="datatable datatable-bordered is-loading" style="margin-top: 1rem;">
  <div class="datatable-loading">
    <span class="loading loading-spinner loading-md"></span>
  </div>
</div>`}
    tailwind={`<!-- Use empty/loading classes within the datatable container -->`}
    js={`// Toggle loading state
datatable.classList.add('is-loading');
datatable.classList.remove('is-loading');`}
  />

  <CodePreview
    title="Responsive (Card View)"
    noFrame
    semantic={`<!-- Add datatable-responsive for mobile card view -->
<div class="datatable datatable-bordered datatable-responsive">
  <div class="datatable-body">
    <table class="datatable-table">
      <thead class="datatable-thead">
        <tr>
          <th class="datatable-th">Name</th>
          <th class="datatable-th">Email</th>
          <th class="datatable-th">Status</th>
        </tr>
      </thead>
      <tbody class="datatable-tbody">
        <tr class="datatable-tr">
          <td class="datatable-td" data-label="Name">John Doe</td>
          <td class="datatable-td" data-label="Email">john@example.com</td>
          <td class="datatable-td" data-label="Status">Active</td>
        </tr>
        <tr class="datatable-tr">
          <td class="datatable-td" data-label="Name">Jane Smith</td>
          <td class="datatable-td" data-label="Email">jane@example.com</td>
          <td class="datatable-td" data-label="Status">Pending</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- On mobile (< 768px): each row becomes a card with data-label as field names -->`}
    tailwind={`<!-- Responsive card view requires data-label attributes on <td> elements -->`}
    js={`// No JavaScript required for responsive view — pure CSS`}
  />

  <!-- Reference Table -->
  <div class="mt-10 space-y-6">
    <h2 class="text-xl font-bold">Classes Reference</h2>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border border-base-300 rounded-lg overflow-hidden">
        <thead class="bg-base-200">
          <tr>
            <th class="text-left px-4 py-2 font-medium">Class</th>
            <th class="text-left px-4 py-2 font-medium">Description</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-base-300">
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable</td><td class="px-4 py-2">Container</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-header</td><td class="px-4 py-2">Title + actions bar</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-title</td><td class="px-4 py-2">Table title</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-toolbar</td><td class="px-4 py-2">Search + filter bar</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-body</td><td class="px-4 py-2">Scrollable table area</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-table</td><td class="px-4 py-2">The &lt;table&gt; element</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-thead</td><td class="px-4 py-2">Sticky header</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-th</td><td class="px-4 py-2">Header cell</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-th-sortable</td><td class="px-4 py-2">Sortable column</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-th-sorted</td><td class="px-4 py-2">Currently sorted</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-tr</td><td class="px-4 py-2">Table row</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-tr-selected</td><td class="px-4 py-2">Selected row</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-td</td><td class="px-4 py-2">Table cell</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-row-actions</td><td class="px-4 py-2">Actions container</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-row-action</td><td class="px-4 py-2">Action button</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-footer</td><td class="px-4 py-2">Pagination + info</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-empty</td><td class="px-4 py-2">Empty state</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-loading</td><td class="px-4 py-2">Loading state</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-bulk</td><td class="px-4 py-2">Bulk selection bar</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-responsive</td><td class="px-4 py-2">Mobile card view</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-bordered</td><td class="px-4 py-2">Bordered variant</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-striped</td><td class="px-4 py-2">Striped rows</td></tr>
          <tr><td class="px-4 py-2 font-mono text-xs">.datatable-compact</td><td class="px-4 py-2">Compact size</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</DocsLayout>
