---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodePreview from '../../components/CodePreview.astro';
---

<DocsLayout title="Phone Input">
  <p class="text-base-content/70 mb-6">International phone number input with country code selector, searchable dropdown, sizes, and validation states.</p>

  <CodePreview
    title="Basic Phone Input"
    semantic={`<div class="phone-input">
  <button class="phone-input-country" type="button">
    <span class="phone-input-flag">&#127482;&#127480;</span>
    <span class="phone-input-code">+1</span>
    <svg class="phone-input-arrow" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"/></svg>
  </button>
  <input type="tel" class="input" placeholder="(555) 000-0000" />
</div>`}
    tailwind={`<div class="relative flex items-stretch w-full">
  <button class="flex items-center gap-1.5 shrink-0 h-11 px-3 bg-base-200 border border-base-300 border-r-0 rounded-l-field cursor-pointer hover:bg-base-300 transition-colors" type="button">
    <span class="text-xl leading-none">&#127482;&#127480;</span>
    <span class="text-sm font-medium text-base-content min-w-10">+1</span>
    <svg class="size-4 text-base-content/60" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"/></svg>
  </button>
  <input type="tel" class="input flex-1 min-w-0 rounded-l-none" placeholder="(555) 000-0000" />
</div>`}
    js={`// Toggle dropdown:
// countryBtn.addEventListener('click', () => {
//   wrapper.classList.toggle('phone-input-open');
// });
// Format input:
// input.addEventListener('input', () => {
//   let digits = input.value.replace(/\\D/g, '');
//   if (digits.length > 3) digits = '(' + digits.slice(0,3) + ') ' + digits.slice(3);
//   if (digits.length > 9) digits = digits.slice(0,9) + '-' + digits.slice(9,13);
//   input.value = digits;
// });`}
  />

  <CodePreview
    title="With Dropdown Open"
    semantic={`<div class="phone-input phone-input-open" style="margin-bottom: 220px;">
  <button class="phone-input-country" type="button">
    <span class="phone-input-flag">&#127482;&#127480;</span>
    <span class="phone-input-code">+1</span>
    <svg class="phone-input-arrow" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"/></svg>
  </button>
  <input type="tel" class="input" placeholder="(555) 000-0000" />
  <div class="phone-input-dropdown">
    <div class="phone-input-search">
      <input class="phone-input-search-input" type="text" placeholder="Search countries..." />
    </div>
    <div class="phone-input-list">
      <div class="phone-input-option phone-input-option-selected">
        <span class="phone-input-option-flag">&#127482;&#127480;</span>
        <span class="phone-input-option-name">United States</span>
        <span class="phone-input-option-code">+1</span>
      </div>
      <div class="phone-input-option">
        <span class="phone-input-option-flag">&#127468;&#127463;</span>
        <span class="phone-input-option-name">United Kingdom</span>
        <span class="phone-input-option-code">+44</span>
      </div>
      <div class="phone-input-option">
        <span class="phone-input-option-flag">&#127465;&#127466;</span>
        <span class="phone-input-option-name">Germany</span>
        <span class="phone-input-option-code">+49</span>
      </div>
      <div class="phone-input-option">
        <span class="phone-input-option-flag">&#127467;&#127479;</span>
        <span class="phone-input-option-name">France</span>
        <span class="phone-input-option-code">+33</span>
      </div>
    </div>
  </div>
</div>`}
    tailwind={`<div class="relative flex items-stretch w-full" style="margin-bottom: 220px;">
  <button class="flex items-center gap-1.5 shrink-0 h-11 px-3 bg-base-200 border border-primary border-r-0 rounded-l-field cursor-pointer" type="button">
    <span class="text-xl leading-none">&#127482;&#127480;</span>
    <span class="text-sm font-medium text-base-content min-w-10">+1</span>
    <svg class="size-4 text-base-content/60 rotate-180" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"/></svg>
  </button>
  <input type="tel" class="input flex-1 min-w-0 rounded-l-none" placeholder="(555) 000-0000" />
  <div class="absolute top-full left-0 right-0 mt-1 max-h-[300px] bg-base-100 border border-base-300 rounded-box shadow-lg z-50 overflow-hidden">
    <div class="p-3 border-b border-base-300">
      <input class="w-full py-2 px-3 text-sm bg-base-200 border border-base-300 rounded-field outline-none focus:border-primary" type="text" placeholder="Search countries..." />
    </div>
    <div class="max-h-60 overflow-y-auto py-2">
      <div class="flex items-center gap-3 px-4 py-2.5 bg-primary/10 cursor-pointer">
        <span class="text-xl">&#127482;&#127480;</span>
        <span class="flex-1 text-sm text-base-content">United States</span>
        <span class="text-sm font-medium text-base-content/60">+1</span>
      </div>
      <div class="flex items-center gap-3 px-4 py-2.5 hover:bg-base-200 cursor-pointer">
        <span class="text-xl">&#127468;&#127463;</span>
        <span class="flex-1 text-sm text-base-content">United Kingdom</span>
        <span class="text-sm font-medium text-base-content/60">+44</span>
      </div>
    </div>
  </div>
</div>`}
    js={`// Select country from dropdown:
// options.forEach(opt => opt.addEventListener('click', () => {
//   flag.textContent = opt.dataset.flag;
//   code.textContent = opt.dataset.code;
//   wrapper.classList.remove('phone-input-open');
// }));`}
  />

  <CodePreview
    title="Sizes"
    semantic={`<!-- Small -->
<div class="phone-input phone-input-sm mb-3">
  <button class="phone-input-country" type="button">
    <span class="phone-input-flag">&#127468;&#127463;</span>
    <span class="phone-input-code">+44</span>
  </button>
  <input type="tel" class="input" placeholder="7911 123456" />
</div>

<!-- Default -->
<div class="phone-input mb-3">
  <button class="phone-input-country" type="button">
    <span class="phone-input-flag">&#127468;&#127463;</span>
    <span class="phone-input-code">+44</span>
  </button>
  <input type="tel" class="input" placeholder="7911 123456" />
</div>

<!-- Large -->
<div class="phone-input phone-input-lg">
  <button class="phone-input-country" type="button">
    <span class="phone-input-flag">&#127468;&#127463;</span>
    <span class="phone-input-code">+44</span>
  </button>
  <input type="tel" class="input" placeholder="7911 123456" />
</div>`}
    tailwind={`<!-- Small -->
<div class="relative flex items-stretch w-full mb-3">
  <button class="flex items-center gap-1 shrink-0 h-9 min-h-9 px-2 bg-base-200 border border-base-300 border-r-0 rounded-l-field cursor-pointer text-base" type="button">
    <span class="leading-none">&#127468;&#127463;</span>
    <span class="text-xs font-medium text-base-content min-w-10">+44</span>
  </button>
  <input type="tel" class="input flex-1 min-w-0 h-9 min-h-9 text-sm rounded-l-none" placeholder="7911 123456" />
</div>

<!-- Default -->
<div class="relative flex items-stretch w-full mb-3">
  <button class="flex items-center gap-1.5 shrink-0 h-11 px-3 bg-base-200 border border-base-300 border-r-0 rounded-l-field cursor-pointer" type="button">
    <span class="text-xl leading-none">&#127468;&#127463;</span>
    <span class="text-sm font-medium text-base-content min-w-10">+44</span>
  </button>
  <input type="tel" class="input flex-1 min-w-0 rounded-l-none" placeholder="7911 123456" />
</div>

<!-- Large -->
<div class="relative flex items-stretch w-full">
  <button class="flex items-center gap-1.5 shrink-0 h-[3.25rem] min-h-[3.25rem] px-4 bg-base-200 border border-base-300 border-r-0 rounded-l-field cursor-pointer" type="button">
    <span class="text-2xl leading-none">&#127468;&#127463;</span>
    <span class="font-medium text-base-content min-w-10">+44</span>
  </button>
  <input type="tel" class="input flex-1 min-w-0 h-[3.25rem] min-h-[3.25rem] text-lg rounded-l-none" placeholder="7911 123456" />
</div>`}
    js={`// No JavaScript required for sizing`}
  />

  <CodePreview
    title="States"
    semantic={`<!-- Error -->
<div class="phone-input-field mb-4">
  <label class="phone-input-label">Phone Number</label>
  <div class="phone-input phone-input-error">
    <button class="phone-input-country" type="button">
      <span class="phone-input-flag">&#127482;&#127480;</span>
      <span class="phone-input-code">+1</span>
    </button>
    <input type="tel" class="input" value="123" />
  </div>
  <span class="phone-input-helper phone-input-helper-error">Invalid phone number</span>
</div>

<!-- Disabled -->
<div class="phone-input phone-input-disabled">
  <button class="phone-input-country" type="button" disabled>
    <span class="phone-input-flag">&#127482;&#127480;</span>
    <span class="phone-input-code">+1</span>
  </button>
  <input type="tel" class="input" placeholder="(555) 000-0000" disabled />
</div>`}
    tailwind={`<!-- Error -->
<div class="flex flex-col gap-1 mb-4">
  <label class="text-sm font-medium text-base-content">Phone Number</label>
  <div class="relative flex items-stretch w-full">
    <button class="flex items-center gap-1.5 shrink-0 h-11 px-3 bg-base-200 border border-error border-r-0 rounded-l-field cursor-pointer" type="button">
      <span class="text-xl leading-none">&#127482;&#127480;</span>
      <span class="text-sm font-medium text-base-content min-w-10">+1</span>
    </button>
    <input type="tel" class="input flex-1 min-w-0 rounded-l-none border-error focus:ring-3 focus:ring-error/15" value="123" />
  </div>
  <span class="text-xs text-error">Invalid phone number</span>
</div>

<!-- Disabled -->
<div class="relative flex items-stretch w-full opacity-60">
  <button class="flex items-center gap-1.5 shrink-0 h-11 px-3 bg-base-200 border border-base-300 border-r-0 rounded-l-field cursor-not-allowed pointer-events-none" type="button" disabled>
    <span class="text-xl leading-none">&#127482;&#127480;</span>
    <span class="text-sm font-medium text-base-content min-w-10">+1</span>
  </button>
  <input type="tel" class="input flex-1 min-w-0 rounded-l-none cursor-not-allowed pointer-events-none" placeholder="(555) 000-0000" disabled />
</div>`}
    js={`// Toggle error: wrapper.classList.toggle('phone-input-error');`}
  />

  <div class="overflow-x-auto mt-8">
    <table class="table">
      <thead><tr><th>Class</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>.phone-input</code></td><td>Container (flex)</td></tr>
        <tr><td><code>.phone-input-country</code></td><td>Country selector button</td></tr>
        <tr><td><code>.phone-input-flag</code></td><td>Flag emoji</td></tr>
        <tr><td><code>.phone-input-code</code></td><td>Dial code text</td></tr>
        <tr><td><code>.phone-input-arrow</code></td><td>Chevron arrow icon</td></tr>
        <tr><td><code>.phone-input-open</code></td><td>Open state (shows dropdown, rotates arrow)</td></tr>
        <tr><td><code>.phone-input-dropdown</code></td><td>Country dropdown panel</td></tr>
        <tr><td><code>.phone-input-search</code></td><td>Search section in dropdown</td></tr>
        <tr><td><code>.phone-input-search-input</code></td><td>Search text field</td></tr>
        <tr><td><code>.phone-input-list</code></td><td>Scrollable country list</td></tr>
        <tr><td><code>.phone-input-option</code></td><td>Country option row</td></tr>
        <tr><td><code>.phone-input-option-selected</code></td><td>Selected option highlight</td></tr>
        <tr><td><code>.phone-input-sm</code></td><td>Small size</td></tr>
        <tr><td><code>.phone-input-lg</code></td><td>Large size</td></tr>
        <tr><td><code>.phone-input-error</code></td><td>Error state</td></tr>
        <tr><td><code>.phone-input-success</code></td><td>Success state</td></tr>
        <tr><td><code>.phone-input-disabled</code></td><td>Disabled state</td></tr>
        <tr><td><code>.phone-input-field</code></td><td>Field wrapper (label + helper)</td></tr>
        <tr><td><code>.phone-input.glass</code></td><td>Glass morphism variant</td></tr>
      </tbody>
    </table>
  </div>
</DocsLayout>
