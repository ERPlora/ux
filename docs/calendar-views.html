<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Calendar Views - UX Library</title>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-calendar-views.js"></script>
  <script src="../components/ux-content.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 {
      font-size: var(--ux-font-size-lg);
      font-weight: 600;
      margin-bottom: var(--ux-space-md);
      color: var(--ux-text);
    }
    .demo-section p {
      font-size: var(--ux-font-size-md);
      color: var(--ux-text-secondary);
      margin-bottom: var(--ux-space-md);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: var(--ux-border-radius-lg);
      padding: var(--ux-space-lg);
      margin-bottom: var(--ux-space-md);
    }
    .code-block {
      background: #1a1a2e;
      color: #e5e5e5;
      padding: var(--ux-space-md);
      border-radius: var(--ux-border-radius);
      overflow-x: auto;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: var(--ux-font-size-md);
      line-height: 1.6;
    }
    .code-block .tag { color: #ff7b72; }
    .code-block .attr { color: #79c0ff; }
    .code-block .string { color: #a5d6ff; }
    .code-block .comment { color: #8b949e; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: var(--ux-space-md);
    }
    th, td {
      padding: var(--ux-space-sm) var(--ux-space-md);
      text-align: left;
      border-bottom: 1px solid var(--ux-border-color);
    }
    th {
      font-weight: 600;
      color: var(--ux-text);
    }
    td {
      color: var(--ux-text-secondary);
    }
    td code {
      background: var(--ux-gray-100);
      padding: 2px 6px;
      border-radius: var(--ux-border-radius-sm);
      font-size: var(--ux-font-size-sm);
    }
  </style>
</head>
<body class="ux-app">

  <div class="ux-content" style="padding: var(--ux-space-lg); max-width: 1200px; margin: 0 auto;">
    <h1 style="margin-bottom: var(--ux-space-sm);">Calendar Views</h1>
    <p style="color: var(--ux-text-secondary); margin-bottom: var(--ux-space-xl);">Vistas de calendario semanal y diaria con soporte para eventos.</p>

    <!-- Week View -->
    <section class="demo-section">
      <h3>Vista Semanal</h3>
      <p>Usa el componente <code>uxCalendarView</code> con <code>view: 'week'</code> para mostrar la semana completa.</p>
      <div class="demo-box">
        <div class="ux-calendar-view"
             x-data="uxCalendarView({
               view: 'week',
               startHour: 8,
               endHour: 20,
               events: [
                 {
                   id: 1,
                   title: 'Reunion de equipo',
                   start: new Date(new Date().setHours(9, 0, 0, 0)),
                   end: new Date(new Date().setHours(10, 30, 0, 0)),
                   color: 'primary'
                 },
                 {
                   id: 2,
                   title: 'Almuerzo',
                   start: new Date(new Date().setHours(13, 0, 0, 0)),
                   end: new Date(new Date().setHours(14, 0, 0, 0)),
                   color: 'success'
                 },
                 {
                   id: 3,
                   title: 'Llamada cliente',
                   start: new Date(new Date().setHours(15, 0, 0, 0)),
                   end: new Date(new Date().setHours(16, 0, 0, 0)),
                   color: 'warning'
                 }
               ]
             })">
          <!-- Header -->
          <div class="ux-calendar-view__header">
            <div class="ux-calendar-view__nav">
              <button class="ux-calendar-view__nav-btn" @click="prev()">
                <span x-html="icons.chevronLeft"></span>
              </button>
              <button class="ux-calendar-view__nav-btn" @click="next()">
                <span x-html="icons.chevronRight"></span>
              </button>
              <span class="ux-calendar-view__title" x-text="title"></span>
            </div>
            <button class="ux-calendar-view__today-btn" @click="goToToday()">Hoy</button>
            <div class="ux-calendar-view__view-toggle">
              <button class="ux-calendar-view__view-btn"
                      :class="{ 'ux-calendar-view__view-btn--active': view === 'week' }"
                      @click="setView('week')">Semana</button>
              <button class="ux-calendar-view__view-btn"
                      :class="{ 'ux-calendar-view__view-btn--active': view === 'day' }"
                      @click="setView('day')">Dia</button>
            </div>
          </div>

          <!-- Week View Content -->
          <template x-if="view === 'week'">
            <div>
              <!-- Day Headers -->
              <div class="ux-calendar-view__day-headers">
                <div class="ux-calendar-view__corner"></div>
                <template x-for="day in weekDays" :key="day.date.toISOString()">
                  <div class="ux-calendar-view__day-header"
                       :class="{ 'ux-calendar-view__day-header--today': day.isToday }"
                       @click="selectDay(day.date)">
                    <span class="ux-calendar-view__day-name" x-text="day.name"></span>
                    <span class="ux-calendar-view__day-number" x-text="day.number"></span>
                  </div>
                </template>
              </div>

              <!-- Time Grid -->
              <div class="ux-calendar-view__grid">
                <!-- Time Labels -->
                <div class="ux-calendar-view__times">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-calendar-view__time" x-text="hour.label"></div>
                  </template>
                </div>

                <!-- Day Columns -->
                <template x-for="day in weekDays" :key="'col-' + day.date.toISOString()">
                  <div class="ux-calendar-view__day-column">
                    <!-- Hour slots -->
                    <template x-for="hour in hours" :key="hour.value">
                      <div class="ux-calendar-view__hour-slot"></div>
                    </template>

                    <!-- Now line -->
                    <div class="ux-calendar-view__now-line"
                         x-show="shouldShowNowLine(day.date)"
                         :style="{ top: nowLineTop + 'px' }"></div>

                    <!-- Events -->
                    <template x-for="event in getEventsForDay(day.date)" :key="event.id">
                      <div class="ux-calendar-view__event"
                           :class="'ux-calendar-view__event--' + (event.color || 'primary')"
                           :style="getEventStyle(event)"
                           @click="onEventClick(event)">
                        <div class="ux-calendar-view__event-title" x-text="event.title"></div>
                        <div class="ux-calendar-view__event-time" x-text="formatTime(event.start) + ' - ' + formatTime(event.end)"></div>
                      </div>
                    </template>
                  </div>
                </template>
              </div>
            </div>
          </template>

          <!-- Day View Content -->
          <template x-if="view === 'day'">
            <div>
              <div class="ux-calendar-view__day-headers ux-calendar-view__day-headers--single">
                <div class="ux-calendar-view__corner"></div>
                <div class="ux-calendar-view__day-header"
                     :class="{ 'ux-calendar-view__day-header--today': isToday(currentDate) }">
                  <span class="ux-calendar-view__day-name" x-text="dayNamesLong[currentDate.getDay()]"></span>
                  <span class="ux-calendar-view__day-number" x-text="currentDate.getDate()"></span>
                </div>
              </div>

              <div class="ux-calendar-view__grid ux-calendar-view__grid--single">
                <div class="ux-calendar-view__times">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-calendar-view__time" x-text="hour.label"></div>
                  </template>
                </div>

                <div class="ux-calendar-view__day-column">
                  <template x-for="hour in hours" :key="hour.value">
                    <div class="ux-calendar-view__hour-slot"></div>
                  </template>

                  <div class="ux-calendar-view__now-line"
                       x-show="isToday(currentDate)"
                       :style="{ top: nowLineTop + 'px' }"></div>

                  <template x-for="event in getEventsForDay(currentDate)" :key="event.id">
                    <div class="ux-calendar-view__event"
                         :class="'ux-calendar-view__event--' + (event.color || 'primary')"
                         :style="getEventStyle(event)"
                         @click="onEventClick(event)">
                      <div class="ux-calendar-view__event-title" x-text="event.title"></div>
                      <div class="ux-calendar-view__event-time" x-text="formatTime(event.start) + ' - ' + formatTime(event.end)"></div>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>
    </section>

    <!-- Day View Only -->
    <section class="demo-section">
      <h3>Vista Diaria</h3>
      <p>Usa <code>view: 'day'</code> para mostrar solo un dia con todos sus eventos.</p>
      <div class="demo-box">
        <div class="ux-calendar-view"
             x-data="uxCalendarView({
               view: 'day',
               startHour: 6,
               endHour: 22,
               events: [
                 {
                   id: 1,
                   title: 'Yoga matutino',
                   start: new Date(new Date().setHours(7, 0, 0, 0)),
                   end: new Date(new Date().setHours(8, 0, 0, 0)),
                   color: 'success'
                 },
                 {
                   id: 2,
                   title: 'Standup diario',
                   start: new Date(new Date().setHours(9, 30, 0, 0)),
                   end: new Date(new Date().setHours(10, 0, 0, 0)),
                   color: 'primary'
                 },
                 {
                   id: 3,
                   title: 'Desarrollo proyecto',
                   start: new Date(new Date().setHours(10, 0, 0, 0)),
                   end: new Date(new Date().setHours(12, 30, 0, 0)),
                   color: 'secondary'
                 },
                 {
                   id: 4,
                   title: 'Revision codigo',
                   start: new Date(new Date().setHours(14, 0, 0, 0)),
                   end: new Date(new Date().setHours(15, 30, 0, 0)),
                   color: 'warning'
                 },
                 {
                   id: 5,
                   title: 'Llamada importante',
                   start: new Date(new Date().setHours(16, 0, 0, 0)),
                   end: new Date(new Date().setHours(17, 0, 0, 0)),
                   color: 'danger'
                 }
               ]
             })"
             @calendar:eventclick="alert('Evento: ' + $event.detail.event.title)">
          <div class="ux-calendar-view__header">
            <div class="ux-calendar-view__nav">
              <button class="ux-calendar-view__nav-btn" @click="prev()">
                <span x-html="icons.chevronLeft"></span>
              </button>
              <button class="ux-calendar-view__nav-btn" @click="next()">
                <span x-html="icons.chevronRight"></span>
              </button>
              <span class="ux-calendar-view__title" x-text="title"></span>
            </div>
            <button class="ux-calendar-view__today-btn" @click="goToToday()">Hoy</button>
          </div>

          <div class="ux-calendar-view__day-headers ux-calendar-view__day-headers--single">
            <div class="ux-calendar-view__corner"></div>
            <div class="ux-calendar-view__day-header"
                 :class="{ 'ux-calendar-view__day-header--today': isToday(currentDate) }">
              <span class="ux-calendar-view__day-name" x-text="dayNamesLong[currentDate.getDay()]"></span>
              <span class="ux-calendar-view__day-number" x-text="currentDate.getDate()"></span>
            </div>
          </div>

          <div class="ux-calendar-view__grid ux-calendar-view__grid--single">
            <div class="ux-calendar-view__times">
              <template x-for="hour in hours" :key="hour.value">
                <div class="ux-calendar-view__time" x-text="hour.label"></div>
              </template>
            </div>

            <div class="ux-calendar-view__day-column">
              <template x-for="hour in hours" :key="hour.value">
                <div class="ux-calendar-view__hour-slot"></div>
              </template>

              <div class="ux-calendar-view__now-line"
                   x-show="isToday(currentDate)"
                   :style="{ top: nowLineTop + 'px' }"></div>

              <template x-for="event in getEventsForDay(currentDate)" :key="event.id">
                <div class="ux-calendar-view__event"
                     :class="'ux-calendar-view__event--' + (event.color || 'primary')"
                     :style="getEventStyle(event)"
                     @click="onEventClick(event)">
                  <div class="ux-calendar-view__event-title" x-text="event.title"></div>
                  <div class="ux-calendar-view__event-time" x-text="formatTime(event.start) + ' - ' + formatTime(event.end)"></div>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Usage -->
    <section class="demo-section">
      <h3>Uso</h3>
      <pre class="code-block"><span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-calendar-view"</span>
     <span class="attr">x-data</span>=<span class="string">"uxCalendarView({
       view: 'week',
       startHour: 8,
       endHour: 20,
       events: [
         {
           id: 1,
           title: 'Reunion',
           start: new Date('2026-01-10T09:00:00'),
           end: new Date('2026-01-10T10:30:00'),
           color: 'primary'
         }
       ]
     })"</span>
     <span class="attr">@calendar:eventclick</span>=<span class="string">"handleEventClick($event.detail.event)"</span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- Header with navigation --&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"ux-calendar-view__header"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;button</span> <span class="attr">@click</span>=<span class="string">"prev()"</span><span class="tag">&gt;</span>Prev<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;span</span> <span class="attr">x-text</span>=<span class="string">"title"</span><span class="tag">&gt;&lt;/span&gt;</span>
    <span class="tag">&lt;button</span> <span class="attr">@click</span>=<span class="string">"next()"</span><span class="tag">&gt;</span>Next<span class="tag">&lt;/button&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="comment">&lt;!-- Grid content... --&gt;</span>
<span class="tag">&lt;/div&gt;</span></pre>
    </section>

    <!-- Event Format -->
    <section class="demo-section">
      <h3>Formato de Evento</h3>
      <p>Los eventos requieren un objeto con las siguientes propiedades.</p>
      <pre class="code-block"><span class="attr">const</span> event = {
  <span class="attr">id</span>: <span class="string">1</span>,                              <span class="comment">// ID unico</span>
  <span class="attr">title</span>: <span class="string">'Reunion de equipo'</span>,         <span class="comment">// Titulo del evento</span>
  <span class="attr">start</span>: <span class="attr">new</span> Date(<span class="string">'2026-01-10T09:00'</span>), <span class="comment">// Fecha/hora inicio</span>
  <span class="attr">end</span>: <span class="attr">new</span> Date(<span class="string">'2026-01-10T10:30'</span>),   <span class="comment">// Fecha/hora fin</span>
  <span class="attr">color</span>: <span class="string">'primary'</span>,                    <span class="comment">// primary, success, danger, warning, secondary</span>
  <span class="attr">allDay</span>: <span class="attr">false</span>                        <span class="comment">// Evento de todo el dia</span>
};</pre>
    </section>

    <!-- Options -->
    <section class="demo-section">
      <h3>Opciones</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Opcion</th>
              <th>Tipo</th>
              <th>Default</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>view</code></td><td>String</td><td>'week'</td><td>'week' o 'day'</td></tr>
            <tr><td><code>startHour</code></td><td>Number</td><td>0</td><td>Hora de inicio visible</td></tr>
            <tr><td><code>endHour</code></td><td>Number</td><td>24</td><td>Hora de fin visible</td></tr>
            <tr><td><code>hourHeight</code></td><td>Number</td><td>60</td><td>Altura de cada hora en px</td></tr>
            <tr><td><code>events</code></td><td>Array</td><td>[]</td><td>Array de eventos</td></tr>
            <tr><td><code>initialDate</code></td><td>Date</td><td>new Date()</td><td>Fecha inicial a mostrar</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Events -->
    <section class="demo-section">
      <h3>Eventos</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Evento</th>
              <th>Detalle</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>calendar:navigate</code></td><td>{ date, view }</td><td>Navegacion a nueva fecha</td></tr>
            <tr><td><code>calendar:viewchange</code></td><td>{ view }</td><td>Cambio de vista</td></tr>
            <tr><td><code>calendar:dayselect</code></td><td>{ date }</td><td>Dia seleccionado</td></tr>
            <tr><td><code>calendar:eventclick</code></td><td>{ event }</td><td>Click en evento</td></tr>
            <tr><td><code>calendar:eventadd</code></td><td>{ event }</td><td>Evento anadido</td></tr>
            <tr><td><code>calendar:eventremove</code></td><td>{ event }</td><td>Evento eliminado</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Methods -->
    <section class="demo-section">
      <h3>Metodos</h3>
      <div style="background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); overflow: hidden;">
        <table>
          <thead>
            <tr>
              <th>Metodo</th>
              <th>Descripcion</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>prev()</code></td><td>Ir a semana/dia anterior</td></tr>
            <tr><td><code>next()</code></td><td>Ir a semana/dia siguiente</td></tr>
            <tr><td><code>goToToday()</code></td><td>Ir al dia de hoy</td></tr>
            <tr><td><code>setView(view)</code></td><td>Cambiar vista ('week' o 'day')</td></tr>
            <tr><td><code>selectDay(date)</code></td><td>Seleccionar un dia</td></tr>
            <tr><td><code>addEvent(event)</code></td><td>Anadir un evento</td></tr>
            <tr><td><code>removeEvent(id)</code></td><td>Eliminar evento por ID</td></tr>
            <tr><td><code>setEvents(events)</code></td><td>Establecer todos los eventos</td></tr>
            <tr><td><code>getEventsForDay(date)</code></td><td>Obtener eventos de un dia</td></tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>
</body>
</html>
