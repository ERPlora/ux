<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Numpad - UX Library</title>
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="../components/ux-core.js"></script>
  <script src="../components/ux-button.js"></script>
  <script src="../components/ux-spinner.js"></script>
  <script src="../components/ux-numpad.js"></script>
  <script src="../components/ux-code-block.js"></script>
  <style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); color: var(--ux-text); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { display: flex; flex-wrap: wrap; gap: var(--ux-space-lg); align-items: flex-start; margin-bottom: var(--ux-space-md); }
    .ux-table { width: 100%; border-collapse: collapse; margin-bottom: var(--ux-space-lg); }
    .ux-table th, .ux-table td { padding: var(--ux-space-sm) var(--ux-space-md); text-align: left; border-bottom: 1px solid var(--ux-border-color); }
    .ux-table th { font-weight: 600; color: var(--ux-text); background: var(--ux-surface-secondary); }
    .ux-table td { color: var(--ux-text-secondary); }
    .ux-table code { background: var(--ux-surface-secondary); padding: 2px 6px; border-radius: 4px; font-size: var(--ux-font-size-sm); }
    .demo-grid { display: flex; flex-wrap: wrap; gap: var(--ux-space-lg); }
    .action-row { display: flex; gap: var(--ux-space-sm); }
    .action-row > * { flex: 1; }
  </style>
</head>
<body class="ux-app">

  <!-- Basic Numpad -->
  <div class="demo-section">
    <h3>Numpad Basico</h3>
    <p>Teclado numerico para entrada de cantidades. Incluye display, teclas numericas, borrar y confirmar.</p>

    <div class="demo-box">
      <div x-data="uxNumpad({ allowDecimal: true, decimals: 2 })"
           class="ux-numpad"
           @numpad-submit.window="alert('Valor: ' + $event.detail.numericValue)">

        <!-- Display -->
        <div class="ux-numpad__display">
          <span class="ux-numpad__display-currency">$</span>
          <span class="ux-numpad__display-value" x-text="displayValue"></span>
        </div>

        <!-- Grid -->
        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>

          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="appendDecimal()">.</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">
            <span x-html="getIcon('backspace')"></span>
          </button>
        </div>

        <!-- Actions -->
        <div class="action-row">
          <button type="button" class="ux-button ux-button--outline" @click="clear()">Limpiar</button>
          <button type="button" class="ux-button ux-color-primary" @click="submit()">Confirmar</button>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxNumpad({ allowDecimal: true })" class="ux-numpad"&gt;
  &lt;div class="ux-numpad__display"&gt;
    &lt;span x-text="displayValue"&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;div class="ux-numpad__grid"&gt;
    &lt;button class="ux-numpad__key" @click="appendDigit('7')"&gt;7&lt;/button&gt;
    &lt;!-- ... mas teclas --&gt;
    &lt;button class="ux-numpad__key ux-numpad__key--action" @click="backspace()"&gt;⌫&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- POS Numpad with Quick Amounts -->
  <div class="demo-section">
    <h3>Numpad POS con Montos Rapidos</h3>
    <p>Para punto de venta con botones de montos rapidos predefinidos.</p>

    <div class="demo-box">
      <div x-data="uxNumpad({
        allowDecimal: true,
        currency: '€',
        quickAmounts: [5, 10, 20, 50, 100]
      })" class="ux-numpad" @numpad-change="console.log('Valor:', $event.detail.numericValue)">

        <!-- Display -->
        <div class="ux-numpad__display ux-numpad__display--lg">
          <span class="ux-numpad__display-label">Efectivo recibido</span>
          <span class="ux-numpad__display-currency">€</span>
          <span class="ux-numpad__display-value" x-text="displayValue"></span>
        </div>

        <!-- Quick Amounts -->
        <div class="ux-numpad__quick-amounts">
          <template x-for="amount in quickAmounts" :key="amount">
            <button type="button" class="ux-numpad__quick-btn" @click="setQuickAmount(amount)">
              €<span x-text="amount"></span>
            </button>
          </template>
        </div>

        <!-- Grid -->
        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>

          <button type="button" class="ux-numpad__key ux-numpad__key--danger" @click="clear()">C</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="appendDecimal()">.</button>
        </div>

        <!-- Submit Button -->
        <button type="button" class="ux-numpad__key ux-numpad__key--primary ux-numpad__key--wide" style="width: 100%;" @click="submit()">
          <span x-html="getIcon('check')"></span>
          Confirmar Pago
        </button>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxNumpad({
  allowDecimal: true,
  currency: '€',
  quickAmounts: [5, 10, 20, 50, 100]
})" class="ux-numpad"&gt;
  &lt;!-- Quick Amounts --&gt;
  &lt;div class="ux-numpad__quick-amounts"&gt;
    &lt;template x-for="amount in quickAmounts"&gt;
      &lt;button class="ux-numpad__quick-btn" @click="setQuickAmount(amount)"&gt;
        €&lt;span x-text="amount"&gt;&lt;/span&gt;
      &lt;/button&gt;
    &lt;/template&gt;
  &lt;/div&gt;
  ...
&lt;/div&gt;</pre>
  </div>

  <!-- PIN Entry -->
  <div class="demo-section">
    <h3>Entrada de PIN</h3>
    <p>Modo PIN con puntos de mascara y autosubmit cuando se completa.</p>

    <div class="demo-box">
      <div x-data="uxNumpad({
        pinMode: true,
        pinLength: 4,
        pinMask: true
      })" class="ux-numpad ux-numpad--pin"
         @numpad-submit="alert('PIN ingresado: ' + $event.detail.value)">

        <!-- PIN Dots -->
        <div class="ux-numpad__pin-dots">
          <template x-for="(filled, index) in getPinDots()" :key="index">
            <div class="ux-numpad__pin-dot" :class="{ 'ux-numpad__pin-dot--filled': filled }"></div>
          </template>
        </div>

        <!-- Grid -->
        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>

          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="clear()">
            <span x-html="getIcon('clear')"></span>
          </button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">
            <span x-html="getIcon('backspace')"></span>
          </button>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxNumpad({
  pinMode: true,
  pinLength: 4,
  pinMask: true
})" class="ux-numpad ux-numpad--pin"
   @numpad-submit="validatePin($event.detail.value)"&gt;

  &lt;!-- PIN Dots --&gt;
  &lt;div class="ux-numpad__pin-dots"&gt;
    &lt;template x-for="(filled, index) in getPinDots()"&gt;
      &lt;div class="ux-numpad__pin-dot"
           :class="{ 'ux-numpad__pin-dot--filled': filled }"&gt;&lt;/div&gt;
    &lt;/template&gt;
  &lt;/div&gt;
  ...
&lt;/div&gt;</pre>
  </div>

  <!-- Glass Variant -->
  <div class="demo-section">
    <h3>Variante Glass</h3>
    <p>Numpad con efecto glass morphism estilo iOS 26.</p>

    <div class="demo-box" style="background: var(--ux-demo-gradient); padding: 2rem; border-radius: var(--ux-border-radius-lg);">
      <div x-data="uxNumpad({ allowDecimal: true })" class="ux-numpad ux-numpad--glass">

        <div class="ux-numpad__display">
          <span class="ux-numpad__display-value" x-text="displayValue"></span>
        </div>

        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>

          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>

          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="clear()">C</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">
            <span x-html="getIcon('backspace')"></span>
          </button>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div class="ux-numpad ux-numpad--glass"&gt;...&lt;/div&gt;</pre>
  </div>

  <!-- PIN Pad Component -->
  <div class="demo-section">
    <h3>PIN Pad</h3>
    <p>Componente dedicado para entrada de PIN con botones circulares estilo iOS, indicadores de puntos animados, estados de error/success, y boton de backspace en la posicion correcta.</p>

    <div class="demo-box" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem; border-radius: var(--ux-border-radius-lg);">
      <div x-data="uxPinpad({ length: 4, hint: 'Demo PIN: 1234' })"
           class="ux-pinpad ux-pinpad--glass"
           @pinpad-submit="
             setLoading(true);
             setTimeout(() => {
               if ($event.detail.pin === '1234') {
                 setSuccess();
               } else {
                 setError('PIN incorrecto');
               }
             }, 1000);
           ">

        <!-- Label -->
        <p class="ux-pinpad__label" x-text="label"></p>

        <!-- PIN Dots -->
        <div class="ux-pinpad__dots">
          <template x-for="i in length" :key="i">
            <div class="ux-pinpad__dot" :class="getDotClass(i - 1)"></div>
          </template>
        </div>

        <!-- Numpad Grid -->
        <div class="ux-pinpad__grid">
          <template x-for="key in keys" :key="key">
            <button type="button"
                    class="ux-pinpad__key"
                    :class="{ 'ux-pinpad__key--hidden': key === '' }"
                    :disabled="loading"
                    @click="handleKey(key)">
              <span x-show="key !== 'backspace'" x-text="key"></span>
              <span x-show="key === 'backspace'" x-html="getBackspaceIcon()"></span>
            </button>
          </template>
        </div>

        <!-- Loading indicator -->
        <div x-show="loading" class="ux-pinpad__loading">
          <span class="ux-spinner ux-spinner--sm"></span>
          <span x-text="loadingText"></span>
        </div>

        <!-- Error message -->
        <p x-show="errorMessage" class="ux-pinpad__error" x-text="errorMessage"></p>

        <!-- Hint -->
        <p x-show="hint && !loading && !errorMessage" class="ux-pinpad__hint" x-text="hint"></p>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxPinpad({ length: 4 })"
     class="ux-pinpad ux-pinpad--glass"
     @pinpad-submit="validatePin($event.detail.pin)"&gt;

  &lt;!-- Label --&gt;
  &lt;p class="ux-pinpad__label" x-text="label"&gt;&lt;/p&gt;

  &lt;!-- PIN Dots --&gt;
  &lt;div class="ux-pinpad__dots"&gt;
    &lt;template x-for="i in length" :key="i"&gt;
      &lt;div class="ux-pinpad__dot" :class="getDotClass(i - 1)"&gt;&lt;/div&gt;
    &lt;/template&gt;
  &lt;/div&gt;

  &lt;!-- Numpad Grid --&gt;
  &lt;div class="ux-pinpad__grid"&gt;
    &lt;template x-for="key in keys" :key="key"&gt;
      &lt;button type="button"
              class="ux-pinpad__key"
              :class="{ 'ux-pinpad__key--hidden': key === '' }"
              :disabled="loading"
              @click="handleKey(key)"&gt;
        &lt;span x-show="key !== 'backspace'" x-text="key"&gt;&lt;/span&gt;
        &lt;span x-show="key === 'backspace'" x-html="getBackspaceIcon()"&gt;&lt;/span&gt;
      &lt;/button&gt;
    &lt;/template&gt;
  &lt;/div&gt;

  &lt;!-- Loading --&gt;
  &lt;div x-show="loading" class="ux-pinpad__loading"&gt;
    &lt;span class="ux-spinner ux-spinner--sm"&gt;&lt;/span&gt;
    &lt;span x-text="loadingText"&gt;&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
  </div>

  <!-- PIN Pad with HTMX -->
  <div class="demo-section">
    <h3>PIN Pad con HTMX</h3>
    <p>Validacion de PIN en el servidor con HTMX.</p>

    <div class="demo-box">
      <div x-data="uxPinpad({ length: 4, label: 'Ingrese PIN de empleado' })"
           class="ux-pinpad"
           @pinpad-submit="
             setLoading(true);
             htmx.ajax('POST', '/api/validate-pin', {
               values: { pin: $event.detail.pin },
               target: '#pin-htmx-result'
             }).then(() => {
               // El servidor deberia responder con HX-Trigger para setSuccess o setError
               setLoading(false);
             });
           ">

        <p class="ux-pinpad__label" x-text="label"></p>

        <div class="ux-pinpad__dots">
          <template x-for="i in length" :key="i">
            <div class="ux-pinpad__dot" :class="getDotClass(i - 1)"></div>
          </template>
        </div>

        <div class="ux-pinpad__grid">
          <template x-for="key in keys" :key="key">
            <button type="button"
                    class="ux-pinpad__key"
                    :class="{ 'ux-pinpad__key--hidden': key === '' }"
                    :disabled="loading"
                    @click="handleKey(key)">
              <span x-show="key !== 'backspace'" x-text="key"></span>
              <span x-show="key === 'backspace'" x-html="getBackspaceIcon()"></span>
            </button>
          </template>
        </div>

        <div x-show="loading" class="ux-pinpad__loading">
          <span class="ux-spinner ux-spinner--sm"></span>
          <span x-text="loadingText"></span>
        </div>

        <p x-show="errorMessage" class="ux-pinpad__error" x-text="errorMessage"></p>
      </div>
      <div id="pin-htmx-result" style="padding: var(--ux-space-md); text-align: center;"></div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- PIN Pad con validacion HTMX --&gt;
&lt;div x-data="uxPinpad({ length: 4 })"
     class="ux-pinpad"
     @pinpad-submit="
       setLoading(true);
       htmx.ajax('POST', '/api/validate-pin', {
         values: { pin: $event.detail.pin },
         target: '#result'
       }).then(() =&gt; setLoading(false));
     "&gt;
  ...
&lt;/div&gt;</pre>

    <pre class="ux-code-block" data-lang="python"># Django view para validar PIN
@require_POST
def validate_pin(request):
    pin = request.POST.get('pin', '')

    try:
        employee = Employee.objects.get(pin_hash=hash_pin(pin))
        request.session['employee_id'] = employee.id

        return HttpResponse(f'''
            &lt;div class="ux-alert ux-color-success"&gt;
                Bienvenido, {employee.name}
            &lt;/div&gt;
        ''', headers={'HX-Trigger': 'pin-valid'})

    except Employee.DoesNotExist:
        return HttpResponse('''
            &lt;div class="ux-alert ux-color-danger"&gt;
                PIN incorrecto
            &lt;/div&gt;
        ''', headers={'HX-Trigger': 'pin-invalid'})</pre>
  </div>

  <!-- PIN Pad Sizes -->
  <div class="demo-section">
    <h3>PIN Pad - Tamanos</h3>
    <p>Variantes de tamano: pequeno (.ux-pinpad--sm) y grande (.ux-pinpad--lg).</p>

    <div class="demo-grid">
      <!-- Small -->
      <div x-data="uxPinpad({ length: 4, label: 'PIN pequeno' })"
           class="ux-pinpad ux-pinpad--sm"
           @pinpad-submit="alert('PIN: ' + $event.detail.pin)">
        <p class="ux-pinpad__label" x-text="label"></p>
        <div class="ux-pinpad__dots">
          <template x-for="i in length" :key="i">
            <div class="ux-pinpad__dot" :class="getDotClass(i - 1)"></div>
          </template>
        </div>
        <div class="ux-pinpad__grid">
          <template x-for="key in keys" :key="key">
            <button type="button" class="ux-pinpad__key" :class="{ 'ux-pinpad__key--hidden': key === '' }" @click="handleKey(key)">
              <span x-show="key !== 'backspace'" x-text="key"></span>
              <span x-show="key === 'backspace'" x-html="getBackspaceIcon()"></span>
            </button>
          </template>
        </div>
      </div>

      <!-- Large -->
      <div x-data="uxPinpad({ length: 6, label: 'PIN de 6 digitos' })"
           class="ux-pinpad ux-pinpad--lg"
           @pinpad-submit="alert('PIN: ' + $event.detail.pin)">
        <p class="ux-pinpad__label" x-text="label"></p>
        <div class="ux-pinpad__dots">
          <template x-for="i in length" :key="i">
            <div class="ux-pinpad__dot" :class="getDotClass(i - 1)"></div>
          </template>
        </div>
        <div class="ux-pinpad__grid">
          <template x-for="key in keys" :key="key">
            <button type="button" class="ux-pinpad__key" :class="{ 'ux-pinpad__key--hidden': key === '' }" @click="handleKey(key)">
              <span x-show="key !== 'backspace'" x-text="key"></span>
              <span x-show="key === 'backspace'" x-html="getBackspaceIcon()"></span>
            </button>
          </template>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Pequeno --&gt;
&lt;div class="ux-pinpad ux-pinpad--sm"&gt;...&lt;/div&gt;

&lt;!-- Grande --&gt;
&lt;div class="ux-pinpad ux-pinpad--lg"&gt;...&lt;/div&gt;

&lt;!-- 6 digitos --&gt;
&lt;div x-data="uxPinpad({ length: 6 })"&gt;...&lt;/div&gt;</pre>
  </div>

  <!-- Small Size -->
  <div class="demo-section">
    <h3>Tamanos</h3>
    <p>Variantes de tamano: pequeno (.ux-numpad--sm) y grande (.ux-numpad--lg).</p>

    <div class="demo-box">
      <!-- Small -->
      <div x-data="uxNumpad()" class="ux-numpad ux-numpad--sm ux-numpad--compact">
        <div class="ux-numpad__display ux-numpad__display--sm">
          <span class="ux-numpad__display-value" x-text="displayValue"></span>
        </div>
        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="clear()">C</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">⌫</button>
        </div>
      </div>

      <!-- Large -->
      <div x-data="uxNumpad()" class="ux-numpad ux-numpad--lg">
        <div class="ux-numpad__display ux-numpad__display--lg">
          <span class="ux-numpad__display-value" x-text="displayValue"></span>
        </div>
        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="clear()">C</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">⌫</button>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Pequeno --&gt;
&lt;div class="ux-numpad ux-numpad--sm ux-numpad--compact"&gt;...&lt;/div&gt;

&lt;!-- Grande --&gt;
&lt;div class="ux-numpad ux-numpad--lg"&gt;...&lt;/div&gt;</pre>
  </div>

  <!-- HTMX Integration -->
  <div class="demo-section">
    <h3>Integracion con HTMX</h3>
    <p>El numpad funciona perfectamente con HTMX. El valor se almacena en un input hidden que HTMX puede enviar al servidor.</p>

    <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Pago con HTMX</h4>
    <p>Enviar monto de pago al servidor cuando el usuario confirma.</p>

    <div class="demo-box">
      <form hx-post="/api/payments"
            hx-trigger="submit"
            hx-target="#payment-result"
            hx-swap="innerHTML"
            hx-indicator="#payment-spinner"
            style="width: 320px;">
        <div x-data="uxNumpad({ allowDecimal: true, decimals: 2 })"
             class="ux-numpad"
             @numpad-change="$refs.amountInput.value = $event.detail.numericValue">

          <div class="ux-numpad__display">
            <span class="ux-numpad__display-currency">$</span>
            <span class="ux-numpad__display-value" x-text="displayValue"></span>
          </div>

          <input type="hidden" name="amount" x-ref="amountInput" value="0">

          <div class="ux-numpad__grid">
            <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>
            <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="appendDecimal()">.</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
            <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">⌫</button>
          </div>

          <button type="submit" class="ux-button ux-color-primary" style="width: 100%; margin-top: var(--ux-space-sm);">
            <span class="ux-spinner ux-spinner--sm htmx-indicator" id="payment-spinner"></span>
            Procesar Pago
          </button>
        </div>
      </form>
      <div id="payment-result" style="padding: var(--ux-space-md);"></div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Pago con HTMX --&gt;
&lt;form hx-post="/api/payments"
      hx-trigger="submit"
      hx-target="#payment-result"
      hx-indicator="#spinner"&gt;

  &lt;div x-data="uxNumpad({ allowDecimal: true })"
       class="ux-numpad"
       @numpad-change="$refs.amountInput.value = $event.detail.numericValue"&gt;

    &lt;input type="hidden" name="amount" x-ref="amountInput"&gt;
    &lt;!-- numpad keys... --&gt;

    &lt;button type="submit" class="ux-button ux-color-primary"&gt;
      &lt;span class="ux-spinner htmx-indicator" id="spinner"&gt;&lt;/span&gt;
      Procesar Pago
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/form&gt;</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">PIN con Validacion HTMX</h4>
    <p>Validar PIN en el servidor automaticamente cuando se completan los 4 digitos.</p>

    <div class="demo-box">
      <div x-data="uxNumpad({ pinMode: true, pinLength: 4, pinMask: true })"
           class="ux-numpad ux-numpad--pin"
           @numpad-submit="htmx.ajax('POST', '/api/validate-pin', { values: { pin: $event.detail.value }, target: '#pin-result', swap: 'innerHTML' })">

        <div class="ux-numpad__pin-dots">
          <template x-for="(filled, index) in getPinDots()" :key="index">
            <div class="ux-numpad__pin-dot" :class="{ 'ux-numpad__pin-dot--filled': filled }"></div>
          </template>
        </div>

        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="clear()">C</button>
          <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">⌫</button>
        </div>
      </div>
      <div id="pin-result" style="padding: var(--ux-space-md); text-align: center;"></div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- PIN con validacion HTMX automatica --&gt;
&lt;div x-data="uxNumpad({ pinMode: true, pinLength: 4 })"
     class="ux-numpad ux-numpad--pin"
     @numpad-submit="htmx.ajax('POST', '/api/validate-pin', {
       values: { pin: $event.detail.value },
       target: '#pin-result'
     })"&gt;
  &lt;!-- PIN dots y teclas --&gt;
&lt;/div&gt;
&lt;div id="pin-result"&gt;&lt;/div&gt;</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Cantidad con Actualizacion en Tiempo Real</h4>
    <p>Actualizar precio total conforme cambia la cantidad.</p>

    <div class="demo-box">
      <div style="display: flex; gap: var(--ux-space-lg); align-items: flex-start;">
        <div x-data="uxNumpad({ maxLength: 4 })"
             class="ux-numpad ux-numpad--sm ux-numpad--compact"
             hx-trigger="numpad-change from:body"
             hx-get="/api/calculate-total"
             hx-vals="js:{quantity: document.querySelector('#qty-input').value, product_id: 123}"
             hx-target="#total-display"
             @numpad-change="$refs.qtyInput.value = $event.detail.value; htmx.trigger(document.body, 'numpad-change')">

          <div class="ux-numpad__display ux-numpad__display--sm">
            <span class="ux-numpad__display-label">Cantidad</span>
            <span class="ux-numpad__display-value" x-text="displayValue || '0'"></span>
          </div>
          <input type="hidden" id="qty-input" x-ref="qtyInput" value="0">

          <div class="ux-numpad__grid">
            <button type="button" class="ux-numpad__key" @click="appendDigit('7')">7</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('8')">8</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('9')">9</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('4')">4</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('5')">5</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('6')">6</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('1')">1</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('2')">2</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('3')">3</button>
            <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="clear()">C</button>
            <button type="button" class="ux-numpad__key" @click="appendDigit('0')">0</button>
            <button type="button" class="ux-numpad__key ux-numpad__key--action" @click="backspace()">⌫</button>
          </div>
        </div>

        <div id="total-display" style="padding: var(--ux-space-lg); background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius); min-width: 150px;">
          <div style="color: var(--ux-text-secondary); font-size: var(--ux-font-size-sm);">Total</div>
          <div style="font-size: var(--ux-font-size-2xl); font-weight: 700; color: var(--ux-text);">$0.00</div>
        </div>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- Cantidad con calculo en tiempo real --&gt;
&lt;div x-data="uxNumpad({ maxLength: 4 })"
     class="ux-numpad ux-numpad--sm"
     hx-trigger="numpad-change from:body"
     hx-get="/api/calculate-total"
     hx-vals="js:{quantity: document.querySelector('#qty').value}"
     hx-target="#total"
     @numpad-change="$refs.qty.value = $event.detail.value;
                     htmx.trigger(document.body, 'numpad-change')"&gt;
  &lt;input type="hidden" id="qty" x-ref="qty"&gt;
  &lt;!-- numpad --&gt;
&lt;/div&gt;
&lt;div id="total"&gt;$0.00&lt;/div&gt;</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Cambio POS (Efectivo)</h4>
    <p>Calcular cambio automaticamente en punto de venta.</p>

    <div class="demo-box">
      <form class="ux-numpad" style="width: 320px;"
            x-data="{ cashReceived: 0, total: 25.50 }"
            hx-post="/api/pos/calculate-change"
            hx-trigger="input from:#cash-received"
            hx-target="#change-display"
            hx-swap="innerHTML">

        <input type="hidden" name="total" :value="total">

        <div style="display: flex; justify-content: space-between; padding: var(--ux-space-md); background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius); margin-bottom: var(--ux-space-md);">
          <span>Total a pagar:</span>
          <strong x-text="'$' + total.toFixed(2)"></strong>
        </div>

        <div class="ux-numpad__display">
          <span class="ux-numpad__display-label">Efectivo recibido</span>
          <span class="ux-numpad__display-currency">$</span>
          <input type="text"
                 id="cash-received"
                 name="cash_received"
                 class="ux-numpad__display-value"
                 x-model="cashReceived"
                 readonly
                 style="background: transparent; border: none; font: inherit; color: inherit; text-align: right; width: 100%;">
        </div>

        <div class="ux-numpad__quick-amounts">
          <button type="button" class="ux-numpad__quick-btn" @click="cashReceived = 30">$30</button>
          <button type="button" class="ux-numpad__quick-btn" @click="cashReceived = 50">$50</button>
          <button type="button" class="ux-numpad__quick-btn" @click="cashReceived = 100">$100</button>
        </div>

        <div class="ux-numpad__grid">
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '7'">7</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '8'">8</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '9'">9</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '4'">4</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '5'">5</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '6'">6</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '1'">1</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '2'">2</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '3'">3</button>
          <button type="button" class="ux-numpad__key ux-numpad__key--danger" @click="cashReceived = 0">C</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived) + '0'">0</button>
          <button type="button" class="ux-numpad__key" @click="cashReceived = String(cashReceived).slice(0, -1) || 0">⌫</button>
        </div>

        <div id="change-display" style="text-align: center; padding: var(--ux-space-md); font-size: var(--ux-font-size-xl); font-weight: 700;">
          <template x-if="Number(cashReceived) >= total">
            <span style="color: var(--ux-success);">Cambio: $<span x-text="(Number(cashReceived) - total).toFixed(2)"></span></span>
          </template>
          <template x-if="Number(cashReceived) < total && Number(cashReceived) > 0">
            <span style="color: var(--ux-danger);">Falta: $<span x-text="(total - Number(cashReceived)).toFixed(2)"></span></span>
          </template>
        </div>

        <button type="submit"
                class="ux-button ux-color-success"
                style="width: 100%;"
                :disabled="Number(cashReceived) < total"
                hx-post="/api/pos/complete-sale"
                hx-target="#sale-result">
          Completar Venta
        </button>
      </form>
      <div id="sale-result"></div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;!-- POS con calculo de cambio --&gt;
&lt;form x-data="{ cashReceived: 0, total: 25.50 }"
      hx-post="/api/pos/calculate-change"
      hx-trigger="input from:#cash-received"
      hx-target="#change-display"&gt;

  &lt;input type="hidden" name="total" :value="total"&gt;
  &lt;input type="text" id="cash-received" name="cash_received" x-model="cashReceived"&gt;

  &lt;!-- Quick amounts --&gt;
  &lt;button type="button" @click="cashReceived = 50"&gt;$50&lt;/button&gt;

  &lt;!-- Numpad keys --&gt;
  &lt;button @click="cashReceived = String(cashReceived) + '5'"&gt;5&lt;/button&gt;

  &lt;div id="change-display"&gt;
    Cambio: $&lt;span x-text="(cashReceived - total).toFixed(2)"&gt;&lt;/span&gt;
  &lt;/div&gt;

  &lt;button type="submit"
          hx-post="/api/pos/complete-sale"
          :disabled="cashReceived &lt; total"&gt;
    Completar Venta
  &lt;/button&gt;
&lt;/form&gt;</pre>
  </div>

  <!-- HTMX + Django Section -->
  <div class="demo-section">
    <h3>HTMX + Django</h3>
    <p>Ejemplos de integracion del numpad con Django para sistemas POS (Punto de Venta).</p>

    <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Vista Django para Procesar Pago</h4>
    <p>Endpoint que recibe el monto del numpad y procesa el pago.</p>

    <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from decimal import Decimal

@require_POST
def process_payment(request):
    amount = Decimal(request.POST.get('amount', '0'))
    order_id = request.POST.get('order_id')

    if amount <= 0:
        return HttpResponse('''
            &lt;div class="ux-alert ux-color-danger"&gt;
                Ingrese un monto valido
            &lt;/div&gt;
        ''')

    # Procesar pago
    order = Order.objects.get(id=order_id)
    payment = Payment.objects.create(
        order=order,
        amount=amount,
        method='cash'
    )

    return HttpResponse(f'''
        &lt;div class="ux-alert ux-color-success"&gt;
            Pago de ${amount:.2f} procesado correctamente
        &lt;/div&gt;
    ''')</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Template Django - Numpad POS</h4>
    <p>Template con numpad para cobro en efectivo.</p>

    <pre class="ux-code-block" data-lang="html">&lt;!-- templates/pos/cash_payment.html --&gt;
{% load static %}

&lt;div class="pos-payment-panel"&gt;
  &lt;div class="order-summary"&gt;
    &lt;h4&gt;Orden #{{ order.id }}&lt;/h4&gt;
    &lt;p class="order-total"&gt;Total: ${{ order.total|floatformat:2 }}&lt;/p&gt;
  &lt;/div&gt;

  &lt;form hx-post="{% url 'pos:process_payment' %}"
        hx-target="#payment-result"
        hx-indicator="#payment-loading"&gt;
    {% csrf_token %}
    &lt;input type="hidden" name="order_id" value="{{ order.id }}"&gt;

    &lt;div x-data="uxNumpad({
      allowDecimal: true,
      decimals: 2,
      quickAmounts: [20, 50, 100, 200, 500]
    })" class="ux-numpad"
         @numpad-change="$refs.amount.value = $event.detail.numericValue"&gt;

      &lt;div class="ux-numpad__display ux-numpad__display--lg"&gt;
        &lt;span class="ux-numpad__display-label"&gt;Efectivo recibido&lt;/span&gt;
        &lt;span class="ux-numpad__display-currency"&gt;$&lt;/span&gt;
        &lt;span class="ux-numpad__display-value" x-text="displayValue"&gt;&lt;/span&gt;
      &lt;/div&gt;

      &lt;input type="hidden" name="amount" x-ref="amount" value="0"&gt;

      &lt;!-- Quick amounts --&gt;
      &lt;div class="ux-numpad__quick-amounts"&gt;
        &lt;template x-for="amt in quickAmounts" :key="amt"&gt;
          &lt;button type="button" class="ux-numpad__quick-btn"
                  @click="setQuickAmount(amt)"&gt;
            $&lt;span x-text="amt"&gt;&lt;/span&gt;
          &lt;/button&gt;
        &lt;/template&gt;
      &lt;/div&gt;

      &lt;!-- Numpad grid --&gt;
      &lt;div class="ux-numpad__grid"&gt;
        &lt;template x-for="key in ['7','8','9','4','5','6','1','2','3']"&gt;
          &lt;button type="button" class="ux-numpad__key"
                  @click="appendDigit(key)" x-text="key"&gt;&lt;/button&gt;
        &lt;/template&gt;
        &lt;button type="button" class="ux-numpad__key ux-numpad__key--danger"
                @click="clear()"&gt;C&lt;/button&gt;
        &lt;button type="button" class="ux-numpad__key"
                @click="appendDigit('0')"&gt;0&lt;/button&gt;
        &lt;button type="button" class="ux-numpad__key ux-numpad__key--action"
                @click="appendDecimal()"&gt;.&lt;/button&gt;
      &lt;/div&gt;

      &lt;!-- Change calculation --&gt;
      &lt;div class="change-display" x-show="getNumericValue() &gt;= {{ order.total }}"&gt;
        Cambio: $&lt;span x-text="(getNumericValue() - {{ order.total }}).toFixed(2)"&gt;&lt;/span&gt;
      &lt;/div&gt;

      &lt;button type="submit" class="ux-button ux-color-success"
              style="width: 100%;"
              :disabled="getNumericValue() &lt; {{ order.total }}"&gt;
        &lt;span class="ux-spinner htmx-indicator" id="payment-loading"&gt;&lt;/span&gt;
        Cobrar
      &lt;/button&gt;
    &lt;/div&gt;
  &lt;/form&gt;

  &lt;div id="payment-result"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Vista Django - Calcular Cambio en Tiempo Real</h4>
    <p>Endpoint HTMX para calcular cambio mientras el usuario ingresa el monto.</p>

    <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from decimal import Decimal

def calculate_change(request):
    cash_received = Decimal(request.GET.get('cash', '0'))
    order_total = Decimal(request.GET.get('total', '0'))

    if cash_received >= order_total:
        change = cash_received - order_total
        return HttpResponse(f'''
            &lt;div style="color: var(--ux-success); font-size: 1.5rem; font-weight: 700;"&gt;
                Cambio: ${change:.2f}
            &lt;/div&gt;
        ''')
    else:
        missing = order_total - cash_received
        return HttpResponse(f'''
            &lt;div style="color: var(--ux-danger); font-size: 1.25rem;"&gt;
                Falta: ${missing:.2f}
            &lt;/div&gt;
        ''')</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Template Django - PIN de Empleado</h4>
    <p>Autenticacion de empleado con PIN usando numpad.</p>

    <pre class="ux-code-block" data-lang="html">&lt;!-- templates/pos/employee_login.html --&gt;

&lt;div class="employee-login"&gt;
  &lt;h3&gt;Ingrese su PIN&lt;/h3&gt;

  &lt;div x-data="uxNumpad({
    pinMode: true,
    pinLength: 4,
    pinMask: true
  })" class="ux-numpad ux-numpad--pin"
       @numpad-submit="
         htmx.ajax('POST', '{% url 'pos:validate_pin' %}', {
           values: {
             pin: $event.detail.value,
             csrfmiddlewaretoken: '{{ csrf_token }}'
           },
           target: '#login-result',
           swap: 'innerHTML'
         }).then(() =&gt; clear())
       "&gt;

    &lt;div class="ux-numpad__pin-dots"&gt;
      &lt;template x-for="(filled, i) in getPinDots()" :key="i"&gt;
        &lt;div class="ux-numpad__pin-dot"
             :class="{ 'ux-numpad__pin-dot--filled': filled }"&gt;&lt;/div&gt;
      &lt;/template&gt;
    &lt;/div&gt;

    &lt;div class="ux-numpad__grid"&gt;
      &lt;template x-for="key in ['1','2','3','4','5','6','7','8','9']"&gt;
        &lt;button type="button" class="ux-numpad__key"
                @click="appendDigit(key)" x-text="key"&gt;&lt;/button&gt;
      &lt;/template&gt;
      &lt;button type="button" class="ux-numpad__key ux-numpad__key--action"
              @click="clear()"&gt;C&lt;/button&gt;
      &lt;button type="button" class="ux-numpad__key"
              @click="appendDigit('0')"&gt;0&lt;/button&gt;
      &lt;button type="button" class="ux-numpad__key ux-numpad__key--action"
              @click="backspace()"&gt;⌫&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div id="login-result"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Vista Django - Validar PIN</h4>

    <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST
import hashlib

@require_POST
def validate_employee_pin(request):
    pin = request.POST.get('pin', '')

    # Buscar empleado por PIN (hasheado)
    pin_hash = hashlib.sha256(pin.encode()).hexdigest()
    try:
        employee = Employee.objects.get(pin_hash=pin_hash, is_active=True)
        request.session['employee_id'] = employee.id

        return HttpResponse(f'''
            &lt;div class="ux-alert ux-color-success"&gt;
                Bienvenido, {employee.name}
            &lt;/div&gt;
            &lt;script&gt;
                setTimeout(() =&gt; window.location.href = '/pos/', 1000);
            &lt;/script&gt;
        ''', headers={'HX-Trigger': 'employee-authenticated'})

    except Employee.DoesNotExist:
        return HttpResponse('''
            &lt;div class="ux-alert ux-color-danger"&gt;
                PIN incorrecto
            &lt;/div&gt;
        ''')</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Template Django - Agregar Cantidad a Carrito</h4>
    <p>Numpad para ingresar cantidad de producto antes de agregarlo al carrito.</p>

    <pre class="ux-code-block" data-lang="html">&lt;!-- templates/pos/add_to_cart.html --&gt;

&lt;div class="product-quantity-modal"&gt;
  &lt;div class="product-info"&gt;
    &lt;img src="{{ product.image.url }}" alt="{{ product.name }}"&gt;
    &lt;h4&gt;{{ product.name }}&lt;/h4&gt;
    &lt;p class="product-price"&gt;${{ product.price|floatformat:2 }}&lt;/p&gt;
  &lt;/div&gt;

  &lt;form hx-post="{% url 'pos:add_to_cart' %}"
        hx-target="#cart-items"
        hx-swap="beforeend"
        hx-on::after-request="this.closest('.ux-modal').dispatchEvent(new CustomEvent('close'))"&gt;
    {% csrf_token %}
    &lt;input type="hidden" name="product_id" value="{{ product.id }}"&gt;

    &lt;div x-data="uxNumpad({ maxLength: 3, initialValue: '1' })"
         class="ux-numpad ux-numpad--sm"
         @numpad-change="$refs.qty.value = $event.detail.value || '1'"&gt;

      &lt;div class="ux-numpad__display ux-numpad__display--sm"&gt;
        &lt;span class="ux-numpad__display-label"&gt;Cantidad&lt;/span&gt;
        &lt;span class="ux-numpad__display-value" x-text="displayValue || '1'"&gt;&lt;/span&gt;
      &lt;/div&gt;

      &lt;input type="hidden" name="quantity" x-ref="qty" value="1"&gt;

      &lt;div class="ux-numpad__grid"&gt;
        &lt;template x-for="key in ['7','8','9','4','5','6','1','2','3']"&gt;
          &lt;button type="button" class="ux-numpad__key"
                  @click="appendDigit(key)" x-text="key"&gt;&lt;/button&gt;
        &lt;/template&gt;
        &lt;button type="button" class="ux-numpad__key ux-numpad__key--action"
                @click="clear()"&gt;C&lt;/button&gt;
        &lt;button type="button" class="ux-numpad__key"
                @click="appendDigit('0')"&gt;0&lt;/button&gt;
        &lt;button type="button" class="ux-numpad__key ux-numpad__key--action"
                @click="backspace()"&gt;⌫&lt;/button&gt;
      &lt;/div&gt;

      &lt;!-- Subtotal preview --&gt;
      &lt;div class="subtotal-preview"&gt;
        Subtotal: $&lt;span x-text="((getNumericValue() || 1) * {{ product.price }}).toFixed(2)"&gt;&lt;/span&gt;
      &lt;/div&gt;

      &lt;button type="submit" class="ux-button ux-color-primary" style="width: 100%;"&gt;
        Agregar al carrito
      &lt;/button&gt;
    &lt;/div&gt;
  &lt;/form&gt;
&lt;/div&gt;</pre>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">URLs Django</h4>

    <pre class="ux-code-block" data-lang="python"># urls.py
from django.urls import path
from . import views

app_name = 'pos'

urlpatterns = [
    path('payment/', views.process_payment, name='process_payment'),
    path('calculate-change/', views.calculate_change, name='calculate_change'),
    path('validate-pin/', views.validate_employee_pin, name='validate_pin'),
    path('add-to-cart/', views.add_to_cart, name='add_to_cart'),
]</pre>
  </div>

  <!-- API Reference -->
  <div class="demo-section">
    <h3>Componente Alpine.js</h3>
    <div style="background: var(--ux-surface); padding: var(--ux-space-lg); border-radius: var(--ux-border-radius-lg);">
      <pre class="ux-code-block" data-lang="javascript">// Configuracion del componente uxNumpad
uxNumpad({
  // Valor inicial
  initialValue: '',

  // Limites
  maxLength: 12,          // Maximo de digitos
  decimals: 2,            // Decimales permitidos
  allowNegative: false,   // Permitir negativos
  allowDecimal: true,     // Permitir decimales

  // Moneda
  currency: '',           // Simbolo de moneda ('$', '€')
  currencyPosition: 'prefix', // 'prefix' o 'suffix'

  // Modo PIN
  pinMode: false,         // Activar modo PIN
  pinLength: 4,           // Longitud del PIN
  pinMask: true,          // Ocultar digitos con puntos

  // Montos rapidos (para POS)
  quickAmounts: [],       // [5, 10, 20, 50, 100]

  // Labels
  labels: {
    clear: 'C',
    backspace: '⌫',
    enter: 'Enter',
    decimal: '.'
  }
})

// Propiedades reactivas:
value           // Valor actual como string
displayValue    // Valor formateado para display
hasDecimal      // Si tiene punto decimal
isNegative      // Si es negativo

// Metodos:
appendDigit(digit)    // Agregar digito (0-9)
appendDecimal()       // Agregar punto decimal
backspace()           // Borrar ultimo caracter
clear()               // Limpiar todo
toggleNegative()      // Cambiar signo +/-
setQuickAmount(n)     // Establecer monto rapido
getNumericValue()     // Obtener valor numerico
submit()              // Emitir evento submit
getIcon(name)         // Obtener icono SVG
getPinDots()          // Array de estados de PIN dots

// Eventos emitidos:
@numpad-change        // { value, numericValue, displayValue }
@numpad-submit        // { value, numericValue, displayValue, isNegative }

// Soporte de teclado (automatico):
0-9       Agregar digito
. ,       Agregar decimal
Backspace Borrar ultimo
Delete    Limpiar todo
Enter     Submit
-         Toggle negativo</pre>
    </div>

    <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Componente uxPinpad</h4>
    <div style="background: var(--ux-surface); padding: var(--ux-space-lg); border-radius: var(--ux-border-radius-lg);">
      <pre class="ux-code-block" data-lang="javascript">// Configuracion del componente uxPinpad
uxPinpad({
  // Longitud del PIN
  length: 4,              // Numero de digitos (4 o 6)

  // Textos
  label: 'Introduce tu PIN',
  hint: '',               // Texto de ayuda
  loadingText: 'Verificando...',
})

// Propiedades reactivas:
pin             // PIN actual como string
length          // Longitud del PIN
loading         // Estado de carga
error           // Estado de error
success         // Estado de exito
errorMessage    // Mensaje de error
keys            // Array de teclas [1-9, '', 0, 'backspace']

// Metodos:
handleKey(key)        // Manejar tecla (numero o 'backspace')
clear()               // Limpiar PIN
submit()              // Emitir evento submit
setLoading(bool)      // Activar/desactivar loading
setError(message)     // Mostrar error con animacion shake
setSuccess()          // Mostrar estado success
isDotFilled(index)    // Verificar si dot esta lleno
getDotClass(index)    // Obtener clase CSS del dot
getBackspaceIcon()    // Obtener SVG de backspace

// Eventos emitidos:
@pinpad-submit        // { pin: '1234' }

// Soporte de teclado (automatico):
0-9       Agregar digito
Backspace Borrar ultimo
Delete    Limpiar todo
Escape    Limpiar todo</pre>
    </div>
  </div>

  <!-- CSS Classes -->
  <div class="demo-section">
    <h3>Clases CSS</h3>
    <div style="background: var(--ux-surface); padding: var(--ux-space-lg); border-radius: var(--ux-border-radius-lg);">
      <pre class="ux-code-block" data-lang="css">/* Contenedor */
.ux-numpad                    // Contenedor principal
.ux-numpad--sm                // Tamano pequeno
.ux-numpad--lg                // Tamano grande
.ux-numpad--compact           // Padding reducido
.ux-numpad--full-width        // Ancho completo
.ux-numpad--glass             // Variante glass
.ux-numpad--pin               // Modo PIN
.ux-numpad--calculator        // Layout calculadora

/* Display */
.ux-numpad__display           // Display de valor
.ux-numpad__display--sm       // Display pequeno
.ux-numpad__display--lg       // Display grande
.ux-numpad__display-value     // Valor
.ux-numpad__display-currency  // Simbolo moneda
.ux-numpad__display-label     // Etiqueta

/* Grid */
.ux-numpad__grid              // Grid de teclas
.ux-numpad__grid--4cols       // Grid de 4 columnas

/* Teclas */
.ux-numpad__key               // Tecla base
.ux-numpad__key--wide         // Tecla doble ancho
.ux-numpad__key--tall         // Tecla doble alto
.ux-numpad__key--action       // Tecla de accion
.ux-numpad__key--primary      // Tecla primaria
.ux-numpad__key--success      // Tecla success
.ux-numpad__key--danger       // Tecla danger
.ux-numpad__key--disabled     // Tecla deshabilitada

/* Montos rapidos */
.ux-numpad__quick-amounts     // Contenedor montos
.ux-numpad__quick-btn         // Boton de monto

/* PIN (numpad mode) */
.ux-numpad__pin-dots          // Contenedor dots
.ux-numpad__pin-dot           // Dot individual
.ux-numpad__pin-dot--filled   // Dot relleno

/* ========================================
   PIN Pad Component
======================================== */

/* Contenedor */
.ux-pinpad                    // Contenedor principal
.ux-pinpad--sm                // Tamano pequeno
.ux-pinpad--lg                // Tamano grande
.ux-pinpad--glass             // Variante glass

/* Elementos */
.ux-pinpad__label             // Label/titulo
.ux-pinpad__dots              // Contenedor de dots
.ux-pinpad__dot               // Dot individual
.ux-pinpad__dot--filled       // Dot relleno
.ux-pinpad__dot--error        // Dot en error (rojo + shake)
.ux-pinpad__dot--success      // Dot success (verde)
.ux-pinpad__grid              // Grid de teclas
.ux-pinpad__key               // Tecla circular
.ux-pinpad__key--hidden       // Tecla oculta (espacio vacio)
.ux-pinpad__loading           // Indicador de carga
.ux-pinpad__hint              // Texto de ayuda
.ux-pinpad__error             // Mensaje de error</pre>
    </div>
  </div>

</body>
</html>
