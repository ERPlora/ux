<style>
    .demo-section { margin-bottom: var(--ux-space-xl); padding: var(--ux-space-lg); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); color: var(--ux-text); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { padding: var(--ux-space-xl); background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); border: 1px solid var(--ux-border-color); margin-bottom: var(--ux-space-md); }
    .ux-table { width: 100%; border-collapse: collapse; margin-bottom: var(--ux-space-lg); }
    .ux-table th, .ux-table td { padding: var(--ux-space-sm) var(--ux-space-md); text-align: left; border-bottom: 1px solid var(--ux-border-color); }
    .ux-table th { font-weight: 600; color: var(--ux-text); background: var(--ux-surface-secondary); }
    .ux-table td { color: var(--ux-text-secondary); }
    .ux-table code { background: var(--ux-surface-secondary); padding: 2px 6px; border-radius: 4px; font-size: var(--ux-font-size-sm); }
  </style>

<nav class="ux-navbar">
    <div class="ux-navbar__content">
      <div class="ux-navbar__start">
        <a href="index.html" class="ux-button ux-button--clear ux-button--sm">← Back</a>
      </div>
      <div class="ux-navbar__center">
        <h1 class="ux-navbar__title">Upload</h1>
      </div>
      <div class="ux-navbar__end"></div>
    </div>
  </nav>

  <main class="ux-padding">
    <!-- Introduccion -->
    <div class="demo-section">
      <h3>File Upload</h3>
      <p>Componente para subir archivos con soporte para drag & drop, previews y barra de progreso.</p>
    </div>

    <!-- Upload Basico (Vanilla JS) -->
    <div class="demo-section">
      <h3>Upload Básico (Vanilla JS)</h3>
      <p>Usando <code>data-ux-upload</code> - funciona sin Alpine.js</p>

      <div class="demo-box">
        <div class="ux-upload" data-ux-upload id="upload-vanilla-demo">
          <div class="ux-upload__dropzone">
            <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <p class="ux-upload__text">
              Arrastra archivos aquí o <span class="ux-upload__browse">busca en tu dispositivo</span>
            </p>
            <p class="ux-upload__hint">PNG, JPG, PDF hasta 10MB</p>
          </div>
          <div class="ux-upload__files"></div>
        </div>

        <div id="upload-result" class="result-display" style="margin-top: var(--ux-space-md); display: none;">
          Archivos: <strong id="upload-count">0</strong>
        </div>

        <script>
          document.getElementById('upload-vanilla-demo').addEventListener('ux:upload:add', function(e) {
            var result = document.getElementById('upload-result');
            var count = document.getElementById('upload-count');
            result.style.display = 'block';
            count.textContent = e.detail.files.length;
          });
          document.getElementById('upload-vanilla-demo').addEventListener('ux:upload:remove', function(e) {
            document.getElementById('upload-count').textContent = e.detail.files.length;
          });
        </script>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Vanilla JS with data-ux-upload --&gt;
&lt;div class="ux-upload" data-ux-upload&gt;
  &lt;div class="ux-upload__dropzone"&gt;
    &lt;svg class="ux-upload__icon"&gt;...&lt;/svg&gt;
    &lt;p class="ux-upload__text"&gt;Arrastra archivos aquí&lt;/p&gt;
    &lt;p class="ux-upload__hint"&gt;PNG, JPG, PDF hasta 10MB&lt;/p&gt;
  &lt;/div&gt;
  &lt;div class="ux-upload__files"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
// Listen for events
element.addEventListener('ux:upload:add', (e) =&gt; console.log('Added:', e.detail.file));
element.addEventListener('ux:upload:remove', (e) =&gt; console.log('Removed:', e.detail.file));
&lt;/script&gt;</pre>
    </div>

    <!-- Upload Basico (Alpine.js) -->
    <div class="demo-section">
      <h3>Upload Básico (Alpine.js)</h3>
      <p>Zona de drop con click para seleccionar archivos.</p>

      <div class="demo-box" x-data="uxUpload()">
        <div class="ux-upload" :class="{ 'ux-upload--dragover': isDragover }">
          <input type="file"
                 class="ux-upload__input"
                 x-ref="input"
                 multiple
                 @change="handleFiles($event.target.files)">

          <div class="ux-upload__dropzone"
               @click="browse()"
               @dragenter="onDragEnter($event)"
               @dragover="onDragOver($event)"
               @dragleave="onDragLeave($event)"
               @drop="onDrop($event)">
            <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <p class="ux-upload__text">
              Arrastra archivos aquí o <span class="ux-upload__browse">busca en tu dispositivo</span>
            </p>
            <p class="ux-upload__hint">PNG, JPG, PDF hasta 10MB</p>
          </div>

          <!-- Lista de archivos -->
          <div class="ux-upload__files" x-show="hasFiles">
            <template x-for="file in files" :key="file.id">
              <div class="ux-upload__file"
                   :class="{
                     'ux-upload__file--error': file.status === 'error',
                     'ux-upload__file--success': file.status === 'success'
                   }">
                <div class="ux-upload__preview">
                  <template x-if="file.preview">
                    <img :src="file.preview" alt="">
                  </template>
                  <template x-if="!file.preview">
                    <div class="ux-upload__preview-icon" x-html="getFileIcon(file.type)"></div>
                  </template>
                </div>
                <div class="ux-upload__file-info">
                  <p class="ux-upload__file-name" x-text="file.name"></p>
                  <p class="ux-upload__file-meta">
                    <span x-text="formatSize(file.size)"></span>
                    <span x-show="file.status === 'uploading'" x-text="file.progress + '%'"></span>
                  </p>
                  <p class="ux-upload__file-error" x-show="file.error" x-text="file.error"></p>
                  <div class="ux-upload__progress" x-show="file.status === 'uploading'">
                    <div class="ux-upload__progress-bar" :style="{ width: file.progress + '%' }"></div>
                  </div>
                </div>
                <div class="ux-upload__file-actions">
                  <button class="ux-upload__file-action ux-upload__file-action--danger"
                          @click="removeFile(file.id)"
                          title="Eliminar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="18" y1="6" x2="6" y2="18"/>
                      <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                  </button>
                </div>
              </div>
            </template>
          </div>

          <p class="ux-upload__error-message" x-show="error" x-text="error"></p>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxUpload()"&gt;
  &lt;div class="ux-upload" :class="{ 'ux-upload--dragover': isDragover }"&gt;
    &lt;input type="file" class="ux-upload__input" x-ref="input" multiple
           @change="handleFiles($event.target.files)"&gt;

    &lt;div class="ux-upload__dropzone"
         @click="browse()"
         @dragenter="onDragEnter($event)"
         @dragover="onDragOver($event)"
         @dragleave="onDragLeave($event)"
         @drop="onDrop($event)"&gt;
      &lt;svg class="ux-upload__icon"&gt;...&lt;/svg&gt;
      &lt;p class="ux-upload__text"&gt;Arrastra archivos aquí&lt;/p&gt;
      &lt;p class="ux-upload__hint"&gt;PNG, JPG, PDF hasta 10MB&lt;/p&gt;
    &lt;/div&gt;

    &lt;div class="ux-upload__files" x-show="hasFiles"&gt;
      &lt;template x-for="file in files"&gt;
        &lt;div class="ux-upload__file"&gt;...&lt;/div&gt;
      &lt;/template&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- Upload Compacto -->
    <div class="demo-section">
      <h3>Upload Compacto</h3>
      <p>Versión más pequeña para espacios reducidos.</p>

      <div class="demo-box" x-data="uxUpload()">
        <div class="ux-upload ux-upload--compact" :class="{ 'ux-upload--dragover': isDragover }">
          <input type="file" class="ux-upload__input" x-ref="input" multiple
                 @change="handleFiles($event.target.files)">

          <div class="ux-upload__dropzone"
               @click="browse()"
               @dragenter="onDragEnter($event)"
               @dragover="onDragOver($event)"
               @dragleave="onDragLeave($event)"
               @drop="onDrop($event)">
            <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <div class="ux-upload__content">
              <p class="ux-upload__text">Arrastra archivos o <span class="ux-upload__browse">selecciona</span></p>
            </div>
          </div>

          <div class="ux-upload__files" x-show="hasFiles">
            <template x-for="file in files" :key="file.id">
              <div class="ux-upload__file">
                <div class="ux-upload__preview">
                  <template x-if="file.preview">
                    <img :src="file.preview" alt="">
                  </template>
                  <template x-if="!file.preview">
                    <div class="ux-upload__preview-icon" x-html="getFileIcon(file.type)"></div>
                  </template>
                </div>
                <div class="ux-upload__file-info">
                  <p class="ux-upload__file-name" x-text="file.name"></p>
                  <p class="ux-upload__file-meta"><span x-text="formatSize(file.size)"></span></p>
                </div>
                <div class="ux-upload__file-actions">
                  <button class="ux-upload__file-action ux-upload__file-action--danger" @click="removeFile(file.id)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                  </button>
                </div>
              </div>
            </template>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-upload ux-upload--compact"&gt;
  ...
&lt;/div&gt;</pre>
    </div>

    <!-- Upload Button -->
    <div class="demo-section">
      <h3>Upload Button</h3>
      <p>Estilo de botón para subir archivos.</p>

      <div class="demo-box" x-data="uxUpload({ maxFiles: 5 })">
        <div class="ux-upload ux-upload--button">
          <input type="file" class="ux-upload__input" x-ref="input" multiple
                 @change="handleFiles($event.target.files)">

          <div class="ux-upload__dropzone" @click="browse()">
            <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <span class="ux-upload__text">Subir archivos</span>
          </div>
        </div>

        <div style="margin-top: var(--ux-space-md);" x-show="hasFiles">
          <p style="font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-sm);">
            <span x-text="files.length"></span> archivo(s) seleccionado(s)
          </p>
          <template x-for="file in files" :key="file.id">
            <div style="display: flex; align-items: center; gap: var(--ux-space-sm); margin-bottom: var(--ux-space-xs);">
              <span style="font-size: var(--ux-font-size-md);" x-text="file.name"></span>
              <span style="font-size: var(--ux-font-size-md); color: var(--ux-text-secondary);" x-text="formatSize(file.size)"></span>
              <button style="background: none; border: none; color: var(--ux-danger); cursor: pointer; padding: 2px;"
                      @click="removeFile(file.id)">×</button>
            </div>
          </template>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-upload ux-upload--button"&gt;
  &lt;input type="file" class="ux-upload__input" x-ref="input"&gt;
  &lt;div class="ux-upload__dropzone" @click="browse()"&gt;
    &lt;svg class="ux-upload__icon"&gt;...&lt;/svg&gt;
    &lt;span class="ux-upload__text"&gt;Subir archivos&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- Image Upload Button (Simple) -->
    <div class="demo-section">
      <h3>Image Upload Button (CSS-only)</h3>
      <p>Botón simple con preview para subir imágenes. No requiere Alpine.js.</p>

      <div class="demo-box">
        <div class="ux-upload-image">
          <div class="ux-upload-image__preview">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon" aria-hidden="true">
              <rect x="48" y="80" width="416" height="352" rx="48" ry="48" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect>
              <circle cx="336" cy="176" r="32" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></circle>
              <path d="M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
            </svg>
          </div>
          <label class="ux-button ux-button--outline ux-button--sm ux-upload-image__button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="18" height="18" class="icon" aria-hidden="true" style="margin-right: 6px;">
              <path d="M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8-69 0-113.44 45.79-128 91.2-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 255.79l-64-64-64 64M256 448.21V207.79"></path>
            </svg>
            Choose image
            <input type="file" name="logo" accept="image/*">
          </label>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-upload-image"&gt;
  &lt;div class="ux-upload-image__preview"&gt;
    &lt;svg&gt;...&lt;/svg&gt; &lt;!-- or &lt;img src="..."&gt; --&gt;
  &lt;/div&gt;
  &lt;label class="ux-button ux-button--outline ux-button--sm ux-upload-image__button"&gt;
    &lt;svg&gt;...&lt;/svg&gt;
    Choose image
    &lt;input type="file" name="logo" accept="image/*"&gt;
  &lt;/label&gt;
&lt;/div&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl);">Preview Sizes</h4>
      <div class="demo-box" style="margin-top: var(--ux-space-md);">
        <div style="display: flex; flex-wrap: wrap; gap: var(--ux-space-xl); align-items: flex-end;">
          <div>
            <p class="ux-text-secondary" style="margin-bottom: var(--ux-space-sm); font-size: var(--ux-font-size-sm);">Small (48px)</p>
            <div class="ux-upload-image__preview ux-upload-image__preview--sm">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon"><rect x="48" y="80" width="416" height="352" rx="48" ry="48" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><circle cx="336" cy="176" r="32" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></circle><path d="M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path></svg>
            </div>
          </div>
          <div>
            <p class="ux-text-secondary" style="margin-bottom: var(--ux-space-sm); font-size: var(--ux-font-size-sm);">Default (64px)</p>
            <div class="ux-upload-image__preview">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon"><rect x="48" y="80" width="416" height="352" rx="48" ry="48" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><circle cx="336" cy="176" r="32" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></circle><path d="M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path></svg>
            </div>
          </div>
          <div>
            <p class="ux-text-secondary" style="margin-bottom: var(--ux-space-sm); font-size: var(--ux-font-size-sm);">Large (80px)</p>
            <div class="ux-upload-image__preview ux-upload-image__preview--lg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon"><rect x="48" y="80" width="416" height="352" rx="48" ry="48" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><circle cx="336" cy="176" r="32" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></circle><path d="M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path></svg>
            </div>
          </div>
          <div>
            <p class="ux-text-secondary" style="margin-bottom: var(--ux-space-sm); font-size: var(--ux-font-size-sm);">Rounded</p>
            <div class="ux-upload-image__preview ux-upload-image__preview--rounded">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon"><rect x="48" y="80" width="416" height="352" rx="48" ry="48" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><circle cx="336" cy="176" r="32" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></circle><path d="M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path></svg>
            </div>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Small --&gt;
&lt;div class="ux-upload-image__preview ux-upload-image__preview--sm"&gt;...&lt;/div&gt;

&lt;!-- Large --&gt;
&lt;div class="ux-upload-image__preview ux-upload-image__preview--lg"&gt;...&lt;/div&gt;

&lt;!-- Rounded (circle) --&gt;
&lt;div class="ux-upload-image__preview ux-upload-image__preview--rounded"&gt;...&lt;/div&gt;</pre>
    </div>

    <!-- Upload Area (CSS-only) -->
    <div class="demo-section">
      <h3>Upload Area (CSS-only)</h3>
      <p>Zona de drop para archivos. No requiere Alpine.js para estilos básicos.</p>

      <div class="demo-box">
        <label class="ux-upload-area">
          <svg class="ux-upload-area__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path d="M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8-69 0-113.44 45.79-128 91.2-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 255.79l-64-64-64 64M256 448.21V207.79"></path>
          </svg>
          <p class="ux-upload-area__text">Drag files here or <span class="ux-upload-area__link">browse</span></p>
          <p class="ux-upload-area__hint">PNG, JPG, PDF up to 10MB</p>
          <input type="file" name="files" multiple>
        </label>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;label class="ux-upload-area"&gt;
  &lt;svg class="ux-upload-area__icon"&gt;...&lt;/svg&gt;
  &lt;p class="ux-upload-area__text"&gt;Drag files here or &lt;span class="ux-upload-area__link"&gt;browse&lt;/span&gt;&lt;/p&gt;
  &lt;p class="ux-upload-area__hint"&gt;PNG, JPG, PDF up to 10MB&lt;/p&gt;
  &lt;input type="file" name="files" multiple&gt;
&lt;/label&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl);">Area Sizes</h4>
      <div class="demo-box" style="margin-top: var(--ux-space-md);">
        <div style="display: grid; gap: var(--ux-space-lg);">
          <div>
            <p class="ux-text-secondary" style="margin-bottom: var(--ux-space-sm); font-size: var(--ux-font-size-sm);">Small</p>
            <label class="ux-upload-area ux-upload-area--sm">
              <svg class="ux-upload-area__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path d="M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8-69 0-113.44 45.79-128 91.2-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 255.79l-64-64-64 64M256 448.21V207.79"></path>
              </svg>
              <p class="ux-upload-area__text">Drop files here</p>
              <input type="file" name="files">
            </label>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Small area --&gt;
&lt;label class="ux-upload-area ux-upload-area--sm"&gt;...&lt;/label&gt;

&lt;!-- Large area --&gt;
&lt;label class="ux-upload-area ux-upload-area--lg"&gt;...&lt;/label&gt;</pre>
    </div>

    <!-- Avatar Upload -->
    <div class="demo-section">
      <h3>Avatar Upload</h3>
      <p>Upload circular para fotos de perfil.</p>

      <div class="demo-box" x-data="uxUpload({ maxFiles: 1, accept: 'image/*' })">
        <div style="display: flex; align-items: center; gap: var(--ux-space-xl);">
          <div class="ux-upload ux-upload--avatar">
            <input type="file" class="ux-upload__input" x-ref="input" accept="image/*"
                   @change="handleFiles($event.target.files)">

            <div class="ux-upload__dropzone"
                 @click="browse()"
                 @dragenter="onDragEnter($event)"
                 @dragover="onDragOver($event)"
                 @dragleave="onDragLeave($event)"
                 @drop="onDrop($event)">
              <template x-if="files.length && files[0].preview">
                <img class="ux-upload__preview-image" :src="files[0].preview" alt="Avatar">
              </template>
              <template x-if="!files.length || !files[0].preview">
                <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 32px; height: 32px;">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
              </template>
              <div class="ux-upload__overlay">
                <svg class="ux-upload__overlay-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                  <circle cx="12" cy="13" r="4"/>
                </svg>
              </div>
            </div>
          </div>

          <div>
            <h4 style="margin-bottom: var(--ux-space-xs);">Foto de perfil</h4>
            <p style="font-size: var(--ux-font-size-md); color: var(--ux-text-secondary);">
              Click o arrastra una imagen
            </p>
            <button class="ux-button ux-button--sm ux-button--outline"
                    style="margin-top: var(--ux-space-sm);"
                    x-show="files.length"
                    @click="clearFiles()">
              Eliminar
            </button>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-upload ux-upload--avatar"&gt;
  &lt;input type="file" accept="image/*" ...&gt;
  &lt;div class="ux-upload__dropzone"&gt;
    &lt;img class="ux-upload__preview-image" x-show="hasPreview"&gt;
    &lt;div class="ux-upload__overlay"&gt;
      &lt;svg class="ux-upload__overlay-icon"&gt;...&lt;/svg&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- Grid Preview -->
    <div class="demo-section">
      <h3>Grid Preview</h3>
      <p>Vista en grid para múltiples imágenes.</p>

      <div class="demo-box" x-data="uxUpload({ accept: 'image/*', maxFiles: 8 })">
        <div class="ux-upload ux-upload--grid" :class="{ 'ux-upload--dragover': isDragover }">
          <input type="file" class="ux-upload__input" x-ref="input" multiple accept="image/*"
                 @change="handleFiles($event.target.files)">

          <div class="ux-upload__dropzone"
               @click="browse()"
               @dragenter="onDragEnter($event)"
               @dragover="onDragOver($event)"
               @dragleave="onDragLeave($event)"
               @drop="onDrop($event)">
            <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <path d="m21 15-5-5L5 21"/>
            </svg>
            <p class="ux-upload__text">Arrastra imágenes aquí</p>
            <p class="ux-upload__hint">Hasta 8 imágenes</p>
          </div>

          <div class="ux-upload__files" x-show="hasFiles">
            <template x-for="file in files" :key="file.id">
              <div class="ux-upload__file">
                <div class="ux-upload__preview">
                  <template x-if="file.preview">
                    <img :src="file.preview" alt="">
                  </template>
                </div>
                <div class="ux-upload__file-info">
                  <p class="ux-upload__file-name" x-text="file.name"></p>
                  <p class="ux-upload__file-meta"><span x-text="formatSize(file.size)"></span></p>
                </div>
                <div class="ux-upload__file-actions">
                  <button class="ux-upload__file-action ux-upload__file-action--danger" @click="removeFile(file.id)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                  </button>
                </div>
              </div>
            </template>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-upload ux-upload--grid"&gt;
  ...
&lt;/div&gt;</pre>
    </div>

    <!-- API Reference -->
    <div class="demo-section">
      <h3>API Alpine.js</h3>
      <div class="demo-box">
        <pre class="ux-code-block" data-lang="javascript" style="margin-top: 0;">// Configuración
uxUpload({
  multiple: true,           // Permitir múltiples archivos
  accept: '*/*',            // Tipos MIME aceptados
  maxSize: 10485760,        // Tamaño máximo (10MB)
  maxFiles: 10,             // Máximo de archivos
  autoUpload: false,        // Subir automáticamente
  uploadUrl: ''             // URL para upload
})

// Propiedades
files            // Array de archivos
isDragover       // Estado de drag over
isLoading        // Estado de carga
error            // Mensaje de error
hasFiles         // ¿Hay archivos?
pendingFiles     // Archivos pendientes
uploadingFiles   // Archivos subiendo
completedFiles   // Archivos completados
failedFiles      // Archivos fallidos
totalProgress    // Progreso total (0-100)

// Métodos
browse()                    // Abrir selector de archivos
handleFiles(FileList)       // Procesar archivos
uploadFile(fileObj)         // Subir un archivo
uploadAll()                 // Subir todos los pendientes
removeFile(id)              // Eliminar archivo
clearFiles()                // Limpiar todos
retryFile(id)               // Reintentar upload fallido

// Utilidades
formatSize(bytes)           // Formatear tamaño (ej: "1.5 MB")
getFileIcon(mimeType)       // Obtener icono SVG

// Drag handlers (usar en dropzone)
onDragEnter(event)
onDragOver(event)
onDragLeave(event)
onDrop(event)</pre>
      </div>
    </div>

    <!-- HTMX Integration -->
    <div class="demo-section">
      <h3>Integracion con HTMX</h3>
      <p>El componente upload funciona perfectamente con HTMX para enviar archivos al servidor sin JavaScript adicional.</p>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Upload Simple con HTMX</h4>
      <p>Formulario de upload que envia archivos directamente al servidor.</p>

      <div class="demo-box">
        <form hx-post="/api/upload"
              hx-encoding="multipart/form-data"
              hx-target="#upload-result-1"
              hx-swap="innerHTML"
              hx-indicator="#upload-spinner-1">
          <div class="ux-upload ux-upload--compact">
            <input type="file" name="files" class="ux-upload__input" id="htmx-upload-1" multiple>
            <label for="htmx-upload-1" class="ux-upload__dropzone" style="cursor: pointer;">
              <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <div class="ux-upload__content">
                <p class="ux-upload__text">Selecciona archivos</p>
              </div>
            </label>
          </div>
          <button type="submit" class="ux-button ux-color-primary" style="margin-top: var(--ux-space-md);">
            <span class="ux-spinner ux-spinner--sm htmx-indicator" id="upload-spinner-1"></span>
            Subir Archivos
          </button>
        </form>
        <div id="upload-result-1" style="margin-top: var(--ux-space-md);"></div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Upload simple con HTMX --&gt;
&lt;form hx-post="/api/upload"
      hx-encoding="multipart/form-data"
      hx-target="#result"
      hx-indicator="#spinner"&gt;
  &lt;input type="file" name="files" multiple&gt;
  &lt;button type="submit"&gt;
    &lt;span class="ux-spinner htmx-indicator"&gt;&lt;/span&gt;
    Subir
  &lt;/button&gt;
&lt;/form&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Upload Automatico al Seleccionar</h4>
      <p>Subir archivo automaticamente cuando el usuario lo selecciona.</p>

      <div class="demo-box">
        <div class="ux-upload ux-upload--button">
          <input type="file"
                 name="avatar"
                 class="ux-upload__input"
                 id="auto-upload"
                 accept="image/*"
                 hx-post="/api/upload/avatar"
                 hx-encoding="multipart/form-data"
                 hx-trigger="change"
                 hx-target="#auto-upload-result"
                 hx-swap="innerHTML"
                 hx-indicator="#auto-upload-spinner">
          <label for="auto-upload" class="ux-button ux-color-primary" style="cursor: pointer;">
            <span class="ux-spinner ux-spinner--sm htmx-indicator" id="auto-upload-spinner"></span>
            Cambiar Avatar
          </label>
        </div>
        <div id="auto-upload-result" style="margin-top: var(--ux-space-md);"></div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Upload automatico al seleccionar --&gt;
&lt;input type="file"
       name="avatar"
       accept="image/*"
       hx-post="/api/upload/avatar"
       hx-encoding="multipart/form-data"
       hx-trigger="change"
       hx-target="#result"&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Upload con Preview y Confirmacion</h4>
      <p>Mostrar preview antes de subir, luego confirmar con HTMX.</p>

      <div class="demo-box" x-data="{ previewUrl: null, fileName: null }">
        <div class="ux-upload ux-upload--compact" style="max-width: 400px;">
          <input type="file"
                 name="document"
                 class="ux-upload__input"
                 id="preview-upload"
                 accept="image/*"
                 @change="
                   const file = $event.target.files[0];
                   if (file) {
                     fileName = file.name;
                     previewUrl = URL.createObjectURL(file);
                   }
                 ">
          <label for="preview-upload" class="ux-upload__dropzone" style="cursor: pointer;">
            <template x-if="!previewUrl">
              <div style="text-align: center;">
                <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                  <polyline points="17 8 12 3 7 8"/>
                  <line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
                <p class="ux-upload__text">Selecciona una imagen</p>
              </div>
            </template>
            <template x-if="previewUrl">
              <div style="display: flex; align-items: center; gap: var(--ux-space-md);">
                <img :src="previewUrl" style="width: 60px; height: 60px; object-fit: cover; border-radius: var(--ux-border-radius);" alt="Preview">
                <div>
                  <p style="font-weight: 500;" x-text="fileName"></p>
                  <p style="color: var(--ux-text-secondary); font-size: var(--ux-font-size-sm);">Click para cambiar</p>
                </div>
              </div>
            </template>
          </label>
        </div>

        <div x-show="previewUrl" style="margin-top: var(--ux-space-md); display: flex; gap: var(--ux-space-sm);">
          <button type="button"
                  class="ux-button ux-color-primary"
                  hx-post="/api/upload/document"
                  hx-encoding="multipart/form-data"
                  hx-include="#preview-upload"
                  hx-target="#preview-upload-result"
                  hx-indicator="#preview-spinner">
            <span class="ux-spinner ux-spinner--sm htmx-indicator" id="preview-spinner"></span>
            Confirmar Upload
          </button>
          <button type="button"
                  class="ux-button ux-button--outline"
                  @click="previewUrl = null; fileName = null; document.getElementById('preview-upload').value = ''">
            Cancelar
          </button>
        </div>
        <div id="preview-upload-result" style="margin-top: var(--ux-space-md);"></div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Preview local + upload con HTMX --&gt;
&lt;div x-data="{ previewUrl: null }"&gt;
  &lt;input type="file" id="file"
         @change="previewUrl = URL.createObjectURL($event.target.files[0])"&gt;

  &lt;img :src="previewUrl" x-show="previewUrl"&gt;

  &lt;button hx-post="/api/upload"
          hx-encoding="multipart/form-data"
          hx-include="#file"
          x-show="previewUrl"&gt;
    Confirmar
  &lt;/button&gt;
&lt;/div&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Upload de Producto con Formulario</h4>
      <p>Formulario completo con imagen y datos del producto.</p>

      <div class="demo-box">
        <form hx-post="/api/products"
              hx-encoding="multipart/form-data"
              hx-target="#product-result"
              hx-swap="innerHTML"
              hx-indicator="#product-spinner"
              style="max-width: 500px;">

          <div class="ux-upload ux-upload--compact" style="margin-bottom: var(--ux-space-md);">
            <input type="file" name="image" class="ux-upload__input" id="product-image" accept="image/*">
            <label for="product-image" class="ux-upload__dropzone" style="cursor: pointer;">
              <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21 15 16 10 5 21"/>
              </svg>
              <div class="ux-upload__content">
                <p class="ux-upload__text">Imagen del producto</p>
              </div>
            </label>
          </div>

          <div class="ux-input" style="margin-bottom: var(--ux-space-md);">
            <label class="ux-input__label" for="product-name">Nombre</label>
            <input type="text" id="product-name" name="name" class="ux-input__field" placeholder="Cafe Americano" required>
          </div>

          <div class="ux-input" style="margin-bottom: var(--ux-space-md);">
            <label class="ux-input__label" for="product-price">Precio</label>
            <input type="number" id="product-price" name="price" class="ux-input__field" placeholder="9.99" step="0.01" required>
          </div>

          <div class="ux-input" style="margin-bottom: var(--ux-space-lg);">
            <label class="ux-input__label" for="product-desc">Descripcion</label>
            <textarea id="product-desc" name="description" class="ux-input__field" placeholder="Descripcion del producto" rows="3"></textarea>
          </div>

          <button type="submit" class="ux-button ux-color-primary">
            <span class="ux-spinner ux-spinner--sm htmx-indicator" id="product-spinner"></span>
            Crear Producto
          </button>
        </form>
        <div id="product-result" style="margin-top: var(--ux-space-md);"></div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Formulario con imagen y datos --&gt;
&lt;form hx-post="/api/products"
      hx-encoding="multipart/form-data"
      hx-target="#result"&gt;

  &lt;input type="file" name="image" accept="image/*"&gt;
  &lt;input type="text" name="name"&gt;
  &lt;input type="number" name="price"&gt;

  &lt;button type="submit"&gt;Crear Producto&lt;/button&gt;
&lt;/form&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Galeria con Upload Multiple</h4>
      <p>Subir multiples imagenes y mostrar galeria actualizada.</p>

      <div class="demo-box">
        <div id="gallery"
             style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: var(--ux-space-sm); margin-bottom: var(--ux-space-md);">
          <div style="aspect-ratio: 1; background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius); display: flex; align-items: center; justify-content: center; color: var(--ux-text-secondary);">
            1
          </div>
          <div style="aspect-ratio: 1; background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius); display: flex; align-items: center; justify-content: center; color: var(--ux-text-secondary);">
            2
          </div>
          <div style="aspect-ratio: 1; background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius); display: flex; align-items: center; justify-content: center; color: var(--ux-text-secondary);">
            3
          </div>
        </div>

        <form hx-post="/api/gallery/upload"
              hx-encoding="multipart/form-data"
              hx-target="#gallery"
              hx-swap="innerHTML"
              hx-indicator="#gallery-spinner">
          <div class="ux-upload ux-upload--compact">
            <input type="file" name="images" class="ux-upload__input" id="gallery-upload" accept="image/*" multiple>
            <label for="gallery-upload" class="ux-upload__dropzone" style="cursor: pointer;">
              <svg class="ux-upload__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              <div class="ux-upload__content">
                <p class="ux-upload__text">Agregar imagenes</p>
              </div>
            </label>
          </div>
          <button type="submit" class="ux-button ux-button--outline" style="margin-top: var(--ux-space-sm);">
            <span class="ux-spinner ux-spinner--sm htmx-indicator" id="gallery-spinner"></span>
            Subir a Galeria
          </button>
        </form>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Galeria que se actualiza con nuevas imagenes --&gt;
&lt;div id="gallery"&gt;
  &lt;!-- imagenes existentes --&gt;
&lt;/div&gt;

&lt;form hx-post="/api/gallery/upload"
      hx-encoding="multipart/form-data"
      hx-target="#gallery"
      hx-swap="innerHTML"&gt;
  &lt;input type="file" name="images" multiple&gt;
  &lt;button type="submit"&gt;Subir&lt;/button&gt;
&lt;/form&gt;

&lt;!-- El servidor devuelve la galeria completa actualizada --&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Eliminar Archivo del Servidor</h4>
      <p>Lista de archivos con opcion de eliminar via HTMX.</p>

      <div class="demo-box">
        <div id="file-list" style="display: flex; flex-direction: column; gap: var(--ux-space-sm);">
          <div class="ux-upload__file" style="display: flex; align-items: center; padding: var(--ux-space-sm); background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius);">
            <div style="flex: 1;">
              <p style="font-weight: 500;">documento.pdf</p>
              <p style="color: var(--ux-text-secondary); font-size: var(--ux-font-size-sm);">2.4 MB</p>
            </div>
            <button class="ux-button ux-button--sm ux-button--clear"
                    style="color: var(--ux-danger);"
                    hx-delete="/api/files/123"
                    hx-target="closest .ux-upload__file"
                    hx-swap="outerHTML"
                    hx-confirm="Eliminar este archivo?">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
            </button>
          </div>

          <div class="ux-upload__file" style="display: flex; align-items: center; padding: var(--ux-space-sm); background: var(--ux-surface-secondary); border-radius: var(--ux-border-radius);">
            <div style="flex: 1;">
              <p style="font-weight: 500;">imagen.jpg</p>
              <p style="color: var(--ux-text-secondary); font-size: var(--ux-font-size-sm);">1.1 MB</p>
            </div>
            <button class="ux-button ux-button--sm ux-button--clear"
                    style="color: var(--ux-danger);"
                    hx-delete="/api/files/124"
                    hx-target="closest .ux-upload__file"
                    hx-swap="outerHTML"
                    hx-confirm="Eliminar este archivo?">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Eliminar archivo con HTMX --&gt;
&lt;div class="ux-upload__file"&gt;
  &lt;span&gt;documento.pdf&lt;/span&gt;
  &lt;button hx-delete="/api/files/123"
          hx-target="closest .ux-upload__file"
          hx-swap="outerHTML"
          hx-confirm="Eliminar?"&gt;
    Eliminar
  &lt;/button&gt;
&lt;/div&gt;</pre>
    </div>

    <!-- HTMX + Django -->
    <div class="demo-section">
      <h3>HTMX + Django</h3>
      <p>Ejemplos de integracion con Django para subir archivos con HTMX, incluyendo validacion y progreso.</p>

      <h4 style="margin-top: var(--ux-space-lg); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Upload con Barra de Progreso</h4>
      <p>Formulario de upload con indicador de progreso usando HTMX y Alpine.js.</p>

      <div class="demo-box">
        <form id="upload-form"
              hx-post="/upload/"
              hx-encoding="multipart/form-data"
              hx-target="#upload-response"
              hx-swap="innerHTML"
              hx-indicator="#progress-container"
              x-data="{ progress: 0, uploading: false }"
              @htmx:xhr:progress="progress = Math.round($event.detail.loaded / $event.detail.total * 100)"
              @htmx:before-request="uploading = true; progress = 0"
              @htmx:after-request="uploading = false">

          <label class="ux-upload-area">
            <svg class="ux-upload-area__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path d="M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8-69 0-113.44 45.79-128 91.2-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 255.79l-64-64-64 64M256 448.21V207.79"></path>
            </svg>
            <p class="ux-upload-area__text">Arrastra archivos aqui o <span class="ux-upload-area__link">selecciona</span></p>
            <p class="ux-upload-area__hint">PNG, JPG, PDF hasta 10MB</p>
            <input type="file" name="file" accept="image/*,.pdf" required>
          </label>

          <!-- Barra de progreso -->
          <div id="progress-container" class="htmx-indicator" style="margin-top: var(--ux-space-md);">
            <div class="ux-progress" style="height: 8px;">
              <div class="ux-progress__bar ux-color-primary" :style="{ width: progress + '%' }"></div>
            </div>
            <p style="text-align: center; margin-top: var(--ux-space-xs); font-size: var(--ux-font-size-sm); color: var(--ux-text-secondary);">
              <span x-text="progress"></span>%
            </p>
          </div>

          <button type="submit" class="ux-button ux-color-primary" style="margin-top: var(--ux-space-md);" :disabled="uploading">
            <span x-show="!uploading">Subir Archivo</span>
            <span x-show="uploading">Subiendo...</span>
          </button>
        </form>
        <div id="upload-response" style="margin-top: var(--ux-space-md);"></div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Upload con barra de progreso --&gt;
&lt;form hx-post="/upload/"
      hx-encoding="multipart/form-data"
      hx-target="#response"
      x-data="{ progress: 0, uploading: false }"
      @htmx:xhr:progress="progress = Math.round($event.detail.loaded / $event.detail.total * 100)"
      @htmx:before-request="uploading = true; progress = 0"
      @htmx:after-request="uploading = false"&gt;

  &lt;input type="file" name="file" required&gt;

  &lt;!-- Barra de progreso --&gt;
  &lt;div class="ux-progress" x-show="uploading"&gt;
    &lt;div class="ux-progress__bar" :style="{ width: progress + '%' }"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;span x-text="progress + '%'"&gt;&lt;/span&gt;

  &lt;button type="submit" :disabled="uploading"&gt;Subir&lt;/button&gt;
&lt;/form&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Vista Django para Manejar Uploads</h4>
      <p>Vista Django que procesa archivos, valida tipo y tamano, y devuelve respuestas HTML parciales para HTMX.</p>

      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST
from django.core.exceptions import ValidationError
import os

# Configuracion
ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'application/pdf']
MAX_FILE_SIZE = 10 * 1024 * 1024  # 10MB

def validate_file(file):
    """Valida tipo y tamano del archivo."""
    # Validar tipo MIME
    if file.content_type not in ALLOWED_TYPES:
        raise ValidationError(f'Tipo no permitido: {file.content_type}')

    # Validar tamano
    if file.size &gt; MAX_FILE_SIZE:
        size_mb = file.size / (1024 * 1024)
        raise ValidationError(f'Archivo muy grande: {size_mb:.1f}MB (max 10MB)')

    # Validar extension
    ext = os.path.splitext(file.name)[1].lower()
    allowed_exts = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.pdf']
    if ext not in allowed_exts:
        raise ValidationError(f'Extension no permitida: {ext}')

    return True

@require_POST
def upload_file(request):
    """Procesa upload de archivo."""
    file = request.FILES.get('file')

    if not file:
        return HttpResponse('''
            &lt;div class="ux-alert ux-color-danger"&gt;
                &lt;strong&gt;Error:&lt;/strong&gt; No se recibio ningun archivo
            &lt;/div&gt;
        ''', status=400)

    try:
        validate_file(file)

        # Guardar archivo (ejemplo simple)
        from django.core.files.storage import default_storage
        path = default_storage.save(f'uploads/{file.name}', file)

        return HttpResponse(f'''
            &lt;div class="ux-alert ux-color-success"&gt;
                &lt;strong&gt;Exito!&lt;/strong&gt; Archivo subido: {file.name}
                &lt;p style="margin-top: 0.5rem; font-size: 0.875rem;"&gt;
                    Tamano: {file.size / 1024:.1f} KB
                &lt;/p&gt;
            &lt;/div&gt;
        ''')

    except ValidationError as e:
        return HttpResponse(f'''
            &lt;div class="ux-alert ux-color-danger"&gt;
                &lt;strong&gt;Error:&lt;/strong&gt; {e.message}
            &lt;/div&gt;
        ''', status=400)

    except Exception as e:
        return HttpResponse(f'''
            &lt;div class="ux-alert ux-color-danger"&gt;
                &lt;strong&gt;Error:&lt;/strong&gt; Error al procesar archivo
            &lt;/div&gt;
        ''', status=500)</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Validacion de Tipo y Tamano (Cliente)</h4>
      <p>Validacion en el cliente antes de enviar al servidor usando Alpine.js.</p>

      <div class="demo-box" x-data="{
        file: null,
        error: null,
        maxSize: 10 * 1024 * 1024,
        allowedTypes: ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'application/pdf'],
        validate(event) {
          this.error = null;
          const f = event.target.files[0];
          if (!f) return;

          if (!this.allowedTypes.includes(f.type)) {
            this.error = 'Tipo de archivo no permitido. Use: JPG, PNG, GIF, WEBP o PDF';
            event.target.value = '';
            return;
          }

          if (f.size > this.maxSize) {
            this.error = 'Archivo muy grande. Maximo: 10MB';
            event.target.value = '';
            return;
          }

          this.file = f;
        },
        formatSize(bytes) {
          if (bytes < 1024) return bytes + ' B';
          if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
          return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }
      }">
        <form hx-post="/upload/"
              hx-encoding="multipart/form-data"
              hx-target="#validation-response"
              hx-swap="innerHTML">

          <label class="ux-upload-area" :class="{ 'ux-upload-area--error': error }">
            <svg class="ux-upload-area__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path d="M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8-69 0-113.44 45.79-128 91.2-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 255.79l-64-64-64 64M256 448.21V207.79"></path>
            </svg>
            <p class="ux-upload-area__text" x-show="!file">Arrastra archivos aqui o <span class="ux-upload-area__link">selecciona</span></p>
            <p class="ux-upload-area__text" x-show="file" x-text="file?.name"></p>
            <p class="ux-upload-area__hint" x-show="file" x-text="formatSize(file?.size || 0)"></p>
            <p class="ux-upload-area__hint" x-show="!file">JPG, PNG, GIF, WEBP, PDF - Max 10MB</p>
            <input type="file" name="file" accept="image/*,.pdf" @change="validate($event)" required>
          </label>

          <div x-show="error" style="margin-top: var(--ux-space-sm);">
            <p style="color: var(--ux-danger); font-size: var(--ux-font-size-sm);" x-text="error"></p>
          </div>

          <button type="submit" class="ux-button ux-color-primary" style="margin-top: var(--ux-space-md);" :disabled="!file || error">
            Subir Archivo
          </button>
        </form>
        <div id="validation-response" style="margin-top: var(--ux-space-md);"></div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Validacion en cliente --&gt;
&lt;div x-data="{
  file: null,
  error: null,
  maxSize: 10 * 1024 * 1024,
  allowedTypes: ['image/jpeg', 'image/png', 'application/pdf'],
  validate(event) {
    this.error = null;
    const f = event.target.files[0];
    if (!f) return;

    if (!this.allowedTypes.includes(f.type)) {
      this.error = 'Tipo no permitido';
      event.target.value = '';
      return;
    }

    if (f.size &gt; this.maxSize) {
      this.error = 'Archivo muy grande (max 10MB)';
      event.target.value = '';
      return;
    }

    this.file = f;
  }
}"&gt;
  &lt;form hx-post="/upload/" hx-encoding="multipart/form-data"&gt;
    &lt;input type="file" @change="validate($event)"&gt;
    &lt;p x-show="error" x-text="error" style="color: var(--ux-danger)"&gt;&lt;/p&gt;
    &lt;button type="submit" :disabled="!file || error"&gt;Subir&lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">URLs Django</h4>
      <p>Configuracion de URLs para las vistas de upload.</p>

      <pre class="ux-code-block" data-lang="python"># urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('upload/', views.upload_file, name='upload_file'),
    path('upload/image/', views.upload_image, name='upload_image'),
    path('upload/document/', views.upload_document, name='upload_document'),
    path('files/&lt;int:pk&gt;/delete/', views.delete_file, name='delete_file'),
]</pre>

      <h4 style="margin-top: var(--ux-space-xl); margin-bottom: var(--ux-space-sm); color: var(--ux-text);">Vista de Upload con Modelo</h4>
      <p>Ejemplo completo con modelo Django y formulario.</p>

      <pre class="ux-code-block" data-lang="python"># models.py
from django.db import models

class UploadedFile(models.Model):
    file = models.FileField(upload_to='uploads/%Y/%m/')
    original_name = models.CharField(max_length=255)
    content_type = models.CharField(max_length=100)
    size = models.PositiveIntegerField()
    uploaded_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.original_name


# forms.py
from django import forms
from .models import UploadedFile

class UploadForm(forms.ModelForm):
    class Meta:
        model = UploadedFile
        fields = ['file']

    def clean_file(self):
        file = self.cleaned_data.get('file')
        if file:
            # Validar tipo
            allowed = ['image/jpeg', 'image/png', 'application/pdf']
            if file.content_type not in allowed:
                raise forms.ValidationError('Tipo de archivo no permitido')

            # Validar tamano (10MB)
            if file.size &gt; 10 * 1024 * 1024:
                raise forms.ValidationError('Archivo muy grande (max 10MB)')

        return file


# views.py
from django.http import HttpResponse
from django.views.decorators.http import require_POST, require_http_methods
from .forms import UploadForm
from .models import UploadedFile

@require_POST
def upload_file(request):
    form = UploadForm(request.POST, request.FILES)

    if form.is_valid():
        file = request.FILES['file']
        obj = form.save(commit=False)
        obj.original_name = file.name
        obj.content_type = file.content_type
        obj.size = file.size
        obj.save()

        return HttpResponse(f'''
            &lt;div class="ux-list__item"&gt;
                &lt;div class="ux-list__content"&gt;
                    &lt;p class="ux-list__title"&gt;{obj.original_name}&lt;/p&gt;
                    &lt;p class="ux-list__note"&gt;{obj.size / 1024:.1f} KB&lt;/p&gt;
                &lt;/div&gt;
                &lt;button class="ux-button ux-button--clear ux-button--sm"
                        hx-delete="/files/{obj.pk}/delete/"
                        hx-target="closest .ux-list__item"
                        hx-swap="outerHTML"&gt;
                    Eliminar
                &lt;/button&gt;
            &lt;/div&gt;
        ''')

    errors = form.errors.get('file', ['Error al subir archivo'])
    return HttpResponse(f'''
        &lt;div class="ux-alert ux-color-danger"&gt;{errors[0]}&lt;/div&gt;
    ''', status=400)


@require_http_methods(["DELETE"])
def delete_file(request, pk):
    try:
        obj = UploadedFile.objects.get(pk=pk)
        obj.file.delete()  # Eliminar archivo fisico
        obj.delete()       # Eliminar registro
        return HttpResponse('')  # Respuesta vacia = elemento eliminado
    except UploadedFile.DoesNotExist:
        return HttpResponse('Archivo no encontrado', status=404)</pre>
    </div>

    <!-- Referencia de Clases -->
    <div class="demo-section">
      <h3>Referencia de Clases</h3>
      <table class="ux-table">
        <thead>
          <tr>
            <th>Clase</th>
            <th>Descripción</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>.ux-upload</code></td><td>Contenedor principal</td></tr>
          <tr><td><code>.ux-upload--compact</code></td><td>Versión compacta horizontal</td></tr>
          <tr><td><code>.ux-upload--button</code></td><td>Estilo botón</td></tr>
          <tr><td><code>.ux-upload--avatar</code></td><td>Circular para avatar</td></tr>
          <tr><td><code>.ux-upload--grid</code></td><td>Preview en grid</td></tr>
          <tr><td><code>.ux-upload--dragover</code></td><td>Estado drag over</td></tr>
          <tr><td><code>.ux-upload__dropzone</code></td><td>Zona de drop</td></tr>
          <tr><td><code>.ux-upload__files</code></td><td>Lista de archivos</td></tr>
          <tr><td><code>.ux-upload__file</code></td><td>Item de archivo</td></tr>
          <tr><td><code>.ux-upload__file--error</code></td><td>Archivo con error</td></tr>
          <tr><td><code>.ux-upload__file--success</code></td><td>Archivo subido exitosamente</td></tr>
          <tr><td><code>.ux-upload__preview</code></td><td>Preview del archivo</td></tr>
          <tr><td><code>.ux-upload__progress</code></td><td>Barra de progreso</td></tr>
        </tbody>
      </table>

      <h4>Image Upload Button (CSS-only)</h4>
      <table class="ux-table">
        <thead>
          <tr><th>Clase</th><th>Descripción</th></tr>
        </thead>
        <tbody>
          <tr><td><code>.ux-upload-image</code></td><td>Contenedor botón + preview</td></tr>
          <tr><td><code>.ux-upload-image__preview</code></td><td>Caja de preview (64px)</td></tr>
          <tr><td><code>.ux-upload-image__preview--sm</code></td><td>Preview pequeño (48px)</td></tr>
          <tr><td><code>.ux-upload-image__preview--lg</code></td><td>Preview grande (80px)</td></tr>
          <tr><td><code>.ux-upload-image__preview--rounded</code></td><td>Preview circular</td></tr>
          <tr><td><code>.ux-upload-image__button</code></td><td>Label que oculta el input</td></tr>
        </tbody>
      </table>

      <h4>Upload Area (CSS-only)</h4>
      <table class="ux-table">
        <thead>
          <tr><th>Clase</th><th>Descripción</th></tr>
        </thead>
        <tbody>
          <tr><td><code>.ux-upload-area</code></td><td>Zona de drop (label)</td></tr>
          <tr><td><code>.ux-upload-area--sm</code></td><td>Área pequeña (120px)</td></tr>
          <tr><td><code>.ux-upload-area--lg</code></td><td>Área grande (240px)</td></tr>
          <tr><td><code>.ux-upload-area--dragover</code></td><td>Estado drag over</td></tr>
          <tr><td><code>.ux-upload-area--disabled</code></td><td>Estado deshabilitado</td></tr>
          <tr><td><code>.ux-upload-area--error</code></td><td>Estado error</td></tr>
          <tr><td><code>.ux-upload-area__icon</code></td><td>Icono central</td></tr>
          <tr><td><code>.ux-upload-area__text</code></td><td>Texto principal</td></tr>
          <tr><td><code>.ux-upload-area__hint</code></td><td>Texto secundario (formatos)</td></tr>
          <tr><td><code>.ux-upload-area__link</code></td><td>Enlace "browse" destacado</td></tr>
        </tbody>
      </table>
    </div>

  </main>