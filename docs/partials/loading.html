<style>
    .demo-section { margin-bottom: var(--ux-space-xl); }
    .demo-section h3 { font-size: var(--ux-font-size-lg); font-weight: 600; margin-bottom: var(--ux-space-md); color: var(--ux-text); }
    .demo-section p { font-size: var(--ux-font-size-md); color: var(--ux-text-secondary); margin-bottom: var(--ux-space-md); }
    .demo-box { background: var(--ux-surface); border-radius: var(--ux-border-radius-lg); padding: var(--ux-space-lg); margin-bottom: var(--ux-space-md); display: flex; flex-wrap: wrap; gap: var(--ux-space-md); align-items: center; }
  </style>

<!-- Loading Backdrop -->
  <div class="ux-loading-backdrop" :class="{ 'ux-loading-backdrop--open': loadingOpen }" @click="loadingOpen = false">
    <div class="ux-loading">
      <div class="ux-loading__spinner" :class="'ux-loading__spinner--' + loadingSpinner"></div>
      <div class="ux-loading__message" x-show="loadingMessage" x-text="loadingMessage"></div>
    </div>
  </div>

  <div style="padding: var(--ux-space-lg);">
    <!-- Basic Loading -->
    <section class="demo-section">
      <h3>Loading Basico</h3>
      <p>Indicador de carga con backdrop estilo iOS.</p>
      <div class="demo-box">
        <button class="ux-button ux-button ux-color-primary" @click="loadingSpinner = 'default'; loadingMessage = ''; loadingOpen = true; setTimeout(() => loadingOpen = false, 2000)">
          Mostrar Loading
        </button>
        <button class="ux-button ux-button ux-color-secondary" @click="loadingSpinner = 'default'; loadingMessage = 'Cargando...'; loadingOpen = true; setTimeout(() => loadingOpen = false, 2000)">
          Con Mensaje
        </button>
      </div>
      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-loading-backdrop ux-loading-backdrop--open"&gt;
  &lt;div class="ux-loading"&gt;
    &lt;div class="ux-loading__spinner"&gt;&lt;/div&gt;
    &lt;div class="ux-loading__message"&gt;Cargando...&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </section>

    <!-- Spinner Types -->
    <section class="demo-section">
      <h3>Tipos de Spinner</h3>
      <p>Tres estilos de spinner: default, iOS (dots) y dots (bouncing).</p>
      <div class="demo-box">
        <button class="ux-button" @click="loadingSpinner = 'default'; loadingMessage = 'Default'; loadingOpen = true; setTimeout(() => loadingOpen = false, 2000)">
          Default
        </button>
        <button class="ux-button" @click="loadingSpinner = 'ios'; loadingMessage = 'iOS Style'; loadingOpen = true; setTimeout(() => loadingOpen = false, 2000)">
          iOS
        </button>
        <button class="ux-button" @click="loadingSpinner = 'dots'; loadingMessage = 'Dots'; loadingOpen = true; setTimeout(() => loadingOpen = false, 2000)">
          Dots
        </button>
      </div>

      <!-- Static previews -->
      <div class="demo-box" style="justify-content: space-around; background: var(--ux-surface-secondary);">
        <div style="text-align: center;">
          <div class="ux-loading__spinner" style="margin: 0 auto var(--ux-space-sm);"></div>
          <small>default</small>
        </div>
        <div style="text-align: center;">
          <div class="ux-loading__spinner ux-loading__spinner--ios" style="margin: 0 auto var(--ux-space-sm);"></div>
          <small>ios</small>
        </div>
        <div style="text-align: center;">
          <div class="ux-loading__spinner ux-loading__spinner--dots" style="margin: 0 auto var(--ux-space-sm);"><span class="ux-loading__dot"></span></div>
          <small>dots</small>
        </div>
      </div>

      <pre class="ux-code-block" data-lang="html">&lt;!-- Default spinner --&gt;
&lt;div class="ux-loading__spinner"&gt;&lt;/div&gt;

&lt;!-- iOS style spinner --&gt;
&lt;div class="ux-loading__spinner ux-loading__spinner--ios"&gt;&lt;/div&gt;

&lt;!-- Bouncing dots --&gt;
&lt;div class="ux-loading__spinner ux-loading__spinner--dots"&gt;
  &lt;span class="ux-loading__dot"&gt;&lt;/span&gt;
&lt;/div&gt;</pre>
    </section>

    <!-- Sizes -->
    <section class="demo-section">
      <h3>Tamanos</h3>
      <p>Tres tamanos disponibles: sm, default, lg.</p>
      <div class="demo-box" style="justify-content: space-around; background: var(--ux-surface-secondary);">
        <div class="ux-loading ux-loading--sm" style="position: relative; transform: none; opacity: 1;">
          <div class="ux-loading__spinner"></div>
          <div class="ux-loading__message">Small</div>
        </div>
        <div class="ux-loading" style="position: relative; transform: none; opacity: 1;">
          <div class="ux-loading__spinner"></div>
          <div class="ux-loading__message">Default</div>
        </div>
        <div class="ux-loading ux-loading--lg" style="position: relative; transform: none; opacity: 1;">
          <div class="ux-loading__spinner"></div>
          <div class="ux-loading__message">Large</div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-loading ux-loading--sm"&gt;...&lt;/div&gt;
&lt;div class="ux-loading"&gt;...&lt;/div&gt;
&lt;div class="ux-loading ux-loading--lg"&gt;...&lt;/div&gt;</pre>
    </section>

    <!-- Dark Mode -->
    <section class="demo-section">
      <h3>Variante Oscura</h3>
      <p>Loading con fondo oscuro para fondos claros.</p>
      <div class="demo-box" style="background: var(--ux-light);">
        <div class="ux-loading ux-loading--dark" style="position: relative; transform: none; opacity: 1;">
          <div class="ux-loading__spinner"></div>
          <div class="ux-loading__message">Cargando...</div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-loading ux-loading--dark"&gt;
  &lt;div class="ux-loading__spinner"&gt;&lt;/div&gt;
  &lt;div class="ux-loading__message"&gt;Cargando...&lt;/div&gt;
&lt;/div&gt;</pre>
    </section>

    <!-- Inline Loading -->
    <section class="demo-section">
      <h3>Loading Inline</h3>
      <p>Spinner pequeno para usar dentro del contenido.</p>
      <div class="demo-box">
        <div class="ux-loading-inline">
          <div class="ux-loading-inline__spinner"></div>
          <span class="ux-loading-inline__text">Cargando datos...</span>
        </div>
      </div>
      <div class="demo-box">
        <div class="ux-loading-inline ux-loading-inline--sm">
          <div class="ux-loading-inline__spinner"></div>
          <span class="ux-loading-inline__text">Pequeno</span>
        </div>
        <div class="ux-loading-inline ux-loading-inline--lg">
          <div class="ux-loading-inline__spinner"></div>
          <span class="ux-loading-inline__text">Grande</span>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html">&lt;div class="ux-loading-inline"&gt;
  &lt;div class="ux-loading-inline__spinner"&gt;&lt;/div&gt;
  &lt;span class="ux-loading-inline__text"&gt;Cargando...&lt;/span&gt;
&lt;/div&gt;

&lt;!-- Tamanos --&gt;
&lt;div class="ux-loading-inline ux-loading-inline--sm"&gt;...&lt;/div&gt;
&lt;div class="ux-loading-inline ux-loading-inline--lg"&gt;...&lt;/div&gt;</pre>
    </section>

    <!-- Loading Overlay -->
    <section class="demo-section">
      <h3>Loading Overlay</h3>
      <p>Overlay para cubrir un contenedor especifico.</p>
      <div class="demo-box" style="position: relative; min-height: 150px;">
        <p>Contenido del contenedor...</p>
        <div class="ux-loading-overlay ux-loading-overlay--visible">
          <div class="ux-loading-inline">
            <div class="ux-loading-inline__spinner"></div>
            <span class="ux-loading-inline__text">Actualizando...</span>
          </div>
        </div>
      </div>
      <pre class="ux-code-block" data-lang="html">&lt;div style="position: relative;"&gt;
  &lt;p&gt;Contenido...&lt;/p&gt;

  &lt;div class="ux-loading-overlay ux-loading-overlay--visible"&gt;
    &lt;div class="ux-loading-inline"&gt;
      &lt;div class="ux-loading-inline__spinner"&gt;&lt;/div&gt;
      &lt;span&gt;Actualizando...&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </section>

    <!-- Alpine Component -->
    <section class="demo-section">
      <h3>Componente Alpine</h3>
      <p>Uso con Alpine.js para control programatico.</p>
      <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxLoading({ message: 'Cargando...' })"&gt;
  &lt;button @click="show()"&gt;Mostrar&lt;/button&gt;
  &lt;button @click="show({ message: 'Guardando...' })"&gt;Con mensaje&lt;/button&gt;
  &lt;button @click="hide()"&gt;Ocultar&lt;/button&gt;

  &lt;!-- Backdrop y loading --&gt;
  &lt;div class="ux-loading-backdrop"
       :class="{ 'ux-loading-backdrop--open': isOpen }"&gt;
    &lt;div class="ux-loading"&gt;
      &lt;div class="ux-loading__spinner" :class="'ux-loading__spinner--' + spinner"&gt;&lt;/div&gt;
      &lt;div class="ux-loading__message" x-text="message"&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </section>

    <!-- HTMX + Django -->
    <section class="demo-section">
      <h3>HTMX + Django</h3>
      <p>Integracion con HTMX usando indicadores de carga automaticos.</p>

      <h4 style="font-size: var(--ux-font-size-md); font-weight: 600; margin: var(--ux-space-md) 0 var(--ux-space-sm); color: var(--ux-text);">Indicador en Boton</h4>
      <p>El spinner se muestra dentro del boton mientras se procesa la peticion.</p>
      <pre class="ux-code-block" data-lang="html">&lt;button class="ux-button ux-color-primary"
        hx-post="/api/save/"
        hx-swap="outerHTML"&gt;
  &lt;span class="htmx-indicator"&gt;
    &lt;div class="ux-loading-inline__spinner"&gt;&lt;/div&gt;
  &lt;/span&gt;
  Guardar
&lt;/button&gt;</pre>

      <h4 style="font-size: var(--ux-font-size-md); font-weight: 600; margin: var(--ux-space-md) 0 var(--ux-space-sm); color: var(--ux-text);">Overlay en Contenedor</h4>
      <p>Cubre el contenedor completo durante la carga.</p>
      <pre class="ux-code-block" data-lang="html">&lt;div id="user-list" style="position: relative;"&gt;
  &lt;!-- Lista de usuarios --&gt;
  {% for user in users %}
    &lt;div class="ux-list__item"&gt;{{ user.name }}&lt;/div&gt;
  {% endfor %}

  &lt;!-- Overlay indicator --&gt;
  &lt;div class="ux-loading-overlay htmx-indicator"&gt;
    &lt;div class="ux-loading-inline"&gt;
      &lt;div class="ux-loading-inline__spinner"&gt;&lt;/div&gt;
      &lt;span class="ux-loading-inline__text"&gt;Cargando...&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;button class="ux-button"
        hx-get="/api/users/"
        hx-target="#user-list"
        hx-indicator="#user-list .ux-loading-overlay"&gt;
  Actualizar Lista
&lt;/button&gt;</pre>

      <h4 style="font-size: var(--ux-font-size-md); font-weight: 600; margin: var(--ux-space-md) 0 var(--ux-space-sm); color: var(--ux-text);">Loading Global (Backdrop)</h4>
      <p>Muestra un loading de pantalla completa para operaciones importantes.</p>
      <pre class="ux-code-block" data-lang="html">&lt;!-- Loading global en el body --&gt;
&lt;div id="global-loading" class="ux-loading-backdrop htmx-indicator"&gt;
  &lt;div class="ux-loading"&gt;
    &lt;div class="ux-loading__spinner"&gt;&lt;/div&gt;
    &lt;div class="ux-loading__message"&gt;Procesando...&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Formulario que usa el loading global --&gt;
&lt;form hx-post="/api/checkout/"
      hx-indicator="#global-loading"&gt;
  &lt;!-- campos del formulario --&gt;
  &lt;button type="submit" class="ux-button ux-color-primary"&gt;
    Completar Compra
  &lt;/button&gt;
&lt;/form&gt;</pre>

      <h4 style="font-size: var(--ux-font-size-md); font-weight: 600; margin: var(--ux-space-md) 0 var(--ux-space-sm); color: var(--ux-text);">Vista Django con HTMX</h4>
      <p>Ejemplo de vista Django que responde a peticiones HTMX.</p>
      <pre class="ux-code-block" data-lang="python"># views.py
from django.shortcuts import render
from django.views.decorators.http import require_http_methods
import time

@require_http_methods(["POST"])
def save_data(request):
    # Simular procesamiento
    time.sleep(1)

    # Detectar si es peticion HTMX
    if request.headers.get('HX-Request'):
        return render(request, 'partials/success_message.html', {
            'message': 'Datos guardados correctamente'
        })

    return redirect('dashboard')</pre>

      <h4 style="font-size: var(--ux-font-size-md); font-weight: 600; margin: var(--ux-space-md) 0 var(--ux-space-sm); color: var(--ux-text);">CSS para HTMX Indicators</h4>
      <p>HTMX oculta automaticamente los elementos con clase <code>htmx-indicator</code> y los muestra durante las peticiones.</p>
      <pre class="ux-code-block" data-lang="css">/* HTMX ya incluye estos estilos, pero puedes personalizarlos */
.htmx-indicator {
  opacity: 0;
  transition: opacity 200ms ease-in;
}

.htmx-request .htmx-indicator,
.htmx-request.htmx-indicator {
  opacity: 1;
}

/* Para overlay, agregar clase visible */
.htmx-request .ux-loading-overlay.htmx-indicator {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}</pre>

      <h4 style="font-size: var(--ux-font-size-md); font-weight: 600; margin: var(--ux-space-md) 0 var(--ux-space-sm); color: var(--ux-text);">Tabla con Loading</h4>
      <p>Ejemplo de DataTable con loading al paginar o filtrar.</p>
      <pre class="ux-code-block" data-lang="html">&lt;div id="data-container" style="position: relative;"&gt;
  &lt;table class="ux-datatable"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;Nombre&lt;/th&gt;
        &lt;th&gt;Email&lt;/th&gt;
        &lt;th&gt;Estado&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody id="table-body"
           hx-get="/api/users/?page=1"
           hx-trigger="load"
           hx-indicator="#table-loading"&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;

  &lt;div id="table-loading" class="ux-loading-overlay htmx-indicator"&gt;
    &lt;div class="ux-loading-inline"&gt;
      &lt;div class="ux-loading-inline__spinner"&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Paginacion --&gt;
&lt;div class="ux-pagination"&gt;
  &lt;button hx-get="/api/users/?page=2"
          hx-target="#table-body"
          hx-indicator="#table-loading"&gt;
    Siguiente
  &lt;/button&gt;
&lt;/div&gt;</pre>
    </section>

    <!-- API Table -->
    <section class="demo-section">
      <h3>API Alpine</h3>
      <table style="width: 100%; font-size: var(--ux-font-size-md);">
        <thead>
          <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
            <th style="padding: var(--ux-space-sm);">Metodo/Propiedad</th>
            <th style="padding: var(--ux-space-sm);">Descripcion</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>show(options)</code></td>
            <td style="padding: var(--ux-space-sm);">Muestra el loading. Options: { message, spinner }</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>hide()</code></td>
            <td style="padding: var(--ux-space-sm);">Oculta el loading</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>present(options)</code></td>
            <td style="padding: var(--ux-space-sm);">Alias de show()</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>dismiss()</code></td>
            <td style="padding: var(--ux-space-sm);">Alias de hide()</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>during(asyncFn, options)</code></td>
            <td style="padding: var(--ux-space-sm);">Muestra loading durante una funcion async</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>showWithTimeout(options, ms)</code></td>
            <td style="padding: var(--ux-space-sm);">Muestra loading con timeout maximo</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>isOpen</code></td>
            <td style="padding: var(--ux-space-sm);">Boolean - estado de visibilidad</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>message</code></td>
            <td style="padding: var(--ux-space-sm);">String - mensaje actual</td>
          </tr>
          <tr>
            <td style="padding: var(--ux-space-sm);"><code>spinner</code></td>
            <td style="padding: var(--ux-space-sm);">String - tipo de spinner (default, ios, dots)</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- CSS Classes -->
    <section class="demo-section">
      <h3>Clases CSS</h3>
      <table style="width: 100%; font-size: var(--ux-font-size-md);">
        <thead>
          <tr style="text-align: left; border-bottom: 1px solid var(--ux-border-color);">
            <th style="padding: var(--ux-space-sm);">Clase</th>
            <th style="padding: var(--ux-space-sm);">Descripcion</th>
          </tr>
        </thead>
        <tbody>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading-backdrop</code></td><td style="padding: var(--ux-space-sm);">Contenedor con fondo oscuro</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading-backdrop--open</code></td><td style="padding: var(--ux-space-sm);">Estado visible</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading-backdrop--transparent</code></td><td style="padding: var(--ux-space-sm);">Fondo transparente</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading</code></td><td style="padding: var(--ux-space-sm);">Contenedor del spinner</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading--sm</code></td><td style="padding: var(--ux-space-sm);">Tamano pequeno</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading--lg</code></td><td style="padding: var(--ux-space-sm);">Tamano grande</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading--dark</code></td><td style="padding: var(--ux-space-sm);">Fondo oscuro</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading__spinner--ios</code></td><td style="padding: var(--ux-space-sm);">Spinner estilo iOS</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading__spinner--dots</code></td><td style="padding: var(--ux-space-sm);">Spinner de puntos</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading-inline</code></td><td style="padding: var(--ux-space-sm);">Loading inline</td></tr>
          <tr><td style="padding: var(--ux-space-sm);"><code>.ux-loading-overlay</code></td><td style="padding: var(--ux-space-sm);">Overlay para contenedores</td></tr>
        </tbody>
      </table>
    </section>
  </div>