<style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
      background: var(--ux-surface-secondary);
      
      
    }
    .demo-section {
      margin-bottom: 3rem;
    }
    .demo-section h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--ux-text);
    }
    .demo-section h3 {
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 0.75rem;
      color: var(--ux-text-secondary);
    }
    .demo-box {
      background: var(--ux-surface);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    code {
      background: var(--ux-surface-tertiary);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.875rem;
    }
    .warning-box {
      background: var(--ux-warning-tint);
      border: 1px solid var(--ux-warning);
      border-radius: 12px;
      padding: 1rem 1.25rem;
      margin-bottom: 1.5rem;
    }
    .warning-box h4 {
      color: var(--ux-warning-shade);
      margin: 0 0 0.5rem;
      font-size: 0.9375rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .warning-box p, .warning-box ul {
      color: var(--ux-text);
      margin: 0;
      font-size: 0.875rem;
      line-height: 1.6;
    }
    .warning-box ul {
      margin-top: 0.5rem;
      padding-left: 1.25rem;
    }
    .warning-box li {
      margin-bottom: 0.25rem;
    }
    .support-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }
    .support-table th,
    .support-table td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--ux-border-color);
    }
    .support-table th {
      background: var(--ux-surface-secondary);
      font-weight: 600;
    }
    .support-yes {
      color: var(--ux-success);
      font-weight: 600;
    }
    .support-no {
      color: var(--ux-danger);
      font-weight: 600;
    }
    .support-partial {
      color: var(--ux-warning);
      font-weight: 600;
    }
    .status-card {
      background: var(--ux-surface-secondary);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .status-card__row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--ux-border-color);
    }
    .status-card__row:last-child {
      border-bottom: none;
    }
    .status-card__label {
      font-size: 0.875rem;
      color: var(--ux-text-secondary);
    }
    .status-card__value {
      font-size: 0.875rem;
      font-weight: 500;
    }
    .input-with-btn {
      display: flex;
      gap: 0;
    }
    .input-with-btn .ux-input {
      flex: 1;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
    .input-with-btn .ux-virtual-keyboard-btn {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      margin-left: -1px;
    }
  </style>

<h1 style="margin-bottom: 0.5rem;">Virtual Keyboard</h1>
  <p style="color: var(--ux-text-secondary); margin-bottom: 2rem;">
    Boton para activar el teclado tactil del sistema operativo usando la VirtualKeyboard API.
  </p>

  <!-- Important Warning -->
  <div class="warning-box">
    <h4>
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 8v4M12 16h.01"/>
      </svg>
      Limitaciones Importantes
    </h4>
    <p>Este componente usa la <strong>VirtualKeyboard API</strong> que tiene soporte limitado:</p>
    <ul>
      <li><strong>Navegadores:</strong> Solo Chromium (Chrome 94+, Edge 94+, Opera 80+)</li>
      <li><strong>Dispositivos:</strong> Requiere pantalla tactil o modo tableta activo</li>
      <li><strong>Windows:</strong> El teclado tactil debe estar habilitado en Configuracion</li>
      <li><strong>Seguridad:</strong> Requiere HTTPS en produccion</li>
      <li><strong>Interaccion:</strong> Solo funciona tras clic/toque del usuario</li>
      <li><strong>No soportado:</strong> Firefox, Safari, iOS (usan teclado nativo)</li>
    </ul>
  </div>

  <!-- Browser Support -->
  <section class="demo-section">
    <h2>Compatibilidad de Navegadores</h2>

    <div class="demo-box">
      <table class="support-table">
        <thead>
          <tr>
            <th>Navegador</th>
            <th>Soporte</th>
            <th>Version Minima</th>
            <th>Notas</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Chrome</td>
            <td class="support-yes">Si</td>
            <td>94+</td>
            <td>Requiere dispositivo tactil</td>
          </tr>
          <tr>
            <td>Edge</td>
            <td class="support-yes">Si</td>
            <td>94+</td>
            <td>Requiere dispositivo tactil</td>
          </tr>
          <tr>
            <td>Opera</td>
            <td class="support-yes">Si</td>
            <td>80+</td>
            <td>Basado en Chromium</td>
          </tr>
          <tr>
            <td>Firefox</td>
            <td class="support-no">No</td>
            <td>-</td>
            <td>API no implementada</td>
          </tr>
          <tr>
            <td>Safari</td>
            <td class="support-no">No</td>
            <td>-</td>
            <td>API no implementada</td>
          </tr>
          <tr>
            <td>iOS Safari</td>
            <td class="support-no">No</td>
            <td>-</td>
            <td>Usa teclado nativo al hacer focus</td>
          </tr>
          <tr>
            <td>Android Chrome</td>
            <td class="support-partial">Parcial</td>
            <td>94+</td>
            <td>Comportamiento variable por dispositivo</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Live Status Check -->
  <section class="demo-section">
    <h2>Estado de tu Dispositivo</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Verificacion en tiempo real del soporte en tu navegador actual.
    </p>

    <div class="demo-box" x-data="uxVirtualKeyboard()">
      <div class="status-card">
        <div class="status-card__row">
          <span class="status-card__label">VirtualKeyboard API</span>
          <span class="status-card__value" :class="getSupportInfo().apiAvailable ? 'support-yes' : 'support-no'"
                x-text="getSupportInfo().apiAvailable ? 'Disponible' : 'No disponible'"></span>
        </div>
        <div class="status-card__row">
          <span class="status-card__label">Contexto seguro (HTTPS)</span>
          <span class="status-card__value" :class="getSupportInfo().isSecureContext ? 'support-yes' : 'support-no'"
                x-text="getSupportInfo().isSecureContext ? 'Si' : 'No'"></span>
        </div>
        <div class="status-card__row">
          <span class="status-card__label">Dispositivo tactil</span>
          <span class="status-card__value" :class="getSupportInfo().isTouchDevice ? 'support-yes' : 'support-partial'"
                x-text="getSupportInfo().isTouchDevice ? 'Detectado' : 'No detectado'"></span>
        </div>
        <div class="status-card__row">
          <span class="status-card__label">Navegador</span>
          <span class="status-card__value" x-text="getSupportInfo().browser"></span>
        </div>
        <div class="status-card__row">
          <span class="status-card__label">Recomendacion</span>
          <span class="status-card__value" style="font-size: 0.8125rem; color: var(--ux-text-secondary);"
                x-text="getSupportInfo().recommendation"></span>
        </div>
      </div>

      <div class="ux-virtual-keyboard-status" :class="isSupported ? 'ux-virtual-keyboard-status--supported' : 'ux-virtual-keyboard-status--unsupported'">
        <span class="ux-virtual-keyboard-status__dot"></span>
        <span x-text="isSupported ? 'Teclado virtual disponible' : 'Teclado virtual no disponible'"></span>
      </div>
    </div>
  </section>

  <!-- Basic Usage -->
  <section class="demo-section">
    <h2>Uso Basico</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Boton que abre el teclado virtual del sistema al hacer clic.
    </p>

    <div class="demo-box" x-data="uxVirtualKeyboard()">
      <div style="display: flex; flex-direction: column; gap: 1rem; max-width: 400px;">
        <input type="text"
               id="demo-input-1"
               class="ux-input"
               placeholder="Escribe aqui...">

        <button class="ux-virtual-keyboard-btn"
                @click="show(document.getElementById('demo-input-1'))">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
          <span>Abrir Teclado</span>
        </button>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxVirtualKeyboard()"&gt;
  &lt;input type="text" id="my-input" class="ux-input"&gt;

  &lt;button class="ux-virtual-keyboard-btn"
          @click="show(document.getElementById('my-input'))"&gt;
    &lt;span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"&gt;&lt;/span&gt;
    &lt;span&gt;Abrir Teclado&lt;/span&gt;
  &lt;/button&gt;
&lt;/div&gt;</pre>
  </section>

  <!-- Input Group -->
  <section class="demo-section">
    <h2>Integrado con Input</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Boton integrado al lado del campo de entrada.
    </p>

    <div class="demo-box" x-data="uxVirtualKeyboard()">
      <div class="input-with-btn" style="max-width: 400px;">
        <input type="text"
               x-ref="inputField"
               class="ux-input"
               placeholder="Toca el boton para abrir el teclado">
        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only"
                @click="show($refs.inputField)"
                :title="isSupported ? 'Abrir teclado virtual' : 'Teclado no disponible'">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
        </button>
      </div>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxVirtualKeyboard()" class="input-with-btn"&gt;
  &lt;input type="text" x-ref="inputField" class="ux-input"&gt;
  &lt;button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only"
          @click="show($refs.inputField)"&gt;
    &lt;span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"&gt;&lt;/span&gt;
  &lt;/button&gt;
&lt;/div&gt;</pre>
  </section>

  <!-- Size Variants -->
  <section class="demo-section">
    <h2>Tamanos</h2>

    <div class="demo-box" x-data="uxVirtualKeyboard()">
      <div style="display: flex; flex-wrap: wrap; gap: 1rem; align-items: center;">
        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--sm" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
          <span>Small</span>
        </button>

        <button class="ux-virtual-keyboard-btn" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
          <span>Default</span>
        </button>

        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--lg" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
          <span>Large</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Icon Only -->
  <section class="demo-section">
    <h2>Solo Icono</h2>

    <div class="demo-box" x-data="uxVirtualKeyboard()">
      <div style="display: flex; flex-wrap: wrap; gap: 1rem; align-items: center;">
        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only ux-virtual-keyboard-btn--sm" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
        </button>

        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
        </button>

        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only ux-virtual-keyboard-btn--lg" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
        </button>

        <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only ux-virtual-keyboard-btn--primary" @click="show()">
          <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
        </button>
      </div>
    </div>
  </section>

  <!-- With Custom Alert -->
  <section class="demo-section">
    <h2>Con Mensaje Personalizado</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Personaliza el mensaje que se muestra cuando el teclado no esta disponible.
    </p>

    <div class="demo-box" x-data="uxVirtualKeyboard({
      alertTitle: 'Funcion No Disponible',
      alertMessage: 'Para usar el teclado en pantalla, necesitas Chrome o Edge en un dispositivo Windows con pantalla tactil.'
    })">
      <input type="text" x-ref="customInput" class="ux-input" placeholder="Input de prueba" style="max-width: 300px; margin-bottom: 1rem;">

      <button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--primary"
              @click="show($refs.customInput)">
        <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
        <span>Probar Teclado</span>
      </button>

      <p style="margin-top: 1rem; font-size: 0.8125rem; color: var(--ux-text-tertiary);">
        * Si el teclado no esta disponible, se mostrara un mensaje de alerta personalizado.
      </p>
    </div>

    <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxVirtualKeyboard({
  alertTitle: 'Funcion No Disponible',
  alertMessage: 'Para usar el teclado...'
})"&gt;
  ...
&lt;/div&gt;</pre>
  </section>

  <!-- Events -->
  <section class="demo-section">
    <h2>Eventos</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      El componente emite eventos para integracion con tu aplicacion.
    </p>

    <div class="demo-box" x-data="{
      ...uxVirtualKeyboard({ showAlert: false }),
      events: []
    }"
    @virtualkeyboard:show="events.unshift('show: ' + new Date().toLocaleTimeString())"
    @virtualkeyboard:hide="events.unshift('hide: ' + new Date().toLocaleTimeString())"
    @virtualkeyboard:unsupported="events.unshift('unsupported: ' + $event.detail.browser)"
    @virtualkeyboard:change="events.unshift('change: visible=' + $event.detail.isVisible)">
      <div class="row g-3">
        <div class="col-md-6">
          <input type="text" x-ref="eventInput" class="ux-input" placeholder="Input de prueba" style="margin-bottom: 1rem;">

          <div style="display: flex; gap: 0.5rem;">
            <button class="ux-virtual-keyboard-btn" @click="show($refs.eventInput)">
              <span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"></span>
              Mostrar
            </button>
            <button class="ux-virtual-keyboard-btn" @click="hide()">
              Ocultar
            </button>
          </div>
        </div>
        <div class="col-md-6">
          <div style="background: var(--ux-gray-900); color: var(--ux-green-400); padding: 0.75rem; border-radius: 8px; font-family: monospace; font-size: 0.75rem; max-height: 150px; overflow-y: auto;">
            <template x-for="(event, i) in events.slice(0, 10)" :key="i">
              <div x-text="event"></div>
            </template>
            <div x-show="events.length === 0" style="color: var(--ux-gray-500);">
              Interactua con los botones...
            </div>
          </div>
        </div>
      </div>
    </div>

    <h3>Eventos disponibles</h3>
    <pre class="ux-code-block" data-lang="javascript">@virtualkeyboard:show        // Teclado mostrado
@virtualkeyboard:hide        // Teclado ocultado
@virtualkeyboard:change      // Cambio de geometria (altura)
@virtualkeyboard:unsupported // API no soportada
@virtualkeyboard:error       // Error al mostrar/ocultar
@virtualkeyboard:alert       // Para integrar con ux-alert externo</pre>
  </section>

  <!-- Without Alpine -->
  <section class="demo-section">
    <h2>Uso sin Alpine.js</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Tambien puedes usar la funcion global sin Alpine.js.
    </p>

    <div class="demo-box">
      <input type="text" id="vanilla-input" class="ux-input" placeholder="Input vanilla" style="max-width: 300px; margin-bottom: 1rem;">

      <button class="ux-virtual-keyboard-btn" onclick="openKeyboard()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="4" width="20" height="16" rx="2"/>
          <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M6 12h.01M10 12h.01M14 12h.01M18 12h.01M8 16h8"/>
        </svg>
        <span>Abrir Teclado (Vanilla)</span>
      </button>

      <script>
        function openKeyboard() {
          const input = document.getElementById('vanilla-input');

          if ('virtualKeyboard' in navigator) {
            input.focus();
            navigator.virtualKeyboard.show();
          } else {
            // Usar la funcion helper de UX
            if (window.UX && window.UX.showVirtualKeyboard) {
              if (!window.UX.showVirtualKeyboard('#vanilla-input')) {
                alert('El teclado virtual no esta disponible en este navegador.');
              }
            } else {
              alert('El teclado virtual no esta disponible en este navegador.');
            }
          }
        }
      </script>
    </div>

    <pre class="ux-code-block" data-lang="javascript">&lt;script&gt;
function openKeyboard() {
  const input = document.getElementById('my-input');

  if ('virtualKeyboard' in navigator) {
    input.focus();
    navigator.virtualKeyboard.show();
  } else {
    alert('Teclado no disponible');
  }
}
&lt;/script&gt;

// O usar el helper de UX:
window.UX.showVirtualKeyboard('#my-input');</pre>
  </section>

  <!-- Windows Setup -->
  <section class="demo-section">
    <h2>Configuracion en Windows</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Para que el teclado virtual funcione en Windows, asegurate de:
    </p>

    <div class="demo-box">
      <ol style="margin: 0; padding-left: 1.5rem; line-height: 1.8;">
        <li>Abrir <strong>Configuracion</strong> (Win + I)</li>
        <li>Ir a <strong>Hora e idioma</strong> - <strong>Escritura</strong></li>
        <li>En "Teclado en pantalla", activar <strong>"Mostrar el teclado en pantalla..."</strong></li>
        <li>Opcionalmente, activar el <strong>Modo tableta</strong> en dispositivos 2-en-1</li>
        <li>Usar <strong>Chrome</strong> o <strong>Edge</strong> como navegador</li>
      </ol>

      <div style="margin-top: 1rem; padding: 1rem; background: var(--ux-surface-secondary); border-radius: 8px;">
        <p style="margin: 0; font-size: 0.875rem; color: var(--ux-text-secondary);">
          <strong>Tip:</strong> En dispositivos sin pantalla tactil, puedes probar activando el
          "Modo tableta" en el Centro de actividades (Win + A) si tu version de Windows lo soporta.
        </p>
      </div>
    </div>
  </section>

  <!-- API Reference -->
  <section class="demo-section">
    <h2>API Reference</h2>

    <h3>Opciones</h3>
    <pre class="ux-code-block" data-lang="javascript">uxVirtualKeyboard({
  targetSelector: null,      // Selector CSS del input objetivo
  showAlert: true,           // Mostrar alerta si no esta soportado
  alertTitle: '...',         // Titulo del mensaje de error
  alertMessage: '...'        // Mensaje de error personalizado
})</pre>

    <h3>Propiedades</h3>
    <pre class="ux-code-block" data-lang="javascript">isSupported   // Boolean: si la API esta disponible
isVisible     // Boolean: si el teclado esta visible
keyboardIcon  // String: SVG del icono de teclado</pre>

    <h3>Metodos</h3>
    <pre class="ux-code-block" data-lang="javascript">show(targetEl)      // Mostrar teclado (opcional: elemento objetivo)
hide()              // Ocultar teclado
toggle(targetEl)    // Alternar visibilidad
checkSupport()      // Verificar soporte
getSupportInfo()    // Obtener info detallada de soporte</pre>

    <h3>Clases CSS</h3>
    <pre class="ux-code-block" data-lang="css">.ux-virtual-keyboard-btn              // Boton base
.ux-virtual-keyboard-btn--icon-only   // Solo icono
.ux-virtual-keyboard-btn--sm          // Pequeno
.ux-virtual-keyboard-btn--lg          // Grande
.ux-virtual-keyboard-btn--primary     // Color primario
.ux-virtual-keyboard-btn--glass       // Estilo glass
.ux-virtual-keyboard-btn__icon        // Contenedor del icono</pre>
  </section>

  <!-- Fallback Strategies -->
  <section class="demo-section">
    <h2>Estrategias de Fallback</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Que hacer cuando la API no esta disponible.
    </p>

    <div class="demo-box">
      <h3>1. Ocultar el boton si no esta soportado</h3>
      <pre class="ux-code-block" data-lang="html">&lt;button x-show="isSupported" ...&gt;Abrir Teclado&lt;/button&gt;</pre>

      <h3 style="margin-top: 1.5rem;">2. Deshabilitar el boton</h3>
      <pre class="ux-code-block" data-lang="html">&lt;button :disabled="!isSupported" ...&gt;Abrir Teclado&lt;/button&gt;</pre>

      <h3 style="margin-top: 1.5rem;">3. Mostrar mensaje alternativo</h3>
      <pre class="ux-code-block" data-lang="html">&lt;template x-if="!isSupported"&gt;
  &lt;p&gt;Toca el campo de texto para abrir el teclado.&lt;/p&gt;
&lt;/template&gt;</pre>

      <h3 style="margin-top: 1.5rem;">4. Usar inputmode para teclados moviles</h3>
      <pre class="ux-code-block" data-lang="html">&lt;!-- El teclado se abre automaticamente en moviles al hacer focus --&gt;
&lt;input type="text" inputmode="numeric"&gt;  &lt;!-- Teclado numerico --&gt;
&lt;input type="text" inputmode="email"&gt;    &lt;!-- Teclado con @ --&gt;
&lt;input type="text" inputmode="tel"&gt;      &lt;!-- Teclado telefono --&gt;</pre>
    </div>
  </section>

  <!-- HTMX + Django -->
  <section class="demo-section">
    <h2>HTMX + Django</h2>
    <p style="color: var(--ux-text-secondary); margin-bottom: 1rem;">
      Ejemplos de integracion del teclado virtual en sistemas POS con HTMX y Django.
    </p>

    <h3>Campo de busqueda de productos con HTMX</h3>
    <div class="demo-box">
      <p style="font-size: 0.875rem; color: var(--ux-text-secondary); margin-bottom: 1rem;">
        Busqueda de productos en tiempo real para POS tactil.
      </p>
      <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxVirtualKeyboard()" class="pos-search"&gt;
  &lt;div class="input-with-btn"&gt;
    &lt;input type="text"
           x-ref="searchInput"
           name="q"
           class="ux-input"
           placeholder="Buscar producto o codigo..."
           inputmode="search"
           hx-get="/pos/products/search/"
           hx-trigger="keyup changed delay:300ms"
           hx-target="#product-results"
           hx-indicator="#search-spinner"&gt;
    &lt;button class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only"
            @click="show($refs.searchInput)"
            x-show="isSupported"&gt;
      &lt;span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"&gt;&lt;/span&gt;
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;div class="ux-spinner ux-spinner--sm" id="search-spinner"&gt;&lt;/div&gt;
  &lt;div id="product-results"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <h3 style="margin-top: 2rem;">Vista Django para busqueda</h3>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="python"># views.py
from django.shortcuts import render
from django.db.models import Q
from .models import Product

def product_search(request):
    query = request.GET.get('q', '').strip()
    products = []

    if query:
        products = Product.objects.filter(
            Q(name__icontains=query) |
            Q(sku__icontains=query) |
            Q(barcode__exact=query)
        )[:20]

    return render(request, 'pos/partials/product_results.html', {
        'products': products,
        'query': query
    })</pre>
    </div>

    <h3 style="margin-top: 2rem;">Entrada de cantidad con teclado numerico</h3>
    <div class="demo-box">
      <p style="font-size: 0.875rem; color: var(--ux-text-secondary); margin-bottom: 1rem;">
        Campo de cantidad que abre teclado numerico en POS.
      </p>
      <pre class="ux-code-block" data-lang="html">&lt;div x-data="uxVirtualKeyboard()" class="quantity-input"&gt;
  &lt;label class="ux-label"&gt;Cantidad&lt;/label&gt;
  &lt;div class="input-with-btn"&gt;
    &lt;input type="number"
           x-ref="qtyInput"
           name="quantity"
           class="ux-input"
           value="1"
           min="1"
           step="1"
           inputmode="numeric"
           pattern="[0-9]*"
           hx-post="/pos/cart/update-qty/"
           hx-trigger="change"
           hx-target="#cart-total"
           hx-include="[name='product_id']"&gt;
    &lt;button type="button"
            class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only"
            @click="show($refs.qtyInput)"
            x-show="isSupported"&gt;
      &lt;span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"&gt;&lt;/span&gt;
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
    </div>

    <h3 style="margin-top: 2rem;">Formulario de pago con monto manual</h3>
    <div class="demo-box">
      <p style="font-size: 0.875rem; color: var(--ux-text-secondary); margin-bottom: 1rem;">
        Entrada de monto en efectivo para calcular cambio.
      </p>
      <pre class="ux-code-block" data-lang="html">&lt;form x-data="uxVirtualKeyboard()"
      hx-post="/pos/payment/cash/"
      hx-target="#payment-result"
      hx-swap="innerHTML"&gt;

  &lt;input type="hidden" name="order_id" value="{{ order.id }}"&gt;

  &lt;div class="ux-card" style="margin-bottom: 1rem;"&gt;
    &lt;div class="ux-card__content"&gt;
      &lt;div style="display: flex; justify-content: space-between; font-size: 1.25rem; font-weight: 600;"&gt;
        &lt;span&gt;Total a pagar:&lt;/span&gt;
        &lt;span&gt;${{ order.total }}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;label class="ux-label"&gt;Monto recibido&lt;/label&gt;
  &lt;div class="input-with-btn" style="margin-bottom: 1rem;"&gt;
    &lt;input type="number"
           x-ref="amountInput"
           name="amount_received"
           class="ux-input"
           placeholder="0.00"
           step="0.01"
           min="0"
           inputmode="decimal"
           required
           @input="$dispatch('calculate-change', { amount: $el.value })"&gt;
    &lt;button type="button"
            class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only ux-virtual-keyboard-btn--lg"
            @click="show($refs.amountInput)"
            x-show="isSupported"&gt;
      &lt;span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"&gt;&lt;/span&gt;
    &lt;/button&gt;
  &lt;/div&gt;

  &lt;div id="change-display" class="ux-card ux-card--soft" style="margin-bottom: 1rem;"&gt;
    &lt;!-- Cambio calculado dinamicamente --&gt;
  &lt;/div&gt;

  &lt;button type="submit" class="ux-button ux-color-success" style="width: 100%;"&gt;
    Confirmar Pago
  &lt;/button&gt;
&lt;/form&gt;</pre>
    </div>

    <h3 style="margin-top: 2rem;">Template Django para resultado de pago</h3>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="html">&lt;!-- templates/pos/partials/payment_result.html --&gt;
{% if success %}
  &lt;div class="ux-alert ux-alert--success"&gt;
    &lt;div class="ux-alert__icon"&gt;
      &lt;svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"&gt;
        &lt;circle cx="12" cy="12" r="10"/&gt;
        &lt;path d="M9 12l2 2 4-4"/&gt;
      &lt;/svg&gt;
    &lt;/div&gt;
    &lt;div class="ux-alert__content"&gt;
      &lt;div class="ux-alert__title"&gt;Pago completado&lt;/div&gt;
      &lt;div class="ux-alert__message"&gt;
        Cambio: &lt;strong&gt;${{ change|floatformat:2 }}&lt;/strong&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;button class="ux-button ux-color-primary" style="width: 100%; margin-top: 1rem;"
          hx-get="/pos/receipt/{{ order.id }}/"
          hx-target="#receipt-modal"&gt;
    Imprimir Recibo
  &lt;/button&gt;
{% else %}
  &lt;div class="ux-alert ux-alert--danger"&gt;
    &lt;div class="ux-alert__content"&gt;
      &lt;div class="ux-alert__title"&gt;Error en el pago&lt;/div&gt;
      &lt;div class="ux-alert__message"&gt;{{ error_message }}&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
{% endif %}</pre>
    </div>

    <h3 style="margin-top: 2rem;">Escaneo de codigo de barras con fallback a teclado</h3>
    <div class="demo-box">
      <p style="font-size: 0.875rem; color: var(--ux-text-secondary); margin-bottom: 1rem;">
        Campo para escaner de codigo de barras con opcion de entrada manual.
      </p>
      <pre class="ux-code-block" data-lang="html">&lt;div x-data="{
  ...uxVirtualKeyboard(),
  barcode: '',
  processing: false
}"
@keydown.enter.prevent="$refs.barcodeInput.value &amp;&amp; $refs.barcodeForm.requestSubmit()"&gt;

  &lt;form x-ref="barcodeForm"
        hx-post="/pos/cart/add-by-barcode/"
        hx-target="#cart-items"
        hx-swap="beforeend"
        hx-indicator="#barcode-spinner"
        @htmx:after-request="barcode = ''; $refs.barcodeInput.focus()"&gt;

    &lt;label class="ux-label"&gt;Codigo de barras&lt;/label&gt;
    &lt;div class="input-with-btn"&gt;
      &lt;input type="text"
             x-ref="barcodeInput"
             x-model="barcode"
             name="barcode"
             class="ux-input"
             placeholder="Escanear o escribir codigo..."
             inputmode="numeric"
             autocomplete="off"
             autofocus&gt;
      &lt;button type="button"
              class="ux-virtual-keyboard-btn ux-virtual-keyboard-btn--icon-only"
              @click="show($refs.barcodeInput)"
              x-show="isSupported"
              title="Abrir teclado numerico"&gt;
        &lt;span class="ux-virtual-keyboard-btn__icon" x-html="keyboardIcon"&gt;&lt;/span&gt;
      &lt;/button&gt;
      &lt;button type="submit"
              class="ux-button ux-color-primary"
              :disabled="!barcode"&gt;
        Agregar
      &lt;/button&gt;
    &lt;/div&gt;
    &lt;div class="ux-spinner" id="barcode-spinner"&gt;&lt;/div&gt;
  &lt;/form&gt;
&lt;/div&gt;</pre>
    </div>

    <h3 style="margin-top: 2rem;">Vista Django para agregar por codigo de barras</h3>
    <div class="demo-box">
      <pre class="ux-code-block" data-lang="python"># views.py
from django.http import HttpResponse
from django.shortcuts import get_object_or_404
from django.template.loader import render_to_string
from .models import Product, Cart, CartItem

def add_by_barcode(request):
    barcode = request.POST.get('barcode', '').strip()
    cart = Cart.get_current(request)

    try:
        product = Product.objects.get(barcode=barcode, is_active=True)
        cart_item, created = CartItem.objects.get_or_create(
            cart=cart,
            product=product,
            defaults={'quantity': 1, 'price': product.price}
        )

        if not created:
            cart_item.quantity += 1
            cart_item.save()

        html = render_to_string('pos/partials/cart_item.html', {
            'item': cart_item,
            'is_new': created
        })

        response = HttpResponse(html)
        response['HX-Trigger'] = 'cartUpdated'
        return response

    except Product.DoesNotExist:
        return HttpResponse(
            '&lt;div class="ux-toast ux-toast--danger"&gt;'
            'Producto no encontrado&lt;/div&gt;',
            status=404
        )</pre>
    </div>
  </section>