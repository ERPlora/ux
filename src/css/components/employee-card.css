/* Employee Card */
/* HR employee profile cards with avatar, status, department, and contact info */

@layer components {

  /* =============================================
     Base card
     ============================================= */

  .employee-card {
    --ec-avatar-size: 4rem;
    --ec-avatar-size-compact: 2.5rem;
    --ec-gap: 0.5rem;

    @apply flex flex-col items-center text-center;
    gap: var(--ec-gap);
    padding: var(--card-padding, 1rem);
    background-color: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
    transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;

    &:hover {
      box-shadow: 0 4px 12px color-mix(in oklch, var(--color-base-content) 8%, transparent);
    }
  }

  /* Clickable */
  .employee-card-clickable {
    @apply cursor-pointer;

    &:hover {
      border-color: var(--color-primary);
    }

    &:active {
      transform: scale(0.98);
    }
  }

  /* Selected */
  .employee-card-selected {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px color-mix(in oklch, var(--color-primary) 20%, transparent);
  }

  /* =============================================
     Avatar
     ============================================= */

  .employee-card-avatar {
    @apply relative rounded-full overflow-hidden flex items-center justify-center font-semibold uppercase shrink-0;
    width: var(--ec-avatar-size);
    height: var(--ec-avatar-size);
    font-size: 1.25rem;
    background-color: var(--color-neutral);
    color: var(--color-neutral-content);

    & > img {
      @apply w-full h-full object-cover;
    }
  }

  .employee-card-avatar-primary   { background-color: var(--color-primary);   color: var(--color-primary-content); }
  .employee-card-avatar-secondary { background-color: var(--color-secondary); color: var(--color-secondary-content); }
  .employee-card-avatar-accent    { background-color: var(--color-accent);    color: var(--color-accent-content); }
  .employee-card-avatar-success   { background-color: var(--color-success);   color: var(--color-success-content); }
  .employee-card-avatar-warning   { background-color: var(--color-warning);   color: var(--color-warning-content); }
  .employee-card-avatar-error     { background-color: var(--color-error);     color: var(--color-error-content); }

  /* =============================================
     Status indicator
     ============================================= */

  .employee-card-status {
    @apply absolute rounded-full;
    bottom: 2px;
    right: 2px;
    width: 0.875rem;
    height: 0.875rem;
    border: 2px solid var(--color-base-100);
    background-color: var(--color-base-300);
  }

  .employee-card-status-available,
  .employee-card-status-online {
    background-color: var(--color-success);
  }

  .employee-card-status-busy,
  .employee-card-status-dnd {
    background-color: var(--color-error);
  }

  .employee-card-status-away,
  .employee-card-status-idle {
    background-color: var(--color-warning);
  }

  .employee-card-status-offline {
    background-color: var(--color-base-300);
  }

  .employee-card-status-pulse {
    animation: employee-status-pulse 2s ease-in-out infinite;
  }

  /* =============================================
     Info
     ============================================= */

  .employee-card-info {
    @apply flex flex-col min-w-0 w-full;
    gap: 2px;
  }

  .employee-card-name {
    @apply font-semibold truncate;
    font-size: 1rem;
    line-height: 1.3;
    color: var(--color-base-content);
    margin: 0;
  }

  .employee-card-title {
    @apply truncate;
    font-size: 0.875rem;
    line-height: 1.3;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     Department badge
     ============================================= */

  .employee-card-department {
    @apply inline-flex items-center justify-center font-medium;
    padding: 2px 0.5rem;
    font-size: 0.75rem;
    border-radius: 9999px;
    margin-top: 0.25rem;
    background-color: color-mix(in oklch, var(--color-primary) 10%, transparent);
    color: var(--color-primary);
  }

  .employee-card-department-engineering { background-color: color-mix(in oklch, var(--color-info) 10%, transparent);    color: var(--color-info); }
  .employee-card-department-design      { background-color: color-mix(in oklch, #a855f7 10%, transparent);              color: #9333ea; }
  .employee-card-department-marketing   { background-color: color-mix(in oklch, #f43f5e 10%, transparent);              color: #e11d48; }
  .employee-card-department-sales       { background-color: color-mix(in oklch, var(--color-success) 10%, transparent); color: var(--color-success); }
  .employee-card-department-hr          { background-color: color-mix(in oklch, var(--color-warning) 10%, transparent); color: var(--color-warning); }
  .employee-card-department-finance     { background-color: color-mix(in oklch, #06b6d4 10%, transparent);              color: #0891b2; }
  .employee-card-department-operations  { background-color: color-mix(in oklch, var(--color-base-content) 10%, transparent); color: color-mix(in oklch, var(--color-base-content) 60%, transparent); }
  .employee-card-department-support     { background-color: color-mix(in oklch, #14b8a6 10%, transparent);              color: #0d9488; }

  /* =============================================
     Contact info
     ============================================= */

  .employee-card-contact {
    @apply flex flex-col w-full;
    gap: 0.25rem;
    margin-top: 0.25rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--color-base-300);
  }

  .employee-card-contact-item {
    @apply flex items-center no-underline;
    gap: 0.25rem;
    font-size: 0.875rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    transition: color 0.15s ease;

    &:hover {
      color: var(--color-primary);
    }

    & > svg {
      @apply shrink-0;
      width: 1rem;
      height: 1rem;
      opacity: 0.7;
    }
  }

  .employee-card-contact-text {
    @apply truncate;
  }

  /* =============================================
     Actions
     ============================================= */

  .employee-card-actions {
    @apply flex items-center justify-center w-full;
    gap: 0.25rem;
    margin-top: 0.5rem;
  }

  .employee-card-action {
    @apply inline-flex items-center justify-center rounded-full cursor-pointer;
    width: 2.25rem;
    height: 2.25rem;
    border: 1px solid var(--color-base-300);
    background-color: var(--color-base-100);
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    transition: background-color 0.15s ease, border-color 0.15s ease, color 0.15s ease, transform 0.15s ease;

    &:hover {
      background-color: var(--color-primary);
      border-color: var(--color-primary);
      color: var(--color-primary-content);
    }

    &:active {
      transform: scale(0.95);
    }

    & > svg {
      width: 1.125rem;
      height: 1.125rem;
    }
  }

  .employee-card-action-call:hover  { background-color: var(--color-success); border-color: var(--color-success); }
  .employee-card-action-email:hover { background-color: var(--color-primary); border-color: var(--color-primary); }
  .employee-card-action-chat:hover  { background-color: var(--color-accent);  border-color: var(--color-accent); }

  /* =============================================
     Compact variant
     ============================================= */

  .employee-card-compact {
    @apply flex-row text-left;
    padding: 0.5rem;

    & .employee-card-avatar {
      width: var(--ec-avatar-size-compact);
      height: var(--ec-avatar-size-compact);
      font-size: 1rem;
    }

    & .employee-card-status {
      width: 0.625rem;
      height: 0.625rem;
      bottom: 0;
      right: 0;
    }

    & .employee-card-info {
      @apply flex-1 items-start;
    }

    & .employee-card-name {
      font-size: 0.875rem;
    }

    & .employee-card-title {
      font-size: 0.75rem;
    }

    & .employee-card-department {
      margin-top: 2px;
      padding: 1px 0.25rem;
      font-size: 0.625rem;
    }

    & .employee-card-contact {
      @apply hidden;
    }

    & .employee-card-actions {
      @apply w-auto shrink-0;
      margin-top: 0;
    }

    & .employee-card-action {
      width: 2rem;
      height: 2rem;

      & > svg {
        width: 1rem;
        height: 1rem;
      }
    }
  }

  /* =============================================
     Horizontal layout
     ============================================= */

  .employee-card-horizontal {
    @apply flex-row text-left items-start;

    & .employee-card-info {
      @apply flex-1 items-start;
    }

    & .employee-card-contact {
      @apply flex-row flex-wrap;
      border-top: none;
      padding-top: 0;
      margin-top: 0.5rem;
    }

    & .employee-card-actions {
      @apply flex-col w-auto;
      margin-top: 0;
      margin-left: 1rem;
    }
  }

  /* =============================================
     Glass variant
     ============================================= */

  .employee-card.glass {
    border-color: color-mix(in oklch, var(--color-base-content) 12%, transparent);

    & .employee-card-status {
      border-color: color-mix(in oklch, var(--color-base-content) 6%, transparent);
    }

    & .employee-card-contact {
      border-color: color-mix(in oklch, var(--color-base-content) 12%, transparent);
    }

    & .employee-card-action {
      background: color-mix(in oklch, var(--color-base-100) 50%, transparent);
      border-color: color-mix(in oklch, var(--color-base-content) 12%, transparent);
    }
  }

  /* =============================================
     Employee grid
     ============================================= */

  .employee-grid {
    @apply grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  .employee-grid-2 { grid-template-columns: repeat(2, 1fr); }
  .employee-grid-3 { grid-template-columns: repeat(3, 1fr); }
  .employee-grid-4 { grid-template-columns: repeat(4, 1fr); }
  .employee-grid-5 { grid-template-columns: repeat(5, 1fr); }

  .employee-grid-compact {
    gap: 0.5rem;
  }

  /* =============================================
     Employee list
     ============================================= */

  .employee-list {
    @apply flex flex-col;
    gap: 0.25rem;

    & .employee-card-compact {
      border-radius: var(--radius-field, 0.5rem);
    }
  }
}

/* =============================================
   Keyframes
   ============================================= */

@keyframes employee-status-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* =============================================
   Responsive
   ============================================= */

@media (max-width: 991px) {
  .employee-grid-4,
  .employee-grid-5 {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 767px) {
  .employee-grid-3,
  .employee-grid-4,
  .employee-grid-5 {
    grid-template-columns: repeat(2, 1fr);
  }

  .employee-grid {
    gap: 0.5rem;
  }
}

@media (max-width: 480px) {
  .employee-grid,
  .employee-grid-2,
  .employee-grid-3,
  .employee-grid-4,
  .employee-grid-5 {
    grid-template-columns: 1fr;
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .employee-card,
  .employee-card-action,
  .employee-card-contact-item {
    transition: none;
  }

  .employee-card-status-pulse {
    animation: none;
  }
}
