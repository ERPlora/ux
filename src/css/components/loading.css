/* UX v3 - Loading / Spinner Component */
/* Spinning indicators for loading states */

@layer components {

  /* =============================================
     Base spinner
     ============================================= */

  .loading {
    --loading-size: 1.5rem;
    --loading-width: 3px;
    --loading-color: var(--c, var(--color-primary));

    @apply inline-block rounded-full shrink-0;
    width: var(--loading-size);
    height: var(--loading-size);
    border: var(--loading-width) solid var(--color-base-300);
    border-top-color: var(--loading-color);
    animation: loading-spin 0.8s linear infinite;
  }

  /* =============================================
     Variants
     ============================================= */

  .loading-dots {
    @apply inline-flex items-center gap-1;
    width: auto;
    height: auto;
    border: none;
    animation: none;

    &::before,
    &::after {
      content: '';
      @apply size-2 rounded-full;
      background-color: var(--loading-color, var(--color-primary));
      animation: loading-bounce 1.4s ease-in-out infinite both;
    }

    &::before {
      animation-delay: -0.32s;
    }

    &::after {
      animation-delay: 0.16s;
    }
  }

  .loading-dot {
    @apply size-2 rounded-full;
    background-color: var(--loading-color, var(--color-primary));
    animation: loading-bounce 1.4s ease-in-out infinite both;
    animation-delay: -0.16s;
  }

  /* =============================================
     Sizes
     ============================================= */

  .loading-xs {
    --loading-size: 1rem;
    --loading-width: 2px;
  }

  .loading-sm {
    --loading-size: 1.25rem;
    --loading-width: 2px;
  }

  .loading-lg {
    --loading-size: 2rem;
    --loading-width: 3px;
  }

  .loading-xl {
    --loading-size: 3rem;
    --loading-width: 4px;
  }

  /* =============================================
     Color composition
     ============================================= */

  .loading.color-primary,
  .loading.color-secondary,
  .loading.color-accent,
  .loading.color-neutral,
  .loading.color-info,
  .loading.color-success,
  .loading.color-warning,
  .loading.color-error {
    --loading-color: var(--c);
  }

  /* =============================================
     Keyframes
     ============================================= */

  @keyframes loading-spin {
    to { transform: rotate(360deg); }
  }

  @keyframes loading-bounce {
    0%, 80%, 100% {
      transform: scale(0.6);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .loading {
    animation-duration: 1.5s;
  }

  .loading-dots::before,
  .loading-dots::after,
  .loading-dot {
    animation: none;
  }
}
