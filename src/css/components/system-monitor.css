/* System Monitor */
/* System resource monitoring: CPU, memory, disk usage with gauges, bars, and live stats */

@layer components {

  /* =============================================
     Base container
     ============================================= */

  .sys-monitor {
    @apply flex flex-col gap-4;
  }

  .sys-monitor-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  /* =============================================
     Resource card
     ============================================= */

  .sys-monitor-card {
    @apply flex flex-col overflow-hidden;
    padding: 1.25rem;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
  }

  .sys-monitor-card-header {
    @apply flex items-center justify-between mb-3;
  }

  .sys-monitor-card-title {
    @apply flex items-center gap-2 font-semibold;
    font-size: 0.875rem;
    color: var(--color-base-content);
  }

  .sys-monitor-card-title-icon {
    @apply flex items-center justify-center shrink-0;
    width: 2rem;
    height: 2rem;
    border-radius: var(--radius-field, 0.5rem);
    background: color-mix(in oklch, var(--sm-color, var(--color-primary)) 10%, transparent);
    color: var(--sm-color, var(--color-primary));

    & > svg {
      @apply size-4;
    }
  }

  .sys-monitor-card-badge {
    @apply inline-flex items-center font-semibold;
    padding: 0.125rem 0.5rem;
    font-size: 0.75rem;
    border-radius: 9999px;
    background: color-mix(in oklch, var(--sm-color, var(--color-primary)) 10%, transparent);
    color: var(--sm-color, var(--color-primary));
  }

  /* =============================================
     Circle gauge (reuses progress-circle concept)
     ============================================= */

  .sys-monitor-gauge {
    @apply flex items-center justify-center;
    padding: 1rem 0;
  }

  .sys-monitor-gauge-ring {
    @apply relative inline-flex items-center justify-center;
    width: 120px;
    height: 120px;
  }

  .sys-monitor-gauge-svg {
    @apply w-full h-full;
    transform: rotate(-90deg);
  }

  .sys-monitor-gauge-bg {
    fill: none;
    stroke: var(--color-base-200);
    stroke-width: 8;
  }

  .sys-monitor-gauge-fill {
    fill: none;
    stroke: var(--sm-color, var(--color-primary));
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .sys-monitor-gauge-value {
    @apply absolute flex flex-col items-center justify-center;
  }

  .sys-monitor-gauge-percent {
    @apply font-bold leading-none;
    font-size: 1.5rem;
    font-variant-numeric: tabular-nums;
    color: var(--color-base-content);
  }

  .sys-monitor-gauge-label {
    @apply font-medium;
    font-size: 0.6875rem;
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    margin-top: 0.25rem;
  }

  /* =============================================
     Bar usage
     ============================================= */

  .sys-monitor-bar {
    @apply flex flex-col gap-1;
  }

  .sys-monitor-bar-header {
    @apply flex items-center justify-between;
    font-size: 0.8125rem;
    color: var(--color-base-content);
  }

  .sys-monitor-bar-label {
    @apply font-medium;
    color: color-mix(in oklch, var(--color-base-content) 70%, transparent);
  }

  .sys-monitor-bar-value {
    @apply font-semibold;
    font-variant-numeric: tabular-nums;
  }

  .sys-monitor-bar-track {
    @apply w-full overflow-hidden;
    height: 6px;
    background: var(--color-base-200);
    border-radius: 3px;
  }

  .sys-monitor-bar-fill {
    @apply h-full;
    background: var(--sm-color, var(--color-primary));
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  /* =============================================
     Detail rows
     ============================================= */

  .sys-monitor-details {
    @apply flex flex-col;
    margin-top: 0.75rem;
    gap: 0.5rem;
  }

  .sys-monitor-detail {
    @apply flex items-center justify-between;
    font-size: 0.8125rem;
  }

  .sys-monitor-detail-label {
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .sys-monitor-detail-value {
    @apply font-medium;
    font-variant-numeric: tabular-nums;
    color: var(--color-base-content);
  }

  /* =============================================
     Status indicator
     ============================================= */

  .sys-monitor-status {
    @apply inline-flex items-center gap-1.5;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .sys-monitor-status-dot {
    @apply rounded-full;
    width: 0.5rem;
    height: 0.5rem;
  }

  .sys-monitor-status-healthy {
    color: var(--color-success);

    & .sys-monitor-status-dot {
      background: var(--color-success);
    }
  }

  .sys-monitor-status-warning {
    color: var(--color-warning);

    & .sys-monitor-status-dot {
      background: var(--color-warning);
      animation: sys-monitor-pulse 2s ease-in-out infinite;
    }
  }

  .sys-monitor-status-critical {
    color: var(--color-error);

    & .sys-monitor-status-dot {
      background: var(--color-error);
      animation: sys-monitor-pulse 1s ease-in-out infinite;
    }
  }

  /* =============================================
     Process list
     ============================================= */

  .sys-monitor-processes {
    @apply flex flex-col;
    gap: 0.375rem;
  }

  .sys-monitor-process {
    @apply flex items-center gap-3;
    padding: 0.375rem 0;
    font-size: 0.8125rem;
  }

  .sys-monitor-process-name {
    @apply flex-1 truncate font-medium;
    color: var(--color-base-content);
  }

  .sys-monitor-process-usage {
    @apply font-semibold shrink-0;
    font-variant-numeric: tabular-nums;
    color: color-mix(in oklch, var(--color-base-content) 70%, transparent);
    min-width: 3rem;
    text-align: right;
  }

  .sys-monitor-process-bar {
    @apply shrink-0 overflow-hidden;
    width: 60px;
    height: 4px;
    background: var(--color-base-200);
    border-radius: 2px;
  }

  .sys-monitor-process-bar-fill {
    @apply h-full;
    background: var(--sm-color, var(--color-primary));
    border-radius: 2px;
  }

  /* =============================================
     Color variants
     ============================================= */

  .sys-monitor-card-cpu    { --sm-color: var(--color-primary); }
  .sys-monitor-card-memory { --sm-color: var(--color-warning); }
  .sys-monitor-card-disk   { --sm-color: var(--color-success); }
  .sys-monitor-card-network { --sm-color: var(--color-info); }

  /* Auto color based on threshold */
  .sys-monitor-bar-ok    { --sm-color: var(--color-success); }
  .sys-monitor-bar-warn  { --sm-color: var(--color-warning); }
  .sys-monitor-bar-critical { --sm-color: var(--color-error); }

  /* =============================================
     Compact variant
     ============================================= */

  .sys-monitor-compact .sys-monitor-card {
    padding: 0.75rem 1rem;
  }

  .sys-monitor-compact .sys-monitor-gauge-ring {
    width: 80px;
    height: 80px;
  }

  .sys-monitor-compact .sys-monitor-gauge-percent {
    font-size: 1rem;
  }

  .sys-monitor-compact .sys-monitor-gauge {
    padding: 0.5rem 0;
  }

  /* =============================================
     Inline variant (horizontal bar cards)
     ============================================= */

  .sys-monitor-inline .sys-monitor-card {
    @apply flex-row items-center gap-4;
    padding: 0.75rem 1rem;
  }

  .sys-monitor-inline .sys-monitor-card-header {
    @apply mb-0 shrink-0;
    min-width: 120px;
  }

  .sys-monitor-inline .sys-monitor-bar {
    @apply flex-1;
  }

  .sys-monitor-inline .sys-monitor-gauge {
    @apply hidden;
  }

  /* =============================================
     Glass
     ============================================= */

  .sys-monitor.glass .sys-monitor-card,
  .sys-monitor-card.glass {
    @apply glass;
    border-color: color-mix(in oklch, var(--color-base-content) 12%, transparent);
  }
}

/* =============================================
   Keyframes
   ============================================= */

@keyframes sys-monitor-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* =============================================
   Responsive
   ============================================= */

@media (max-width: 767px) {
  .sys-monitor-grid {
    grid-template-columns: 1fr;
  }

  .sys-monitor-inline .sys-monitor-card {
    @apply flex-col items-stretch;
  }

  .sys-monitor-inline .sys-monitor-card-header {
    min-width: auto;
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .sys-monitor-gauge-fill,
  .sys-monitor-bar-fill {
    transition: none;
  }

  .sys-monitor-status-dot {
    animation: none;
  }
}
