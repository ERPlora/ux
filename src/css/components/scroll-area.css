/* Scroll Area â€” custom scrollbar styling, auto-hide, snap, direction lock */

@layer components {

  /* ---- Base ---- */
  .scroll-area {
    @apply relative overflow-hidden;
  }

  /* ---- Viewport ---- */
  .scroll-area-viewport {
    @apply size-full overflow-auto;
    border-radius: inherit;
    scrollbar-width: thin;
    scrollbar-color: color-mix(in oklch, var(--color-base-content) 20%, transparent) transparent;
  }
  .scroll-area-viewport::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  .scroll-area-viewport::-webkit-scrollbar-track {
    background: transparent;
  }
  .scroll-area-viewport::-webkit-scrollbar-thumb {
    background-color: color-mix(in oklch, var(--color-base-content) 20%, transparent);
    border-radius: 9999px;
    border: 2px solid transparent;
    background-clip: content-box;
  }
  .scroll-area-viewport::-webkit-scrollbar-thumb:hover {
    background-color: color-mix(in oklch, var(--color-base-content) 35%, transparent);
  }
  .scroll-area-viewport::-webkit-scrollbar-corner {
    background: transparent;
  }
  .scroll-area-viewport:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: -2px;
  }

  /* ---- Custom Scrollbar (overlay) ---- */
  .scroll-area-scrollbar {
    @apply absolute flex p-px select-none;
    touch-action: none;
    transition: opacity 0.2s ease;
  }
  .scroll-area-scrollbar-vertical {
    @apply top-0 right-0 bottom-0;
    width: 10px;
    border-left: 1px solid transparent;
  }
  .scroll-area-scrollbar-horizontal {
    @apply left-0 right-0 bottom-0 flex-col;
    height: 10px;
    border-top: 1px solid transparent;
  }

  .scroll-area-thumb {
    @apply relative flex-1;
    background-color: color-mix(in oklch, var(--color-base-content) 20%, transparent);
    border-radius: 9999px;
    transition: background-color 0.15s ease;
  }
  .scroll-area-thumb:hover {
    background-color: color-mix(in oklch, var(--color-base-content) 35%, transparent);
  }
  .scroll-area-thumb::before {
    content: '';
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 size-full;
    min-width: 44px;
    min-height: 44px;
  }

  /* ---- Sizes ---- */
  .scroll-area-sm .scroll-area-viewport::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  .scroll-area-sm .scroll-area-scrollbar-vertical { width: 6px; }
  .scroll-area-sm .scroll-area-scrollbar-horizontal { height: 6px; }

  .scroll-area-lg .scroll-area-viewport::-webkit-scrollbar {
    width: 14px;
    height: 14px;
  }
  .scroll-area-lg .scroll-area-scrollbar-vertical { width: 14px; }
  .scroll-area-lg .scroll-area-scrollbar-horizontal { height: 14px; }

  /* ---- Auto-hide ---- */
  .scroll-area-auto-hide .scroll-area-scrollbar {
    @apply opacity-0;
  }
  .scroll-area-auto-hide:hover .scroll-area-scrollbar,
  .scroll-area-auto-hide:focus-within .scroll-area-scrollbar,
  .scroll-area-auto-hide .scroll-area-scrollbar[data-dragging="true"] {
    @apply opacity-100;
  }

  /* ---- Always Visible ---- */
  .scroll-area-always-visible .scroll-area-scrollbar {
    @apply opacity-100;
  }

  /* ---- Inset ---- */
  .scroll-area-inset .scroll-area-scrollbar-vertical {
    right: 4px;
    top: 4px;
    bottom: 4px;
  }
  .scroll-area-inset .scroll-area-scrollbar-horizontal {
    left: 4px;
    right: 4px;
    bottom: 4px;
  }

  /* ---- Track Visible ---- */
  .scroll-area-track-visible .scroll-area-scrollbar-vertical {
    @apply bg-base-200 border-l border-base-300;
  }
  .scroll-area-track-visible .scroll-area-scrollbar-horizontal {
    @apply bg-base-200 border-t border-base-300;
  }

  /* ---- Scroll Snap ---- */
  .scroll-area-snap-x .scroll-area-viewport {
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
  }
  .scroll-area-snap-x .scroll-area-viewport > * {
    scroll-snap-align: start;
  }
  .scroll-area-snap-y .scroll-area-viewport {
    scroll-snap-type: y mandatory;
    scroll-behavior: smooth;
  }
  .scroll-area-snap-y .scroll-area-viewport > * {
    scroll-snap-align: start;
  }

  /* ---- Direction Lock ---- */
  .scroll-area-horizontal-only .scroll-area-viewport {
    @apply overflow-x-auto overflow-y-hidden;
  }
  .scroll-area-vertical-only .scroll-area-viewport {
    @apply overflow-x-hidden overflow-y-auto;
  }

  /* ---- Glass ---- */
  .scroll-area.glass .scroll-area-thumb {
    background-color: var(--glass-border, rgba(255,255,255,0.18));
  }
  .scroll-area.glass .scroll-area-thumb:hover {
    background-color: rgba(255, 255, 255, 0.3);
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .scroll-area-scrollbar,
  .scroll-area-thumb {
    transition: none;
  }
  .scroll-area-snap-x .scroll-area-viewport,
  .scroll-area-snap-y .scroll-area-viewport {
    scroll-behavior: auto;
  }
}
