/* UX v3 - Snackbar Component */
/* Material-style snackbar with action, colors, progress indicator */

@layer components {

  /* =============================================
     Snackbar Container
     ============================================= */

  .snackbar-container {
    @apply fixed bottom-0 left-0 right-0 flex flex-col items-center pointer-events-none;
    z-index: 60;
    gap: 0.5rem;
    padding: 1rem;
    padding-bottom: calc(1rem + env(safe-area-inset-bottom));
  }

  .snackbar-container-left  { @apply items-start; }
  .snackbar-container-right { @apply items-end; }

  /* =============================================
     Snackbar
     ============================================= */

  .snackbar {
    @apply flex items-center pointer-events-auto;
    gap: 1rem;
    min-height: 48px;
    min-width: 288px;
    max-width: 568px;
    padding: 0.5rem 1rem;
    background-color: var(--color-neutral);
    color: var(--color-neutral-content);
    border-radius: var(--radius-field);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    opacity: 0;
    transform: translateY(100%);
    will-change: transform, opacity;
    transition: opacity 0.2s, transform 0.25s cubic-bezier(0.32, 0.72, 0, 1);
  }

  .snackbar-visible {
    opacity: 1;
    transform: translateY(0);
  }

  .snackbar-exiting {
    opacity: 0;
    transform: translateY(100%);
    transition: opacity 0.15s, transform 0.2s;
  }

  /* =============================================
     Snackbar Content
     ============================================= */

  .snackbar-content {
    @apply flex-1 flex items-center;
    gap: 0.5rem;
    font-size: 1rem;
    line-height: 1.4;
  }

  .snackbar-icon {
    @apply shrink-0;
    width: 20px;
    height: 20px;
    opacity: 0.9;
  }

  .snackbar-message {
    @apply flex-1;
  }

  /* =============================================
     Snackbar Action
     ============================================= */

  .snackbar-action {
    @apply shrink-0 border-none cursor-pointer bg-transparent font-semibold uppercase;
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    letter-spacing: 0.5px;
    color: var(--color-primary);
    border-radius: var(--radius-field);
    transition: background-color 0.15s;

    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    &:active {
      background-color: rgba(255, 255, 255, 0.15);
    }
  }

  /* =============================================
     Snackbar Close
     ============================================= */

  .snackbar-close {
    @apply shrink-0 flex items-center justify-center border-none bg-transparent rounded-full cursor-pointer;
    width: 28px;
    height: 28px;
    padding: 0;
    color: rgba(255, 255, 255, 0.7);
    transition: background-color 0.15s;

    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
    }

    & > svg {
      @apply size-4;
    }
  }

  /* =============================================
     Color Variants
     ============================================= */

  .snackbar-success {
    background-color: var(--color-success);
    color: var(--color-success-content);

    & .snackbar-action { color: var(--color-success-content); }
  }

  .snackbar-warning {
    background-color: var(--color-warning);
    color: var(--color-warning-content);

    & .snackbar-action { color: var(--color-warning-content); }

    & .snackbar-close {
      color: color-mix(in oklch, var(--color-warning-content) 70%, transparent);

      &:hover {
        background-color: rgba(0, 0, 0, 0.1);
        color: var(--color-warning-content);
      }
    }
  }

  .snackbar-error {
    background-color: var(--color-error);
    color: var(--color-error-content);

    & .snackbar-action { color: var(--color-error-content); }
  }

  .snackbar-info {
    background-color: var(--color-info);
    color: var(--color-info-content);

    & .snackbar-action { color: var(--color-info-content); }
  }

  /* =============================================
     Stacked Layout
     ============================================= */

  .snackbar-stacked {
    @apply flex-col items-stretch;
    padding: 1rem;

    & .snackbar-content {
      margin-bottom: 0.5rem;
    }

    & .snackbar-actions {
      @apply flex justify-end;
      gap: 0.5rem;
    }
  }

  /* =============================================
     Progress Bar (auto-dismiss indicator)
     ============================================= */

  .snackbar-progress {
    @apply relative overflow-hidden;
  }

  .snackbar-progress-bar {
    @apply absolute bottom-0 left-0;
    height: 3px;
    background-color: rgba(255, 255, 255, 0.4);
    transform-origin: left;
    animation: snackbar-progress linear forwards;
  }

  .snackbar-warning .snackbar-progress-bar {
    background-color: rgba(0, 0, 0, 0.2);
  }
}

/* =============================================
   Keyframes
   ============================================= */

@keyframes snackbar-progress {
  from { transform: scaleX(1); }
  to { transform: scaleX(0); }
}

/* =============================================
   Mobile full width
   ============================================= */

@media (max-width: 599px) {
  .snackbar {
    min-width: calc(100vw - 2rem);
    max-width: calc(100vw - 2rem);
  }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .snackbar {
    transition: opacity 0.15s;
    transform: translateY(0);
  }

  .snackbar-exiting {
    transform: translateY(0);
  }

  .snackbar-progress-bar {
    animation: none;
  }
}
