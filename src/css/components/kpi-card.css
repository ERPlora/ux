/* UX v3 - KPI Card Component */
/* KPI dashboard cards with value, change indicator, progress bar, compact layout */

@layer components {

  /* =============================================
     Base
     ============================================= */

  .kpi-card {
    @apply flex flex-col cursor-pointer;
    padding: 1rem;
    background-color: var(--color-base-100);
    border-radius: var(--radius-box, 0.75rem);
    transition: transform 0.15s ease, box-shadow 0.15s ease;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    &:active {
      transform: scale(0.98);
    }
  }

  /* =============================================
     Header (icon + change badge)
     ============================================= */

  .kpi-card-header {
    @apply flex items-center justify-between mb-2;
  }

  .kpi-card-icon {
    @apply text-2xl;
    color: var(--kpi-color, var(--color-primary));
  }

  .kpi-card-change {
    @apply inline-flex items-center gap-1 text-xs font-semibold rounded-full;
    padding: 0.125rem 0.5rem;
  }

  .kpi-card-change-up {
    background-color: color-mix(in oklch, var(--color-success) 10%, transparent);
    color: var(--color-success);
  }

  .kpi-card-change-down {
    background-color: color-mix(in oklch, var(--color-error) 10%, transparent);
    color: var(--color-error);
  }

  .kpi-card-change-neutral {
    background-color: color-mix(in oklch, var(--color-base-content) 10%, transparent);
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     Content (label + value)
     ============================================= */

  .kpi-card-label {
    @apply text-xs mb-1;
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
  }

  .kpi-card-value {
    @apply text-xl font-bold mb-2;
    color: var(--color-base-content);
  }

  /* =============================================
     Progress Bar
     ============================================= */

  .kpi-card-progress {
    @apply w-full overflow-hidden;
    height: 4px;
    background-color: color-mix(in oklch, var(--color-base-content) 8%, transparent);
    border-radius: 2px;
  }

  .kpi-card-progress-bar {
    @apply h-full;
    background-color: var(--kpi-color, var(--color-primary));
    border-radius: inherit;
    transition: width 0.3s ease;
  }

  /* =============================================
     Target Info
     ============================================= */

  .kpi-card-target {
    @apply flex items-center justify-between text-xs mt-1;
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
  }

  /* =============================================
     Size Variants
     ============================================= */

  .kpi-card-sm {
    padding: 0.5rem;

    .kpi-card-icon { @apply text-xl; }
    .kpi-card-value { @apply text-base; }
  }

  .kpi-card-lg {
    padding: 1.5rem;

    .kpi-card-icon { @apply text-3xl; }
    .kpi-card-value { @apply text-2xl; }
  }

  /* =============================================
     Color Variants
     ============================================= */

  .kpi-card.color-primary { --kpi-color: var(--color-primary); }
  .kpi-card.color-success { --kpi-color: var(--color-success); }
  .kpi-card.color-warning { --kpi-color: var(--color-warning); }
  .kpi-card.color-error   { --kpi-color: var(--color-error); }
  .kpi-card.color-info    { --kpi-color: var(--color-info); }
  .kpi-card.color-accent  { --kpi-color: var(--color-accent); }

  /* =============================================
     Compact Layout (horizontal)
     ============================================= */

  .kpi-card-compact {
    @apply flex-row items-center gap-4;
  }

  .kpi-card-compact .kpi-card-icon-wrapper {
    @apply flex items-center justify-center shrink-0;
    width: 48px;
    height: 48px;
    background-color: color-mix(in oklch, var(--kpi-color, var(--color-primary)) 10%, transparent);
    border-radius: var(--radius-field, 0.25rem);
  }

  .kpi-card-compact .kpi-card-content {
    @apply flex-1 min-w-0;
  }

  .kpi-card-compact .kpi-card-header {
    @apply mb-0;
  }

  /* =============================================
     Glass
     ============================================= */

  .kpi-card.glass {
    @apply glass;
  }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .kpi-card,
  .kpi-card-progress-bar {
    transition: none;
  }

  .kpi-card:hover {
    transform: none;
  }
}
