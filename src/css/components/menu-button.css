/* UX v3 - Menu Button Component */
/* Hamburger menu button for navigation drawers and sidebars */

@layer components {

  /* =============================================
     Base
     ============================================= */

  .menu-button {
    @apply inline-flex items-center justify-center p-0 bg-transparent border-none cursor-pointer shrink-0;
    width: 2.75rem;
    height: 2.75rem;
    color: var(--color-base-content);
    border-radius: var(--radius-field, 0.5rem);
    -webkit-tap-highlight-color: transparent;
    transition: background-color 0.15s ease, transform 0.15s ease;

    &:hover {
      background-color: var(--color-base-200);
    }

    &:active {
      background-color: var(--color-base-300);
      transform: scale(0.95);
    }

    &:focus-visible {
      @apply outline-2 outline-primary outline-offset-2;
    }
  }

  /* =============================================
     Icon Container
     ============================================= */

  .menu-button-icon {
    @apply flex items-center justify-center;
    width: 20px;
    height: 20px;

    & svg {
      @apply w-full h-full;
      stroke-width: 2.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
  }

  /* =============================================
     CSS Hamburger Lines
     ============================================= */

  .menu-button-lines {
    @apply flex flex-col justify-center items-center;
    gap: 5px;
    width: 18px;
    height: 20px;
  }

  .menu-button-line {
    @apply w-full;
    height: 2px;
    background: currentColor;
    border-radius: 2px;
    transition: transform 0.15s ease, opacity 0.15s ease;
    transform-origin: center;
  }

  /* Animated hamburger to X */
  .menu-button-open .menu-button-line:nth-child(1) {
    transform: translateY(calc(5px + 2px)) rotate(45deg);
  }

  .menu-button-open .menu-button-line:nth-child(2) {
    @apply opacity-0;
    transform: scaleX(0);
  }

  .menu-button-open .menu-button-line:nth-child(3) {
    transform: translateY(calc(-1 * (5px + 2px))) rotate(-45deg);
  }

  /* State selectors */
  .menu-button[data-state="open"] .menu-button-line:nth-child(1),
  .menu-button[aria-expanded="true"] .menu-button-line:nth-child(1) {
    transform: translateY(calc(5px + 2px)) rotate(45deg);
  }

  .menu-button[data-state="open"] .menu-button-line:nth-child(2),
  .menu-button[aria-expanded="true"] .menu-button-line:nth-child(2) {
    @apply opacity-0;
    transform: scaleX(0);
  }

  .menu-button[data-state="open"] .menu-button-line:nth-child(3),
  .menu-button[aria-expanded="true"] .menu-button-line:nth-child(3) {
    transform: translateY(calc(-1 * (5px + 2px))) rotate(-45deg);
  }

  /* =============================================
     Size Variants
     ============================================= */

  .menu-button-sm {
    width: 2.25rem;
    height: 2.25rem;

    & .menu-button-icon {
      width: 16px;
      height: 16px;
    }

    & .menu-button-lines {
      width: 14px;
      gap: 4px;
    }
  }

  .menu-button-lg {
    width: 3.25rem;
    height: 3.25rem;

    & .menu-button-icon {
      width: 24px;
      height: 24px;
    }

    & .menu-button-lines {
      width: 22px;
      gap: 6px;
    }
  }

  /* =============================================
     Glass Variant
     ============================================= */

  .menu-button.glass {
    @apply glass;

    &:hover {
      background: rgba(255, 255, 255, 0.25);
    }
  }

  /* =============================================
     Filled Variant
     ============================================= */

  .menu-button-filled {
    background-color: var(--color-base-200);

    &:hover {
      background-color: var(--color-base-300);
    }
  }

  /* =============================================
     Outlined Variant
     ============================================= */

  .menu-button-outline {
    border: 1px solid var(--color-base-300);
    @apply bg-transparent;

    &:hover {
      border-color: color-mix(in oklch, var(--color-base-content) 30%, transparent);
    }
  }

  /* =============================================
     Rounded Variant
     ============================================= */

  .menu-button-rounded {
    @apply rounded-full;
  }

  /* =============================================
     With Label
     ============================================= */

  .menu-button-labeled {
    @apply w-auto gap-2;
    padding: 0 1rem;
  }

  .menu-button-label {
    @apply text-sm font-semibold;
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .menu-button,
  .menu-button-line {
    transition: none;
  }
}
