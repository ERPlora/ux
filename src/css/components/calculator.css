/* UX v3 - Calculator Component */
/* Calculator with display, keypad, operator/function buttons, glass variant */

@layer components {

  /* =============================================
     Container
     ============================================= */

  .calculator {
    @apply flex flex-col select-none;
    width: 320px;
    max-width: 100%;
    padding: 1.5rem;
    background-color: var(--color-base-100);
    border-radius: var(--radius-box, 0.75rem);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .calculator-full-width { @apply w-full; }

  .calculator-compact {
    padding: 1rem;

    .calculator-display { padding: 0.5rem 1rem; min-height: 80px; }
  }

  /* =============================================
     Display
     ============================================= */

  .calculator-display {
    @apply flex flex-col items-end justify-end overflow-hidden;
    min-height: 120px;
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    background-color: var(--color-base-200);
    border-radius: var(--radius-box, 0.75rem);
  }

  .calculator-expression {
    @apply w-full text-right overflow-hidden truncate whitespace-nowrap;
    font-size: 1rem;
    font-weight: 400;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    min-height: 1.5em;
  }

  .calculator-result {
    @apply w-full text-right overflow-hidden truncate whitespace-nowrap;
    font-family: 'SF Mono', 'Menlo', 'Monaco', monospace;
    font-size: 3rem;
    font-weight: 300;
    font-variant-numeric: tabular-nums;
    color: var(--color-base-content);
    line-height: 1.2;
    transition: font-size 0.15s ease;
  }

  .calculator-result-small { font-size: 2.1rem; }
  .calculator-result-error { color: var(--color-error); }

  /* =============================================
     Keypad
     ============================================= */

  .calculator-keypad {
    @apply grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
  }

  /* =============================================
     Buttons
     ============================================= */

  .calculator-btn {
    @apply flex items-center justify-center cursor-pointer font-medium;
    min-width: 64px;
    min-height: 64px;
    padding: 0.5rem;
    background-color: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
    font-size: 1.5rem;
    color: var(--color-base-content);
    -webkit-tap-highlight-color: transparent;
    transition: background-color 0.15s ease, transform 0.1s ease;

    &:hover { background-color: var(--color-base-200); }
    &:active { transform: scale(0.95); background-color: var(--color-base-300); }
    &:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    svg { @apply w-6 h-6; }
  }

  .calculator-btn-number {
    background-color: var(--color-base-100);
    font-weight: 400;

    &:hover { background-color: var(--color-base-200); }
  }

  .calculator-btn-operator {
    background-color: var(--color-warning);
    border-color: var(--color-warning);
    color: white;

    &:hover { filter: brightness(0.9); }

    &.is-active {
      background-color: white;
      color: var(--color-warning);
    }
  }

  .calculator-btn-function {
    background-color: var(--color-base-200);
    border-color: var(--color-base-300);
    color: var(--color-base-content);

    &:hover { background-color: var(--color-base-300); }
  }

  .calculator-btn-equals {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-primary-content, white);

    &:hover { filter: brightness(0.9); }
  }

  .calculator-btn-wide { grid-column: span 2; }

  /* =============================================
     Glass
     ============================================= */

  .calculator.glass {
    @apply glass;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);

    .calculator-display {
      background-color: color-mix(in oklch, var(--color-base-100) 50%, transparent);
      border: 0.5px solid color-mix(in oklch, var(--color-base-content) 10%, transparent);
    }

    .calculator-btn {
      background-color: color-mix(in oklch, var(--color-base-100) 50%, transparent);
      border-color: color-mix(in oklch, var(--color-base-content) 10%, transparent);

      &:hover {
        background-color: color-mix(in oklch, var(--color-base-100) 70%, transparent);
      }
    }

    .calculator-btn-function {
      background-color: color-mix(in oklch, var(--color-base-100) 70%, transparent);
    }
  }
}

/* =============================================
   Responsive
   ============================================= */

@media (max-width: 767px) {
  .calculator {
    @apply w-full max-w-full rounded-none shadow-none;
  }

  .calculator-btn {
    min-height: 56px;
  }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .calculator-btn {
    transition: none;

    &:active { transform: none; }
  }

  .calculator-result {
    transition: none;
  }
}
