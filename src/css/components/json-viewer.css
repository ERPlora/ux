/* JSON Viewer â€” interactive tree view for JSON data */

@layer components {
  /* ===== Base ===== */
  .json-viewer {
    font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
    font-size: 0.875rem;
    line-height: 1.6;
    background: #1e1e2e;
    border-radius: var(--radius-box);
    overflow: hidden;
  }

  /* ===== Header ===== */
  .json-viewer-header {
    @apply flex items-center justify-between;
    padding: 0.75rem 1rem;
    background: #181825;
    border-bottom: 1px solid #313244;
  }

  .json-viewer-title {
    @apply flex items-center;
    gap: 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: #6c7086;
  }

  .json-viewer-badge {
    padding: 0.125rem 0.5rem;
    background: #313244;
    border-radius: var(--radius-field);
    font-size: 0.6875rem;
    color: #a6adc8;
  }

  .json-viewer-actions {
    @apply flex;
    gap: 0.5rem;
  }

  .json-viewer-btn {
    @apply flex items-center justify-center border-none cursor-pointer;
    gap: 0.25rem;
    padding: 0.375rem 0.625rem;
    background: transparent;
    border-radius: var(--radius-field);
    color: #6c7086;
    font-size: 0.75rem;
    font-family: inherit;
    transition: all 0.15s;

    &:hover {
      background: #313244;
      color: #cdd6f4;
    }

    svg {
      width: 14px;
      height: 14px;
    }
  }

  .json-viewer-btn-active {
    background: #313244;
    color: var(--color-primary);
  }

  /* ===== Content ===== */
  .json-viewer-content {
    padding: 1rem;
    overflow-x: auto;
    max-height: 500px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #585b70 transparent;
  }

  /* ===== Tree ===== */
  .json-viewer-tree {
    @apply m-0 p-0 list-none;
  }

  .json-viewer-node {
    @apply relative;
  }

  .json-viewer-row {
    @apply flex items-start;
    padding: 0.125rem 0;
    cursor: default;

    &:hover {
      background: rgba(255, 255, 255, 0.03);
    }
  }

  /* Toggle */
  .json-viewer-toggle {
    @apply flex items-center justify-center flex-shrink-0 border-none cursor-pointer;
    width: 16px;
    height: 20px;
    padding: 0;
    margin-right: 0.25rem;
    background: transparent;
    color: #585b70;

    &:hover {
      color: #a6adc8;
    }

    svg {
      width: 10px;
      height: 10px;
      transition: transform 0.15s;
    }
  }

  .json-viewer-toggle-expanded svg {
    transform: rotate(90deg);
  }

  .json-viewer-toggle-hidden {
    visibility: hidden;
  }

  /* Indentation */
  .json-viewer-indent {
    @apply flex-shrink-0;
    width: 1.25rem;
  }

  /* ===== Syntax Colors ===== */
  .json-viewer-key {
    color: #f38ba8;
    margin-right: 0.25rem;

    &::after {
      content: ':';
      color: #585b70;
      margin-left: 0.125rem;
    }
  }

  .json-viewer-value-string {
    color: #a6e3a1;

    &::before,
    &::after {
      content: '"';
      color: #a6e3a1;
    }
  }

  .json-viewer-value-number {
    color: #fab387;
  }

  .json-viewer-value-boolean {
    color: #89dceb;
  }

  .json-viewer-value-null {
    color: #cba6f7;
    font-style: italic;
  }

  .json-viewer-value-url {
    color: #89b4fa;
    text-decoration: underline;
    cursor: pointer;

    &:hover {
      color: #b4d0fb;
    }
  }

  /* Brackets */
  .json-viewer-bracket {
    color: #585b70;
  }

  .json-viewer-bracket-open {
    margin-left: 0.25rem;
  }

  /* Collapsed preview */
  .json-viewer-preview {
    color: #585b70;
    font-style: italic;
    margin-left: 0.25rem;
  }

  /* Children */
  .json-viewer-children {
    @apply m-0 p-0 list-none;
    padding-left: 1.25rem;
    border-left: 1px solid #313244;
    margin-left: 0.5rem;
  }

  /* Count badge */
  .json-viewer-count {
    @apply inline-flex items-center justify-center;
    min-width: 1.25rem;
    height: 1rem;
    padding: 0 0.375rem;
    margin-left: 0.5rem;
    background: #313244;
    border-radius: 10px;
    font-size: 0.625rem;
    color: #6c7086;
  }

  /* Search highlight */
  .json-viewer-highlight {
    background: rgba(255, 213, 0, 0.3);
    border-radius: 2px;
    padding: 0 2px;
  }

  /* ===== Search ===== */
  .json-viewer-search {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #313244;
  }

  .json-viewer-search-input {
    @apply w-full;
    padding: 0.5rem 0.75rem;
    background: #181825;
    border: 1px solid #313244;
    border-radius: var(--radius-field);
    color: #cdd6f4;
    font-size: 0.875rem;
    font-family: inherit;

    &:focus {
      outline: none;
      border-color: var(--color-primary);
    }

    &::placeholder {
      color: #585b70;
    }
  }

  /* Raw mode */
  .json-viewer-raw {
    @apply m-0;
    white-space: pre-wrap;
    word-break: break-word;
    color: #a6adc8;
  }

  /* ===== Light theme ===== */
  .json-viewer-light {
    background: var(--color-base-100);

    .json-viewer-header {
      background: var(--color-base-200);
      border-bottom-color: var(--color-base-300);
    }

    .json-viewer-badge {
      background: var(--color-base-300);
      color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    }

    .json-viewer-btn {
      color: color-mix(in oklch, var(--color-base-content) 50%, transparent);

      &:hover {
        background: var(--color-base-300);
        color: var(--color-base-content);
      }
    }

    .json-viewer-row:hover {
      background: rgba(0, 0, 0, 0.03);
    }

    .json-viewer-children {
      border-left-color: var(--color-base-300);
    }

    .json-viewer-search {
      border-bottom-color: var(--color-base-300);
    }

    .json-viewer-search-input {
      background: var(--color-base-100);
      border-color: var(--color-base-300);
      color: var(--color-base-content);
    }

    .json-viewer-key { color: #a626a4; }
    .json-viewer-value-string { color: #50a14f; }
    .json-viewer-value-number { color: #986801; }
    .json-viewer-value-boolean { color: #0184bc; }
    .json-viewer-value-null { color: #a626a4; }
    .json-viewer-bracket { color: #6c7086; }
    .json-viewer-toggle { color: #6c7086; }
    .json-viewer-count { background: var(--color-base-300); }
  }

  /* ===== Sizes ===== */
  .json-viewer-sm {
    font-size: 0.75rem;
  }

  .json-viewer-lg {
    font-size: 1rem;
  }

  /* Compact */
  .json-viewer-compact {
    .json-viewer-row {
      padding: 0;
    }

    .json-viewer-children {
      padding-left: 1rem;
    }
  }

  /* ===== Glass ===== */
  .json-viewer.glass {
    @apply glass;

    .json-viewer-header {
      background: color-mix(in oklch, var(--color-base-content) 5%, transparent);
      border-bottom-color: color-mix(in oklch, var(--color-base-content) 10%, transparent);
    }
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .json-viewer-toggle svg {
    transition: none;
  }
}
