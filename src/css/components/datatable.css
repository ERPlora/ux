/* UX v3 - DataTable Component */
/* Full-featured data table with header, toolbar, sorting, pagination */

@layer components {

  /* =============================================
     Container
     ============================================= */

  .datatable {
    @apply flex flex-col w-full rounded-2xl overflow-hidden;
    background-color: var(--color-base-100);
  }

  .datatable-inset {
    @apply mx-6;
  }

  .datatable-bordered {
    border: 1px solid var(--color-base-300);
  }

  /* =============================================
     Header (title + actions)
     ============================================= */

  .datatable-header {
    @apply flex items-center justify-between px-5 py-3 shrink-0;
    background-color: var(--color-base-100);
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-title {
    @apply text-lg font-semibold m-0;
    color: var(--color-base-content);
  }

  .datatable-subtitle {
    @apply text-xs mt-0.5;
    color: var(--color-base-content);
    opacity: 0.6;
  }

  .datatable-actions {
    @apply flex items-center gap-2;
  }

  /* =============================================
     Toolbar (search + filters)
     ============================================= */

  .datatable-toolbar {
    @apply flex items-center justify-between gap-3 px-5 py-2 shrink-0 flex-wrap;
    background-color: var(--color-base-200);
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-toolbar-start {
    @apply flex items-center gap-2;
  }

  .datatable-toolbar-end {
    @apply flex items-center gap-2;
  }

  .datatable-search {
    @apply min-w-48;
  }

  /* =============================================
     Bulk actions toolbar
     ============================================= */

  .datatable-bulk {
    @apply flex items-center justify-between gap-3 px-5 py-2 shrink-0;
    background: color-mix(in oklch, var(--color-primary) 10%, var(--color-base-100));
    border-bottom: 1px solid color-mix(in oklch, var(--color-primary) 20%, transparent);
    animation: datatable-bulk-slide 200ms ease;
  }

  .datatable-bulk-info {
    @apply flex items-center gap-2 text-sm font-medium text-primary;
  }

  .datatable-bulk-count {
    @apply inline-flex items-center justify-center min-w-6 h-6 px-1 rounded-full text-xs font-semibold bg-primary text-primary-content;
  }

  .datatable-bulk-actions {
    @apply flex items-center gap-1;
  }

  /* =============================================
     Body (scrollable)
     ============================================= */

  .datatable-body {
    @apply flex-1 overflow-auto;
    -webkit-overflow-scrolling: touch;
  }

  .datatable-body-fixed {
    @apply max-h-96;
  }

  /* =============================================
     Table
     ============================================= */

  .datatable-table {
    @apply w-full;
    border-collapse: collapse;
    table-layout: auto;
  }

  .datatable-table-fixed {
    @apply table-fixed;
  }

  /* Table head */
  .datatable-thead {
    @apply sticky top-0 z-10;
    background-color: var(--color-base-200);
  }

  /* Header cell */
  .datatable-th {
    @apply px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide whitespace-nowrap;
    color: var(--color-base-content);
    opacity: 0.6;
    background-color: var(--color-base-200);
    border-bottom: 2px solid var(--color-base-300);
  }

  .datatable-th-sortable {
    @apply cursor-pointer select-none;
    transition: color 0.15s ease;

    &:hover {
      @apply text-primary;
      opacity: 1;
    }
  }

  .datatable-th-sorted {
    @apply text-primary;
    opacity: 1;
  }

  .datatable-th-center {
    @apply text-center;
  }

  .datatable-th-right {
    @apply text-right;
  }

  .datatable-th-checkbox {
    @apply w-12 pl-3 pr-2;
  }

  .datatable-th-actions {
    @apply w-20 text-center;
  }

  /* Sort icon */
  .datatable-sort-icon {
    @apply inline-flex ml-1 opacity-50;
    transition: transform 0.15s ease;
  }

  .datatable-th-sorted .datatable-sort-icon {
    @apply opacity-100;
  }

  .datatable-th-sorted-desc .datatable-sort-icon {
    transform: rotate(180deg);
  }

  /* =============================================
     Table body
     ============================================= */

  .datatable-tbody {
    background-color: var(--color-base-100);
  }

  /* Row */
  .datatable-tr {
    transition: background-color 0.15s ease;

    &:hover {
      background: color-mix(in oklch, var(--color-primary) 5%, var(--color-base-100));
    }

    &:last-child .datatable-td {
      @apply border-b-0;
    }
  }

  .datatable-tr-selected {
    background: color-mix(in oklch, var(--color-primary) 10%, var(--color-base-100));
  }

  .datatable-tr-clickable {
    @apply cursor-pointer;
  }

  /* Cell */
  .datatable-td {
    @apply px-5 py-3 text-sm align-middle;
    color: var(--color-base-content);
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-td-center {
    @apply text-center;
  }

  .datatable-td-right {
    @apply text-right;
  }

  .datatable-td-truncate {
    @apply max-w-48 whitespace-nowrap overflow-hidden text-ellipsis;
  }

  .datatable-td-checkbox {
    @apply w-12 pl-3 pr-2;
  }

  .datatable-td-actions {
    @apply w-20 text-center;
  }

  /* =============================================
     Row actions
     ============================================= */

  .datatable-row-actions {
    @apply flex items-center justify-center gap-1;
  }

  .datatable-row-action {
    @apply flex items-center justify-center size-8 p-0 bg-transparent border-none rounded-lg cursor-pointer;
    color: var(--color-base-content);
    opacity: 0.6;
    transition: background-color 0.15s ease, opacity 0.15s ease;

    &:hover {
      @apply opacity-100;
      background-color: var(--color-base-200);
    }

    svg {
      @apply size-4.5;
    }
  }

  .datatable-row-action-danger:hover {
    background-color: color-mix(in oklch, var(--color-error) 10%, transparent);
    color: var(--color-error);
    @apply opacity-100;
  }

  /* =============================================
     Empty state
     ============================================= */

  .datatable-empty {
    @apply flex flex-col items-center justify-center py-16 px-4 text-center;
  }

  .datatable-empty-icon {
    @apply size-16 mb-4;
    color: var(--color-base-content);
    opacity: 0.3;
  }

  .datatable-empty-title {
    @apply text-lg font-semibold m-0 mb-1;
    color: var(--color-base-content);
  }

  .datatable-empty-text {
    @apply text-sm m-0;
    color: var(--color-base-content);
    opacity: 0.6;
  }

  /* =============================================
     Loading state
     ============================================= */

  .datatable-loading {
    @apply flex items-center justify-center py-16;
  }

  .datatable.is-loading .datatable-tbody {
    @apply opacity-50 pointer-events-none;
  }

  /* =============================================
     Footer (pagination)
     ============================================= */

  .datatable-footer {
    @apply flex items-center justify-between px-5 py-3 shrink-0 flex-wrap gap-3;
    background-color: var(--color-base-100);
    border-top: 1px solid var(--color-base-300);
  }

  .datatable-info {
    @apply text-sm;
    color: var(--color-base-content);
    opacity: 0.6;
  }

  .datatable-per-page {
    @apply flex items-center gap-2 text-sm;
    color: var(--color-base-content);
    opacity: 0.6;

    select {
      @apply px-2 py-1 text-sm rounded-lg;
      border: 1px solid var(--color-base-300);
      background-color: var(--color-base-100);
      color: var(--color-base-content);
    }
  }

  /* =============================================
     Expandable rows
     ============================================= */

  .datatable-expand-btn {
    @apply flex items-center justify-center size-8 p-0 bg-transparent border-none rounded-lg cursor-pointer;
    color: var(--color-base-content);
    opacity: 0.6;
    transition: background-color 0.15s ease, transform 0.15s ease;

    &:hover {
      @apply opacity-100;
      background-color: var(--color-base-200);
    }

    svg {
      @apply size-4.5;
    }
  }

  .datatable-expand-btn-open {
    transform: rotate(90deg);
    @apply text-primary opacity-100;
  }

  .datatable-expand-row {
    background-color: var(--color-base-200);

    & > td {
      @apply p-0;
      border-bottom: 1px solid var(--color-base-300);
    }
  }

  .datatable-expand-content {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.2s ease;
  }

  .datatable-expand-content-open {
    grid-template-rows: 1fr;
  }

  .datatable-expand-inner {
    @apply overflow-hidden;
  }

  .datatable-expand-body {
    @apply p-5;
    border-left: 3px solid var(--color-primary);
    margin-left: 1rem;
  }

  .datatable-detail-list {
    @apply grid gap-3;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  }

  .datatable-detail-item {
    @apply flex flex-col gap-0.5;
  }

  .datatable-detail-label {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: var(--color-base-content);
    opacity: 0.6;
  }

  .datatable-detail-value {
    @apply text-sm;
    color: var(--color-base-content);
  }

  /* =============================================
     Sizes
     ============================================= */

  .datatable-compact .datatable-th,
  .datatable-compact .datatable-td {
    @apply px-3 py-2 text-xs;
  }

  .datatable-sm .datatable-th,
  .datatable-sm .datatable-td {
    @apply px-2 py-1.5 text-xs;
  }

  .datatable-lg .datatable-th,
  .datatable-lg .datatable-td {
    @apply px-6 py-4;
  }

  /* Striped */
  .datatable-striped .datatable-tr:nth-child(even) {
    background-color: var(--color-base-200);
  }

  /* =============================================
     Responsive (card view on mobile)
     ============================================= */

  @media (max-width: 767px) {
    .datatable-toolbar {
      @apply flex-col items-stretch;
    }

    .datatable-search {
      @apply w-full;
    }

    .datatable-footer {
      @apply flex-col items-center;
    }

    .datatable-responsive .datatable-table,
    .datatable-responsive .datatable-thead,
    .datatable-responsive .datatable-tbody,
    .datatable-responsive .datatable-th,
    .datatable-responsive .datatable-tr,
    .datatable-responsive .datatable-td {
      @apply block;
    }

    .datatable-responsive .datatable-thead {
      @apply absolute invisible;
      top: -9999px;
      left: -9999px;
    }

    .datatable-responsive .datatable-tr {
      @apply mb-3 rounded-xl overflow-hidden;
      background-color: var(--color-base-100);
      border: 1px solid var(--color-base-300);

      &:last-child {
        @apply mb-0;
      }
    }

    .datatable-responsive .datatable-td {
      @apply flex items-center justify-between px-4 py-3 text-right;
      border-bottom: 1px solid var(--color-base-300);

      &::before {
        content: attr(data-label);
        @apply flex-1 font-semibold text-xs uppercase tracking-wide text-left pr-3;
        color: var(--color-base-content);
        opacity: 0.6;
      }
    }

    .datatable-responsive .datatable-tr .datatable-td:last-child {
      @apply border-b-0;
    }
  }

  /* =============================================
     View Toggle (table/cards switch)
     ============================================= */

  .datatable-view-toggle {
    @apply inline-flex items-center gap-0 p-0.5;
    background: var(--color-base-200);
    border-radius: var(--radius-field, 0.25rem);
    border: 1px solid var(--color-base-300);
  }

  .datatable-view-btn {
    @apply inline-flex items-center justify-center size-8 border-none bg-transparent cursor-pointer;
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    border-radius: var(--radius-field, 0.25rem);
    transition: all 0.15s ease;

    &:hover {
      color: var(--color-base-content);
      background: var(--color-base-100);
    }

    svg { @apply size-4.5; }
  }

  .datatable-view-btn-active {
    background: var(--color-base-100);
    color: var(--color-primary);
    box-shadow: 0 1px 3px oklch(0 0 0 / 0.06);
  }

  /* =============================================
     Bulk action buttons
     ============================================= */

  .datatable-bulk-btn {
    @apply inline-flex items-center gap-1 px-2 py-1 text-sm cursor-pointer;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-field, 0.25rem);
    color: var(--color-base-content);
    transition: all 0.15s ease;

    &:hover {
      background: var(--color-base-200);
      border-color: var(--color-primary);
    }

    svg { @apply size-4; }
  }

  .datatable-bulk-btn-danger:hover {
    background: color-mix(in oklch, var(--color-error) 10%, transparent);
    border-color: var(--color-error);
    color: var(--color-error);
  }

  .datatable-bulk-clear {
    @apply flex items-center justify-center size-7 p-0 bg-transparent border-none rounded-lg cursor-pointer;
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    transition: all 0.15s ease;

    &:hover {
      background: var(--color-base-100);
      color: var(--color-base-content);
    }

    svg { @apply size-4.5; }
  }

  /* =============================================
     Column filters row
     ============================================= */

  .datatable-filters {
    display: table-row;
    background-color: var(--color-base-200);
  }

  .datatable-filter-cell {
    @apply px-2 py-1 align-middle;
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-filter-input {
    @apply w-full px-2 py-1 text-sm;
    min-width: 80px;
    max-width: 200px;
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-field, 0.25rem);
    background-color: var(--color-base-100);
    color: var(--color-base-content);
    transition: border-color 0.15s ease;

    &:focus {
      @apply outline-none;
      border-color: var(--color-primary);
    }
  }

  /* Active filter tags */
  .datatable-active-filters {
    @apply flex items-center flex-wrap gap-1 px-5 py-1;
    background-color: var(--color-base-200);
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-filter-tag {
    @apply inline-flex items-center gap-1 px-2 rounded-full text-xs;
    padding-block: 2px;
    background-color: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    color: var(--color-base-content);
  }

  .datatable-filter-tag-label {
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
  }

  .datatable-filter-tag-remove {
    @apply flex items-center justify-center size-4 p-0 bg-transparent border-none rounded-full cursor-pointer;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    transition: all 0.15s ease;

    &:hover {
      background: var(--color-base-200);
      color: var(--color-base-content);
    }

    svg { @apply size-3; }
  }

  .datatable-clear-filters {
    @apply inline-flex items-center gap-1 px-2 text-xs bg-transparent border-none cursor-pointer text-primary;
    padding-block: 2px;
    border-radius: var(--radius-field, 0.25rem);
    transition: background-color 0.15s ease;

    &:hover {
      background: color-mix(in oklch, var(--color-primary) 10%, transparent);
    }
  }

  /* =============================================
     Export button & menu
     ============================================= */

  .datatable-export {
    @apply relative inline-flex;
  }

  .datatable-export-btn {
    @apply inline-flex items-center gap-1 px-2 py-1 text-sm cursor-pointer;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-field, 0.25rem);
    color: var(--color-base-content);
    transition: all 0.15s ease;

    &:hover {
      background: var(--color-base-200);
      border-color: var(--color-primary);
    }

    &:disabled { @apply opacity-50 cursor-not-allowed; }
    svg { @apply size-4; }
  }

  .datatable-export-menu {
    @apply absolute z-100 py-1;
    top: 100%;
    right: 0;
    min-width: 180px;
    margin-top: 0.25rem;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
    box-shadow: 0 8px 24px oklch(0 0 0 / 0.12);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.15s ease;
  }

  .datatable-export-menu-open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .datatable-export-item {
    @apply flex items-center gap-2 w-full px-3 py-2 text-sm text-left bg-transparent border-none cursor-pointer;
    color: var(--color-base-content);
    border-radius: var(--radius-field, 0.25rem);
    transition: background-color 0.15s ease;

    &:hover { background: var(--color-base-200); }
    svg { @apply size-4.5; color: color-mix(in oklch, var(--color-base-content) 50%, transparent); }
  }

  .datatable-export-divider {
    @apply my-1;
    height: 1px;
    background: var(--color-base-300);
  }

  /* =============================================
     Column visibility toggle
     ============================================= */

  .datatable-column-toggle {
    @apply relative inline-flex;
  }

  .datatable-column-btn {
    @apply inline-flex items-center justify-center gap-1 px-2 py-1 text-sm cursor-pointer;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-field, 0.25rem);
    color: var(--color-base-content);
    transition: all 0.15s ease;

    &:hover {
      background: var(--color-base-200);
      border-color: var(--color-primary);
    }

    svg { @apply size-4; }
  }

  .datatable-column-menu {
    @apply absolute flex flex-col z-100 overflow-hidden;
    top: 100%;
    right: 0;
    min-width: 220px;
    max-height: 320px;
    margin-top: 0.25rem;
    padding: 0.25rem;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
    box-shadow: 0 8px 24px oklch(0 0 0 / 0.12);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.15s ease;
  }

  .datatable-column-menu-open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .datatable-column-menu-header {
    @apply flex items-center justify-between px-3 py-2 shrink-0;
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-column-menu-title {
    @apply text-sm font-semibold;
    color: var(--color-base-content);
  }

  .datatable-column-list {
    @apply flex-1 overflow-y-auto py-1;
  }

  .datatable-column-item {
    @apply flex items-center gap-2 px-3 py-2 cursor-pointer;
    transition: background-color 0.15s ease;

    &:hover { background: var(--color-base-200); }

    input[type="checkbox"] { @apply shrink-0 m-0; }
  }

  .datatable-column-item-label {
    @apply flex-1 text-sm whitespace-nowrap overflow-hidden text-ellipsis;
    color: var(--color-base-content);
  }

  /* =============================================
     Column resize
     ============================================= */

  .datatable-resizable .datatable-th {
    @apply relative select-none;
  }

  .datatable-resizable .datatable-table {
    @apply table-fixed;
  }

  .datatable-resize-handle {
    @apply absolute top-0 right-0 z-1;
    width: 8px;
    height: 100%;
    cursor: col-resize;
    background: transparent;
    touch-action: none;

    &::after {
      content: '';
      @apply absolute;
      top: 25%;
      right: 3px;
      width: 2px;
      height: 50%;
      background: transparent;
      border-radius: 1px;
      transition: background-color 0.15s ease;
    }
  }

  .datatable-resize-handle:hover::after,
  .datatable-resize-handle-active::after {
    background: var(--color-primary);
  }

  /* =============================================
     Cards view (grid layout)
     ============================================= */

  .datatable-cards .datatable-table,
  .datatable-cards .datatable-thead,
  .datatable-cards .datatable-tbody,
  .datatable-cards .datatable-th,
  .datatable-cards .datatable-tr,
  .datatable-cards .datatable-td {
    @apply block;
  }

  .datatable-cards .datatable-thead {
    @apply absolute invisible;
    top: -9999px;
    left: -9999px;
  }

  .datatable-cards .datatable-tbody {
    @apply grid gap-3 p-3;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }

  .datatable-cards .datatable-tr {
    @apply relative mb-0 rounded-xl overflow-hidden;
    background-color: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    box-shadow: 0 1px 3px oklch(0 0 0 / 0.06);
    transition: box-shadow 0.2s ease;

    &:hover {
      box-shadow: 0 4px 12px oklch(0 0 0 / 0.1);
    }
  }

  .datatable-cards .datatable-tr-selected {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 1px var(--color-primary);
  }

  .datatable-cards .datatable-td {
    @apply flex items-center justify-between px-3 py-2 text-right text-sm;
    border-bottom: 1px solid var(--color-base-300);

    &::before {
      content: attr(data-label);
      @apply shrink-0 font-semibold text-xs uppercase tracking-wide text-left pr-3;
      color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    }

    &:first-child {
      background: var(--color-base-200);
      @apply font-semibold px-3 py-3;
    }
  }

  .datatable-cards .datatable-tr .datatable-td:last-child {
    @apply border-b-0;
  }

  .datatable-cards .datatable-td-checkbox {
    @apply absolute border-none p-0 bg-transparent;
    top: 0.5rem;
    right: 0.5rem;

    &::before { display: none; }
  }

  /* =============================================
     DataTable Card (standalone card component)
     ============================================= */

  .datatable-card {
    @apply flex flex-col h-full p-0;
    background: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
    transition: box-shadow 0.15s ease, border-color 0.15s ease;

    &:hover {
      box-shadow: 0 4px 12px oklch(0 0 0 / 0.1);
    }
  }

  .datatable-card-selected {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 1px var(--color-primary);
  }

  .datatable-card-header {
    @apply flex justify-between items-center px-3 py-2;
    background: var(--color-base-200);
    border-bottom: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem) var(--radius-box, 0.75rem) 0 0;
  }

  .datatable-card-body {
    @apply flex-1 p-3;
  }

  .datatable-card-title {
    @apply text-base font-semibold m-0 mb-1;
    color: var(--color-base-content);
  }

  .datatable-card-subtitle {
    @apply text-sm m-0 mb-3;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .datatable-card-meta {
    @apply flex flex-col gap-2;
  }

  .datatable-card-meta-item {
    @apply flex justify-between items-center;
  }

  .datatable-card-meta-label {
    @apply text-sm;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  .datatable-card-meta-value {
    @apply text-sm font-medium;
    color: var(--color-base-content);
  }

  .datatable-card-footer {
    @apply flex justify-end gap-1 px-3 py-2;
    background: var(--color-base-200);
    border-top: 1px solid var(--color-base-300);
    border-radius: 0 0 var(--radius-box, 0.75rem) var(--radius-box, 0.75rem);
  }

  .datatable-card.glass {
    @apply glass;
    border-color: oklch(1 0 0 / 0.18);

    & .datatable-card-header {
      background: oklch(1 0 0 / 0.5);
      border-bottom-color: oklch(1 0 0 / 0.18);
    }

    & .datatable-card-footer {
      background: oklch(1 0 0 / 0.5);
      border-top-color: oklch(1 0 0 / 0.18);
    }
  }

  /* =============================================
     Detail panel (right side sheet)
     ============================================= */

  .datatable-with-panel {
    @apply flex;
  }

  .datatable-with-panel > .datatable {
    @apply flex-1 min-w-0;
  }

  .datatable-panel {
    @apply flex flex-col shrink-0;
    width: 360px;
    background: var(--color-base-100);
    border-left: 1px solid var(--color-base-300);
    transition: width 0.2s ease;
  }

  .datatable-panel-collapsed {
    width: 0;
    @apply overflow-hidden;
    border-left: none;
  }

  .datatable-panel-header {
    @apply flex items-center justify-between px-4 py-3 shrink-0;
    border-bottom: 1px solid var(--color-base-300);
  }

  .datatable-panel-title {
    @apply text-base font-semibold;
    color: var(--color-base-content);
  }

  .datatable-panel-close {
    @apply flex items-center justify-center size-8 p-0 bg-transparent border-none rounded-lg cursor-pointer;
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    transition: all 0.15s ease;

    &:hover {
      background: var(--color-base-200);
      color: var(--color-base-content);
    }

    svg { @apply size-5; }
  }

  .datatable-panel-body {
    @apply flex-1 overflow-auto p-4;
  }

  .datatable-panel-footer {
    @apply flex gap-2 px-4 py-3 shrink-0;
    border-top: 1px solid var(--color-base-300);
  }

  @media (max-width: 767px) {
    .datatable-with-panel {
      @apply flex-col;
    }

    .datatable-panel {
      @apply w-full;
      border-left: none;
      border-top: 1px solid var(--color-base-300);
    }
  }

  /* =============================================
     Glass variant
     ============================================= */

  .datatable.glass {
    @apply glass;
    border: 0.5px solid var(--glass-border, rgba(255,255,255,0.18));

    & .datatable-th {
      background: var(--glass-bg-thin, rgba(255,255,255,0.5));
      border-bottom-color: var(--glass-border, rgba(255,255,255,0.18));
    }

    & .datatable-td {
      border-bottom-color: var(--glass-border, rgba(255,255,255,0.18));
    }

    & .datatable-tr:hover .datatable-td {
      background: var(--glass-bg-thin, rgba(255,255,255,0.5));
    }

    & .datatable-footer {
      background: var(--glass-bg-thin, rgba(255,255,255,0.5));
      border-top-color: var(--glass-border, rgba(255,255,255,0.18));
    }
  }
}

/* =============================================
   Keyframes (outside @layer for TW v4)
   ============================================= */

@keyframes datatable-bulk-slide {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .datatable-expand-btn,
  .datatable-expand-content,
  .datatable-sort-icon {
    transition: none;
  }

  .datatable-bulk {
    animation: none;
  }
}
