/* UX v3 - Keyboard Component */
/* Skip links, keyboard shortcut badges, focus enhancements */

@layer components {

  /* =============================================
     Skip Link
     ============================================= */

  .skip-link {
    @apply fixed;
    top: -100px;
    left: 1rem;
    z-index: 900;
    padding: 0.5rem 1.5rem;
    background-color: var(--color-primary);
    color: var(--color-primary-content, white);
    border-radius: var(--radius-field, 0.25rem);
    @apply text-sm font-medium no-underline;
    transition: top 0.2s ease;
    box-shadow: 0 4px 12px color-mix(in oklch, var(--color-base-content) 15%, transparent);

    &:focus {
      top: 1rem;
      @apply outline-none;
    }
  }

  /* =============================================
     Keyboard Badge (kbd)
     ============================================= */

  .kbd {
    @apply inline-flex items-center justify-center whitespace-nowrap;
    min-width: 1.5em;
    height: 1.5em;
    padding: 0 0.4em;
    background-color: var(--color-base-200);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-field, 0.25rem);
    font-family: 'SF Mono', Monaco, Consolas, monospace;
    font-size: 0.75em;
    @apply font-medium;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    box-shadow: 0 1px 0 var(--color-base-300);
  }

  .kbd-sm {
    min-width: 1.25em;
    height: 1.25em;
    padding: 0 0.3em;
    font-size: 0.65em;
  }

  .kbd-lg {
    min-width: 2em;
    height: 2em;
    padding: 0 0.5em;
    font-size: 0.85em;
  }

  .kbd.glass {
    background-color: color-mix(in oklch, var(--color-base-100) 50%, transparent);
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
    border-color: color-mix(in oklch, var(--color-base-content) 10%, transparent);
  }

  /* =============================================
     Keyboard Combo
     ============================================= */

  .kbd-combo {
    @apply inline-flex items-center;
    gap: 0.25em;
  }

  .kbd-combo-separator {
    @apply text-xs;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  /* =============================================
     Keyboard Navigation Mode
     ============================================= */

  .keyboard-nav {
    *:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }
  }

  .keyboard-nav-mouse *:focus:not(:focus-visible) {
    @apply outline-none;
  }

  /* =============================================
     Keyboard Hint
     ============================================= */

  .keyboard-hint {
    @apply inline-flex items-center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    background-color: var(--color-base-200);
    border-radius: var(--radius-field, 0.25rem);
    @apply text-xs;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .keyboard-hint-text {
    @apply opacity-80;
  }

  /* =============================================
     Roving Tabindex
     ============================================= */

  [data-roving] [tabindex="0"]:focus {
    background-color: var(--color-base-200);
  }

  /* =============================================
     Arrow Navigation
     ============================================= */

  .arrow-nav {
    @apply relative;

    &::after {
      content: '';
      @apply absolute pointer-events-none;
      inset: 0;
      border: 2px solid transparent;
      border-radius: inherit;
      transition: border-color 0.15s ease;
    }

    &:focus-within::after {
      border-color: color-mix(in oklch, var(--color-primary) 30%, transparent);
    }
  }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .skip-link,
  .arrow-nav::after {
    transition: none;
  }
}
