/* UX v3 - QR Code Component */
/* QR code display with logo overlay, sizes, bordered variant, actions, loading/error states */

@layer components {

  /* =============================================
     Base
     ============================================= */

  .qr {
    @apply inline-flex flex-col items-center gap-2;
  }

  .qr-canvas {
    @apply block;
    border-radius: var(--radius-field, 0.25rem);
  }

  .qr-wrapper {
    @apply relative inline-block;
  }

  /* =============================================
     With Logo
     ============================================= */

  .qr-logo {
    @apply absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 4px;
    border-radius: var(--radius-field, 0.25rem);

    img {
      @apply block w-full h-full object-contain;
    }
  }

  /* =============================================
     With Label
     ============================================= */

  .qr-label {
    @apply text-sm text-center truncate max-w-full;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     Bordered
     ============================================= */

  .qr-bordered .qr-wrapper {
    @apply p-4;
    background: white;
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-box, 0.75rem);
  }

  /* =============================================
     Sizes
     ============================================= */

  .qr-sm .qr-canvas { width: 100px; height: 100px; }
  .qr-lg .qr-canvas { width: 250px; height: 250px; }
  .qr-xl .qr-canvas { width: 350px; height: 350px; }

  /* =============================================
     Actions
     ============================================= */

  .qr-actions {
    @apply flex gap-2;
    margin-top: 0.25rem;
  }

  .qr-action {
    @apply inline-flex items-center gap-1.5 text-sm font-medium cursor-pointer;
    padding: 0.5rem 0.75rem;
    color: var(--color-primary);
    background: transparent;
    border: 1px solid var(--color-primary);
    border-radius: var(--radius-field, 0.25rem);
    transition: background 0.15s ease;

    &:hover {
      background-color: color-mix(in oklch, var(--color-primary) 10%, transparent);
    }

    svg {
      @apply w-4 h-4;
    }
  }

  /* =============================================
     Loading
     ============================================= */

  .qr-loading {
    @apply flex items-center justify-center;
    background-color: var(--color-base-200);
    border-radius: var(--radius-field, 0.25rem);
  }

  .qr-spinner {
    @apply w-6 h-6 rounded-full;
    border: 2px solid var(--color-base-300);
    border-top-color: var(--color-primary);
    animation: qr-spin 0.8s linear infinite;
  }

  /* =============================================
     Error
     ============================================= */

  .qr-error {
    @apply flex flex-col items-center justify-center p-4 text-center;
    background-color: color-mix(in oklch, var(--color-error) 10%, transparent);
    border-radius: var(--radius-field, 0.25rem);
  }

  .qr-error-icon {
    @apply w-6 h-6 mb-2;
    color: var(--color-error);
  }

  .qr-error-text {
    @apply text-sm;
    color: var(--color-error);
  }

  /* =============================================
     Glass
     ============================================= */

  .qr.glass .qr-wrapper,
  .qr-bordered.glass .qr-wrapper {
    @apply glass;
  }
}

@keyframes qr-spin {
  to { transform: rotate(360deg); }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .qr-spinner {
    animation: none;
  }

  .qr-action {
    transition: none;
  }
}
