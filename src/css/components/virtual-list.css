/* UX v3 - Virtual List Component */
/* Scroll container with windowing support for large datasets */

@layer components {

  /* =============================================
     Base virtual list
     ============================================= */

  .virtual-list {
    @apply relative overflow-y-auto overflow-x-hidden;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* =============================================
     Inner containers
     ============================================= */

  .virtual-list-container {
    @apply relative w-full;
  }

  .virtual-list-content {
    @apply absolute left-0 right-0 w-full;
  }

  .virtual-list-item {
    @apply box-border;
  }

  /* =============================================
     Loading state
     ============================================= */

  .virtual-list-loader {
    @apply flex items-center justify-center;
    padding: 1.5rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .virtual-list-spinner {
    @apply w-6 h-6 rounded-full;
    border: 2px solid var(--color-base-300);
    border-top-color: var(--color-primary);
    animation: virtual-list-spin 0.8s linear infinite;
  }

  .virtual-list-loader-text {
    @apply ml-2 text-sm;
  }

  /* =============================================
     Empty state
     ============================================= */

  .virtual-list-empty {
    @apply flex flex-col items-center justify-center text-center;
    padding: 2.5rem;
  }

  .virtual-list-empty-icon {
    @apply w-12 h-12 mb-4;
    color: color-mix(in oklch, var(--color-base-content) 30%, transparent);
  }

  .virtual-list-empty-title {
    @apply text-lg font-semibold m-0;
    color: var(--color-base-content);
    margin-bottom: 0.25rem;
  }

  .virtual-list-empty-text {
    @apply text-sm m-0;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     Scroll-to-top button
     ============================================= */

  .virtual-list-scroll-top {
    @apply absolute flex items-center justify-center w-10 h-10 rounded-full cursor-pointer;
    bottom: 1rem;
    right: 1rem;
    background-color: var(--color-base-100);
    border: 1px solid var(--color-base-300);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    color: var(--color-base-content);
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.15s ease;
    z-index: 10;

    &:hover {
      background-color: var(--color-base-200);
    }

    & svg {
      @apply w-5 h-5;
    }
  }

  .virtual-list-scroll-top-visible {
    @apply opacity-100 visible;
    transform: translateY(0);
  }

  /* =============================================
     Row variants
     ============================================= */

  .virtual-list-striped .virtual-list-item:nth-child(even) {
    background-color: var(--color-base-200);
  }

  .virtual-list-bordered .virtual-list-item {
    border-bottom: 1px solid var(--color-base-300);

    &:last-child {
      @apply border-b-0;
    }
  }

  /* =============================================
     Glass variant
     ============================================= */

  .virtual-list.glass {
    @apply glass;
  }
}

/* =============================================
   Keyframes
   ============================================= */

@keyframes virtual-list-spin {
  to { transform: rotate(360deg); }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .virtual-list-spinner {
    animation: none;
  }

  .virtual-list-scroll-top {
    transition: opacity 0.15s;
    transform: none;
  }
}
