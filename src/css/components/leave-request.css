/* Leave Request */
/* Employee leave request cards with status, dates, duration, and approval actions */

@layer components {

  /* =============================================
     Base card
     ============================================= */

  .leave-request {
    --lr-padding: 1.5rem;
    --lr-gap: 1rem;
    --lr-status-color: var(--color-warning);

    @apply relative flex flex-col w-full overflow-hidden;
    background-color: var(--color-base-100);
    border-radius: var(--radius-box, 0.75rem);
    box-shadow: 0 1px 3px color-mix(in oklch, var(--color-base-content) 6%, transparent);
    max-width: 420px;

    /* Status indicator bar */
    &::before {
      content: '';
      @apply absolute top-0 left-0 h-full;
      width: 4px;
      background-color: var(--lr-status-color);
      border-radius: var(--radius-box, 0.75rem) 0 0 var(--radius-box, 0.75rem);
    }
  }

  /* =============================================
     Header
     ============================================= */

  .leave-request-header {
    @apply flex items-start;
    gap: 1rem;
    padding: var(--lr-padding);
    padding-bottom: 1rem;
  }

  .leave-request-avatar {
    @apply shrink-0;
  }

  .leave-request-employee {
    @apply flex-1 min-w-0;
  }

  .leave-request-name {
    @apply font-semibold;
    font-size: 1.125rem;
    color: var(--color-base-content);
    margin: 0;
    line-height: 1.3;
  }

  .leave-request-role {
    font-size: 0.875rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    margin: 0.25rem 0 0;
  }

  .leave-request-department {
    font-size: 0.75rem;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    margin: 0.25rem 0 0;
  }

  .leave-request-status {
    @apply shrink-0;
  }

  /* =============================================
     Leave type badge
     ============================================= */

  .leave-request-type {
    @apply inline-flex items-center font-semibold uppercase;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    letter-spacing: 0.5px;
    border-radius: var(--radius-field, 0.5rem);
    background-color: var(--color-base-200);
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .leave-request-type-vacation     { background-color: color-mix(in oklch, #3b82f6 12%, transparent); color: #2563eb; }
  .leave-request-type-sick         { background-color: color-mix(in oklch, #ef4444 12%, transparent); color: #dc2626; }
  .leave-request-type-personal     { background-color: color-mix(in oklch, #a855f7 12%, transparent); color: #9333ea; }
  .leave-request-type-maternity    { background-color: color-mix(in oklch, #ec4899 12%, transparent); color: #db2777; }
  .leave-request-type-paternity    { background-color: color-mix(in oklch, #06b6d4 12%, transparent); color: #0891b2; }
  .leave-request-type-bereavement  { background-color: color-mix(in oklch, #6b7280 12%, transparent); color: #4b5563; }
  .leave-request-type-unpaid       { background-color: color-mix(in oklch, #f97316 12%, transparent); color: #ea580c; }
  .leave-request-type-wfh          { background-color: color-mix(in oklch, #22c55e 12%, transparent); color: #16a34a; }

  .leave-request-type-icon {
    width: 0.875rem;
    height: 0.875rem;

    & > svg {
      @apply w-full h-full;
    }
  }

  /* =============================================
     Body
     ============================================= */

  .leave-request-body {
    padding: 0 var(--lr-padding);
  }

  /* =============================================
     Dates section
     ============================================= */

  .leave-request-dates {
    @apply flex items-center;
    gap: 1rem;
    padding: 1rem;
    background-color: var(--color-base-200);
    border-radius: var(--radius-field, 0.5rem);
    margin-bottom: 1rem;
  }

  .leave-request-date {
    @apply flex-1 text-center;
  }

  .leave-request-date-label {
    @apply block uppercase;
    font-size: 0.75rem;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
  }

  .leave-request-date-value {
    @apply block font-semibold;
    font-size: 1rem;
    color: var(--color-base-content);
  }

  .leave-request-date-day {
    @apply block;
    font-size: 0.75rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    margin-top: 2px;
  }

  .leave-request-dates-arrow {
    @apply shrink-0;
    width: 1.5rem;
    height: 1.5rem;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);

    & > svg {
      @apply w-full h-full;
    }
  }

  /* =============================================
     Duration
     ============================================= */

  .leave-request-duration {
    @apply flex items-center justify-center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: var(--color-base-300);
    border-radius: var(--radius-field, 0.5rem);
    margin-bottom: 1rem;
  }

  .leave-request-duration-icon {
    width: 1rem;
    height: 1rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);

    & > svg {
      @apply w-full h-full;
    }
  }

  .leave-request-duration-value {
    @apply font-semibold;
    font-size: 1rem;
    color: var(--color-base-content);
  }

  .leave-request-duration-label {
    font-size: 0.875rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     Reason / notes
     ============================================= */

  .leave-request-reason {
    padding: 1rem;
    background-color: var(--color-base-200);
    border-radius: var(--radius-field, 0.5rem);
    margin-bottom: 1rem;
    border-left: 3px solid var(--color-base-300);
  }

  .leave-request-reason-label {
    @apply block font-semibold uppercase;
    font-size: 0.75rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
  }

  .leave-request-reason-text {
    font-size: 0.875rem;
    color: var(--color-base-content);
    line-height: 1.5;
    margin: 0;
  }

  /* =============================================
     Meta information
     ============================================= */

  .leave-request-meta {
    @apply flex flex-wrap;
    gap: 1rem;
    padding: 0.5rem 0;
    font-size: 0.75rem;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  .leave-request-meta-item {
    @apply flex items-center;
    gap: 0.25rem;
  }

  .leave-request-meta-icon {
    width: 0.75rem;
    height: 0.75rem;

    & > svg {
      @apply w-full h-full;
    }
  }

  /* =============================================
     Actions
     ============================================= */

  .leave-request-actions {
    @apply flex;
    gap: 0.5rem;
    padding: 1rem var(--lr-padding);
    border-top: 1px solid var(--color-base-300);
    background-color: var(--color-base-200);
  }

  .leave-request-action {
    @apply flex-1 inline-flex items-center justify-center font-semibold cursor-pointer border-none;
    gap: 0.25rem;
    height: 2.25rem;
    padding: 0 1rem;
    font-size: 0.875rem;
    border-radius: var(--radius-field, 0.5rem);
    -webkit-tap-highlight-color: transparent;
    transition: background-color 0.15s ease, transform 0.15s ease, opacity 0.15s ease;

    &:active {
      transform: scale(0.98);
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
  }

  .leave-request-action-approve {
    background-color: var(--color-success);
    color: var(--color-success-content);

    &:hover {
      background-color: color-mix(in oklch, var(--color-success) 85%, black);
    }
  }

  .leave-request-action-reject {
    background-color: var(--color-error);
    color: var(--color-error-content);

    &:hover {
      background-color: color-mix(in oklch, var(--color-error) 85%, black);
    }
  }

  .leave-request-action-secondary {
    background-color: var(--color-base-100);
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    border: 1px solid var(--color-base-300);

    &:hover {
      background-color: var(--color-base-200);
    }
  }

  .leave-request-action-icon {
    width: 1rem;
    height: 1rem;

    & > svg {
      @apply w-full h-full;
    }
  }

  /* =============================================
     Status variants
     ============================================= */

  .leave-request-pending   { --lr-status-color: var(--color-warning); }
  .leave-request-approved  { --lr-status-color: var(--color-success); }
  .leave-request-rejected  { --lr-status-color: var(--color-error); }
  .leave-request-cancelled { --lr-status-color: var(--color-base-300); opacity: 0.7; }

  .leave-request-approved .leave-request-actions,
  .leave-request-rejected .leave-request-actions,
  .leave-request-cancelled .leave-request-actions {
    background-color: transparent;
    border-top: none;
    padding-top: 0;
  }

  /* =============================================
     Status badge
     ============================================= */

  .leave-request-status-badge {
    @apply inline-flex items-center font-semibold;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    border-radius: 9999px;
  }

  .leave-request-status-badge-pending {
    background-color: color-mix(in oklch, var(--color-warning) 15%, transparent);
    color: var(--color-warning);
  }

  .leave-request-status-badge-pending .leave-request-status-dot {
    animation: leave-request-pulse 1.5s ease-in-out infinite;
  }

  .leave-request-status-badge-approved {
    background-color: color-mix(in oklch, var(--color-success) 15%, transparent);
    color: var(--color-success);
  }

  .leave-request-status-badge-rejected {
    background-color: color-mix(in oklch, var(--color-error) 15%, transparent);
    color: var(--color-error);
  }

  .leave-request-status-badge-cancelled {
    background-color: var(--color-base-300);
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  .leave-request-status-dot {
    @apply rounded-full;
    width: 6px;
    height: 6px;
    background-color: currentColor;
  }

  /* =============================================
     Compact variant
     ============================================= */

  .leave-request-compact {
    max-width: 360px;

    & .leave-request-header {
      padding: 1rem;
    }

    & .leave-request-body {
      padding: 0 1rem;
    }

    & .leave-request-dates {
      padding: 0.5rem;
    }

    & .leave-request-actions {
      padding: 0.5rem 1rem;
    }
  }

  /* =============================================
     Glass variant
     ============================================= */

  .leave-request.glass {
    border: 0.5px solid color-mix(in oklch, var(--color-base-content) 12%, transparent);

    & .leave-request-dates,
    & .leave-request-duration,
    & .leave-request-reason {
      background-color: color-mix(in oklch, white 30%, transparent);
    }

    & .leave-request-actions {
      background-color: color-mix(in oklch, white 20%, transparent);
      border-top-color: color-mix(in oklch, var(--color-base-content) 12%, transparent);
    }
  }

  /* =============================================
     Leave Request Form
     ============================================= */

  .leave-request-form {
    @apply flex flex-col;
    gap: 1rem;
    background-color: var(--color-base-100);
    border-radius: var(--radius-box, 0.75rem);
    box-shadow: 0 1px 3px color-mix(in oklch, var(--color-base-content) 6%, transparent);
    padding: 1.5rem;
    max-width: 480px;
  }

  .leave-request-form-title {
    @apply font-semibold;
    font-size: 1.25rem;
    color: var(--color-base-content);
    margin: 0 0 0.5rem;
  }

  .leave-request-form-subtitle {
    font-size: 0.875rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    margin: 0 0 1rem;
  }

  .leave-request-form-row {
    @apply flex;
    gap: 1rem;

    & > * {
      @apply flex-1;
    }
  }

  .leave-request-form-field {
    @apply flex flex-col;
    gap: 0.25rem;
  }

  .leave-request-form-label {
    @apply font-medium;
    font-size: 0.875rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .leave-request-form-label-required::after {
    content: ' *';
    color: var(--color-error);
  }

  .leave-request-form-balance {
    @apply flex justify-between items-center;
    padding: 1rem;
    background-color: var(--color-base-200);
    border-radius: var(--radius-field, 0.5rem);
    margin-bottom: 0.5rem;
  }

  .leave-request-form-balance-label {
    font-size: 0.875rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .leave-request-form-balance-value {
    @apply font-semibold;
    font-size: 1.125rem;
    color: var(--color-primary);
  }

  .leave-request-form-balance-value-low {
    color: var(--color-error);
  }

  .leave-request-form-actions {
    @apply flex;
    gap: 0.5rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--color-base-300);

    & > * {
      @apply flex-1;
    }
  }

  /* Leave type selector */
  .leave-request-form-types {
    @apply grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 0.5rem;
  }

  .leave-request-form-type-option {
    @apply flex flex-col items-center cursor-pointer;
    gap: 0.25rem;
    padding: 1rem;
    background-color: var(--color-base-200);
    border: 2px solid transparent;
    border-radius: var(--radius-field, 0.5rem);
    -webkit-tap-highlight-color: transparent;
    transition: border-color 0.15s ease, background-color 0.15s ease;

    &:hover {
      background-color: var(--color-base-300);
    }

    & > input {
      @apply absolute opacity-0 pointer-events-none;
    }
  }

  .leave-request-form-type-option-selected {
    border-color: var(--color-primary);
    background-color: color-mix(in oklch, var(--color-primary) 8%, transparent);

    & .leave-request-form-type-icon {
      color: var(--color-primary);
    }
  }

  .leave-request-form-type-icon {
    width: 1.5rem;
    height: 1.5rem;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);

    & > svg {
      @apply w-full h-full;
    }
  }

  .leave-request-form-type-name {
    @apply font-medium text-center;
    font-size: 0.75rem;
    color: var(--color-base-content);
  }

  /* Glass form */
  .leave-request-form.glass {
    border: 0.5px solid color-mix(in oklch, var(--color-base-content) 12%, transparent);

    & .leave-request-form-balance,
    & .leave-request-form-type-option {
      background-color: color-mix(in oklch, white 30%, transparent);
    }
  }
}

/* =============================================
   Keyframes
   ============================================= */

@keyframes leave-request-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}

/* =============================================
   Responsive
   ============================================= */

@media (max-width: 480px) {
  .leave-request-form-row {
    @apply flex-col;
  }

  .leave-request-dates {
    @apply flex-col text-center;
  }

  .leave-request-dates-arrow {
    transform: rotate(90deg);
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .leave-request-status-badge-pending .leave-request-status-dot {
    animation: none;
  }

  .leave-request-action {
    transition: none;
  }

  .leave-request-form-type-option {
    transition: none;
  }
}
