/* UX v3 - Range / Slider Component */
/* Custom styled range input */

@layer components {

  /* =============================================
     Base range
     ============================================= */

  .range {
    --range-track-h: 4px;
    --range-thumb: 1.75rem;
    --range-color: var(--c, var(--color-primary));

    @apply relative flex items-center w-full;
    height: 2.75rem;
  }

  /* =============================================
     Native input (full width, transparent)
     ============================================= */

  .range input[type="range"] {
    @apply w-full appearance-none outline-none bg-transparent cursor-pointer;
    height: var(--range-track-h);
    margin: 0;

    /* Track — Webkit */
    &::-webkit-slider-runnable-track {
      height: var(--range-track-h);
      background: var(--color-base-300);
      border-radius: calc(var(--range-track-h) / 2);
    }

    /* Track — Firefox */
    &::-moz-range-track {
      height: var(--range-track-h);
      background: var(--color-base-300);
      border-radius: calc(var(--range-track-h) / 2);
      @apply border-none;
    }

    /* Fill (progress) — Firefox only */
    &::-moz-range-progress {
      height: var(--range-track-h);
      background: var(--range-color);
      border-radius: calc(var(--range-track-h) / 2);
    }

    /* Thumb — Webkit */
    &::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: var(--range-thumb);
      height: var(--range-thumb);
      background: white;
      border: 2px solid var(--range-color);
      border-radius: 50%;
      margin-top: calc((var(--range-track-h) - var(--range-thumb)) / 2);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: transform 0.15s, box-shadow 0.15s;
    }

    /* Thumb — Firefox */
    &::-moz-range-thumb {
      width: var(--range-thumb);
      height: var(--range-thumb);
      background: white;
      border: 2px solid var(--range-color);
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: transform 0.15s, box-shadow 0.15s;
    }

    /* Active thumb */
    &:active::-webkit-slider-thumb {
      transform: scale(1.15);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    &:active::-moz-range-thumb {
      transform: scale(1.15);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    /* Focus */
    &:focus-visible::-webkit-slider-thumb {
      @apply outline-2 outline-offset-2;
      outline-color: var(--range-color);
    }

    &:focus-visible::-moz-range-thumb {
      @apply outline-2 outline-offset-2;
      outline-color: var(--range-color);
    }

    /* Disabled */
    &:disabled {
      @apply opacity-50 cursor-not-allowed;
    }
  }

  /* =============================================
     Sizes
     ============================================= */

  .range-sm {
    --range-track-h: 2px;
    --range-thumb: 1.25rem;
  }

  .range-lg {
    --range-track-h: 6px;
    --range-thumb: 2rem;
  }

  /* =============================================
     Labels
     ============================================= */

  .range-label {
    @apply text-sm font-medium;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    margin-bottom: 0.25rem;
  }

  .range-value {
    @apply text-sm font-semibold text-center;
    color: var(--color-base-content);
    min-width: 2.25rem;
  }

  .range-min-max {
    @apply flex justify-between text-xs;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    margin-top: 0.25rem;
  }

  /* =============================================
     Color composition
     ============================================= */

  .range.color-primary,
  .range.color-secondary,
  .range.color-accent,
  .range.color-neutral,
  .range.color-info,
  .range.color-success,
  .range.color-warning,
  .range.color-error {
    --range-color: var(--c);
  }

  /* =============================================
     Glass variant
     ============================================= */

  .range.glass input[type="range"]::-webkit-slider-runnable-track {
    @apply glass;
  }

  .range.glass input[type="range"]::-webkit-slider-thumb {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .range input[type="range"]::-webkit-slider-thumb {
    transition: none;
  }

  .range input[type="range"]::-moz-range-thumb {
    transition: none;
  }
}
