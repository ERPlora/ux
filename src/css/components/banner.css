/* UX v3 - Banner Component */
/* Full-width notification bar with colors, dismiss, sticky/fixed */

@layer components {

  /* =============================================
     Banner Base
     ============================================= */

  .banner {
    @apply flex items-center w-full;
    gap: 1rem;
    min-height: 48px;
    padding: 0.75rem 1.5rem;
    background-color: var(--color-base-100);
    border-bottom: var(--border) solid var(--color-base-200);
    font-size: 0.875rem;
    line-height: 1.4;
    opacity: 1;
    transform: translateY(0);
    max-height: 200px;
    @apply overflow-hidden;
    transition: opacity 0.2s, transform 0.2s, max-height 0.2s, padding 0.2s;
  }

  /* Hidden state (dismiss) */
  .banner-hidden {
    opacity: 0;
    transform: translateY(-100%);
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    border-bottom-width: 0;
  }

  /* Sticky */
  .banner-sticky {
    @apply sticky top-0;
    z-index: 20;
  }

  /* Fixed */
  .banner-fixed {
    @apply fixed top-0 left-0 right-0;
    z-index: 30;
  }

  /* =============================================
     Banner Icon
     ============================================= */

  .banner-icon {
    @apply flex items-center justify-center shrink-0;
    width: 20px;
    height: 20px;

    & > svg {
      @apply size-full;
    }
  }

  /* =============================================
     Banner Content
     ============================================= */

  .banner-content {
    @apply flex-1 flex flex-col min-w-0;
    gap: 2px;
  }

  .banner-content-inline {
    @apply flex-row items-center;
    gap: 0.5rem;
  }

  .banner-title {
    @apply font-semibold text-base-content m-0;
  }

  .banner-message {
    @apply m-0;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     Banner Actions
     ============================================= */

  .banner-actions {
    @apply flex items-center shrink-0;
    gap: 0.5rem;
  }

  .banner-action {
    @apply border-none bg-transparent cursor-pointer font-semibold;
    padding: 0.25rem 0.5rem;
    color: var(--color-primary);
    font-size: 0.875rem;
    border-radius: var(--radius-field);
    -webkit-tap-highlight-color: transparent;
    transition: background-color 0.15s;

    &:hover {
      background-color: color-mix(in oklch, var(--color-primary) 10%, transparent);
    }
  }

  /* =============================================
     Banner Close
     ============================================= */

  .banner-close {
    @apply flex items-center justify-center border-none bg-transparent cursor-pointer shrink-0;
    width: 28px;
    height: 28px;
    padding: 0;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    border-radius: var(--radius-field);
    -webkit-tap-highlight-color: transparent;
    transition: color 0.15s, background-color 0.15s;

    &:hover {
      @apply text-base-content;
      background-color: color-mix(in oklch, var(--color-base-content) 5%, transparent);
    }

    & > svg {
      @apply size-4;
    }
  }

  /* =============================================
     Color Variants (tinted)
     ============================================= */

  .banner-info {
    background-color: color-mix(in oklch, var(--color-info) 10%, transparent);
    border-bottom-color: color-mix(in oklch, var(--color-info) 20%, transparent);

    & .banner-icon   { color: var(--color-info); }
    & .banner-action { color: var(--color-info); }
  }

  .banner-success {
    background-color: color-mix(in oklch, var(--color-success) 10%, transparent);
    border-bottom-color: color-mix(in oklch, var(--color-success) 20%, transparent);

    & .banner-icon   { color: var(--color-success); }
    & .banner-action { color: var(--color-success); }
  }

  .banner-warning {
    background-color: color-mix(in oklch, var(--color-warning) 10%, transparent);
    border-bottom-color: color-mix(in oklch, var(--color-warning) 20%, transparent);

    & .banner-icon   { color: var(--color-warning); }
    & .banner-action { color: var(--color-warning); }
  }

  .banner-error {
    background-color: color-mix(in oklch, var(--color-error) 10%, transparent);
    border-bottom-color: color-mix(in oklch, var(--color-error) 20%, transparent);

    & .banner-icon   { color: var(--color-error); }
    & .banner-action { color: var(--color-error); }
  }

  /* =============================================
     Filled Variants (solid background)
     ============================================= */

  .banner-info-filled {
    background-color: var(--color-info);
    color: var(--color-info-content);
    border-bottom: none;

    & .banner-icon,
    & .banner-title,
    & .banner-message { color: var(--color-info-content); }
    & .banner-action   { color: var(--color-info-content); }
    & .banner-close    { color: color-mix(in oklch, var(--color-info-content) 70%, transparent); }
  }

  .banner-success-filled {
    background-color: var(--color-success);
    color: var(--color-success-content);
    border-bottom: none;

    & .banner-icon,
    & .banner-title,
    & .banner-message { color: var(--color-success-content); }
    & .banner-action   { color: var(--color-success-content); }
    & .banner-close    { color: color-mix(in oklch, var(--color-success-content) 70%, transparent); }
  }

  .banner-warning-filled {
    background-color: var(--color-warning);
    color: var(--color-warning-content);
    border-bottom: none;

    & .banner-icon,
    & .banner-title,
    & .banner-message { color: var(--color-warning-content); }
    & .banner-action   { color: var(--color-warning-content); }
    & .banner-close    { color: color-mix(in oklch, var(--color-warning-content) 70%, transparent); }
  }

  .banner-error-filled {
    background-color: var(--color-error);
    color: var(--color-error-content);
    border-bottom: none;

    & .banner-icon,
    & .banner-title,
    & .banner-message { color: var(--color-error-content); }
    & .banner-action   { color: var(--color-error-content); }
    & .banner-close    { color: color-mix(in oklch, var(--color-error-content) 70%, transparent); }
  }

  /* =============================================
     Inline/Card Variant
     ============================================= */

  .banner-inline {
    border-radius: var(--radius-box);
    border: var(--border) solid var(--color-base-200);
    margin: 1rem;
    width: auto;
  }

  /* =============================================
     Glass
     ============================================= */

  .banner.glass {
    @apply glass;
    border-bottom: 0.5px solid var(--glass-border);
  }
}

/* =============================================
   Responsive
   ============================================= */

@media (max-width: 767px) {
  .banner {
    padding-left: 1rem;
    padding-right: 1rem;
    gap: 0.5rem;
  }

  .banner-actions {
    @apply flex-col items-end;
  }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .banner {
    transition: opacity 0.1s ease;
    transform: none !important;
  }

  .banner-hidden {
    transform: none;
  }

  .banner-action,
  .banner-close {
    transition: none;
  }
}
