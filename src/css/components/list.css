/* UX v3 - List Component */
/* iOS-style list with items, headers, and dividers */

@layer components {

  /* =============================================
     Base list
     ============================================= */

  .list {
    @apply flex flex-col w-full m-0 p-0 list-none bg-base-100;
  }

  /* Inset (iOS grouped style) */
  .list-inset {
    @apply mx-6 rounded-2xl overflow-hidden;
  }

  /* Line styles */
  .list-lines-full .list-item {
    --list-border-start: 0px;
  }

  .list-lines-inset .list-item {
    --list-border-start: 1.5rem;
  }

  .list-lines-none .list-item {
    @apply border-b-0;
  }

  /* =============================================
     List header
     ============================================= */

  .list-header {
    @apply flex items-center justify-between px-4 pt-4 pb-2 text-xs font-semibold uppercase tracking-wide;
    color: var(--color-base-content);
    opacity: 0.6;
    background-color: var(--color-base-200);
  }

  .list-header-action {
    @apply text-sm font-medium normal-case tracking-normal bg-transparent border-none cursor-pointer p-0 text-primary;

    &:hover {
      opacity: 0.8;
    }
  }

  .list-header-sticky {
    @apply sticky top-0 z-10;
  }

  /* =============================================
     List note (footer)
     ============================================= */

  .list-note {
    @apply px-4 pb-4 pt-2 text-sm leading-relaxed;
    color: var(--color-base-content);
    opacity: 0.4;
    background-color: var(--color-base-200);
  }

  /* =============================================
     List item
     ============================================= */

  .list-item {
    --list-border-start: 1rem;

    @apply relative flex items-center min-h-11 px-4 py-3 no-underline;
    background-color: var(--color-base-100);
    color: var(--color-base-content);
    border-bottom: 1px solid var(--color-base-300);
    transition: background-color 0.15s ease;
    -webkit-tap-highlight-color: transparent;

    &:last-child {
      @apply border-b-0;
    }
  }

  /* Clickable */
  .list-item-clickable {
    @apply cursor-pointer;

    &:hover {
      background-color: var(--color-base-200);
    }

    &:active {
      opacity: 0.8;
    }
  }

  /* Detail (chevron indicator) */
  .list-item-detail {
    @apply pr-3;

    &::after {
      content: '';
      @apply absolute right-4 top-1/2 w-2 h-2;
      border-right: 2px solid var(--color-base-content);
      border-bottom: 2px solid var(--color-base-content);
      opacity: 0.3;
      transform: translateY(-50%) rotate(-45deg);
    }
  }

  /* Multiline */
  .list-item-multiline {
    @apply items-start py-3;
  }

  /* Disabled */
  .list-item-disabled {
    @apply opacity-50 pointer-events-none;
  }

  /* Selected */
  .list-item-selected {
    background-color: color-mix(in oklch, var(--color-primary) 8%, var(--color-base-100));
  }

  /* Active */
  .list-item-active {
    background-color: color-mix(in oklch, var(--color-primary) 12%, var(--color-base-100));
    color: var(--color-primary);

    &::before {
      content: '';
      @apply absolute left-0 top-2 bottom-2 w-0.5 rounded-r;
      background-color: var(--color-primary);
    }
  }

  /* =============================================
     Item slots
     ============================================= */

  .list-item-start {
    @apply flex items-center mr-3 shrink-0;
  }

  .list-item-end {
    @apply flex items-center ml-auto pl-3 shrink-0;
  }

  .list-item-content {
    @apply flex-1 min-w-0 flex flex-col justify-center;
  }

  .list-item-label {
    @apply text-sm leading-snug;
    color: var(--color-base-content);
  }

  .list-item-note {
    @apply text-xs mt-0.5 leading-snug;
    color: var(--color-base-content);
    opacity: 0.6;
  }

  .list-item-value {
    @apply text-sm;
    color: var(--color-base-content);
    opacity: 0.6;
  }

  /* =============================================
     Item icon
     ============================================= */

  .list-item-icon {
    @apply flex items-center justify-center size-5;
    color: var(--color-base-content);
    opacity: 0.6;

    svg {
      @apply w-full h-full;
    }
  }

  .list-item-chevron {
    @apply size-4;
    color: var(--color-base-content);
    opacity: 0.3;

    svg {
      @apply w-full h-full;
    }
  }

  /* =============================================
     Item divider (section separator)
     ============================================= */

  .list-divider {
    @apply flex items-center px-4 py-2 text-xs font-semibold;
    color: var(--color-base-content);
    opacity: 0.6;
    background-color: var(--color-base-200);
    border-bottom: 1px solid var(--color-base-300);
  }

  .list-divider-sticky {
    @apply sticky top-0 z-10;
  }

  /* =============================================
     Sizes
     ============================================= */

  .list-sm .list-item {
    @apply min-h-9 px-3 py-1.5 text-sm;
  }

  .list-lg .list-item {
    @apply min-h-14 px-5 py-4 text-base;
  }

  /* =============================================
     Glass variant
     ============================================= */

  .list.glass {
    @apply glass rounded-2xl overflow-hidden;
    border: 0.5px solid var(--glass-border, rgba(255,255,255,0.18));

    & .list-item {
      border-bottom-color: var(--glass-border, rgba(255,255,255,0.18));

      &:hover {
        background: var(--glass-bg-thin, rgba(255,255,255,0.5));
      }
    }

    & .list-header {
      background: var(--glass-bg-thin, rgba(255,255,255,0.5));
      border-bottom-color: var(--glass-border, rgba(255,255,255,0.18));
    }
  }
}

/* Fix: Tailwind v4 generates .list-item { display: list-item } in @layer utilities,
   which overrides our component's display: flex. Counter it in the same layer. */
@layer utilities {
  .list > .list-item {
    display: flex;
  }
}
