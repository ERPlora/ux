/* UX v3 - Avatar Component */
/* Profile pictures, initials, and status indicators */

@layer components {

  /* =============================================
     Base avatar
     ============================================= */

  .avatar {
    --avatar-size: 2.5rem;
    --avatar-font: 1rem;
    --avatar-bg: var(--c, var(--color-neutral));
    --avatar-fg: var(--c-fg, var(--color-neutral-content));

    @apply relative inline-flex items-center justify-center rounded-full font-semibold uppercase overflow-visible shrink-0;
    width: var(--avatar-size);
    height: var(--avatar-size);
    font-size: var(--avatar-font);
    background-color: var(--avatar-bg);
    color: var(--avatar-fg);

    & > img {
      @apply w-full h-full object-cover rounded-full;
    }
  }

  /* =============================================
     Sizes
     ============================================= */

  .avatar-xs {
    --avatar-size: 1.5rem;
    --avatar-font: 0.625rem;
  }

  .avatar-sm {
    --avatar-size: 2rem;
    --avatar-font: 0.75rem;
  }

  .avatar-lg {
    --avatar-size: 3rem;
    --avatar-font: 1.25rem;
  }

  .avatar-xl {
    --avatar-size: 4rem;
    --avatar-font: 1.5rem;
  }

  /* =============================================
     Shapes
     ============================================= */

  .avatar-square {
    @apply rounded-field;

    & > img {
      @apply rounded-field;
    }
  }

  .avatar-rounded {
    @apply rounded-box;

    & > img {
      @apply rounded-box;
    }
  }

  /* =============================================
     Status indicator
     ============================================= */

  .avatar-status {
    @apply absolute bottom-0 right-0 rounded-full z-1;
    width: 0.75rem;
    height: 0.75rem;
    border: 2px solid var(--color-base-100);
    background-color: var(--color-base-300);
    box-sizing: content-box;
  }

  .avatar-status-online {
    background-color: var(--color-success);
  }

  .avatar-status-offline {
    background-color: var(--color-base-300);
  }

  .avatar-status-busy {
    background-color: var(--color-error);
  }

  .avatar-status-away {
    background-color: var(--color-warning);
  }

  /* =============================================
     Color composition
     ============================================= */

  .avatar.color-primary,
  .avatar.color-secondary,
  .avatar.color-accent,
  .avatar.color-neutral,
  .avatar.color-info,
  .avatar.color-success,
  .avatar.color-warning,
  .avatar.color-error {
    --avatar-bg: var(--c);
    --avatar-fg: var(--c-fg);
  }

  /* =============================================
     Placeholder / icon
     ============================================= */

  .avatar-icon {
    @apply flex items-center justify-center;
    width: 60%;
    height: 60%;

    & > svg {
      @apply w-full h-full;
    }
  }

  /* =============================================
     Avatar group (overlapping)
     ============================================= */

  .avatar-group {
    @apply inline-flex flex-row-reverse items-center;

    & > .avatar {
      margin-left: -0.75rem;
      border: 2px solid var(--color-base-100);
      box-sizing: content-box;

      &:last-child {
        @apply ml-0;
      }

      &:hover {
        transform: translateY(-4px);
        @apply z-10;
      }
    }
  }

  .avatar-group-more {
    @apply inline-flex items-center justify-center rounded-full font-semibold text-sm shrink-0 cursor-default;
    width: var(--avatar-size, 2.5rem);
    height: var(--avatar-size, 2.5rem);
    margin-left: -0.75rem;
    border: 2px solid var(--color-base-100);
    background-color: var(--color-base-200);
    color: var(--color-base-content);
    box-sizing: content-box;
  }

  /* =============================================
     Glass
     ============================================= */

  .avatar.glass {
    @apply glass text-base-content;
  }

  /* =============================================
     Clickable
     ============================================= */

  .avatar-clickable {
    @apply cursor-pointer;
    transition: transform 0.15s, box-shadow 0.15s;

    &:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    &:active {
      transform: scale(0.98);
    }
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .avatar-clickable {
    transition: none;
  }

  .avatar-group > .avatar:hover {
    transform: none;
  }
}
