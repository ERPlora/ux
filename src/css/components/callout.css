/* UX v3 - Callout Component */
/* Info box with left accent border, colors, glass, dismissible */

@layer components {

  /* =============================================
     Callout Base
     ============================================= */

  .callout {
    @apply relative flex items-start;
    gap: 1rem;
    padding: 1.5rem;
    background-color: var(--color-base-200);
    border-radius: var(--radius-box);
    border: var(--border) solid var(--color-base-300);
    border-left-width: 4px;
    border-left-color: var(--color-primary);
    margin: 1.5rem 0;
    transition: opacity 0.2s, transform 0.2s;
  }

  /* =============================================
     Color Variants
     ============================================= */

  .callout-info {
    background-color: color-mix(in oklch, var(--color-info) 8%, transparent);
    border-color: color-mix(in oklch, var(--color-info) 20%, transparent);
    border-left-color: var(--color-info);

    & .callout-icon  { color: var(--color-info); }
    & .callout-title { color: var(--color-info); }
  }

  .callout-success {
    background-color: color-mix(in oklch, var(--color-success) 8%, transparent);
    border-color: color-mix(in oklch, var(--color-success) 20%, transparent);
    border-left-color: var(--color-success);

    & .callout-icon  { color: var(--color-success); }
    & .callout-title { color: var(--color-success); }
  }

  .callout-warning {
    background-color: color-mix(in oklch, var(--color-warning) 8%, transparent);
    border-color: color-mix(in oklch, var(--color-warning) 20%, transparent);
    border-left-color: var(--color-warning);

    & .callout-icon  { color: var(--color-warning); }
    & .callout-title { color: var(--color-warning); }
  }

  .callout-error {
    background-color: color-mix(in oklch, var(--color-error) 8%, transparent);
    border-color: color-mix(in oklch, var(--color-error) 20%, transparent);
    border-left-color: var(--color-error);

    & .callout-icon  { color: var(--color-error); }
    & .callout-title { color: var(--color-error); }
  }

  .callout-neutral {
    background-color: var(--color-base-200);
    border-color: var(--color-base-300);
    border-left-color: color-mix(in oklch, var(--color-base-content) 40%, transparent);

    & .callout-icon  { color: color-mix(in oklch, var(--color-base-content) 60%, transparent); }
    & .callout-title { @apply text-base-content; }
  }

  /* =============================================
     Icon
     ============================================= */

  .callout-icon {
    @apply shrink-0;
    width: 24px;
    height: 24px;
    color: var(--color-primary);

    & > svg {
      @apply size-full;
    }
  }

  /* =============================================
     Content
     ============================================= */

  .callout-content {
    @apply flex-1 min-w-0;
  }

  .callout-title {
    @apply font-semibold text-base-content m-0;
    font-size: 1rem;
    line-height: 1.4;
    margin-bottom: 0.25rem;
  }

  .callout-text {
    @apply text-sm m-0;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    line-height: 1.6;

    & p {
      margin: 0 0 0.5rem;

      &:last-child {
        margin-bottom: 0;
      }
    }

    & a {
      color: var(--color-primary);
      @apply underline;

      &:hover {
        @apply no-underline;
      }
    }

    & code {
      padding: 2px 6px;
      background-color: color-mix(in oklch, var(--color-base-content) 5%, transparent);
      border-radius: var(--radius-field);
      font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
      font-size: 0.9em;
    }
  }

  /* =============================================
     Close Button
     ============================================= */

  .callout-close {
    @apply absolute flex items-center justify-center border-none bg-transparent cursor-pointer;
    top: 0.5rem;
    right: 0.5rem;
    width: 28px;
    height: 28px;
    padding: 0;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    border-radius: var(--radius-field);
    -webkit-tap-highlight-color: transparent;
    transition: background-color 0.15s, color 0.15s;

    &:hover {
      @apply text-base-content;
      background-color: color-mix(in oklch, var(--color-base-content) 5%, transparent);
    }

    & > svg {
      @apply size-4;
    }
  }

  .callout-dismissible {
    padding-right: calc(1.5rem + 32px);
  }

  /* =============================================
     Sizes
     ============================================= */

  .callout-sm {
    padding: 1rem;
    gap: 0.5rem;

    & .callout-icon {
      width: 20px;
      height: 20px;
    }

    & .callout-title {
      @apply text-sm;
    }

    & .callout-text {
      @apply text-xs;
    }
  }

  .callout-lg {
    padding: 2rem;
    gap: 1.5rem;

    & .callout-icon {
      width: 28px;
      height: 28px;
    }

    & .callout-title {
      @apply text-lg;
      margin-bottom: 0.5rem;
    }

    & .callout-text {
      @apply text-base;
    }
  }

  /* =============================================
     Variants
     ============================================= */

  /* Bordered (no left accent) */
  .callout-bordered {
    border-left-width: var(--border);
  }

  /* Inline (no margin) */
  .callout-inline {
    @apply inline-flex;
    margin: 0;
  }

  /* =============================================
     Dismissed state
     ============================================= */

  .callout-dismissed {
    opacity: 0;
    transform: translateX(-10px);
    @apply pointer-events-none;
  }

  /* =============================================
     Glass
     ============================================= */

  .callout.glass {
    @apply glass;
    border: 0.5px solid var(--glass-border);
    border-left-width: 4px;
  }

  .callout.glass.callout-info    { border-left-color: var(--color-info); }
  .callout.glass.callout-success { border-left-color: var(--color-success); }
  .callout.glass.callout-warning { border-left-color: var(--color-warning); }
  .callout.glass.callout-error   { border-left-color: var(--color-error); }
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .callout {
    transition: opacity 0.1s ease;
  }

  .callout-dismissed {
    transform: none;
  }

  .callout-close {
    transition: none;
  }
}
