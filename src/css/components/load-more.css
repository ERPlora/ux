/* UX v3 - Load More Component */
/* Load more button with variants, loading spinner, progress bar, and end state */

@layer components {

  /* =============================================
     Container
     ============================================= */

  .load-more {
    @apply flex flex-col items-center gap-2;
    padding: 1.5rem 0;
  }

  /* =============================================
     Button
     ============================================= */

  .load-more-btn {
    @apply inline-flex items-center justify-center gap-2 font-medium cursor-pointer select-none;
    height: 2.75rem;
    padding: 0 2rem;
    color: var(--color-primary);
    background: transparent;
    border: 1px solid var(--color-primary);
    border-radius: 9999px;
    -webkit-tap-highlight-color: transparent;
    transition: background-color 0.15s, transform 0.15s;

    &:hover {
      background-color: color-mix(in oklch, var(--color-primary) 10%, transparent);
    }

    &:active {
      transform: scale(0.98);
    }

    &:focus-visible {
      @apply outline-2 outline-primary outline-offset-2;
    }

    &:disabled {
      @apply opacity-50 cursor-not-allowed;
      transform: none;
    }
  }

  /* =============================================
     Variants
     ============================================= */

  .load-more-filled .load-more-btn {
    background-color: var(--color-primary);
    color: var(--color-primary-content);
    border-color: var(--color-primary);

    &:hover {
      background-color: color-mix(in oklch, var(--color-primary) 85%, black);
    }
  }

  .load-more-ghost .load-more-btn {
    @apply border-none;
    color: var(--color-primary);

    &:hover {
      background-color: color-mix(in oklch, var(--color-primary) 10%, transparent);
    }
  }

  .load-more-soft .load-more-btn {
    @apply border-none;
    background-color: color-mix(in oklch, var(--color-primary) 10%, transparent);
    color: var(--color-primary);

    &:hover {
      background-color: color-mix(in oklch, var(--color-primary) 20%, transparent);
    }
  }

  /* =============================================
     Loading state
     ============================================= */

  .load-more-loading .load-more-btn {
    @apply pointer-events-none;
  }

  .load-more-spinner {
    @apply w-4.5 h-4.5;
    border: 2px solid currentColor;
    border-top-color: transparent;
    border-radius: 50%;
    animation: load-more-spin 0.8s linear infinite;
  }

  /* =============================================
     Status & progress
     ============================================= */

  .load-more-status {
    @apply text-sm;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  .load-more-progress {
    @apply flex items-center gap-2 text-sm;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  .load-more-progress-bar {
    width: 100px;
    height: 4px;
    background-color: var(--color-base-300);
    border-radius: 2px;
    @apply overflow-hidden;
  }

  .load-more-progress-fill {
    @apply h-full;
    background-color: var(--color-primary);
    border-radius: 2px;
    transition: width 0.2s;
  }

  /* =============================================
     Sizes
     ============================================= */

  .load-more-sm .load-more-btn {
    height: 2.25rem;
    padding: 0 1.5rem;
    @apply text-sm;
  }

  .load-more-lg .load-more-btn {
    height: 3.25rem;
    padding: 0 2.5rem;
    @apply text-lg;
  }

  /* =============================================
     Full width
     ============================================= */

  .load-more-full {
    @apply w-full;

    & .load-more-btn { @apply w-full; }
  }

  /* =============================================
     End state
     ============================================= */

  .load-more-end {
    @apply pointer-events-none;

    & .load-more-btn { @apply hidden; }
  }

  .load-more-end-message {
    @apply flex items-center gap-2 text-sm;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  /* =============================================
     Divider style
     ============================================= */

  .load-more-divider {
    @apply w-full;

    & .load-more-btn {
      @apply relative w-full bg-transparent border-none rounded-none;

      &::before,
      &::after {
        content: '';
        @apply absolute;
        top: 50%;
        width: calc(50% - 80px);
        height: 1px;
        background-color: var(--color-base-300);
      }

      &::before { left: 0; }
      &::after { right: 0; }

      &:hover { @apply bg-transparent; }
    }
  }

  /* =============================================
     Glass
     ============================================= */

  .load-more.glass .load-more-btn {
    @apply glass;
    border-color: rgba(255, 255, 255, 0.18);
    color: var(--color-base-content);

    &:hover {
      background: rgba(255, 255, 255, 0.25);
    }
  }
}

@keyframes load-more-spin {
  to { transform: rotate(360deg); }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .load-more-spinner {
    animation: none;
  }

  .load-more-btn {
    transition: none;
  }
}
