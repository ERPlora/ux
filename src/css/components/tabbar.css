/* UX v3 - Tab Bar */
/* Modifier for .footer that creates iOS-style bottom navigation with icon+label items */
/* Usage: <footer class="footer tabbar"> ... </footer> */

@layer components {

  /* =============================================
     .tabbar modifier on .footer
     Overrides padding/gap to stretch items evenly
     ============================================= */

  .tabbar {
    --tabbar-active: var(--color-primary);

    @apply py-0 px-4 gap-0 justify-stretch items-baseline;
  }

  /* =============================================
     Tab bar item (button)
     ============================================= */

  .tabbar-item {
    @apply flex flex-col items-center justify-center gap-0.5 flex-1 min-w-0 py-1 px-0 relative cursor-pointer bg-none border-none opacity-50;
    color: inherit;
    transition: color 0.15s, opacity 0.15s;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;

    &:hover {
      opacity: 0.75;
    }

    &:focus-visible {
      @apply outline-2 outline-primary outline-offset-[-2px];
    }
  }

  /* =============================================
     Active item
     ============================================= */

  .tabbar-item-active,
  .tabbar-item[aria-selected="true"],
  .tabbar-item[data-state="active"] {
    @apply opacity-100;
    color: var(--tabbar-active);
  }

  /* =============================================
     Icon & label
     ============================================= */

  .tabbar-icon {
    @apply size-5 shrink-0;
  }

  .tabbar-label {
    @apply text-[0.5625rem] font-medium leading-none whitespace-nowrap overflow-hidden text-ellipsis max-w-full;
  }

  /* Desktop: larger icons & labels */
  @media (min-width: 768px) {
    .tabbar-icon {
      @apply size-6;
    }

    .tabbar-label {
      @apply text-[0.625rem];
    }
  }

  /* =============================================
     Badge on tab item
     ============================================= */

  .tabbar-badge {
    @apply absolute top-0.5 left-1/2 min-w-4 h-4 px-1 text-[0.625rem] font-semibold leading-4 text-center rounded-full bg-error text-error-content;
    margin-left: 0.375rem;
  }

  .tabbar-badge-dot {
    @apply absolute top-1 left-1/2 size-1.5 rounded-full bg-error;
    margin-left: 0.5rem;
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .tabbar-item {
    transition: none;
  }
}
