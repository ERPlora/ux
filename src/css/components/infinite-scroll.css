/* UX v3 - Infinite Scroll Component */
/* Loading indicator, end state, error state, and scroll progress bar */

@layer components {

  /* =============================================
     Container
     ============================================= */

  .infinite-scroll {
    @apply flex flex-col items-center;
    padding: 1.5rem;
    min-height: 60px;
  }

  .infinite-scroll-hidden {
    @apply hidden;
  }

  .infinite-scroll-complete {
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  .infinite-scroll-error {
    @apply flex-col gap-2;
  }

  /* =============================================
     Loading
     ============================================= */

  .infinite-scroll-spinner {
    @apply flex items-center justify-center gap-4;
  }

  .infinite-scroll-icon {
    @apply w-6 h-6;
    border: 2px solid var(--color-base-300);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: infinite-scroll-spin 0.8s linear infinite;
  }

  .infinite-scroll-text {
    @apply text-sm;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* =============================================
     End state
     ============================================= */

  .infinite-scroll-end-text {
    @apply text-sm;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
  }

  .infinite-scroll-end-icon {
    @apply w-5 h-5;
    margin-bottom: 0.25rem;
    color: color-mix(in oklch, var(--color-base-content) 40%, transparent);

    & svg { @apply w-full h-full; }
  }

  /* =============================================
     Error state
     ============================================= */

  .infinite-scroll-error-text {
    @apply text-sm;
    color: var(--color-error);
  }

  .infinite-scroll-retry {
    @apply text-sm font-medium bg-transparent border-none cursor-pointer;
    padding: 0.5rem 1rem;
    color: var(--color-primary);

    &:hover { @apply underline; }
  }

  /* =============================================
     Scroll progress bar
     ============================================= */

  .scroll-progress {
    @apply fixed top-0 left-0 right-0;
    height: 3px;
    background-color: var(--color-base-300);
    z-index: 1000;
  }

  .scroll-progress-bar {
    @apply h-full;
    background-color: var(--color-primary);
    transition: width 0.1s ease-out;
  }
}

@keyframes infinite-scroll-spin {
  to { transform: rotate(360deg); }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .infinite-scroll-icon {
    animation: none;
  }
}
