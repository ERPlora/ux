/* UX v3 - Chip Component */
/* Tags, filters, and selectable items */

@layer components {

  /* =============================================
     Base chip
     ============================================= */

  .chip {
    --chip-bg: var(--color-base-200);
    --chip-fg: var(--color-base-content);
    --chip-border: transparent;
    --chip-size: 2rem;
    --chip-font: 0.875rem;
    --chip-px: 0.875rem;
    --chip-radius: 9999px;

    @apply inline-flex items-center gap-1 font-medium leading-none whitespace-nowrap select-none shrink-0 cursor-default;
    height: var(--chip-size);
    padding: 0 var(--chip-px);
    font-size: var(--chip-font);
    border-radius: var(--chip-radius);
    border: var(--border) solid var(--chip-border);
    background-color: var(--chip-bg);
    color: var(--chip-fg);
    transition: background-color 0.15s, border-color 0.15s;

    &:hover {
      background-color: var(--color-base-300);
    }
  }

  /* =============================================
     Style variants
     ============================================= */

  .chip-filled {
    --chip-bg: var(--c, var(--color-primary));
    --chip-fg: var(--c-fg, var(--color-primary-content));
  }

  .chip-outline {
    --chip-bg: transparent;
    --chip-fg: var(--color-base-content);
    --chip-border: var(--color-base-300);
  }

  .chip-soft {
    --chip-bg: color-mix(in oklch, var(--c, var(--color-primary)) 15%, var(--color-base-100));
    --chip-fg: var(--c, var(--color-primary));
    --chip-border: transparent;
  }

  /* =============================================
     Color composition
     ============================================= */

  .chip.color-primary,
  .chip.color-secondary,
  .chip.color-accent,
  .chip.color-neutral,
  .chip.color-info,
  .chip.color-success,
  .chip.color-warning,
  .chip.color-error {
    --chip-bg: var(--c);
    --chip-fg: var(--c-fg);
    --chip-border: var(--c-border);
  }

  /* =============================================
     Sizes
     ============================================= */

  .chip-sm {
    --chip-size: 1.5rem;
    --chip-font: 0.75rem;
    --chip-px: 0.625rem;
  }

  .chip-lg {
    --chip-size: 2.5rem;
    --chip-font: 1rem;
    --chip-px: 1rem;
  }

  /* =============================================
     Child elements
     ============================================= */

  .chip-icon {
    @apply size-4 shrink-0;
  }

  .chip-avatar {
    @apply size-6 rounded-full object-cover shrink-0;
    margin-left: calc(var(--chip-px) * -0.6);
  }

  .chip-close {
    @apply inline-flex items-center justify-center size-4.5 p-0 border-none rounded-full cursor-pointer shrink-0;
    margin-right: calc(var(--chip-px) * -0.4);
    background: rgba(0, 0, 0, 0.1);
    transition: background-color 0.15s;

    &:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    & > svg {
      @apply size-3;
    }
  }

  /* =============================================
     Interactive (clickable)
     ============================================= */

  .chip-interactive {
    @apply cursor-pointer;

    &:active {
      transform: scale(0.96);
    }
  }

  /* =============================================
     Selected state
     ============================================= */

  .chip-selected,
  .chip[aria-selected="true"] {
    --chip-bg: var(--c, var(--color-primary));
    --chip-fg: var(--c-fg, var(--color-primary-content));
  }

  /* =============================================
     Disabled
     ============================================= */

  .chip-disabled,
  .chip:disabled {
    @apply opacity-50 pointer-events-none;
  }

  /* =============================================
     Glass
     ============================================= */

  .chip.glass {
    @apply glass text-base-content;
  }

  /* =============================================
     Chip group
     ============================================= */

  .chip-group {
    @apply flex flex-wrap gap-2;
  }

  .chip-group-scroll {
    @apply flex flex-nowrap overflow-x-auto gap-2 scrollbar-hide;
    -webkit-overflow-scrolling: touch;
  }
}

/* =============================================
   Reduced motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  .chip {
    transition: none;
  }

  .chip-interactive:active {
    transform: none;
  }
}
