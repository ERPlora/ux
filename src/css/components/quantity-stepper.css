@layer components {
  /* ============================================
     Quantity Stepper
     ============================================ */

  .quantity-stepper {
    @apply inline-flex items-center select-none overflow-hidden;
    height: 44px;
    background: var(--color-base-200);
    border: 1px solid var(--color-base-300);
    border-radius: var(--radius-field, 0.25rem);
  }

  .quantity-stepper-btn {
    @apply flex items-center justify-center h-full p-0 bg-transparent border-none cursor-pointer;
    width: 44px;
    color: var(--color-primary);
    transition: background 0.15s ease, transform 0.1s ease;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  .quantity-stepper-btn:hover { background: color-mix(in oklch, var(--color-primary) 10%, transparent); }
  .quantity-stepper-btn:active { background: color-mix(in oklch, var(--color-primary) 15%, transparent); @apply scale-95; }
  .quantity-stepper-btn:focus-visible { @apply outline-2 outline-primary; outline-offset: -2px; }
  .quantity-stepper-btn svg { @apply size-5; }
  .quantity-stepper-btn:disabled,
  .quantity-stepper-btn-disabled { color: color-mix(in oklch, var(--color-base-content) 30%, transparent); @apply cursor-not-allowed pointer-events-none; }
  .quantity-stepper-btn-pressing { background: color-mix(in oklch, var(--color-primary) 20%, transparent) !important; }

  .quantity-stepper-input {
    @apply h-full p-0 bg-transparent border-none text-center font-semibold;
    width: 56px;
    font-size: 1rem;
    color: var(--color-base-content);
    border-left: 1px solid var(--color-base-300);
    border-right: 1px solid var(--color-base-300);
    -moz-appearance: textfield;
    appearance: textfield;
  }
  .quantity-stepper-input::-webkit-outer-spin-button,
  .quantity-stepper-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  .quantity-stepper-input:focus { @apply outline-none; background: color-mix(in oklch, var(--color-primary) 5%, transparent); }
  .quantity-stepper-input:disabled { color: color-mix(in oklch, var(--color-base-content) 30%, transparent); @apply cursor-not-allowed; }

  /* Sizes */
  .quantity-stepper-sm { height: 36px; }
  .quantity-stepper-sm .quantity-stepper-btn { width: 36px; }
  .quantity-stepper-sm .quantity-stepper-btn svg { @apply size-4; }
  .quantity-stepper-sm .quantity-stepper-input { width: 44px; @apply text-sm; }

  .quantity-stepper-lg { height: 52px; }
  .quantity-stepper-lg .quantity-stepper-btn { width: 52px; }
  .quantity-stepper-lg .quantity-stepper-btn svg { @apply size-6; }
  .quantity-stepper-lg .quantity-stepper-input { width: 68px; @apply text-lg; }

  /* Vertical */
  .quantity-stepper-vertical { @apply flex-col; width: 44px; height: auto; }
  .quantity-stepper-vertical .quantity-stepper-btn { @apply w-full; height: 44px; }
  .quantity-stepper-vertical .quantity-stepper-btn-minus { @apply order-3; }
  .quantity-stepper-vertical .quantity-stepper-btn-plus { @apply order-1; }
  .quantity-stepper-vertical .quantity-stepper-input {
    @apply w-full order-2;
    height: 44px;
    border-left: none; border-right: none;
    border-top: 1px solid var(--color-base-300);
    border-bottom: 1px solid var(--color-base-300);
  }
  .quantity-stepper-vertical.quantity-stepper-sm { width: 36px; }
  .quantity-stepper-vertical.quantity-stepper-sm .quantity-stepper-btn { height: 36px; }
  .quantity-stepper-vertical.quantity-stepper-sm .quantity-stepper-input { height: 36px; }
  .quantity-stepper-vertical.quantity-stepper-lg { width: 52px; }
  .quantity-stepper-vertical.quantity-stepper-lg .quantity-stepper-btn { height: 52px; }
  .quantity-stepper-vertical.quantity-stepper-lg .quantity-stepper-input { height: 52px; }

  /* Round */
  .quantity-stepper-round { @apply rounded-full; }

  /* Compact */
  .quantity-stepper-compact .quantity-stepper-input { width: 36px; border-left: none; border-right: none; }
  .quantity-stepper-compact.quantity-stepper-sm .quantity-stepper-input { width: 28px; }
  .quantity-stepper-compact.quantity-stepper-lg .quantity-stepper-input { width: 44px; }

  /* Glass */
  .quantity-stepper.glass {
    background: oklch(1 0 0 / 0.5);
    border: 0.5px solid oklch(1 0 0 / 0.18);
    box-shadow: inset 0 1px 0 oklch(1 0 0 / 0.5);
  }
  .quantity-stepper.glass .quantity-stepper-input { border-color: oklch(1 0 0 / 0.18); }
  .quantity-stepper.glass .quantity-stepper-btn:hover { background: oklch(1 0 0 / 0.72); }
  .quantity-stepper.glass .quantity-stepper-btn:active { background: oklch(1 0 0 / 0.85); }

  /* Color variants */
  .quantity-stepper.color-success .quantity-stepper-btn { color: var(--color-success); }
  .quantity-stepper.color-success .quantity-stepper-btn:hover { background: color-mix(in oklch, var(--color-success) 10%, transparent); }
  .quantity-stepper.color-error .quantity-stepper-btn { color: var(--color-error); }
  .quantity-stepper.color-error .quantity-stepper-btn:hover { background: color-mix(in oklch, var(--color-error) 10%, transparent); }

  /* Disabled */
  .quantity-stepper-disabled { @apply opacity-50 pointer-events-none; }

  @media (prefers-reduced-motion: reduce) {
    .quantity-stepper-btn { transition: none; }
    .quantity-stepper-btn:active { transform: none; }
  }
}
