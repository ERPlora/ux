/**
 * UX Electron Component
 * Part of the UX CSS Library
 */

// ========================================
// Traffic Light Buttons (macOS style)
// ========================================

.ux-electron-traffic {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 var(--ux-space-md);
  height: 100%;
  -webkit-app-region: no-drag;

  &__btn {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    transition: opacity 0.15s ease;
    position: relative;

    &:hover {
      opacity: 0.8;
    }

    &--close {
      background: #ff5f57;
    }

    &--minimize {
      background: #febc2e;
    }

    &--maximize {
      background: #28c840;
    }

    // Show icons on hover
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 8px;
      height: 8px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0;
    }
  }

  &:hover &__btn::after {
    opacity: 1;
  }

  &:hover &__btn--close::after {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='3'%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='18' x2='18' y2='6'%3E%3C/line%3E%3C/svg%3E");
  }

  &:hover &__btn--minimize::after {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='3'%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3C/svg%3E");
  }

  &:hover &__btn--maximize::after {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='3'%3E%3Cpolyline points='15 3 21 3 21 9'%3E%3C/polyline%3E%3Cpolyline points='9 21 3 21 3 15'%3E%3C/polyline%3E%3C/svg%3E");
  }
}

// ========================================
// Windows Style Controls
// ========================================

.ux-electron-controls {
  display: flex;
  align-items: stretch;
  height: 100%;
  -webkit-app-region: no-drag;

  &__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 46px;
    height: 100%;
    border: none;
    background: transparent;
    color: var(--ux-text);
    cursor: pointer;
    transition: background-color 0.1s ease;

    &:hover {
      background: var(--ux-surface-secondary);
    }

    &--close:hover {
      background: #e81123;
      color: white;
    }

    svg {
      width: 10px;
      height: 10px;
    }
  }
}

// ========================================
// Titlebar
// ========================================

.ux-electron-titlebar {
  display: flex;
  align-items: center;
  height: 32px;
  background: var(--ux-surface);
  border-bottom: 1px solid var(--ux-border-color);
  -webkit-app-region: drag;
  user-select: none;

  &--macos {
    padding-left: 78px; // Space for traffic lights
  }

  &--glass {
    background: var(--ux-glass-bg);
    backdrop-filter: blur(var(--ux-glass-blur)) saturate(var(--ux-glass-saturation));
    -webkit-backdrop-filter: blur(var(--ux-glass-blur)) saturate(var(--ux-glass-saturation));
    border-color: var(--ux-glass-border);
  }

  &__title {
    flex: 1;
    text-align: center;
    font-size: var(--ux-font-size-sm);
    font-weight: 500;
    color: var(--ux-text);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  &__menu {
    display: flex;
    -webkit-app-region: no-drag;
  }

  &__menu-item {
    padding: 0 var(--ux-space-sm);
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text);
    cursor: pointer;
    transition: background-color 0.1s ease;

    &:hover {
      background: var(--ux-surface-secondary);
    }
  }
}

// ========================================
// Frameless Window
// ========================================

.ux-electron-frameless {
  padding-top: 32px;

  .ux-electron-titlebar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--ux-z-fixed);
  }
}

// ========================================
// Context Menu Indicator
// ========================================

.ux-electron-context-menu {
  cursor: context-menu;
}

// ========================================
// Drag and Drop Zones
// ========================================

.ux-electron-drop-zone {
  position: relative;
  transition: background-color 0.2s ease, border-color 0.2s ease;

  &--active {
    background: var(--ux-primary-soft);
    border-color: var(--ux-primary);

    &::after {
      content: 'Drop files here';
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(var(--ux-primary-rgb), 0.1);
      border: 2px dashed var(--ux-primary);
      border-radius: inherit;
      font-weight: 500;
      color: var(--ux-primary);
    }
  }
}

// ========================================
// Update Indicator
// ========================================

.ux-electron-update {
  position: fixed;
  bottom: var(--ux-space-lg);
  right: var(--ux-space-lg);
  display: flex;
  align-items: center;
  gap: var(--ux-space-md);
  padding: var(--ux-space-md) var(--ux-space-lg);
  background: var(--ux-primary);
  color: white;
  border-radius: var(--ux-border-radius-lg);
  box-shadow: var(--ux-shadow-lg);
  z-index: var(--ux-z-toast);
  transform: translateY(calc(100% + var(--ux-space-xl)));
  transition: transform 0.3s ease;

  &--visible {
    transform: translateY(0);
  }

  &__text {
    font-size: var(--ux-font-size-sm);
    font-weight: 500;
  }

  &__btn {
    padding: var(--ux-space-xs) var(--ux-space-md);
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: var(--ux-border-radius);
    color: white;
    font-size: var(--ux-font-size-sm);
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;

    &:hover {
      background: rgba(255, 255, 255, 0.3);
    }
  }
}

// ========================================
// Dark Mode
// ========================================

@media (prefers-color-scheme: dark) {
  .ux-electron-titlebar {
    background: var(--ux-surface);
  }

  .ux-electron-controls__btn {
    color: var(--ux-text);
  }
}

.ux-dark {
  .ux-electron-titlebar {
    background: var(--ux-surface);
  }

  .ux-electron-controls__btn {
    color: var(--ux-text);
  }
}
