@use '../core/mixins' as *;

/**
 * UX Leave-request Component
 * Part of the UX CSS Library
 * https://github.com/user/ux
 */

/* ========================================
   UX Leave Request Card
   ======================================== */

:root {
  --ux-leave-request-border-radius: var(--ux-border-radius-lg, 12px);
  --ux-leave-request-padding: var(--ux-space-lg, 1.5rem);
  --ux-leave-request-gap: var(--ux-space-md, 1rem);
}

.ux-leave-request {
  position: relative;
  display: flex;
  flex-direction: column;
  background-color: var(--ux-surface);
  border-radius: var(--ux-leave-request-border-radius);
  box-shadow: var(--ux-shadow-sm);
  overflow: hidden;
  width: 100%;
  max-width: 420px;

  /* Status indicator border */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background-color: var(--ux-leave-request-status-color, var(--ux-warning));
    border-radius: var(--ux-leave-request-border-radius) 0 0 var(--ux-leave-request-border-radius);
  }

  /* ========================================
     Header
     ======================================== */

  &__header {
    display: flex;
    align-items: flex-start;
    gap: var(--ux-space-md);
    padding: var(--ux-leave-request-padding);
    padding-bottom: var(--ux-space-md);
  }

  &__avatar {
    flex-shrink: 0;
  }

  &__employee {
    flex: 1;
    min-width: 0;
  }

  &__name {
    font-size: var(--ux-font-size-lg);
    font-weight: 600;
    color: var(--ux-text);
    margin: 0;
    line-height: 1.3;
  }

  &__role {
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text-secondary);
    margin: var(--ux-space-xs) 0 0;
  }

  &__department {
    font-size: var(--ux-font-size-xs);
    color: var(--ux-text-tertiary);
    margin: var(--ux-space-xs) 0 0;
  }

  &__status {
    flex-shrink: 0;
  }

  /* ========================================
     Leave Type
     ======================================== */

  &__type {
    display: inline-flex;
    align-items: center;
    gap: var(--ux-space-xs);
    padding: var(--ux-space-xs) var(--ux-space-sm);
    font-size: var(--ux-font-size-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-radius: var(--ux-border-radius);
    background-color: var(--ux-leave-type-bg, var(--ux-surface-secondary));
    color: var(--ux-leave-type-color, var(--ux-text-secondary));

    &--vacation {
      --ux-leave-type-bg: rgba(var(--ux-blue-500-rgb, 59, 130, 246), 0.12);
      --ux-leave-type-color: var(--ux-blue-600, #2563eb);
    }

    &--sick {
      --ux-leave-type-bg: rgba(var(--ux-red-500-rgb, 239, 68, 68), 0.12);
      --ux-leave-type-color: var(--ux-red-600, #dc2626);
    }

    &--personal {
      --ux-leave-type-bg: rgba(var(--ux-purple-500-rgb, 168, 85, 247), 0.12);
      --ux-leave-type-color: var(--ux-purple-600, #9333ea);
    }

    &--maternity {
      --ux-leave-type-bg: rgba(var(--ux-pink-500-rgb, 236, 72, 153), 0.12);
      --ux-leave-type-color: var(--ux-pink-600, #db2777);
    }

    &--paternity {
      --ux-leave-type-bg: rgba(var(--ux-cyan-500-rgb, 6, 182, 212), 0.12);
      --ux-leave-type-color: var(--ux-cyan-600, #0891b2);
    }

    &--bereavement {
      --ux-leave-type-bg: rgba(var(--ux-gray-500-rgb, 107, 114, 128), 0.12);
      --ux-leave-type-color: var(--ux-gray-600, #4b5563);
    }

    &--unpaid {
      --ux-leave-type-bg: rgba(var(--ux-orange-500-rgb, 249, 115, 22), 0.12);
      --ux-leave-type-color: var(--ux-orange-600, #ea580c);
    }

    &--work-from-home {
      --ux-leave-type-bg: rgba(var(--ux-green-500-rgb, 34, 197, 94), 0.12);
      --ux-leave-type-color: var(--ux-green-600, #16a34a);
    }
  }

  &__type-icon {
    width: 14px;
    height: 14px;

    svg {
      width: 100%;
      height: 100%;
    }
  }

  /* ========================================
     Content Body
     ======================================== */

  &__body {
    padding: 0 var(--ux-leave-request-padding);
  }

  /* ========================================
     Dates Section
     ======================================== */

  &__dates {
    display: flex;
    align-items: center;
    gap: var(--ux-space-md);
    padding: var(--ux-space-md);
    background-color: var(--ux-surface-secondary);
    border-radius: var(--ux-border-radius);
    margin-bottom: var(--ux-space-md);
  }

  &__date {
    flex: 1;
    text-align: center;
  }

  &__date-label {
    display: block;
    font-size: var(--ux-font-size-xs);
    color: var(--ux-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--ux-space-xs);
  }

  &__date-value {
    display: block;
    font-size: var(--ux-font-size-md);
    font-weight: 600;
    color: var(--ux-text);
  }

  &__date-day {
    display: block;
    font-size: var(--ux-font-size-xs);
    color: var(--ux-text-secondary);
    margin-top: 2px;
  }

  &__dates-arrow {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    color: var(--ux-text-tertiary);

    svg {
      width: 100%;
      height: 100%;
    }
  }

  /* ========================================
     Duration
     ======================================== */

  &__duration {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--ux-space-sm);
    padding: var(--ux-space-sm) var(--ux-space-md);
    background-color: var(--ux-surface-tertiary);
    border-radius: var(--ux-border-radius);
    margin-bottom: var(--ux-space-md);
  }

  &__duration-icon {
    width: 16px;
    height: 16px;
    color: var(--ux-text-secondary);

    svg {
      width: 100%;
      height: 100%;
    }
  }

  &__duration-value {
    font-size: var(--ux-font-size-md);
    font-weight: 600;
    color: var(--ux-text);
  }

  &__duration-label {
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text-secondary);
  }

  /* ========================================
     Reason/Notes
     ======================================== */

  &__reason {
    padding: var(--ux-space-md);
    background-color: var(--ux-surface-secondary);
    border-radius: var(--ux-border-radius);
    margin-bottom: var(--ux-space-md);
    border-left: 3px solid var(--ux-border-color);
  }

  &__reason-label {
    display: block;
    font-size: var(--ux-font-size-xs);
    font-weight: 600;
    color: var(--ux-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--ux-space-xs);
  }

  &__reason-text {
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text);
    line-height: 1.5;
    margin: 0;
  }

  /* ========================================
     Meta Information (submitted date, etc)
     ======================================== */

  &__meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--ux-space-md);
    padding: var(--ux-space-sm) 0;
    font-size: var(--ux-font-size-xs);
    color: var(--ux-text-tertiary);
  }

  &__meta-item {
    display: flex;
    align-items: center;
    gap: var(--ux-space-xs);
  }

  &__meta-icon {
    width: 12px;
    height: 12px;

    svg {
      width: 100%;
      height: 100%;
    }
  }

  /* ========================================
     Actions
     ======================================== */

  &__actions {
    display: flex;
    gap: var(--ux-space-sm);
    padding: var(--ux-space-md) var(--ux-leave-request-padding);
    border-top: 1px solid var(--ux-border-color);
    background-color: var(--ux-surface-secondary);
  }

  &__action {
    flex: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--ux-space-xs);
    height: var(--ux-touch-target-sm, 36px);
    padding: 0 var(--ux-space-md);
    font-size: var(--ux-font-size-sm);
    font-weight: 600;
    border: none;
    border-radius: var(--ux-border-radius);
    cursor: pointer;
    transition:
      background-color var(--ux-transition-fast) var(--ux-ease),
      transform var(--ux-transition-fast) var(--ux-ease),
      opacity var(--ux-transition-fast) var(--ux-ease);
    -webkit-tap-highlight-color: transparent;

    &:active {
      transform: scale(0.98);
    }

    &--approve {
      background-color: var(--ux-success);
      color: var(--ux-success-contrast, #fff);

      &:hover {
        background-color: var(--ux-success-shade);
      }
    }

    &--reject {
      background-color: var(--ux-danger);
      color: var(--ux-danger-contrast, #fff);

      &:hover {
        background-color: var(--ux-danger-shade);
      }
    }

    &--secondary {
      background-color: var(--ux-surface);
      color: var(--ux-text-secondary);
      border: 1px solid var(--ux-border-color);

      &:hover {
        background-color: var(--ux-surface-secondary);
      }
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
  }

  &__action-icon {
    width: 16px;
    height: 16px;

    svg {
      width: 100%;
      height: 100%;
    }
  }

  /* ========================================
     Status Variants
     ======================================== */

  &--pending {
    --ux-leave-request-status-color: var(--ux-warning);
  }

  &--approved {
    --ux-leave-request-status-color: var(--ux-success);
  }

  &--rejected {
    --ux-leave-request-status-color: var(--ux-danger);
  }

  &--cancelled {
    --ux-leave-request-status-color: var(--ux-gray-400);
    opacity: 0.7;
  }

  &--approved,
  &--rejected,
  &--cancelled {
    .ux-leave-request__actions {
      background-color: transparent;
      border-top: none;
      padding-top: 0;
    }
  }

  /* ========================================
     Status Badge (inside header)
     ======================================== */

  &__status-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--ux-space-xs);
    padding: var(--ux-space-xs) var(--ux-space-sm);
    font-size: var(--ux-font-size-xs);
    font-weight: 600;
    border-radius: var(--ux-border-radius-full, 9999px);

    &--pending {
      background-color: rgba(var(--ux-warning-rgb, 234, 179, 8), 0.15);
      color: var(--ux-warning-shade, #ca8a04);

      .ux-leave-request__status-dot {
        animation: ux-leave-request-pulse 1.5s ease-in-out infinite;
      }
    }

    &--approved {
      background-color: rgba(var(--ux-success-rgb, 34, 197, 94), 0.15);
      color: var(--ux-success-shade, #16a34a);
    }

    &--rejected {
      background-color: rgba(var(--ux-danger-rgb, 239, 68, 68), 0.15);
      color: var(--ux-danger-shade, #dc2626);
    }

    &--cancelled {
      background-color: var(--ux-surface-tertiary);
      color: var(--ux-text-tertiary);
    }
  }

  &__status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: currentColor;
  }

  /* ========================================
     Compact Variant
     ======================================== */

  &--compact {
    max-width: 360px;

    .ux-leave-request__header {
      padding: var(--ux-space-md);
    }

    .ux-leave-request__body {
      padding: 0 var(--ux-space-md);
    }

    .ux-leave-request__dates {
      padding: var(--ux-space-sm);
    }

    .ux-leave-request__actions {
      padding: var(--ux-space-sm) var(--ux-space-md);
    }
  }

  /* ========================================
     Glass Variant (iOS 26 Liquid Glass)
     ======================================== */

  &--glass {
    box-shadow: var(--ux-glass-shadow), var(--ux-glass-highlight);
    border: 0.5px solid var(--ux-glass-border);

    .ux-leave-request__dates,
    .ux-leave-request__duration,
    .ux-leave-request__reason {
      background-color: rgba(255, 255, 255, 0.3);
    }

    .ux-leave-request__actions {
      background-color: rgba(255, 255, 255, 0.2);
      border-top-color: var(--ux-glass-border);
    }
  }
}

@keyframes ux-leave-request-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}

/* ========================================
   Leave Request Form
   ======================================== */

.ux-leave-request-form {
  display: flex;
  flex-direction: column;
  gap: var(--ux-space-md);
  background-color: var(--ux-surface);
  border-radius: var(--ux-leave-request-border-radius);
  box-shadow: var(--ux-shadow-sm);
  padding: var(--ux-leave-request-padding);
  max-width: 480px;

  &__title {
    font-size: var(--ux-font-size-xl);
    font-weight: 600;
    color: var(--ux-text);
    margin: 0 0 var(--ux-space-sm);
  }

  &__subtitle {
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text-secondary);
    margin: 0 0 var(--ux-space-md);
  }

  &__row {
    display: flex;
    gap: var(--ux-space-md);

    > * {
      flex: 1;
    }
  }

  &__field {
    display: flex;
    flex-direction: column;
    gap: var(--ux-space-xs);
  }

  &__label {
    font-size: var(--ux-font-size-sm);
    font-weight: 500;
    color: var(--ux-text-secondary);

    &--required::after {
      content: ' *';
      color: var(--ux-danger);
    }
  }

  &__balance {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--ux-space-md);
    background-color: var(--ux-surface-secondary);
    border-radius: var(--ux-border-radius);
    margin-bottom: var(--ux-space-sm);
  }

  &__balance-label {
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text-secondary);
  }

  &__balance-value {
    font-size: var(--ux-font-size-lg);
    font-weight: 600;
    color: var(--ux-primary);

    &--low {
      color: var(--ux-danger);
    }
  }

  &__actions {
    display: flex;
    gap: var(--ux-space-sm);
    margin-top: var(--ux-space-md);
    padding-top: var(--ux-space-md);
    border-top: 1px solid var(--ux-border-color);

    > * {
      flex: 1;
    }
  }

  /* Leave type selector grid */
  &__types {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: var(--ux-space-sm);
  }

  &__type-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--ux-space-xs);
    padding: var(--ux-space-md);
    background-color: var(--ux-surface-secondary);
    border: 2px solid transparent;
    border-radius: var(--ux-border-radius);
    cursor: pointer;
    transition:
      border-color var(--ux-transition-fast) var(--ux-ease),
      background-color var(--ux-transition-fast) var(--ux-ease);
    -webkit-tap-highlight-color: transparent;

    &:hover {
      background-color: var(--ux-surface-tertiary);
    }

    &--selected {
      border-color: var(--ux-primary);
      background-color: rgba(var(--ux-primary-rgb), 0.08);

      .ux-leave-request-form__type-icon {
        color: var(--ux-primary);
      }
    }

    input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }
  }

  &__type-icon {
    width: 24px;
    height: 24px;
    color: var(--ux-text-secondary);

    svg {
      width: 100%;
      height: 100%;
    }
  }

  &__type-name {
    font-size: var(--ux-font-size-xs);
    font-weight: 500;
    color: var(--ux-text);
    text-align: center;
  }

  /* Glass form variant */
  &--glass {
    box-shadow: var(--ux-glass-shadow), var(--ux-glass-highlight);
    border: 0.5px solid var(--ux-glass-border);

    .ux-leave-request-form__balance,
    .ux-leave-request-form__type-option {
      background-color: rgba(255, 255, 255, 0.3);
    }
  }
}

/* ========================================
   Responsive
   ======================================== */

@media (max-width: 480px) {
  .ux-leave-request-form__row {
    flex-direction: column;
  }

  .ux-leave-request__dates {
    flex-direction: column;
    text-align: center;
  }

  .ux-leave-request__dates-arrow {
    transform: rotate(90deg);
  }
}

/* ========================================
   Dark Mode
   ======================================== */

@media (prefers-color-scheme: dark) {
  :root:not(.ux-light):not(.ux-theme-light) {
    .ux-leave-request--glass .ux-leave-request__dates,
    .ux-leave-request--glass .ux-leave-request__duration,
    .ux-leave-request--glass .ux-leave-request__reason,
    .ux-leave-request--glass .ux-leave-request__actions {
      background-color: rgba(0, 0, 0, 0.2);
    }

    .ux-leave-request-form--glass .ux-leave-request-form__balance,
    .ux-leave-request-form--glass .ux-leave-request-form__type-option {
      background-color: rgba(0, 0, 0, 0.2);
    }
  }
}

.ux-dark,
.ux-theme-dark {
  .ux-leave-request--glass .ux-leave-request__dates,
  .ux-leave-request--glass .ux-leave-request__duration,
  .ux-leave-request--glass .ux-leave-request__reason,
  .ux-leave-request--glass .ux-leave-request__actions {
    background-color: rgba(0, 0, 0, 0.2);
  }

  .ux-leave-request-form--glass .ux-leave-request-form__balance,
  .ux-leave-request-form--glass .ux-leave-request-form__type-option {
    background-color: rgba(0, 0, 0, 0.2);
  }
}

/* ========================================
   Reduced Motion
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .ux-leave-request__status-badge--pending .ux-leave-request__status-dot {
    animation: none;
  }

  .ux-leave-request__action {
    transition: none;
  }

  .ux-leave-request-form__type-option {
    transition: none;
  }
}
