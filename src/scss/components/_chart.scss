@use '../core/mixins' as *;

/**
 * UX Chart Component
 * Part of the UX CSS Library
 */

/* ========================================
   UX Chart - CSS Variables
   ======================================== */

:root {
  /* Chart Color Palette (10 colors for data series) */
  --ux-chart-1: var(--ux-primary);
  --ux-chart-2: var(--ux-cyan-500);
  --ux-chart-3: var(--ux-emerald-500);
  --ux-chart-4: var(--ux-amber-500);
  --ux-chart-5: var(--ux-rose-500);
  --ux-chart-6: var(--ux-violet-500);
  --ux-chart-7: var(--ux-orange-500);
  --ux-chart-8: var(--ux-teal-500);
  --ux-chart-9: var(--ux-indigo-500);
  --ux-chart-10: var(--ux-purple-500);

  /* Chart Structural Colors */
  --ux-chart-bg: var(--ux-surface);
  --ux-chart-grid: var(--ux-border-color);
  --ux-chart-axis: var(--ux-text-tertiary);
  --ux-chart-text: var(--ux-text);
  --ux-chart-text-secondary: var(--ux-text-secondary);
}

/* ========================================
   UX Chart - Container
   ======================================== */

.ux-chart {
  position: relative;
  display: block;
  width: 100%;
  background: var(--ux-chart-bg);
  border-radius: var(--ux-radius-lg);
  overflow: hidden;
  font-family: var(--ux-font-family);

  /* Canvas for Chart.js */
  canvas {
    display: block;
    width: 100% !important;
    max-width: 100%;
  }

  /* Container Modifiers */
  &--bordered {
    border: 1px solid var(--ux-border-color);
  }

  &--padded {
    padding: var(--ux-space-md);
  }

  /* Fixed Heights */
  &--sm {
    height: 200px;
  }

  &--md {
    height: 300px;
  }

  &--lg {
    height: 400px;
  }

  &--xl {
    height: 500px;
  }

  /* SVG Support (matplotlib, etc.) */
  &--svg {
    svg {
      display: block;
      width: 100%;
      height: auto;
      max-width: 100%;
      background: var(--ux-chart-bg) !important;

      /* SVG Background Override */
      rect[fill="#ffffff"],
      rect[fill="white"],
      rect.background {
        fill: var(--ux-chart-bg) !important;
      }

      /* SVG Text Override */
      text {
        fill: var(--ux-chart-text) !important;
        font-family: var(--ux-font-family) !important;
      }

      .tick text {
        fill: var(--ux-chart-text-secondary) !important;
      }

      /* Matplotlib Colors -> UX */
      [fill="#1f77b4"] {
        fill: var(--ux-chart-1) !important;
      }

      [stroke="#1f77b4"] {
        stroke: var(--ux-chart-1) !important;
      }

      [fill="#ff7f0e"] {
        fill: var(--ux-chart-2) !important;
      }

      [stroke="#ff7f0e"] {
        stroke: var(--ux-chart-2) !important;
      }

      [fill="#2ca02c"] {
        fill: var(--ux-chart-3) !important;
      }

      [stroke="#2ca02c"] {
        stroke: var(--ux-chart-3) !important;
      }

      [fill="#d62728"] {
        fill: var(--ux-chart-4) !important;
      }

      [stroke="#d62728"] {
        stroke: var(--ux-chart-4) !important;
      }

      [fill="#9467bd"] {
        fill: var(--ux-chart-5) !important;
      }

      [stroke="#9467bd"] {
        stroke: var(--ux-chart-5) !important;
      }
    }
  }
}

/* ========================================
   Dark Mode
   ======================================== */

@media (prefers-color-scheme: dark) {
  :root {
    --ux-chart-grid: rgba(255, 255, 255, 0.1);
  }
}

.ux-dark {
  --ux-chart-grid: rgba(255, 255, 255, 0.1);
}

/* ========================================
   Responsive
   ======================================== */

@media (max-width: 767px) {
  .ux-chart--padded {
    padding: var(--ux-space-sm);
  }
}
