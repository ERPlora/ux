/**
 * UX Textarea Component
 * Part of the UX CSS Library
 * https://github.com/user/ux
 */

/* ========================================
   UX Textarea Container
   ======================================== */

.ux-textarea {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;

  /* ========================================
     Textarea Field
     ======================================== */

  &__field {
    width: 100%;
    min-height: 100px;
    padding: var(--ux-space-md) var(--ux-space-lg);
    font-family: var(--ux-font-family);
    font-size: 16px; /* Prevent zoom on iOS */
    line-height: 1.5;
    color: var(--ux-text);
    background-color: var(--ux-surface);
    border: 1px solid var(--ux-border-color);
    border-radius: var(--ux-border-radius);
    outline: none;
    resize: vertical;
    transition:
      border-color var(--ux-transition-fast) var(--ux-ease),
      box-shadow var(--ux-transition-fast) var(--ux-ease),
      background-color var(--ux-transition-fast) var(--ux-ease);
    -webkit-appearance: none;
    appearance: none;

    &::placeholder {
      color: var(--ux-text-tertiary);
    }

    &:hover {
      border-color: var(--ux-medium);
    }

    &:focus {
      border-color: var(--ux-primary);
      box-shadow: 0 0 0 3px rgba(var(--ux-primary-rgb), 0.15);
    }

    &:disabled {
      background-color: var(--ux-light);
      color: var(--ux-text-tertiary);
      cursor: not-allowed;
      opacity: 0.6;
      resize: none;
    }

    &[readonly] {
      background-color: var(--ux-light);
      cursor: default;
    }
  }

  /* ========================================
     Auto Resize
     ======================================== */

  &--auto-resize .ux-textarea__field {
    resize: none;
    overflow: hidden;
  }

  /* ========================================
     Label
     ======================================== */

  &__label {
    display: block;
    margin-bottom: var(--ux-space-xs);
    font-size: var(--ux-font-size-sm);
    font-weight: 500;
    color: var(--ux-text-secondary);

    &--required::after {
      content: ' *';
      color: var(--ux-danger);
    }
  }

  /* ========================================
     Floating Label
     ======================================== */

  &--floating {
    position: relative;

    .ux-textarea__field {
      padding-top: 28px;
    }

    .ux-textarea__label {
      position: absolute;
      top: var(--ux-space-md);
      left: var(--ux-space-lg);
      margin: 0;
      font-size: var(--ux-font-size-md);
      color: var(--ux-text-tertiary);
      pointer-events: none;
      transition:
        top var(--ux-transition-fast) var(--ux-ease),
        font-size var(--ux-transition-fast) var(--ux-ease),
        color var(--ux-transition-fast) var(--ux-ease);
    }

    .ux-textarea__field:focus ~ .ux-textarea__label,
    .ux-textarea__field:not(:placeholder-shown) ~ .ux-textarea__label,
    .ux-textarea__field.has-value ~ .ux-textarea__label {
      top: 8px;
      font-size: var(--ux-font-size-xs);
      color: var(--ux-primary);
    }
  }

  /* ========================================
     Helper Text & Counter
     ======================================== */

  &__footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--ux-space-xs);
    gap: var(--ux-space-md);
  }

  &__helper {
    font-size: var(--ux-font-size-sm);
    color: var(--ux-text-secondary);
  }

  &__counter {
    font-size: var(--ux-font-size-xs);
    color: var(--ux-text-tertiary);
    flex-shrink: 0;

    &--warning {
      color: var(--ux-warning);
    }

    &--danger {
      color: var(--ux-danger);
    }
  }

  /* ========================================
     Error State
     ======================================== */

  &--error {
    .ux-textarea__field {
      border-color: var(--ux-danger);

      &:focus {
        box-shadow: 0 0 0 3px rgba(var(--ux-danger-rgb), 0.15);
      }
    }

    .ux-textarea__label {
      color: var(--ux-danger);
    }
  }

  &__error {
    margin-top: var(--ux-space-xs);
    font-size: var(--ux-font-size-sm);
    color: var(--ux-danger);
  }

  /* ========================================
     Success State
     ======================================== */

  &--success {
    .ux-textarea__field {
      border-color: var(--ux-success);

      &:focus {
        box-shadow: 0 0 0 3px rgba(var(--ux-success-rgb), 0.15);
      }
    }
  }

  /* ========================================
     Disabled State
     ======================================== */

  &--disabled .ux-textarea__field {
    background-color: var(--ux-light);
    color: var(--ux-text-tertiary);
    cursor: not-allowed;
    opacity: 0.6;
    resize: none;
  }

  /* ========================================
     Sizes
     ======================================== */

  &--sm .ux-textarea__field {
    min-height: 60px;
    padding: var(--ux-space-sm) var(--ux-space-md);
    font-size: var(--ux-font-size-sm);
  }

  &--lg .ux-textarea__field {
    min-height: 150px;
    padding: var(--ux-space-lg) var(--ux-space-xl);
    font-size: var(--ux-font-size-lg);
  }

  /* ========================================
     Variants
     ======================================== */

  /* Filled */
  &--filled .ux-textarea__field {
    background-color: var(--ux-surface-secondary);
    border-color: transparent;
    border-radius: var(--ux-border-radius) var(--ux-border-radius) 0 0;
    border-bottom: 2px solid var(--ux-border-color);

    &:focus {
      border-bottom-color: var(--ux-primary);
      box-shadow: none;
    }
  }

  /* Outline */
  &--outline .ux-textarea__field {
    background-color: transparent;
  }

  /* Borderless */
  &--borderless .ux-textarea__field {
    border: none;
    background-color: transparent;
    padding-left: 0;
    padding-right: 0;

    &:focus {
      box-shadow: none;
    }
  }

  /* ========================================
     Glass Variant (iOS 26 Liquid Glass)
     ======================================== */

  &--glass .ux-textarea__field {
    background: var(--ux-glass-bg-thin);
    border: 0.5px solid var(--ux-glass-border);

    &:hover {
      background: var(--ux-glass-bg);
    }

    &:focus {
      background: var(--ux-glass-bg);
      border-color: var(--ux-glass-border);
      box-shadow: var(--ux-glass-highlight);
    }
  }

  /* ========================================
     Resize Options
     ======================================== */

  &--no-resize .ux-textarea__field {
    resize: none;
  }

  &--resize-horizontal .ux-textarea__field {
    resize: horizontal;
  }

  &--resize-both .ux-textarea__field {
    resize: both;
  }

  /* ========================================
     With Toolbar (formatting)
     ======================================== */

  &--with-toolbar {
    border: 1px solid var(--ux-border-color);
    border-radius: var(--ux-border-radius);
    overflow: hidden;

    .ux-textarea__field {
      border: none;
      border-radius: 0;

      &:focus {
        box-shadow: none;
      }
    }

    &:focus-within {
      border-color: var(--ux-primary);
      box-shadow: 0 0 0 3px rgba(var(--ux-primary-rgb), 0.15);
    }
  }

  &__toolbar {
    display: flex;
    align-items: center;
    gap: var(--ux-space-xs);
    padding: var(--ux-space-sm) var(--ux-space-md);
    background-color: var(--ux-surface-secondary);
    border-bottom: 1px solid var(--ux-border-color);
  }

  &__toolbar-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    padding: 0;
    border: none;
    background: transparent;
    border-radius: var(--ux-border-radius-sm);
    color: var(--ux-text-secondary);
    cursor: pointer;
    transition:
      background-color var(--ux-transition-fast) var(--ux-ease),
      color var(--ux-transition-fast) var(--ux-ease);

    &:hover {
      background-color: var(--ux-light);
      color: var(--ux-text);
    }

    &:active {
      background-color: var(--ux-light-shade);
    }

    &--active {
      background-color: rgba(var(--ux-primary-rgb), 0.15);
      color: var(--ux-primary);
    }

    svg {
      width: 18px;
      height: 18px;
    }
  }

  &__toolbar-divider {
    width: 1px;
    height: 24px;
    background-color: var(--ux-border-color);
    margin: 0 var(--ux-space-xs);
  }
}
