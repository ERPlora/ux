/**
 * UX Bar Chart
 * Part of the UX CSS Library
 *
 * CSS-only bar chart component for simple visualizations
 */

/* ========================================
   Variables
   ======================================== */

:root {
  --ux-bar-chart-height: 240px;
  --ux-bar-chart-gap: 1rem;
  --ux-bar-chart-bar-radius: 6px;
  --ux-bar-chart-bar-color: var(--ux-primary);
  --ux-bar-chart-bar-gradient: linear-gradient(to top, var(--ux-primary), var(--ux-primary-tint));
}

/* ========================================
   Base Component
   ======================================== */

.ux-bar-chart {
  display: flex;
  align-items: flex-end;
  gap: var(--ux-bar-chart-gap);
  height: var(--ux-bar-chart-height);
  padding: var(--ux-space-md);
}

/* ========================================
   Bar Item
   ======================================== */

.ux-bar-chart__item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  gap: 0.75rem;
  height: 100%;
}

/* ========================================
   Value Label (top of bar)
   ======================================== */

.ux-bar-chart__value {
  text-align: center;
}

.ux-bar-chart__value-main {
  font-size: 0.875rem;
  font-weight: 700;
  color: var(--ux-bar-color, var(--ux-primary));
}

.ux-bar-chart__value-sub {
  font-size: 0.75rem;
  color: var(--ux-text-tertiary);
}

/* ========================================
   Bar
   ======================================== */

.ux-bar-chart__bar {
  width: 100%;
  background: var(--ux-bar-gradient, var(--ux-bar-chart-bar-gradient));
  border-radius: var(--ux-bar-chart-bar-radius) var(--ux-bar-chart-bar-radius) 0 0;
  position: relative;
  transition: height var(--ux-transition-normal) var(--ux-ease);
  min-height: 4px;
}

/* Dot indicator at top of bar */
.ux-bar-chart__bar::before {
  content: '';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 8px;
  background: var(--ux-bar-color, var(--ux-primary));
  border-radius: 50%;
  border: 2px solid var(--ux-surface);
}

.ux-bar-chart__bar--no-dot::before {
  display: none;
}

/* ========================================
   Label (bottom of bar)
   ======================================== */

.ux-bar-chart__label {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--ux-text);
  text-align: center;
}

/* ========================================
   Horizontal Variant
   ======================================== */

.ux-bar-chart--horizontal {
  flex-direction: column;
  align-items: stretch;
  height: auto;
}

.ux-bar-chart--horizontal .ux-bar-chart__item {
  flex-direction: row;
  height: auto;
  gap: var(--ux-space-md);
}

.ux-bar-chart--horizontal .ux-bar-chart__label {
  width: 80px;
  text-align: left;
  flex-shrink: 0;
}

.ux-bar-chart--horizontal .ux-bar-chart__bar {
  height: 24px;
  border-radius: 0 var(--ux-bar-chart-bar-radius) var(--ux-bar-chart-bar-radius) 0;
  flex: 1;
}

.ux-bar-chart--horizontal .ux-bar-chart__bar::before {
  display: none;
}

.ux-bar-chart--horizontal .ux-bar-chart__value {
  width: 80px;
  text-align: right;
  flex-shrink: 0;
}

/* ========================================
   Stacked Variant
   ======================================== */

.ux-bar-chart__bar--stacked {
  display: flex;
  flex-direction: column-reverse;
  background: transparent;
}

.ux-bar-chart__bar-segment {
  width: 100%;
  transition: height var(--ux-transition-normal) var(--ux-ease);
}

.ux-bar-chart__bar-segment:first-child {
  border-radius: 0 0 var(--ux-bar-chart-bar-radius) var(--ux-bar-chart-bar-radius);
}

.ux-bar-chart__bar-segment:last-child {
  border-radius: var(--ux-bar-chart-bar-radius) var(--ux-bar-chart-bar-radius) 0 0;
}

/* ========================================
   Color Variants
   ======================================== */

.ux-bar-chart--primary {
  --ux-bar-color: var(--ux-primary);
  --ux-bar-gradient: linear-gradient(to top, var(--ux-primary), #60a5fa);
}

.ux-bar-chart--success {
  --ux-bar-color: var(--ux-success);
  --ux-bar-gradient: linear-gradient(to top, var(--ux-success), #34d399);
}

.ux-bar-chart--warning {
  --ux-bar-color: var(--ux-warning);
  --ux-bar-gradient: linear-gradient(to top, var(--ux-warning), #fbbf24);
}

.ux-bar-chart--danger {
  --ux-bar-color: var(--ux-danger);
  --ux-bar-gradient: linear-gradient(to top, var(--ux-danger), #f87171);
}

/* Per-bar color via style attribute */
.ux-bar-chart__bar[style*="--bar-color"] {
  background: var(--bar-gradient, linear-gradient(to top, var(--bar-color), var(--bar-color-light, var(--bar-color))));
}

/* ========================================
   Size Variants
   ======================================== */

.ux-bar-chart--sm {
  --ux-bar-chart-height: 160px;
  --ux-bar-chart-gap: 0.5rem;
}

.ux-bar-chart--lg {
  --ux-bar-chart-height: 320px;
  --ux-bar-chart-gap: 1.5rem;
}

/* ========================================
   Compact (mini sparkline style)
   ======================================== */

.ux-bar-chart--compact {
  --ux-bar-chart-height: 60px;
  --ux-bar-chart-gap: 0.25rem;
  --ux-bar-chart-bar-radius: 2px;
  padding: 0;
}

.ux-bar-chart--compact .ux-bar-chart__value,
.ux-bar-chart--compact .ux-bar-chart__label {
  display: none;
}

.ux-bar-chart--compact .ux-bar-chart__bar::before {
  display: none;
}

/* ========================================
   Grid Lines
   ======================================== */

.ux-bar-chart--grid {
  position: relative;
  background-image: linear-gradient(
    to top,
    transparent 0%,
    transparent 24%,
    var(--ux-border-color) 24%,
    var(--ux-border-color) 25%,
    transparent 25%,
    transparent 49%,
    var(--ux-border-color) 49%,
    var(--ux-border-color) 50%,
    transparent 50%,
    transparent 74%,
    var(--ux-border-color) 74%,
    var(--ux-border-color) 75%,
    transparent 75%
  );
}

/* ========================================
   Glass Variant
   ======================================== */

.ux-bar-chart--glass {
  background: var(--ux-glass-bg);
  backdrop-filter: blur(var(--ux-glass-blur));
  -webkit-backdrop-filter: blur(var(--ux-glass-blur));
  border-radius: var(--ux-border-radius-lg);
}

/* ========================================
   Dark Mode
   ======================================== */

@media (prefers-color-scheme: dark) {
  .ux-bar-chart__bar::before {
    border-color: var(--ux-surface);
  }
}

.ux-dark .ux-bar-chart__bar::before {
  border-color: var(--ux-surface);
}

/* ========================================
   Responsive
   ======================================== */

@media (max-width: 767px) {
  .ux-bar-chart {
    --ux-bar-chart-gap: 0.5rem;
    overflow-x: auto;
  }

  .ux-bar-chart__item {
    min-width: 50px;
  }

  .ux-bar-chart__value-main {
    font-size: 0.75rem;
  }

  .ux-bar-chart__label {
    font-size: 0.75rem;
  }
}

/* ========================================
   Reduced Motion
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .ux-bar-chart__bar,
  .ux-bar-chart__bar-segment {
    transition: none;
  }
}
