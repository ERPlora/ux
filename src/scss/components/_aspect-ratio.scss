@use '../core/mixins' as *;

/**
 * UX Aspect Ratio Component
 * Part of the UX CSS Library
 *
 * Maintains a consistent aspect ratio for its content.
 * Works with any framework: HTMX, React, Vue, vanilla JS.
 */

/* ========================================
   UX Aspect Ratio
   ======================================== */

.ux-aspect-ratio {
  position: relative;
  width: 100%;

  /* Default aspect ratios using CSS aspect-ratio property */
  &--square {
    aspect-ratio: 1 / 1;
  }

  &--video,
  &--16-9 {
    aspect-ratio: 16 / 9;
  }

  &--4-3 {
    aspect-ratio: 4 / 3;
  }

  &--3-2 {
    aspect-ratio: 3 / 2;
  }

  &--21-9 {
    aspect-ratio: 21 / 9;
  }

  &--portrait {
    aspect-ratio: 3 / 4;
  }

  &--golden {
    aspect-ratio: 1.618 / 1;
  }

  /* Content container */
  &__content {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }

  /* For images and videos */
  > img,
  > video,
  > iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  &--contain {
    > img,
    > video,
    > iframe {
      object-fit: contain;
    }
  }

  &--fill {
    > img,
    > video,
    > iframe {
      object-fit: fill;
    }
  }
}

/* ========================================
   Fallback for older browsers (padding hack)
   ======================================== */

/* Square (1:1) */
.ux-aspect-ratio--square-legacy {
  padding-bottom: 100%;

  > * {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }
}

/* Video (16:9) */
.ux-aspect-ratio--video-legacy {
  padding-bottom: 56.25%;

  > * {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }
}

/* 4:3 */
.ux-aspect-ratio--4-3-legacy {
  padding-bottom: 75%;

  > * {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }
}

/* ========================================
   Custom aspect ratio via CSS variable
   ======================================== */

.ux-aspect-ratio--custom {
  aspect-ratio: var(--ux-aspect-ratio, 1);
}

/* ========================================
   Responsive variants
   ======================================== */

@media (max-width: 767px) {
  .ux-aspect-ratio--mobile-square {
    aspect-ratio: 1 / 1;
  }

  .ux-aspect-ratio--mobile-video {
    aspect-ratio: 16 / 9;
  }

  .ux-aspect-ratio--mobile-portrait {
    aspect-ratio: 3 / 4;
  }
}
