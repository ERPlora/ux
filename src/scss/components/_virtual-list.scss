/**
 * UX Virtual-list Component
 * Part of the UX CSS Library
 * https://github.com/user/ux
 */

/* ========================================
   UX Virtual List - Base
   ======================================== */

.ux-virtual-list {
  position: relative;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  font-family: var(--ux-font-family);

  &__container {
    position: relative;
    width: 100%;
  }

  &__content {
    position: absolute;
    left: 0;
    right: 0;
    width: 100%;
  }

  &__item {
    box-sizing: border-box;
  }

  /* ========================================
     Loading States
     ======================================== */

  &__loader {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--ux-space-lg);
    color: var(--ux-text-secondary);
  }

  &__spinner {
    width: 24px;
    height: 24px;
    border: 2px solid var(--ux-border-color);
    border-top-color: var(--ux-primary);
    border-radius: 50%;
    animation: ux-virtual-spin 0.8s linear infinite;
  }

  &__loader-text {
    margin-left: var(--ux-space-sm);
    font-size: var(--ux-font-size-sm);
  }

  /* ========================================
     Empty State
     ======================================== */

  &__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--ux-space-2xl);
    text-align: center;

    &-icon {
      width: 48px;
      height: 48px;
      margin-bottom: var(--ux-space-md);
      color: var(--ux-text-tertiary);
    }

    &-title {
      font-size: var(--ux-font-size-lg);
      font-weight: 600;
      color: var(--ux-text);
      margin: 0 0 var(--ux-space-xs);
    }

    &-text {
      font-size: var(--ux-font-size-sm);
      color: var(--ux-text-secondary);
      margin: 0;
    }
  }

  /* ========================================
     Scroll to Top Button
     ======================================== */

  &__scroll-top {
    position: absolute;
    bottom: var(--ux-space-md);
    right: var(--ux-space-md);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: var(--ux-surface);
    border: 1px solid var(--ux-border-color);
    border-radius: 50%;
    box-shadow: var(--ux-shadow-md);
    color: var(--ux-text);
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all var(--ux-transition-fast) var(--ux-ease);
    z-index: 10;

    &--visible {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    &:hover {
      background: var(--ux-surface-secondary);
    }

    svg {
      width: 20px;
      height: 20px;
    }
  }

  /* ========================================
     Row Variants
     ======================================== */

  &--striped &__item:nth-child(even) {
    background: var(--ux-surface-secondary);
  }

  &--bordered &__item {
    border-bottom: 1px solid var(--ux-border-color);

    &:last-child {
      border-bottom: none;
    }
  }

  /* ========================================
     Glass Variant
     ======================================== */

  &--glass {
    background: var(--ux-glass-bg);
    backdrop-filter: blur(var(--ux-glass-blur)) saturate(var(--ux-glass-saturation));
    -webkit-backdrop-filter: blur(var(--ux-glass-blur)) saturate(var(--ux-glass-saturation));
  }
}

@keyframes ux-virtual-spin {
  to { transform: rotate(360deg); }
}

/* ========================================
   Reduced Motion
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .ux-virtual-list__spinner {
    animation: none;
  }

  .ux-virtual-list__scroll-top {
    transition: opacity var(--ux-transition-fast);
    transform: none;
  }
}
