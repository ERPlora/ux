/**
 * UX Button Component
 * Part of the UX CSS Library
 */

@use '../core/mixins' as *;

// ==========================================================
// Button Base
// ==========================================================

.ux-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5em;
  height: var(--ux-button-height);
  min-height: var(--ux-button-min-height);
  padding: var(--ux-button-padding-y) var(--ux-button-padding-x);
  background-color: var(--ux-variant-bg, var(--ux-primary));
  color: var(--ux-variant-color, var(--ux-primary-contrast));
  border: 2px solid var(--ux-variant-border, transparent);
  border-radius: var(--ux-button-border-radius);
  font-family: inherit;
  font-size: var(--ux-button-font-size);
  font-weight: var(--ux-button-font-weight);
  line-height: 1;
  text-decoration: none;
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  white-space: nowrap;
  vertical-align: middle;
  position: relative;
  overflow: hidden;
  transition: background-color var(--ux-transition-fast) var(--ux-ease),
              color var(--ux-transition-fast) var(--ux-ease),
              border-color var(--ux-transition-fast) var(--ux-ease),
              transform var(--ux-transition-fast) var(--ux-ease),
              opacity var(--ux-transition-fast) var(--ux-ease);
  @include touch-target;

  // Ionic-style touch properties
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  touch-action: manipulation;

  // Hover state (only for pointer devices)
  @media (hover: hover) and (pointer: fine) {
    &:hover {
      background-color: var(--ux-variant-bg-hover, var(--ux-primary-shade));
    }
  }

  // Active/pressed state (Ionic-style)
  &:active {
    transform: scale(0.97);
    opacity: 0.85;
  }

  // Activated state (for programmatic activation)
  &.ux-activated,
  &[data-state="activated"] {
    transform: scale(0.97);
    opacity: 0.85;
  }

  // Focus
  @include focus-visible;

  // Disabled
  &:disabled,
  &[aria-disabled="true"],
  &.ux-button--disabled {
    @include disabled;
  }

  // Icon inside button
  &__icon {
    width: 1.25em;
    height: 1.25em;
    flex-shrink: 0;
  }

  // Loading state
  &--loading {
    pointer-events: none;

    .ux-button__text {
      opacity: 0;
    }

    .ux-button__spinner {
      position: absolute;
    }
  }
}

// ==========================================================
// Size Modifiers
// ==========================================================

.ux-button--sm {
  height: var(--ux-button-height-sm);
  min-height: var(--ux-button-min-height-sm);
  min-width: var(--ux-min-touch-target-sm);
  padding: 4px 0.9em;
  font-size: 0.8125rem;
  border-radius: var(--ux-border-radius-sm);
}

.ux-button--lg {
  height: var(--ux-button-height-lg);
  min-height: var(--ux-button-min-height-lg);
  padding: 17px 1.25em;
  font-size: 1.125rem;
  border-radius: var(--ux-border-radius-ios-lg);
}

// ==========================================================
// Style Modifiers
// ==========================================================

// Outline button
.ux-button--outline {
  background-color: transparent;
  color: var(--ux-variant-color, var(--ux-primary));
  border-color: var(--ux-variant-border, var(--ux-primary));

  &:hover {
    background-color: var(--ux-variant-bg-hover, rgba(var(--ux-primary-rgb), 0.1));
  }
}

// Clear/Ghost button
.ux-button--clear {
  background-color: transparent;
  color: var(--ux-variant-color, var(--ux-primary));
  border-color: transparent;

  &:hover {
    background-color: rgba(var(--ux-primary-rgb), 0.08);
  }
}

// Soft/Tinted button
.ux-button--soft {
  background-color: rgba(var(--ux-primary-rgb), 0.15);
  color: var(--ux-primary);
  border-color: transparent;

  &:hover {
    background-color: rgba(var(--ux-primary-rgb), 0.25);
  }
}

// Glass button
.ux-button--glass {
  @include glass;
  color: var(--ux-text);
  border: 0.5px solid var(--ux-glass-border);
}

// ==========================================================
// Shape Modifiers
// ==========================================================

// Full width
.ux-button--block {
  display: flex;
  width: 100%;
}

// Round (pill shape)
.ux-button--round {
  border-radius: 9999px;
}

// Circle (icon only)
.ux-button--circle {
  width: var(--ux-button-icon-only-size, 44px);
  height: var(--ux-button-icon-only-size, 44px);
  min-width: var(--ux-button-icon-only-size, 44px);
  padding: 0;
  border-radius: 50%;
}

// ==========================================================
// Button Group
// ==========================================================

.ux-button-group {
  display: inline-flex;
  gap: 0;

  .ux-button {
    border-radius: 0;

    &:first-child {
      border-radius: var(--ux-button-border-radius) 0 0 var(--ux-button-border-radius);
    }

    &:last-child {
      border-radius: 0 var(--ux-button-border-radius) var(--ux-button-border-radius) 0;
    }

    &:not(:last-child) {
      border-right-width: 1px;
    }
  }
}

// Vertical button group
.ux-button-group--vertical {
  flex-direction: column;

  .ux-button {
    width: 100%;

    &:first-child {
      border-radius: var(--ux-button-border-radius) var(--ux-button-border-radius) 0 0;
    }

    &:last-child {
      border-radius: 0 0 var(--ux-button-border-radius) var(--ux-button-border-radius);
    }

    &:not(:last-child) {
      border-right-width: 2px;
      border-bottom-width: 1px;
    }
  }
}

// ==========================================================
// Responsive
// ==========================================================

@include mobile {
  .ux-button--block-mobile {
    display: flex;
    width: 100%;
  }
}
